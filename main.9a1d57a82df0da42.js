(self.webpackChunkreservaHotel=self.webpackChunkreservaHotel||[]).push([[179],{129:(Ul,b1,Pi)=>{"use strict";function k1(t){return"function"==typeof t}function Ke(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Fs=Ke(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function p(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class Ze{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(k1(i))try{i()}catch(s){n=s instanceof Fs?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{a1(s)}catch(d){n=n??[],d instanceof Fs?n=[...n,...d.errors]:n.push(d)}}if(n)throw new Fs(n)}}add(n){var e;if(n&&n!==this)if(this.closed)a1(n);else{if(n instanceof Ze){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&p(e,n)}remove(n){const{_finalizers:e}=this;e&&p(e,n),n instanceof Ze&&n._removeParent(this)}}Ze.EMPTY=(()=>{const t=new Ze;return t.closed=!0,t})();const Qi=Ze.EMPTY;function Gn(t){return t instanceof Ze||t&&"closed"in t&&k1(t.remove)&&k1(t.add)&&k1(t.unsubscribe)}function a1(t){k1(t)?t():t.unsubscribe()}const m1={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},h2={setTimeout(t,n,...e){const{delegate:i}=h2;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=h2;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function $2(t){h2.setTimeout(()=>{const{onUnhandledError:n}=m1;if(!n)throw t;n(t)})}function yi(){}const lo=qn("C",void 0,void 0);function qn(t,n,e){return{kind:t,value:n,error:e}}let q2=null;function ht(t){if(m1.useDeprecatedSynchronousErrorHandling){const n=!q2;if(n&&(q2={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=q2;if(q2=null,e)throw i}}else t()}class br extends Ze{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Gn(n)&&n.add(this)):this.destination=d1}static create(n,e,i){return new Ur(n,e,i)}next(n){this.isStopped?ii(function Fi(t){return qn("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?ii(function sa(t){return qn("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?ii(lo,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const uo=Function.prototype.bind;function I1(t,n){return uo.call(t,n)}class o2{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){ca(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){ca(i)}else ca(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){ca(e)}}}class Ur extends br{constructor(n,e,i){let r;if(super(),k1(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&m1.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&I1(n.next,s),error:n.error&&I1(n.error,s),complete:n.complete&&I1(n.complete,s)}):r=n}this.destination=new o2(r)}}function ca(t){m1.useDeprecatedSynchronousErrorHandling?function U1(t){m1.useDeprecatedSynchronousErrorHandling&&q2&&(q2.errorThrown=!0,q2.error=t)}(t):$2(t)}function ii(t,n){const{onStoppedNotification:e}=m1;e&&h2.setTimeout(()=>e(t,n))}const d1={closed:!0,next:yi,error:function Aa(t){throw t},complete:yi},ri="function"==typeof Symbol&&Symbol.observable||"@@observable";function xi(t){return t}function Ni(t){return 0===t.length?xi:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}let l1=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const s=function jr(t){return t&&t instanceof br||function Ea(t){return t&&k1(t.next)&&k1(t.error)&&k1(t.complete)}(t)&&Gn(t)}(e)?e:new Ur(e,i,r);return ht(()=>{const{operator:d,source:v}=this;s.add(d?d.call(s,v):v?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=Ji(i))((r,s)=>{const d=new Ur({next:v=>{try{e(v)}catch(C){s(C),d.unsubscribe()}},error:s,complete:r});this.subscribe(d)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[ri](){return this}pipe(...e){return Ni(e)(this)}toPromise(e){return new(e=Ji(e))((i,r)=>{let s;this.subscribe(d=>s=d,d=>r(d),()=>i(s))})}}return t.create=n=>new t(n),t})();function Ji(t){var n;return null!==(n=t??m1.Promise)&&void 0!==n?n:Promise}const er=Ke(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Qt=(()=>{class t extends l1{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new tr(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new er}next(e){ht(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){ht(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){ht(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Qi:(this.currentObservers=null,s.push(e),new Ze(()=>{this.currentObservers=null,p(s,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){const e=new l1;return e.source=this,e}}return t.create=(n,e)=>new tr(n,e),t})();class tr extends Qt{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:Qi}}function wr(t){return k1(t?.lift)}function rn(t){return n=>{if(wr(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function R1(t,n,e,i,r){return new s2(t,n,e,i,r)}class s2 extends br{constructor(n,e,i,r,s,d){super(n),this.onFinalize=s,this.shouldUnsubscribe=d,this._next=e?function(v){try{e(v)}catch(C){n.error(C)}}:super._next,this._error=r?function(v){try{r(v)}catch(C){n.error(C)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(v){n.error(v)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function h1(t,n){return rn((e,i)=>{let r=0;e.subscribe(R1(i,s=>{i.next(t.call(n,s,r++))}))})}function Sr(t){return this instanceof Sr?(this.v=t,this):new Sr(t)}function Us(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function Gr(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=t[s]&&function(d){return new Promise(function(v,C){!function r(s,d,v,C){Promise.resolve(C).then(function(S){s({value:S,done:v})},d)}(v,C,(d=t[s](d)).done,d.value)})}}}const Ta=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Gs(t){return k1(t?.then)}function po(t){return k1(t[ri])}function rr(t){return Symbol.asyncIterator&&k1(t?.[Symbol.asyncIterator])}function bi(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const $s=function Ha(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ka(t){return k1(t?.[$s])}function re(t){return function La(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),s=[];return r={},d("next"),d("throw"),d("return"),r[Symbol.asyncIterator]=function(){return this},r;function d(Z){i[Z]&&(r[Z]=function(K){return new Promise(function(le,xe){s.push([Z,K,le,xe])>1||v(Z,K)})})}function v(Z,K){try{!function C(Z){Z.value instanceof Sr?Promise.resolve(Z.value.v).then(S,V):F(s[0][2],Z)}(i[Z](K))}catch(le){F(s[0][3],le)}}function S(Z){v("next",Z)}function V(Z){v("throw",Z)}function F(Z,K){Z(K),s.shift(),s.length&&v(s[0][0],s[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield Sr(e.read());if(r)return yield Sr(void 0);yield yield Sr(i)}}finally{e.releaseLock()}})}function U(t){return k1(t?.getReader)}function $(t){if(t instanceof l1)return t;if(null!=t){if(po(t))return function ie(t){return new l1(n=>{const e=t[ri]();if(k1(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Ta(t))return function ue(t){return new l1(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Gs(t))return function be(t){return new l1(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,$2)})}(t);if(rr(t))return De(t);if(ka(t))return function Ee(t){return new l1(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(U(t))return function we(t){return De(re(t))}(t)}throw bi(t)}function De(t){return new l1(n=>{(function ke(t,n){var e,i,r,s;return function Bi(t,n,e,i){return new(e||(e=Promise))(function(s,d){function v(V){try{S(i.next(V))}catch(F){d(F)}}function C(V){try{S(i.throw(V))}catch(F){d(F)}}function S(V){V.done?s(V.value):function r(s){return s instanceof e?s:new e(function(d){d(s)})}(V.value).then(v,C)}S((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Us(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(d){r={error:d}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function tt(t,n,e,i=0,r=!1){const s=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function Je(t,n,e=1/0){return k1(n)?Je((i,r)=>h1((s,d)=>n(i,s,r,d))($(t(i,r))),e):("number"==typeof n&&(e=n),rn((i,r)=>function wt(t,n,e,i,r,s,d,v){const C=[];let S=0,V=0,F=!1;const Z=()=>{F&&!C.length&&!S&&n.complete()},K=xe=>S<i?le(xe):C.push(xe),le=xe=>{s&&n.next(xe),S++;let Me=!1;$(e(xe,V++)).subscribe(R1(n,He=>{r?.(He),s?K(He):n.next(He)},()=>{Me=!0},void 0,()=>{if(Me)try{for(S--;C.length&&S<i;){const He=C.shift();d?tt(n,d,()=>le(He)):le(He)}Z()}catch(He){n.error(He)}}))};return t.subscribe(R1(n,K,()=>{F=!0,Z()})),()=>{v?.()}}(i,r,t,e)))}function Lt(t=1/0){return Je(xi,t)}const Dt=new l1(t=>t.complete());function y1(t){return t&&k1(t.schedule)}function K1(t){return t[t.length-1]}function qt(t){return k1(K1(t))?t.pop():void 0}function tn(t){return y1(K1(t))?t.pop():void 0}function ua(t,n=0){return rn((e,i)=>{e.subscribe(R1(i,r=>tt(i,t,()=>i.next(r),n),()=>tt(i,t,()=>i.complete(),n),r=>tt(i,t,()=>i.error(r),n)))})}function qr(t,n=0){return rn((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function v3(t,n){if(!t)throw new Error("Iterable cannot be null");return new l1(e=>{tt(e,n,()=>{const i=t[Symbol.asyncIterator]();tt(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function e2(t,n){return n?function Xo(t,n){if(null!=t){if(po(t))return function Ge(t,n){return $(t).pipe(qr(n),ua(n))}(t,n);if(Ta(t))return function Jn(t,n){return new l1(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(Gs(t))return function da(t,n){return $(t).pipe(qr(n),ua(n))}(t,n);if(rr(t))return v3(t,n);if(ka(t))return function Ia(t,n){return new l1(e=>{let i;return tt(e,n,()=>{i=t[$s](),tt(e,n,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(d){return void e.error(d)}s?e.complete():e.next(r)},0,!0)}),()=>k1(i?.return)&&i.return()})}(t,n);if(U(t))return function Wr(t,n){return v3(re(t),n)}(t,n)}throw bi(t)}(t,n):$(t)}function W2(...t){const n=tn(t),e=function yn(t,n){return"number"==typeof K1(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?$(i[0]):Lt(e)(e2(i,n)):Dt}function S1(t,n,...e){if(!0===n)return void t();if(!1===n)return;const i=new Ur({next:()=>{i.unsubscribe(),t()}});return $(n(...e)).subscribe(i)}function Ht(t){for(let n in t)if(t[n]===Ht)return n;throw Error("Could not find renamed property on target object.")}function ar(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function mn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(mn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function C1(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Ko=Ht({__forward_ref__:Ht});function nn(t){return t.__forward_ref__=nn,t.toString=function(){return mn(this())},t}function Jt(t){return t2(t)?t():t}function t2(t){return"function"==typeof t&&t.hasOwnProperty(Ko)&&t.__forward_ref__===nn}function gn(t){return t&&!!t.\u0275providers}const p2="https://g.co/ng/security#xss";class rt extends Error{constructor(n,e){super(Zr(n,e)),this.code=n}}function Zr(t,n){return`NG0${Math.abs(t)}${n?": "+n.trim():""}`}function x1(t){return"string"==typeof t?t:null==t?"":String(t)}function Yr(t,n){throw new rt(-201,!1)}function D2(t,n){null==t&&function an(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}(n,t,null,"!=")}function st(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function u1(t){return{providers:t.providers||[],imports:t.imports||[]}}function ts(t){return Pa(t,oi)||Pa(t,x3)}function Pa(t,n){return t.hasOwnProperty(n)?t[n]:null}function fa(t){return t&&(t.hasOwnProperty(go)||t.hasOwnProperty(_o))?t[go]:null}const oi=Ht({\u0275prov:Ht}),go=Ht({\u0275inj:Ht}),x3=Ht({ngInjectableDef:Ht}),_o=Ht({ngInjectorDef:Ht});var t1=(()=>((t1=t1||{})[t1.Default=0]="Default",t1[t1.Host=1]="Host",t1[t1.Self=2]="Self",t1[t1.SkipSelf=4]="SkipSelf",t1[t1.Optional=8]="Optional",t1))();let Ac;function si(t){const n=Ac;return Ac=t,n}function Na(t,n,e){const i=ts(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&t1.Optional?null:void 0!==n?n:void Yr(mn(t))}const Hn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Z1={},vo="__NG_DI_FLAG__",rs="ngTempTokenPath",Zs="ngTokenPath",as=/\n/gm,os="\u0275",ss="__source";let or;function ha(t){const n=or;return or=t,n}function M3(t,n=t1.Default){if(void 0===or)throw new rt(-203,!1);return null===or?Na(t,void 0,n):or.get(t,n&t1.Optional?null:void 0,n)}function Re(t,n=t1.Default){return(function b3(){return Ac}()||M3)(Jt(t),n)}function o1(t,n=t1.Default){return Re(t,cs(n))}function cs(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function G1(t){const n=[];for(let e=0;e<t.length;e++){const i=Jt(t[e]);if(Array.isArray(i)){if(0===i.length)throw new rt(900,!1);let r,s=t1.Default;for(let d=0;d<i.length;d++){const v=i[d],C=M4(v);"number"==typeof C?-1===C?r=v.token:s|=C:r=v}n.push(Re(r,s))}else n.push(Re(i))}return n}function pa(t,n){return t[vo]=n,t.prototype[vo]=n,t}function M4(t){return t[vo]}function Dr(t){return{toString:t}.toString()}var sr=(()=>((sr=sr||{})[sr.OnPush=0]="OnPush",sr[sr.Default=1]="Default",sr))(),cr=(()=>{return(t=cr||(cr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",cr;var t})();const Xr={},sn=[],Ba=Ht({\u0275cmp:Ht}),yo=Ht({\u0275dir:Ht}),xo=Ht({\u0275pipe:Ht}),Ys=Ht({\u0275mod:Ht}),Kr=Ht({\u0275fac:Ht}),Xs=Ht({__NG_ELEMENT_ID__:Ht});let Ks=0;function Ft(t){return Dr(()=>{const n=D3(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===sr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,data:t.data||{},encapsulation:t.encapsulation||cr.Emulated,id:"c"+Ks++,styles:t.styles||sn,_:null,schemas:t.schemas||null,tView:null};Js(e);const i=t.dependencies;return e.directiveDefs=ls(i,!1),e.pipeDefs=ls(i,!0),e})}function Qs(t){return dn(t)||k2(t)}function z3(t){return null!==t}function n1(t){return Dr(()=>({type:t.type,bootstrap:t.bootstrap||sn,declarations:t.declarations||sn,imports:t.imports||sn,exports:t.exports||sn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function S3(t,n){if(null==t)return Xr;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=i,n&&(n[r]=s)}return e}function je(t){return Dr(()=>{const n=D3(t);return Js(n),n})}function H2(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function dn(t){return t[Ba]||null}function k2(t){return t[yo]||null}function I2(t){return t[xo]||null}function R2(t,n){const e=t[Ys]||null;if(!e&&!0===n)throw new Error(`Type ${mn(t)} does not have '\u0275mod' property.`);return e}function D3(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,exportAs:t.exportAs||null,standalone:!0===t.standalone,selectors:t.selectors||sn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:S3(t.inputs,n),outputs:S3(t.outputs)}}function Js(t){t.features?.forEach(n=>n(t))}function ls(t,n){if(!t)return null;const e=n?I2:Qs;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(z3)}const Ar=0,Rt=1,g1=2,Wn=3,wi=4,Ua=5,l2=6,us=7,r2=8,ec=9,tc=10,P1=11,A3=12,Co=13,Qr=14,ja=15,P2=16,wo=17,Ga=18,F2=19,Jr=20,Mo=21,Cn=22,Er=1,Mi=2,_1=7,zo=8,ds=9,N2=10;function ci(t){return Array.isArray(t)&&"object"==typeof t[Er]}function lr(t){return Array.isArray(t)&&!0===t[Er]}function fs(t){return 0!=(4&t.flags)}function ma(t){return t.componentOffset>-1}function H(t){return 1==(1&t.flags)}function k(t){return!!t.template}function G(t){return 0!=(256&t[g1])}function hs(t,n){return t.hasOwnProperty(Kr)?t[Kr]:null}class D4{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function wn(){return L3}function L3(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ic),m6}function m6(){const t=Zl(this),n=t?.current;if(n){const e=t.previous;if(e===Xr)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function Ic(t,n,e,i){const r=this.declaredInputs[e],s=Zl(t)||function E4(t,n){return t[A4]=n}(t,{previous:Xr,current:null}),d=s.current||(s.current={}),v=s.previous,C=v[r];d[r]=new D4(C&&C.currentValue,n,v===Xr),t[i]=n}wn.ngInherit=!0;const A4="__ngSimpleChanges__";function Zl(t){return t[A4]||null}const ur=function(t,n,e){},ic="svg";function g2(t){for(;Array.isArray(t);)t=t[Ar];return t}function H3(t,n){return g2(n[t])}function Ui(t,n){return g2(n[t.index])}function k3(t,n){return t.data[n]}function _2(t,n){return t[n]}function dr(t,n){const e=n[t];return ci(e)?e:e[Ar]}function L4(t){return 64==(64&t[g1])}function zi(t,n){return null==n?null:t[n]}function Xl(t){t[Ga]=0}function ps(t,n){t[Ua]+=n;let e=t,i=t[Wn];for(;null!==i&&(1===n&&1===e[Ua]||-1===n&&0===e[Ua]);)i[Ua]+=n,e=i,i=i[Wn]}const s1={lFrame:P(null),bindingsEnabled:!0};function Rc(){return s1.bindingsEnabled}function pt(){return s1.lFrame.lView}function fn(){return s1.lFrame.tView}function A2(t){return s1.lFrame.contextLView=t,t[r2]}function E2(t){return s1.lFrame.contextLView=null,t}function v2(){let t=N3();for(;null!==t&&64===t.type;)t=t.parent;return t}function N3(){return s1.lFrame.currentTNode}function Vr(t,n){const e=s1.lFrame;e.currentTNode=t,e.isParent=n}function T4(){return s1.lFrame.isParent}function H4(){s1.lFrame.isParent=!1}function Si(){const t=s1.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function rc(){return s1.lFrame.bindingIndex++}function qa(t){const n=s1.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function B3(t,n){const e=s1.lFrame;e.bindingIndex=e.bindingRootIndex=t,l(n)}function l(t){s1.lFrame.currentDirectiveIndex=t}function f(t){const n=s1.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function _(){return s1.lFrame.currentQueryIndex}function x(t){s1.lFrame.currentQueryIndex=t}function w(t){const n=t[Rt];return 2===n.type?n.declTNode:1===n.type?t[l2]:null}function D(t,n,e){if(e&t1.SkipSelf){let r=n,s=t;for(;!(r=r.parent,null!==r||e&t1.Host||(r=w(s),null===r||(s=s[ja],10&r.type))););if(null===r)return!1;n=r,t=s}const i=s1.lFrame=L();return i.currentTNode=n,i.lView=t,!0}function A(t){const n=L(),e=t[Rt];s1.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function L(){const t=s1.lFrame,n=null===t?null:t.child;return null===n?P(t):n}function P(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function R(){const t=s1.lFrame;return s1.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const B=R;function Y(){const t=R();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function J(){return s1.lFrame.selectedIndex}function ee(t){s1.lFrame.selectedIndex=t}function q(){const t=s1.lFrame;return k3(t.tView,t.selectedIndex)}function oe(){s1.lFrame.currentNamespace=ic}function ce(){!function ye(){s1.lFrame.currentNamespace=null}()}function Se(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const s=t.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:V}=s;d&&(t.contentHooks??(t.contentHooks=[])).push(-e,d),v&&((t.contentHooks??(t.contentHooks=[])).push(e,v),(t.contentCheckHooks??(t.contentCheckHooks=[])).push(e,v)),C&&(t.viewHooks??(t.viewHooks=[])).push(-e,C),S&&((t.viewHooks??(t.viewHooks=[])).push(e,S),(t.viewCheckHooks??(t.viewCheckHooks=[])).push(e,S)),null!=V&&(t.destroyHooks??(t.destroyHooks=[])).push(e,V)}}function Ie(t,n,e){Le(t,n,3,e)}function Pe(t,n,e,i){(3&t[g1])===e&&Le(t,n,e,i)}function mt(t,n){let e=t[g1];(3&e)===n&&(e&=2047,e+=1,t[g1]=e)}function Le(t,n,e,i){const s=i??-1,d=n.length-1;let v=0;for(let C=void 0!==i?65535&t[Ga]:0;C<d;C++)if("number"==typeof n[C+1]){if(v=n[C],null!=i&&v>=i)break}else n[C]<0&&(t[Ga]+=65536),(v<s||-1==s)&&(it(t,e,n,C),t[Ga]=(4294901760&t[Ga])+C+2),C++}function it(t,n,e,i){const r=e[i]<0,s=e[i+1],v=t[r?-e[i]:e[i]];if(r){if(t[g1]>>11<t[Ga]>>16&&(3&t[g1])===n){t[g1]+=2048,ur(4,v,s);try{s.call(v)}finally{ur(5,v,s)}}}else{ur(4,v,s);try{s.call(v)}finally{ur(5,v,s)}}}const Be=-1;class at{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Mt(t,n,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const s=e[i++],d=e[i++],v=e[i++];t.setAttribute(n,d,v,s)}else{const s=r,d=e[++i];N1(s)?t.setProperty(n,s,d):t.setAttribute(n,s,d),i++}}return i}function Pt(t){return 3===t||4===t||6===t}function N1(t){return 64===t.charCodeAt(0)}function Nt(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||hn(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function hn(t,n,e,i,r){let s=0,d=t.length;if(-1===n)d=-1;else for(;s<t.length;){const v=t[s++];if("number"==typeof v){if(v===n){d=-1;break}if(v>n){d=s-1;break}}}for(;s<t.length;){const v=t[s];if("number"==typeof v)break;if(v===e){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==d&&(t.splice(d,0,n),s=d+1),t.splice(s++,0,e),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}function _n(t){return t!==Be}function Mn(t){return 32767&t}function a2(t,n){let e=function kn(t){return t>>16}(t),i=n;for(;e>0;)i=i[ja],e--;return i}let Di=!0;function fr(t){const n=Di;return Di=t,n}const On=255,An=5;let cn=0;const zn={};function En(t,n){const e=ui(t,n);if(-1!==e)return e;const i=n[Rt];i.firstCreatePass&&(t.injectorIndex=n.length,K2(i.data,t),K2(n,null),K2(i.blueprint,null));const r=Wa(t,n),s=t.injectorIndex;if(_n(r)){const d=Mn(r),v=a2(r,n),C=v[Rt].data;for(let S=0;S<8;S++)n[s+S]=v[d+S]|C[d+S]}return n[s+8]=r,s}function K2(t,n){t.push(0,0,0,0,0,0,0,0,n)}function ui(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Wa(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){if(i=z5(r),null===i)return Be;if(e++,r=r[ja],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return Be}function gs(t,n,e){!function Ai(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Xs)&&(i=e[Xs]),null==i&&(i=e[Xs]=cn++);const r=i&On;n.data[t+(r>>An)]|=1<<r}(t,n,e)}function Tr(t,n,e){if(e&t1.Optional||void 0!==t)return t;Yr()}function Za(t,n,e,i){if(e&t1.Optional&&void 0===i&&(i=null),!(e&(t1.Self|t1.Host))){const r=t[ec],s=si(void 0);try{return r?r.get(n,i,e&t1.Optional):Na(n,i,e&t1.Optional)}finally{si(s)}}return Tr(i,0,e)}function So(t,n,e,i=t1.Default,r){if(null!==t){if(1024&n[g1]){const d=function gd(t,n,e,i,r){let s=t,d=n;for(;null!==s&&null!==d&&1024&d[g1]&&!(256&d[g1]);){const v=Do(s,d,e,i|t1.Self,zn);if(v!==zn)return v;let C=s.parent;if(!C){const S=d[Mo];if(S){const V=S.get(e,zn,i);if(V!==zn)return V}C=z5(d),d=d[ja]}s=C}return r}(t,n,e,i,zn);if(d!==zn)return d}const s=Do(t,n,e,i,zn);if(s!==zn)return s}return Za(n,e,i,r)}function Do(t,n,e,i,r){const s=function pd(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Xs)?t[Xs]:void 0;return"number"==typeof n?n>=0?n&On:md:n}(e);if("function"==typeof s){if(!D(n,t,i))return i&t1.Host?Tr(r,0,i):Za(n,e,i,r);try{const d=s(i);if(null!=d||i&t1.Optional)return d;Yr()}finally{B()}}else if("number"==typeof s){let d=null,v=ui(t,n),C=Be,S=i&t1.Host?n[P2][l2]:null;for((-1===v||i&t1.SkipSelf)&&(C=-1===v?Wa(t,n):n[v+8],C!==Be&&M5(i,!1)?(d=n[Rt],v=Mn(C),n=a2(C,n)):v=-1);-1!==v;){const V=n[Rt];if(w5(s,v,V.data)){const F=Pc(v,n,e,d,i,S);if(F!==zn)return F}C=n[v+8],C!==Be&&M5(i,n[Rt].data[v+8]===S)&&w5(s,v,n)?(d=V,v=Mn(C),n=a2(C,n)):v=-1}}return r}function Pc(t,n,e,i,r,s){const d=n[Rt],v=d.data[t+8],V=e0(v,d,e,null==i?ma(v)&&Di:i!=d&&0!=(3&v.type),r&t1.Host&&s===v);return null!==V?ac(n,d,V,v):zn}function e0(t,n,e,i,r){const s=t.providerIndexes,d=n.data,v=1048575&s,C=t.directiveStart,V=s>>20,Z=r?v+V:t.directiveEnd;for(let K=i?v:v+V;K<Z;K++){const le=d[K];if(K<C&&e===le||K>=C&&le.type===e)return K}if(r){const K=d[C];if(K&&k(K)&&K.type===e)return C}return null}function ac(t,n,e,i){let r=t[e];const s=n.data;if(function Fe(t){return t instanceof at}(r)){const d=r;d.resolving&&function qs(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new rt(-200,`Circular dependency in DI detected for ${t}${e}`)}(function un(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():x1(t)}(s[e]));const v=fr(d.canSeeViewProviders);d.resolving=!0;const C=d.injectImpl?si(d.injectImpl):null;D(t,i,t1.Default);try{r=t[e]=d.factory(void 0,s,t,i),n.firstCreatePass&&e>=i.directiveStart&&function Ce(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=n.type.prototype;if(i){const d=L3(n);(e.preOrderHooks??(e.preOrderHooks=[])).push(t,d),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,d)}r&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-t,r),s&&((e.preOrderHooks??(e.preOrderHooks=[])).push(t,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,s))}(e,s[e],n)}finally{null!==C&&si(C),fr(v),d.resolving=!1,B()}}return r}function w5(t,n,e){return!!(e[n+(t>>An)]&1<<t)}function M5(t,n){return!(t&t1.Self||t&t1.Host&&n)}class U3{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return So(this._tNode,this._lView,n,cs(i),e)}}function md(){return new U3(v2(),pt())}function Vt(t){return Dr(()=>{const n=t.prototype.constructor,e=n[Kr]||w6(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[Kr]||w6(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function w6(t){return t2(t)?()=>{const n=w6(Jt(t));return n&&n()}:hs(t)}function z5(t){const n=t[Rt],e=n.type;return 2===e?n.declTNode:1===e?t[l2]:null}function Fc(t){return function Lr(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const s=e[r];if(Pt(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(s===n)return e[r+1];r+=2}}}return null}(v2(),t)}const Ya="__parameters__";function j3(t,n,e){return Dr(()=>{const i=function t0(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...s){if(this instanceof r)return i.apply(this,s),this;const d=new r(...s);return v.annotation=d,v;function v(C,S,V){const F=C.hasOwnProperty(Ya)?C[Ya]:Object.defineProperty(C,Ya,{value:[]})[Ya];for(;F.length<=V;)F.push(null);return(F[V]=F[V]||[]).push(d),C}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class vt{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=st({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ea(t,n){t.forEach(e=>Array.isArray(e)?ea(e,n):n(e))}function Bc(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function S6(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function r0(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function x2(t,n,e){let i=R4(t,n);return i>=0?t[1|i]=e:(i=~i,function yd(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function E5(t,n){const e=R4(t,n);if(e>=0)return t[1|e]}function R4(t,n){return function Xt(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const s=i+(r-i>>1),d=t[s<<e];if(n===d)return s<<e;d>n?r=s:i=s+1}return~(r<<e)}(t,n,1)}const jc=pa(j3("Inject",t=>({token:t})),-1),Hr=pa(j3("Optional"),8),Vo=pa(j3("SkipSelf"),4);var Ei=(()=>((Ei=Ei||{})[Ei.Important=1]="Important",Ei[Ei.DashCase=2]="DashCase",Ei))();const I6=new Map;let dm=0;const qc="__ngContext__";function O2(t,n){ci(n)?(t[qc]=n[Jr],function vs(t){I6.set(t[Jr],t)}(n)):t[qc]=n}let P5;function W3(t,n){return P5(t,n)}function W1(t){const n=t[Wn];return lr(n)?n[Wn]:n}function eo(t){return ra(t[Co])}function ya(t){return ra(t[wi])}function ra(t){for(;null!==t&&!lr(t);)t=t[wi];return t}function b2(t,n,e,i,r){if(null!=i){let s,d=!1;lr(i)?s=i:ci(i)&&(d=!0,i=i[Ar]);const v=g2(i);0===t&&null!==e?null==r?Pd(n,e,v):Yc(n,e,v,r||null,!0):1===t&&null!==e?Yc(n,e,v,r||null,!0):2===t?function U6(t,n,e){const i=h0(t,n);i&&function pm(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}(n,v,d):3===t&&n.destroyNode(v),null!=s&&function jd(t,n,e,i,r){const s=e[_1];s!==g2(e)&&b2(n,t,i,s,r);for(let v=N2;v<e.length;v++){const C=e[v];U4(C[Rt],C,t,n,i,s)}}(n,t,s,e,r)}}function Wc(t,n,e){return t.createElement(n,e)}function Id(t,n){const e=t[ds],i=e.indexOf(n),r=n[Wn];512&n[g1]&&(n[g1]&=-513,ps(r,-1)),e.splice(i,1)}function To(t,n){if(t.length<=N2)return;const e=N2+n,i=t[e];if(i){const r=i[wo];null!==r&&r!==t&&Id(r,i),n>0&&(t[e-1][wi]=i[wi]);const s=S6(t,N2+n);!function N5(t,n){U4(t,n,n[P1],2,null,null),n[Ar]=null,n[l2]=null}(i[Rt],i);const d=s[F2];null!==d&&d.detachView(s[Rt]),i[Wn]=null,i[wi]=null,i[g1]&=-65}return i}function Zc(t,n){if(!(128&n[g1])){const e=n[P1];e.destroyNode&&U4(t,n,e,3,null,null),function hm(t){let n=t[Co];if(!n)return B4(t[Rt],t);for(;n;){let e=null;if(ci(n))e=n[Co];else{const i=n[N2];i&&(e=i)}if(!e){for(;n&&!n[wi]&&n!==t;)ci(n)&&B4(n[Rt],n),n=n[Wn];null===n&&(n=t),ci(n)&&B4(n[Rt],n),e=n&&n[wi]}n=e}}(n)}}function B4(t,n){if(!(128&n[g1])){n[g1]&=-65,n[g1]|=128,function U5(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof at)){const s=e[i+1];if(Array.isArray(s))for(let d=0;d<s.length;d+=2){const v=r[s[d]],C=s[d+1];ur(4,v,C);try{C.call(v)}finally{ur(5,v,C)}}else{ur(4,r,s);try{s.call(r)}finally{ur(5,r,s)}}}}}(t,n),function O6(t,n){const e=t.cleanup,i=n[us];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const d=e[s+3];d>=0?i[r=d]():i[r=-d].unsubscribe(),s+=2}else{const d=i[r=e[s+1]];e[s].call(d)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();n[us]=null}}(t,n),1===n[Rt].type&&n[P1].destroy();const e=n[wo];if(null!==e&&lr(n[Wn])){e!==n[Wn]&&Id(e,n);const i=n[F2];null!==i&&i.detachView(t)}!function Sd(t){I6.delete(t[Jr])}(n)}}function j5(t,n,e){return function Rd(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[Ar];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===cr.None||s===cr.Emulated)return null}return Ui(i,e)}}(t,n.parent,e)}function Yc(t,n,e,i,r){t.insertBefore(n,e,i,r)}function Pd(t,n,e){t.appendChild(n,e)}function B6(t,n,e,i,r){null!==i?Yc(t,n,e,i,r):Pd(t,n,e)}function h0(t,n){return t.parentNode(n)}function Xc(t,n,e){return Od(t,n,e)}let Kc,Gi,G4,e3,Od=function G5(t,n,e){return 40&t.type?Ui(t,e):null};function m0(t,n,e,i){const r=j5(t,i,n),s=n[P1],v=Xc(i.parent||n[l2],i,n);if(null!=r)if(Array.isArray(e))for(let C=0;C<e.length;C++)B6(s,r,e[C],v,!1);else B6(s,r,e,v,!1);void 0!==Kc&&Kc(s,i,n,e,r)}function g0(t,n){if(null!==n){const e=n.type;if(3&e)return Ui(n,t);if(4&e)return $5(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return g0(t,i);{const r=t[n.index];return lr(r)?$5(-1,r):g2(r)}}if(32&e)return W3(n,t)()||g2(t[n.index]);{const i=Bd(t,n);return null!==i?Array.isArray(i)?i[0]:g0(W1(t[P2]),i):g0(t,n.next)}}return null}function Bd(t,n){return null!==n?t[P2][l2].projection[n.projection]:null}function $5(t,n){const e=N2+t+1;if(e<n.length){const i=n[e],r=i[Rt].firstChild;if(null!==r)return g0(i,r)}return n[_1]}function q5(t,n,e,i,r,s,d){for(;null!=e;){const v=i[e.index],C=e.type;if(d&&0===n&&(v&&O2(g2(v),i),e.flags|=2),32!=(32&e.flags))if(8&C)q5(t,n,e.child,i,r,s,!1),b2(n,t,r,v,s);else if(32&C){const S=W3(e,i);let V;for(;V=S();)b2(n,t,r,V,s);b2(n,t,r,v,s)}else 16&C?Ud(t,n,i,e,r,s):b2(n,t,r,v,s);e=d?e.projectionNext:e.next}}function U4(t,n,e,i,r,s){q5(e,i,t.firstChild,n,r,s,!1)}function Ud(t,n,e,i,r,s){const d=e[P2],C=d[l2].projection[i.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)b2(n,t,r,C[S],s);else q5(t,n,C,d[Wn],r,s,!0)}function j6(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function xs(t,n,e){const{mergedAttrs:i,classes:r,styles:s}=e;null!==i&&Mt(t,n,i),null!==r&&j6(t,n,r),null!==s&&function $d(t,n,e){t.setAttribute(n,"style",e)}(t,n,s)}function Qc(t){return function W5(){if(void 0===Gi&&(Gi=null,Hn.trustedTypes))try{Gi=Hn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Gi}()?.createHTML(t)||t}function Z5(){if(void 0===e3&&(e3=null,Hn.trustedTypes))try{e3=Hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return e3}function Wd(t){return Z5()?.createHTML(t)||t}function Yd(t){return Z5()?.createScriptURL(t)||t}class Z3{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${p2})`}}class vm extends Z3{getTypeName(){return"HTML"}}class ym extends Z3{getTypeName(){return"Style"}}class Y5 extends Z3{getTypeName(){return"Script"}}class xm extends Z3{getTypeName(){return"URL"}}class $4 extends Z3{getTypeName(){return"ResourceURL"}}function xa(t){return t instanceof Z3?t.changingThisBreaksApplicationSecurity:t}function In(t,n){const e=function G6(t){return t instanceof Z3&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${p2})`)}return e===n}class v0{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Qc(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class K5{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=Qc(n),e}}const bm=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function y0(t){return(t=String(t)).match(bm)?t:"unsafe:"+t}function ba(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function x0(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const W6=ba("area,br,col,hr,img,wbr"),Qd=ba("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Z6=ba("rp,rt"),eu=x0(W6,x0(Qd,ba("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),x0(Z6,ba("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),x0(Z6,Qd)),tu=ba("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ef=x0(tu,ba("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ba("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Y6=ba("script,style,template");class Cm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!eu.hasOwnProperty(e))return this.sanitizedSomething=!0,!Y6.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),d=s.name,v=d.toLowerCase();if(!ef.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=s.value;tu[v]&&(C=y0(C)),this.buf.push(" ",d,'="',nf(C),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();eu.hasOwnProperty(e)&&!W6.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(nf(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const tf=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,q4=/([^\#-~ |!])/g;function nf(t){return t.replace(/&/g,"&amp;").replace(tf,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(q4,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let X6;function rf(t,n){let e=null;try{X6=X6||function X5(t){const n=new K5(t);return function Q5(){try{return!!(new window.DOMParser).parseFromString(Qc(""),"text/html")}catch{return!1}}()?new v0(n):n}(t);let i=n?String(n):"";e=X6.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=X6.getInertBodyElement(i)}while(i!==s);return Qc((new Cm).sanitizeChildren(K6(e)||e))}finally{if(e){const i=K6(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function K6(t){return"content"in t&&function af(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Yn=(()=>((Yn=Yn||{})[Yn.NONE=0]="NONE",Yn[Yn.HTML=1]="HTML",Yn[Yn.STYLE=2]="STYLE",Yn[Yn.SCRIPT=3]="SCRIPT",Yn[Yn.URL=4]="URL",Yn[Yn.RESOURCE_URL=5]="RESOURCE_URL",Yn))();function sf(t){const n=Y4();return n?Wd(n.sanitize(Yn.HTML,t)||""):In(t,"HTML")?Wd(xa(t)):rf(function Jc(){return void 0!==G4?G4:typeof document<"u"?document:void 0}(),x1(t))}function Ho(t){const n=Y4();return n?n.sanitize(Yn.URL,t)||"":In(t,"URL")?xa(t):y0(x1(t))}function W4(t){const n=Y4();if(n)return Yd(n.sanitize(Yn.RESOURCE_URL,t)||"");if(In(t,"ResourceURL"))return Yd(xa(t));throw new rt(904,!1)}function Y4(){const t=pt();return t&&t[A3]}const e8=new vt("ENVIRONMENT_INITIALIZER"),nu=new vt("INJECTOR",-1),iu=new vt("INJECTOR_DEF_TYPES");class ru{get(n,e=Z1){if(e===Z1){const i=new Error(`NullInjectorError: No provider for ${mn(n)}!`);throw i.name="NullInjectorError",i}return e}}function lf(...t){return{\u0275providers:au(0,t),\u0275fromNgModule:!0}}function au(t,...n){const e=[],i=new Set;let r;return ea(n,s=>{const d=s;ou(d,e,[],i)&&(r||(r=[]),r.push(d))}),void 0!==r&&uf(r,e),e}function uf(t,n){for(let e=0;e<t.length;e++){const{providers:r}=t[e];X4(r,s=>{n.push(s)})}}function ou(t,n,e,i){if(!(t=Jt(t)))return!1;let r=null,s=fa(t);const d=!s&&dn(t);if(s||d){if(d&&!d.standalone)return!1;r=t}else{const C=t.ngModule;if(s=fa(C),!s)return!1;r=C}const v=i.has(r);if(d){if(v)return!1;if(i.add(r),d.dependencies){const C="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const S of C)ou(S,n,e,i)}}else{if(!s)return!1;{if(null!=s.imports&&!v){let S;i.add(r);try{ea(s.imports,V=>{ou(V,n,e,i)&&(S||(S=[]),S.push(V))})}finally{}void 0!==S&&uf(S,n)}if(!v){const S=hs(r)||(()=>new r);n.push({provide:r,useFactory:S,deps:sn},{provide:iu,useValue:r,multi:!0},{provide:e8,useValue:()=>Re(r),multi:!0})}const C=s.providers;null==C||v||X4(C,V=>{n.push(V)})}}return r!==t&&void 0!==t.providers}function X4(t,n){for(let e of t)gn(e)&&(e=e.\u0275providers),Array.isArray(e)?X4(e,n):n(e)}const df=Ht({provide:String,useValue:Ht});function Vi(t){return null!==t&&"object"==typeof t&&df in t}function ko(t){return"function"==typeof t}const t8=new vt("Set Injector scope."),n8={},Am={};let su;function i8(){return void 0===su&&(su=new ru),su}class bs{}class hf extends bs{get destroyed(){return this._destroyed}constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lu(n,d=>this.processProvider(d)),this.records.set(nu,X3(void 0,this)),r.has("environment")&&this.records.set(bs,X3(void 0,this));const s=this.records.get(t8);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(iu.multi,sn,t1.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const e=ha(this),i=si(void 0);try{return n()}finally{ha(e),si(i)}}get(n,e=Z1,i=t1.Default){this.assertNotDestroyed(),i=cs(i);const r=ha(this),s=si(void 0);try{if(!(i&t1.SkipSelf)){let v=this.records.get(n);if(void 0===v){const C=function Tm(t){return"function"==typeof t||"object"==typeof t&&t instanceof vt}(n)&&ts(n);v=C&&this.injectableDefInScope(C)?X3(Q4(n),n8):null,this.records.set(n,v)}if(null!=v)return this.hydrate(n,v)}return(i&t1.Self?i8():this.parent).get(n,e=i&t1.Optional&&e===Z1?null:e)}catch(d){if("NullInjectorError"===d.name){if((d[rs]=d[rs]||[]).unshift(mn(n)),r)throw d;return function Ec(t,n,e,i){const r=t[rs];throw n[ss]&&r.unshift(n[ss]),t.message=function Vc(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==os?t.slice(2):t;let r=mn(n);if(Array.isArray(n))r=n.map(mn).join(" -> ");else if("object"==typeof n){let s=[];for(let d in n)if(n.hasOwnProperty(d)){let v=n[d];s.push(d+":"+("string"==typeof v?JSON.stringify(v):mn(v)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(as,"\n  ")}`}("\n"+t.message,r,e,i),t[Zs]=r,t[rs]=null,t}(d,n,"R3InjectorError",this.source)}throw d}finally{si(s),ha(r)}}resolveInjectorInitializers(){const n=ha(this),e=si(void 0);try{const i=this.get(e8.multi,sn,t1.Self);for(const r of i)r()}finally{ha(n),si(e)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(mn(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new rt(205,!1)}processProvider(n){let e=ko(n=Jt(n))?n:Jt(n&&n.provide);const i=function pf(t){return Vi(t)?X3(void 0,t.useValue):X3(cu(t),n8)}(n);if(ko(n)||!0!==n.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=X3(void 0,n8,!0),r.factory=()=>G1(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e){return e.value===n8&&(e.value=Am,e.value=e.factory()),"object"==typeof e.value&&e.value&&function Lm(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Jt(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Q4(t){const n=ts(t),e=null!==n?n.factory:hs(t);if(null!==e)return e;if(t instanceof vt)throw new rt(204,!1);if(t instanceof Function)return function Em(t){const n=t.length;if(n>0)throw r0(n,"?"),new rt(204,!1);const e=function Fa(t){const n=t&&(t[oi]||t[x3]);return n?(function Dc(t){if(t.hasOwnProperty("name"))return t.name;(""+t).match(/^function\s*([^\s(]+)/)}(t),n):null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new rt(204,!1)}function cu(t,n,e){let i;if(ko(t)){const r=Jt(t);return hs(r)||Q4(r)}if(Vi(t))i=()=>Jt(t.useValue);else if(function Y3(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...G1(t.deps||[]));else if(function K4(t){return!(!t||!t.useExisting)}(t))i=()=>Re(Jt(t.useExisting));else{const r=Jt(t&&(t.useClass||t.provide));if(!function Vm(t){return!!t.deps}(t))return hs(r)||Q4(r);i=()=>new r(...G1(t.deps))}return i}function X3(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function lu(t,n){for(const e of t)Array.isArray(e)?lu(e,n):e&&gn(e)?lu(e.\u0275providers,n):n(e)}class Hm{}class uu{}class du{resolveComponentFactory(n){throw function km(t){const n=Error(`No component factory found for ${mn(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Cs=(()=>{class t{}return t.NULL=new du,t})();function J4(){return el(v2(),pt())}function el(t,n){return new Ot(Ui(t,n))}let Ot=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=J4,t})();function C0(t){return t instanceof Ot?t.nativeElement:t}class w0{}let to=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function M0(){const t=pt(),e=dr(v2().index,t);return(ci(e)?e:t)[P1]}(),t})(),mf=(()=>{class t{}return t.\u0275prov=st({token:t,providedIn:"root",factory:()=>null}),t})();class cc{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Pn=new cc("15.2.7"),z0={},r8="ngOriginalError";function Io(t){return t[r8]}class Ro{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&Io(n);for(;e&&Io(e);)e=Io(e);return e||null}}function vf(t){return t.ownerDocument.defaultView}function lc(t){return t instanceof Function?t():t}function xf(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=n.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}e=r+1}}const o8="ng-template";function fu(t,n,e){let i=0,r=!0;for(;i<t.length;){let s=t[i++];if("string"==typeof s&&r){const d=t[i++];if(e&&"class"===s&&-1!==xf(d.toLowerCase(),n,0))return!0}else{if(1===s){for(;i<t.length&&"string"==typeof(s=t[i++]);)if(s.toLowerCase()===n)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function hu(t){return 4===t.type&&t.value!==o8}function Ca(t,n,e){return n===(4!==t.type||e?t.value:o8)}function D0(t,n,e){let i=4;const r=t.attrs||[],s=function bf(t){for(let n=0;n<t.length;n++)if(Pt(t[n]))return n;return t.length}(r);let d=!1;for(let v=0;v<n.length;v++){const C=n[v];if("number"!=typeof C){if(!d)if(4&i){if(i=2|1&i,""!==C&&!Ca(t,C,e)||""===C&&1===n.length){if(pr(i))return!1;d=!0}}else{const S=8&i?C:n[++v];if(8&i&&null!==t.attrs){if(!fu(t.attrs,S,e)){if(pr(i))return!1;d=!0}continue}const F=pu(8&i?"class":C,r,hu(t),e);if(-1===F){if(pr(i))return!1;d=!0;continue}if(""!==S){let Z;Z=F>s?"":r[F+1].toLowerCase();const K=8&i?Z:null;if(K&&-1!==xf(K,S,0)||2&i&&S!==Z){if(pr(i))return!1;d=!0}}}}else{if(!d&&!pr(i)&&!pr(C))return!1;if(d&&pr(C))continue;d=!1,i=C|1&i}}return pr(i)||d}function pr(t){return 0==(1&t)}function pu(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let s=!1;for(;r<n.length;){const d=n[r];if(d===t)return r;if(3===d||6===d)s=!0;else{if(1===d||2===d){let v=n[++r];for(;"string"==typeof v;)v=n[++r];continue}if(4===d)break;if(0===d){r+=4;continue}}r+=s?1:2}return-1}return function Cf(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function A0(t,n,e=!1){for(let i=0;i<n.length;i++)if(D0(t,n[i],e))return!0;return!1}function jm(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function mu(t,n){return t?":not("+n.trim()+")":n}function wf(t){let n=t[0],e=1,i=2,r="",s=!1;for(;e<t.length;){let d=t[e];if("string"==typeof d)if(2&i){const v=t[++e];r+="["+d+(v.length>0?'="'+v+'"':"")+"]"}else 8&i?r+="."+d:4&i&&(r+=" "+d);else""!==r&&!pr(d)&&(n+=mu(s,r),r=""),i=d,s=s||!pr(i);e++}return""!==r&&(n+=mu(s,r)),n}const $1={};function qe(t){ws(fn(),pt(),J()+t,!1)}function ws(t,n,e,i){if(!i)if(3==(3&n[g1])){const s=t.preOrderCheckHooks;null!==s&&Ie(n,s,e)}else{const s=t.preOrderHooks;null!==s&&Pe(n,s,0,e)}ee(e)}function yu(t,n=null,e=null,i){const r=xu(t,n,e,i);return r.resolveInjectorInitializers(),r}function xu(t,n=null,e=null,i,r=new Set){const s=[e||sn,lf(t)];return i=i||("object"==typeof t?void 0:mn(t)),new hf(s,n||i8(),i||null,r)}let kr=(()=>{class t{static create(e,i){if(Array.isArray(e))return yu({name:""},i,e,"");{const r=e.name??"";return yu({name:r},e.parent,e.providers,r)}}}return t.THROW_IF_NOT_FOUND=Z1,t.NULL=new ru,t.\u0275prov=st({token:t,providedIn:"any",factory:()=>Re(nu)}),t.__NG_ELEMENT_ID__=-1,t})();function W(t,n=t1.Default){const e=pt();return null===e?Re(t,n):So(v2(),e,Jt(t),n)}function Ms(){throw new Error("invalid")}function If(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const s=e[i+1];if(-1!==s){const d=t.data[s];x(e[i]),d.contentQueries(2,n[s],s)}}}function Q3(t,n,e,i,r,s,d,v,C,S,V){const F=n.blueprint.slice();return F[Ar]=r,F[g1]=76|i,(null!==V||t&&1024&t[g1])&&(F[g1]|=1024),Xl(F),F[Wn]=F[ja]=t,F[r2]=e,F[tc]=d||t&&t[tc],F[P1]=v||t&&t[P1],F[A3]=C||t&&t[A3]||null,F[ec]=S||t&&t[ec]||null,F[l2]=s,F[Jr]=function I5(){return dm++}(),F[Mo]=V,F[P2]=2==n.type?t[P2]:F,F}function al(t,n,e,i,r){let s=t.data[n];if(null===s)s=function p8(t,n,e,i,r){const s=N3(),d=T4(),C=t.data[n]=function Km(t,n,e,i,r,s){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?s:s&&s.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=C),null!==s&&(d?null==s.child&&null!==C.parent&&(s.child=C):null===s.next&&(s.next=C,C.prev=s)),C}(t,n,e,i,r),function C6(){return s1.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=i,s.attrs=r;const d=function $a(){const t=s1.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();s.injectorIndex=null===d?-1:d.injectorIndex}return Vr(s,!0),s}function ol(t,n,e,i){if(0===e)return-1;const r=n.length;for(let s=0;s<e;s++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function Du(t,n,e){A(n);try{const i=t.viewQuery;null!==i&&Ds(1,i,e);const r=t.template;null!==r&&Rf(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&If(t,n),t.staticViewQueries&&Ds(2,t.viewQuery,e);const s=t.components;null!==s&&function rl(t,n){for(let e=0;e<n.length;e++)jf(t,n[e])}(n,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[g1]&=-5,Y()}}function L0(t,n,e,i){const r=n[g1];if(128!=(128&r)){A(n);try{Xl(n),function Jl(t){return s1.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Rf(t,n,e,2,i);const d=3==(3&r);if(d){const S=t.preOrderCheckHooks;null!==S&&Ie(n,S,null)}else{const S=t.preOrderHooks;null!==S&&Pe(n,S,0,null),mt(n,0)}if(function Hu(t){for(let n=eo(t);null!==n;n=ya(n)){if(!n[Mi])continue;const e=n[ds];for(let i=0;i<e.length;i++){const r=e[i];512&r[g1]||ps(r[Wn],1),r[g1]|=512}}}(n),function Uf(t){for(let n=eo(t);null!==n;n=ya(n))for(let e=N2;e<n.length;e++){const i=n[e],r=i[Rt];L4(i)&&L0(r,i,r.template,i[r2])}}(n),null!==t.contentQueries&&If(t,n),d){const S=t.contentCheckHooks;null!==S&&Ie(n,S)}else{const S=t.contentHooks;null!==S&&Pe(n,S,1),mt(n,1)}!function h8(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)ee(~r);else{const s=r,d=e[++i],v=e[++i];B3(d,s),v(2,n[s])}}}finally{ee(-1)}}(t,n);const v=t.components;null!==v&&function Xm(t,n){for(let e=0;e<n.length;e++)rg(t,n[e])}(n,v);const C=t.viewQuery;if(null!==C&&Ds(2,C,i),d){const S=t.viewCheckHooks;null!==S&&Ie(n,S)}else{const S=t.viewHooks;null!==S&&Pe(n,S,2),mt(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[g1]&=-41,512&n[g1]&&(n[g1]&=-513,ps(n[Wn],-1))}finally{Y()}}}function Rf(t,n,e,i,r){const s=J(),d=2&i;try{ee(-1),d&&n.length>Cn&&ws(t,n,Cn,!1),ur(d?2:0,r),e(i,r)}finally{ee(s),ur(d?3:1,r)}}function m8(t,n,e){if(fs(n)){const r=n.directiveEnd;for(let s=n.directiveStart;s<r;s++){const d=t.data[s];d.contentQueries&&d.contentQueries(1,e[s],s)}}}function Au(t,n,e){Rc()&&(function eg(t,n,e,i){const r=e.directiveStart,s=e.directiveEnd;ma(e)&&function r3(t,n,e){const i=Ui(n,t),r=Pf(e),s=t[tc],d=H0(t,Q3(t,r,null,e.onPush?32:16,i,n,s,s.createRenderer(i,e),null,null,null));t[n.index]=d}(n,e,t.data[r+e.componentOffset]),t.firstCreatePass||En(e,n),O2(i,n);const d=e.initialInputs;for(let v=r;v<s;v++){const C=t.data[v],S=ac(n,t,v,e);O2(S,n),null!==d&&w8(0,v-r,S,C,0,d),k(C)&&(dr(e.index,n)[r2]=ac(n,t,v,e))}}(t,n,e,Ui(e,n)),64==(64&e.flags)&&sl(t,n,e))}function g8(t,n,e=Ui){const i=n.localNames;if(null!==i){let r=n.index+1;for(let s=0;s<i.length;s+=2){const d=i[s+1],v=-1===d?e(n,t):t[d];t[r++]=v}}}function Pf(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Eu(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Eu(t,n,e,i,r,s,d,v,C,S){const V=Cn+i,F=V+r,Z=function _8(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:$1);return e}(V,F),K="function"==typeof S?S():S;return Z[Rt]={type:t,blueprint:Z,template:e,queries:null,viewQuery:v,declTNode:n,data:Z.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function T0(t,n,e,i){const r=$f(n);null===e?r.push(i):(r.push(e),t.firstCreatePass&&qf(t).push(i,r.length-1))}function y8(t,n,e,i){for(let r in t)if(t.hasOwnProperty(r)){e=null===e?{}:e;const s=t[r];null===i?x8(e,n,r,s):i.hasOwnProperty(r)&&x8(e,n,i[r],s)}return e}function x8(t,n,e,i){t.hasOwnProperty(e)?t[e].push(n,i):t[e]=[n,i]}function Ir(t,n,e,i,r,s,d,v){const C=Ui(n,e);let V,S=n.inputs;!v&&null!=S&&(V=S[i])?(a3(t,e,V,i,r),ma(n)&&function Ff(t,n){const e=dr(n,t);16&e[g1]||(e[g1]|=32)}(e,n.index)):3&n.type&&(i=function Qm(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=d?d(r,n.value||"",i):r,s.setProperty(C,i,r))}function Vu(t,n,e,i){if(Rc()){const r=null===i?null:{"":-1},s=function ng(t,n){const e=t.directiveRegistry;let i=null,r=null;if(e)for(let s=0;s<e.length;s++){const d=e[s];if(A0(n,d.selectors,!1))if(i||(i=[]),k(d))if(null!==d.findHostDirectiveDefs){const v=[];r=r||new Map,d.findHostDirectiveDefs(d,v,r),i.unshift(...v,d),C8(t,n,v.length)}else i.unshift(d),C8(t,n,0);else r=r||new Map,d.findHostDirectiveDefs?.(d,i,r),i.push(d)}return null===i?null:[i,r]}(t,e);let d,v;null===s?d=v=null:[d,v]=s,null!==d&&Nf(t,n,e,d,r,v),r&&function ig(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const s=e[n[r+1]];if(null==s)throw new rt(-301,!1);i.push(n[r],s)}}}(e,i,r)}e.mergedAttrs=Nt(e.mergedAttrs,e.attrs)}function Nf(t,n,e,i,r,s){for(let S=0;S<i.length;S++)gs(En(e,n),t,i[S].type);!function no(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let S=0;S<i.length;S++){const V=i[S];V.providersResolver&&V.providersResolver(V)}let d=!1,v=!1,C=ol(t,n,i.length,null);for(let S=0;S<i.length;S++){const V=i[S];e.mergedAttrs=Nt(e.mergedAttrs,V.hostAttrs),zs(t,e,n,C,V),Of(C,V,r),null!==V.contentQueries&&(e.flags|=4),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(e.flags|=64);const F=V.type.prototype;!d&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((t.preOrderHooks??(t.preOrderHooks=[])).push(e.index),d=!0),!v&&(F.ngOnChanges||F.ngDoCheck)&&((t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(e.index),v=!0),C++}!function i3(t,n,e){const r=n.directiveEnd,s=t.data,d=n.attrs,v=[];let C=null,S=null;for(let V=n.directiveStart;V<r;V++){const F=s[V],Z=e?e.get(F):null,le=Z?Z.outputs:null;C=y8(F.inputs,V,C,Z?Z.inputs:null),S=y8(F.outputs,V,S,le);const xe=null===C||null===d||hu(n)?null:Bf(C,V,d);v.push(xe)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=8),C.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=v,n.inputs=C,n.outputs=S}(t,e,s)}function sl(t,n,e){const i=e.directiveStart,r=e.directiveEnd,s=e.index,d=function m(){return s1.lFrame.currentDirectiveIndex}();try{ee(s);for(let v=i;v<r;v++){const C=t.data[v],S=n[v];l(v),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&tg(C,S)}}finally{ee(-1),l(d)}}function tg(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function C8(t,n,e){n.componentOffset=e,(t.components??(t.components=[])).push(n.index)}function Of(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;k(n)&&(e[""]=t)}}function zs(t,n,e,i,r){t.data[i]=r;const s=r.factory||(r.factory=hs(r.type)),d=new at(s,k(r),W);t.blueprint[i]=d,e[i]=d,function Jm(t,n,e,i,r){const s=r.hostBindings;if(s){let d=t.hostBindingOpCodes;null===d&&(d=t.hostBindingOpCodes=[]);const v=~n.index;(function Lu(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(d)!=v&&d.push(v),d.push(e,i,s)}}(t,n,i,ol(t,e,r.hostVars,$1),r)}function pi(t,n,e,i,r,s){const d=Ui(t,n);!function Ss(t,n,e,i,r,s,d){if(null==s)t.removeAttribute(n,r,e);else{const v=null==d?x1(s):d(s,i||"",r);t.setAttribute(n,r,v,e)}}(n[P1],d,s,t.value,e,i,r)}function w8(t,n,e,i,r,s){const d=s[n];if(null!==d){const v=i.setInput;for(let C=0;C<d.length;){const S=d[C++],V=d[C++],F=d[C++];null!==v?i.setInput(e,F,S,V):e[V]=F}}}function Bf(t,n,e){let i=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const d=t[s];for(let v=0;v<d.length;v+=2)if(d[v]===n){i.push(s,d[v+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Tu(t,n,e,i){return[t,!0,!1,n,null,0,i,e,null,null]}function rg(t,n){const e=dr(n,t);if(L4(e)){const i=e[Rt];48&e[g1]?L0(i,e,i.template,e[r2]):e[Ua]>0&&M8(e)}}function M8(t){for(let i=eo(t);null!==i;i=ya(i))for(let r=N2;r<i.length;r++){const s=i[r];if(L4(s))if(512&s[g1]){const d=s[Rt];L0(d,s,d.template,s[r2])}else s[Ua]>0&&M8(s)}const e=t[Rt].components;if(null!==e)for(let i=0;i<e.length;i++){const r=dr(e[i],t);L4(r)&&r[Ua]>0&&M8(r)}}function jf(t,n){const e=dr(n,t),i=e[Rt];(function Gf(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),Du(i,e,e[r2])}function H0(t,n){return t[Co]?t[Qr][wi]=n:t[Co]=n,t[Qr]=n,n}function k0(t){for(;t;){t[g1]|=32;const n=W1(t);if(G(t)&&!n)return t;t=n}return null}function I0(t,n,e,i=!0){const r=n[tc];r.begin&&r.begin();try{L0(t,n,t.template,e)}catch(d){throw i&&Wf(n,d),d}finally{r.end&&r.end()}}function Ds(t,n,e){x(0),n(t,e)}function $f(t){return t[us]||(t[us]=[])}function qf(t){return t.cleanup||(t.cleanup=[])}function R0(t,n,e){return(null===t||k(t))&&(e=function g6(t){for(;Array.isArray(t);){if("object"==typeof t[Er])return t;t=t[Ar]}return null}(e[n.index])),e[P1]}function Wf(t,n){const e=t[ec],i=e?e.get(Ro,null):null;i&&i.handleError(n)}function a3(t,n,e,i,r){for(let s=0;s<e.length;){const d=e[s++],v=e[s++],C=n[d],S=t.data[d];null!==S.setInput?S.setInput(C,r,i,v):C[v]=r}}function Fo(t,n,e){const i=H3(n,t);!function fi(t,n,e){t.setValue(n,e)}(t[P1],i,e)}function cl(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,s=0;if(null!==n)for(let d=0;d<n.length;d++){const v=n[d];"number"==typeof v?s=v:1==s?r=C1(r,v):2==s&&(i=C1(i,v+": "+n[++d]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}function wa(t,n,e,i,r=!1){for(;null!==e;){const s=n[e.index];if(null!==s&&i.push(g2(s)),lr(s))for(let v=N2;v<s.length;v++){const C=s[v],S=C[Rt].firstChild;null!==S&&wa(C[Rt],C,S,i)}const d=e.type;if(8&d)wa(t,n,e.child,i);else if(32&d){const v=W3(e,n);let C;for(;C=v();)i.push(C)}else if(16&d){const v=Bd(n,e);if(Array.isArray(v))i.push(...v);else{const C=W1(n[P2]);wa(C[Rt],C,v,i,!0)}}e=r?e.projectionNext:e.next}return i}class J3{get rootNodes(){const n=this._lView,e=n[Rt];return wa(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[r2]}set context(n){this._lView[r2]=n}get destroyed(){return 128==(128&this._lView[g1])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Wn];if(lr(n)){const e=n[zo],i=e?e.indexOf(this):-1;i>-1&&(To(n,i),S6(e,i))}this._attachedToViewContainer=!1}Zc(this._lView[Rt],this._lView)}onDestroy(n){T0(this._lView[Rt],this._lView,null,n)}markForCheck(){k0(this._cdRefInjectingView||this._lView)}detach(){this._lView[g1]&=-65}reattach(){this._lView[g1]|=64}detectChanges(){I0(this._lView[Rt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function O5(t,n){U4(t,n,n[P1],2,null,null)}(this._lView[Rt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new rt(902,!1);this._appRef=n}}class ku extends J3{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;I0(n[Rt],n,n[r2],!1)}checkNoChanges(){}get context(){return null}}class io extends Cs{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=dn(n);return new uc(e,this.ngModule)}}function o3(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class Yf{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=cs(i);const r=this.injector.get(n,z0,i);return r!==z0||e===z0?r:this.parentInjector.get(n,e,i)}}class uc extends uu{get inputs(){return o3(this.componentDef.inputs)}get outputs(){return o3(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function gu(t){return t.map(wf).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,r){let s=(r=r||this.ngModule)instanceof bs?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const d=s?new Yf(n,s):n,v=d.get(w0,null);if(null===v)throw new rt(407,!1);const C=d.get(mf,null),S=v.createRenderer(null,this.componentDef),V=this.componentDef.selectors[0][0]||"div",F=i?function v8(t,n,e){return t.selectRootElement(n,e===cr.ShadowDom)}(S,i,this.componentDef.encapsulation):Wc(S,V,function Zf(t){const n=t.toLowerCase();return"svg"===n?ic:"math"===n?"math":null}(V)),Z=this.componentDef.onPush?288:272,K=Eu(0,null,null,1,0,null,null,null,null,null),le=Q3(null,K,null,Z,null,null,v,S,C,d,null);let xe,Me;A(le);try{const He=this.componentDef;let ut,$e=null;He.findHostDirectiveDefs?(ut=[],$e=new Map,He.findHostDirectiveDefs(He,ut,$e),ut.push(He)):ut=[He];const St=function Xf(t,n){const e=t[Rt],i=Cn;return t[i]=n,al(e,i,2,"#host",null)}(le,F),z1=function cg(t,n,e,i,r,s,d,v){const C=r[Rt];!function Kf(t,n,e,i){for(const r of t)n.mergedAttrs=Nt(n.mergedAttrs,r.hostAttrs);null!==n.mergedAttrs&&(cl(n,n.mergedAttrs,!0),null!==e&&xs(i,e,n))}(i,t,n,d);const S=s.createRenderer(n,e),V=Q3(r,Pf(e),null,e.onPush?32:16,r[t.index],t,s,S,v||null,null,null);return C.firstCreatePass&&C8(C,t,i.length-1),H0(r,V),r[t.index]=V}(St,F,He,ut,le,v,S);Me=k3(K,Cn),F&&function lg(t,n,e,i){if(i)Mt(t,e,["ng-version",Pn.full]);else{const{attrs:r,classes:s}=function Mf(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&n.push(s,t[++i]):8===r&&e.push(s);else{if(!pr(r))break;r=s}i++}return{attrs:n,classes:e}}(n.selectors[0]);r&&Mt(t,e,r),s&&s.length>0&&j6(t,e,s.join(" "))}}(S,He,F,i),void 0!==e&&function Iu(t,n,e){const i=t.projection=[];for(let r=0;r<n.length;r++){const s=e[r];i.push(null!=s?Array.from(s):null)}}(Me,this.ngContentSelectors,e),xe=function Qf(t,n,e,i,r,s){const d=v2(),v=r[Rt],C=Ui(d,r);Nf(v,r,d,e,null,i);for(let V=0;V<e.length;V++)O2(ac(r,v,d.directiveStart+V,d),r);sl(v,r,d),C&&O2(C,r);const S=ac(r,v,d.directiveStart+d.componentOffset,d);if(t[r2]=r[r2]=S,null!==s)for(const V of s)V(S,n);return m8(v,d,t),S}(z1,He,ut,$e,le,[Jf]),Du(K,le,null)}finally{Y()}return new z8(this.componentType,xe,el(Me,le),le,Me)}}class z8 extends Hm{constructor(n,e,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new ku(r),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[n])){const s=this._rootLView;a3(s[Rt],s,r,n,e),k0(dr(this._tNode.index,s))}}get injector(){return new U3(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Jf(){const t=v2();Se(pt()[Rt],t)}function o(t){let n=function Ru(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(k(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new rt(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);const d=t;d.inputs=c(t.inputs),d.declaredInputs=c(t.declaredInputs),d.outputs=c(t.outputs);const v=r.hostBindings;v&&g(t,v);const C=r.viewQuery,S=r.contentQueries;if(C&&u(t,C),S&&h(t,S),ar(t.inputs,r.inputs),ar(t.declaredInputs,r.declaredInputs),ar(t.outputs,r.outputs),k(r)&&r.data.animation){const V=t.data;V.animation=(V.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let d=0;d<s.length;d++){const v=s[d];v&&v.ngInherit&&v(t),v===o&&(e=!1)}}n=Object.getPrototypeOf(n)}!function a(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Nt(r.hostAttrs,e=Nt(e,r.hostAttrs))}}(i)}function c(t){return t===Xr?{}:t===sn?[]:t}function u(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function h(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,s)=>{n(i,r,s),e(i,r,s)}:n}function g(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}function X(t){return!!ne(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ne(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function _e(t,n,e){return t[n]=e}function Ve(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Te(t,n,e,i){const r=Ve(t,n,e);return Ve(t,n+1,i)||r}function ze(t,n,e,i){const r=pt();return Ve(r,rc(),n)&&(fn(),pi(q(),r,t,n,e,i)),ze}function et(t,n,e,i){return Ve(t,rc(),e)?n+x1(e)+i:$1}function lt(t,n,e,i,r,s){const v=Te(t,function ga(){return s1.lFrame.bindingIndex}(),e,r);return qa(2),v?n+x1(e)+i+x1(r)+s:$1}function xt(t,n,e,i,r,s,d,v){const C=pt(),S=fn(),V=t+Cn,F=S.firstCreatePass?function Bn(t,n,e,i,r,s,d,v,C){const S=n.consts,V=al(n,t,4,d||null,zi(S,v));Vu(n,e,V,zi(S,C)),Se(n,V);const F=V.tView=Eu(2,V,i,r,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,S);return null!==n.queries&&(n.queries.template(n,V),F.queries=n.queries.embeddedTView(V)),V}(V,S,C,n,e,i,r,s,d):S.data[V];Vr(F,!1);const Z=C[P1].createComment("");m0(S,C,Z,F),O2(Z,C),H0(C,C[V]=Tu(Z,C,Z,F)),H(F)&&Au(S,C,F),null!=d&&g8(C,F,v)}function vn(t){return _2(function Kl(){return s1.lFrame.contextLView}(),Cn+t)}function Ye(t,n,e){const i=pt();return Ve(i,rc(),n)&&Ir(fn(),q(),i,t,n,i[P1],e,!1),Ye}function B2(t,n,e,i,r){const d=r?"class":"style";a3(t,e,n.inputs[d],d,i)}function de(t,n,e,i){const r=pt(),s=fn(),d=Cn+t,v=r[P1],C=s.firstCreatePass?function Sn(t,n,e,i,r,s){const d=n.consts,C=al(n,t,2,i,zi(d,r));return Vu(n,e,C,zi(d,s)),null!==C.attrs&&cl(C,C.attrs,!1),null!==C.mergedAttrs&&cl(C,C.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,C),C}(d,s,r,n,e,i):s.data[d],S=r[d]=Wc(v,n,function ve(){return s1.lFrame.currentNamespace}()),V=H(C);return Vr(C,!0),xs(v,S,C),32!=(32&C.flags)&&m0(s,r,S,C),0===function x6(){return s1.lFrame.elementDepthCount}()&&O2(S,r),function R3(){s1.lFrame.elementDepthCount++}(),V&&(Au(s,r,C),m8(s,C,r)),null!==i&&g8(r,C),de}function he(){let t=v2();T4()?H4():(t=t.parent,Vr(t,!1));const n=t;!function P3(){s1.lFrame.elementDepthCount--}();const e=fn();return e.firstCreatePass&&(Se(e,t),fs(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function dt(t){return 0!=(8&t.flags)}(n)&&B2(e,n,pt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kt(t){return 0!=(16&t.flags)}(n)&&B2(e,n,pt(),n.stylesWithoutHost,!1),he}function nt(t,n,e,i){return de(t,n,e,i),he(),nt}function Rn(t,n,e){const i=pt(),r=fn(),s=t+Cn,d=r.firstCreatePass?function Xn(t,n,e,i,r){const s=n.consts,d=zi(s,i),v=al(n,t,8,"ng-container",d);return null!==d&&cl(v,d,!0),Vu(n,e,v,zi(s,r)),null!==n.queries&&n.queries.elementStart(n,v),v}(s,r,i,n,e):r.data[s];Vr(d,!0);const v=i[s]=i[P1].createComment("");return m0(r,i,v,d),O2(v,i),H(d)&&(Au(r,i,d),m8(r,d,i)),null!=e&&g8(i,d),Rn}function q1(){let t=v2();const n=fn();return T4()?H4():(t=t.parent,Vr(t,!1)),n.firstCreatePass&&(Se(n,t),fs(t)&&n.queries.elementEnd(t)),q1}function Ln(t,n,e){return Rn(t,n,e),q1(),Ln}function u2(){return pt()}function C2(t){return!!t&&"function"==typeof t.then}const Li=function Q2(t){return!!t&&"function"==typeof t.subscribe};function jt(t,n,e,i){const r=pt(),s=fn(),d=v2();return ul(s,r,r[P1],d,t,n,i),jt}function No(t,n){const e=v2(),i=pt(),r=fn();return ul(r,i,R0(f(r.data),e,i),e,t,n),No}function ul(t,n,e,i,r,s,d){const v=H(i),S=t.firstCreatePass&&qf(t),V=n[r2],F=$f(n);let Z=!0;if(3&i.type||d){const xe=Ui(i,n),Me=d?d(xe):xe,He=F.length,ut=d?St=>d(g2(St[i.index])):i.index;let $e=null;if(!d&&v&&($e=function ll(t,n,e,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const d=r[s];if(d===e&&r[s+1]===i){const v=n[us],C=r[s+2];return v.length>C?v[C]:null}"string"==typeof d&&(s+=2)}return null}(t,n,r,i.index)),null!==$e)($e.__ngLastListenerFn__||$e).__ngNextListenerFn__=s,$e.__ngLastListenerFn__=s,Z=!1;else{s=Pu(i,n,V,s,!1);const St=e.listen(Me,r,s);F.push(s,St),S&&S.push(r,ut,He,He+1)}}else s=Pu(i,n,V,s,!1);const K=i.outputs;let le;if(Z&&null!==K&&(le=K[r])){const xe=le.length;if(xe)for(let Me=0;Me<xe;Me+=2){const z1=n[le[Me]][le[Me+1]].subscribe(s),J1=F.length;F.push(s,z1),S&&S.push(r,i.index,J1,-(J1+1))}}}function dl(t,n,e,i){try{return ur(6,n,e),!1!==e(i)}catch(r){return Wf(t,r),!1}finally{ur(7,n,e)}}function Pu(t,n,e,i,r){return function s(d){if(d===Function)return i;k0(t.componentOffset>-1?dr(t.index,n):n);let C=dl(n,e,i,d),S=s.__ngNextListenerFn__;for(;S;)C=dl(n,e,S,d)&&C,S=S.__ngNextListenerFn__;return r&&!1===C&&(d.preventDefault(),d.returnValue=!1),C}}function w1(t=1){return function Q(t){return(s1.lFrame.contextLView=function te(t,n){for(;t>0;)n=n[ja],t--;return n}(t,s1.lFrame.contextLView))[r2]}(t)}function eh(t,n){let e=null;const i=function Um(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const s=n[r];if("*"!==s){if(null===i?A0(t,s,!0):jm(i,s))return r}else e=r}return e}function mr(t){const n=pt()[P2][l2];if(!n.projection){const i=n.projection=r0(t?t.length:1,null),r=i.slice();let s=n.child;for(;null!==s;){const d=t?eh(s,t):0;null!==d&&(r[d]?r[d].projectionNext=s:i[d]=s,r[d]=s),s=s.next}}}function jn(t,n=0,e){const i=pt(),r=fn(),s=al(r,Cn+t,16,null,e||null);null===s.projection&&(s.projection=n),H4(),32!=(32&s.flags)&&function mm(t,n,e){Ud(n[P1],0,n,e,j5(t,e,n),Xc(e.parent||n[l2],e,n))}(r,i,s)}function $i(t,n,e){return S8(t,"",n,"",e),$i}function S8(t,n,e,i,r){const s=pt(),d=et(s,n,e,i);return d!==$1&&Ir(fn(),q(),s,t,d,s[P1],r,!1),S8}function c3(t,n){return t<<17|n<<2}function As(t){return t>>17&32767}function ug(t){return 2|t}function P0(t){return(131068&t)>>2}function dg(t,n){return-131069&t|n<<2}function fg(t){return 1|t}function Kb(t,n,e,i,r){const s=t[e+1],d=null===n;let v=i?As(s):P0(s),C=!1;for(;0!==v&&(!1===C||d);){const V=t[v+1];ZB(t[v],n)&&(C=!0,t[v+1]=i?fg(V):ug(V)),v=i?As(V):P0(V)}C&&(t[e+1]=i?ug(s):fg(s))}function ZB(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&R4(t,n)>=0}const qi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Qb(t){return t.substring(qi.key,qi.keyEnd)}function YB(t){return t.substring(qi.value,qi.valueEnd)}function Jb(t,n){const e=qi.textEnd;return e===n?-1:(n=qi.keyEnd=function QB(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,qi.key=n,e),V8(t,n,e))}function eC(t,n){const e=qi.textEnd;let i=qi.key=V8(t,n,e);return e===i?-1:(i=qi.keyEnd=function JB(t,n,e){let i;for(;n<e&&(45===(i=t.charCodeAt(n))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)n++;return n}(t,i,e),i=nC(t,i,e),i=qi.value=V8(t,i,e),i=qi.valueEnd=function eU(t,n,e){let i=-1,r=-1,s=-1,d=n,v=d;for(;d<e;){const C=t.charCodeAt(d++);if(59===C)return v;34===C||39===C?v=d=iC(t,C,d,e):n===d-4&&85===s&&82===r&&76===i&&40===C?v=d=iC(t,41,d,e):C>32&&(v=d),s=r,r=i,i=-33&C}return v}(t,i,e),nC(t,i,e))}function tC(t){qi.key=0,qi.keyEnd=0,qi.value=0,qi.valueEnd=0,qi.textEnd=t.length}function V8(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function nC(t,n,e,i){return(n=V8(t,n,e))<e&&n++,n}function iC(t,n,e,i){let r=-1,s=e;for(;s<i;){const d=t.charCodeAt(s++);if(d==n&&92!==r)return s;r=92==d&&92===r?0:d}throw new Error}function fc(t,n,e){return pc(t,n,e,!1),fc}function $n(t,n){return pc(t,n,null,!0),$n}function tU(t,n){for(let e=function KB(t){return tC(t),eC(t,V8(t,0,qi.textEnd))}(n);e>=0;e=eC(n,e))oC(t,Qb(n),YB(n))}function l3(t,n){for(let e=function XB(t){return tC(t),Jb(t,V8(t,0,qi.textEnd))}(n);e>=0;e=Jb(n,e))x2(t,Qb(n),!0)}function pc(t,n,e,i){const r=pt(),s=fn(),d=qa(2);s.firstUpdatePass&&aC(s,t,d,i),n!==$1&&Ve(r,d,n)&&sC(s,s.data[J()],r,r[P1],t,r[d+1]=function lU(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=mn(xa(t)))),t}(n,e),i,d)}function mc(t,n,e,i){const r=fn(),s=qa(2);r.firstUpdatePass&&aC(r,null,s,i);const d=pt();if(e!==$1&&Ve(d,s,e)){const v=r.data[J()];if(lC(v,i)&&!rC(r,s)){let C=i?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(e=C1(C,e||"")),B2(r,v,d,e,i)}else!function cU(t,n,e,i,r,s,d,v){r===$1&&(r=sn);let C=0,S=0,V=0<r.length?r[0]:null,F=0<s.length?s[0]:null;for(;null!==V||null!==F;){const Z=C<r.length?r[C+1]:void 0,K=S<s.length?s[S+1]:void 0;let xe,le=null;V===F?(C+=2,S+=2,Z!==K&&(le=F,xe=K)):null===F||null!==V&&V<F?(C+=2,le=V):(S+=2,le=F,xe=K),null!==le&&sC(t,n,e,i,le,xe,d,v),V=C<r.length?r[C]:null,F=S<s.length?s[S]:null}}(r,v,d,d[P1],d[s+1],d[s+1]=function sU(t,n,e){if(null==e||""===e)return sn;const i=[],r=xa(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,s)}}function rC(t,n){return n>=t.expandoStartIndex}function aC(t,n,e,i){const r=t.data;if(null===r[e+1]){const s=r[J()],d=rC(t,e);lC(s,i)&&null===n&&!d&&(n=!1),n=function iU(t,n,e,i){const r=f(t);let s=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=Fu(e=hg(null,t,n,e,i),n.attrs,i),s=null);else{const d=n.directiveStylingLast;if(-1===d||t[d]!==r)if(e=hg(r,t,n,e,i),null===s){let C=function rU(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==P0(i))return t[As(i)]}(t,n,i);void 0!==C&&Array.isArray(C)&&(C=hg(null,t,n,C[1],i),C=Fu(C,n.attrs,i),function aU(t,n,e,i){t[As(e?n.classBindings:n.styleBindings)]=i}(t,n,i,C))}else s=function oU(t,n,e){let i;const r=n.directiveEnd;for(let s=1+n.directiveStylingLast;s<r;s++)i=Fu(i,t[s].hostAttrs,e);return Fu(i,n.attrs,e)}(t,n,i)}return void 0!==s&&(i?n.residualClasses=s:n.residualStyles=s),e}(r,s,n,i),function qB(t,n,e,i,r,s){let d=s?n.classBindings:n.styleBindings,v=As(d),C=P0(d);t[i]=e;let V,S=!1;if(Array.isArray(e)?(V=e[1],(null===V||R4(e,V)>0)&&(S=!0)):V=e,r)if(0!==C){const Z=As(t[v+1]);t[i+1]=c3(Z,v),0!==Z&&(t[Z+1]=dg(t[Z+1],i)),t[v+1]=function e4(t,n){return 131071&t|n<<17}(t[v+1],i)}else t[i+1]=c3(v,0),0!==v&&(t[v+1]=dg(t[v+1],i)),v=i;else t[i+1]=c3(C,0),0===v?v=i:t[C+1]=dg(t[C+1],i),C=i;S&&(t[i+1]=ug(t[i+1])),Kb(t,V,i,!0),Kb(t,V,i,!1),function WB(t,n,e,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof n&&R4(s,n)>=0&&(e[i+1]=fg(e[i+1]))}(n,V,t,i,s),d=c3(v,C),s?n.classBindings=d:n.styleBindings=d}(r,s,n,e,d,i)}}function hg(t,n,e,i,r){let s=null;const d=e.directiveEnd;let v=e.directiveStylingLast;for(-1===v?v=e.directiveStart:v++;v<d&&(s=n[v],i=Fu(i,s.hostAttrs,r),s!==t);)v++;return null!==t&&(e.directiveStylingLast=v),i}function Fu(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let s=0;s<n.length;s++){const d=n[s];"number"==typeof d?r=d:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),x2(t,d,!!e||n[++s]))}return void 0===t?null:t}function oC(t,n,e){x2(t,n,xa(e))}function sC(t,n,e,i,r,s,d,v){if(!(3&n.type))return;const C=t.data,S=C[v+1],V=function $B(t){return 1==(1&t)}(S)?cC(C,n,e,r,P0(S),d):void 0;ih(V)||(ih(s)||function nh(t){return 2==(2&t)}(S)&&(s=cC(C,null,e,r,v,d)),function Gd(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let s=-1===i.indexOf("-")?void 0:Ei.DashCase;null==r?t.removeStyle(e,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ei.Important),t.setStyle(e,i,r,s))}}(i,d,H3(J(),e),r,s))}function cC(t,n,e,i,r,s){const d=null===n;let v;for(;r>0;){const C=t[r],S=Array.isArray(C),V=S?C[1]:C,F=null===V;let Z=e[r+1];Z===$1&&(Z=F?sn:void 0);let K=F?E5(Z,i):V===i?Z:void 0;if(S&&!ih(K)&&(K=E5(C,i)),ih(K)&&(v=K,d))return v;const le=t[r+1];r=d?As(le):P0(le)}if(null!==n){let C=s?n.residualClasses:n.residualStyles;null!=C&&(v=E5(C,i))}return v}function ih(t){return void 0!==t}function lC(t,n){return 0!=(t.flags&(n?8:16))}function Ue(t,n=""){const e=pt(),i=fn(),r=t+Cn,s=i.firstCreatePass?al(i,r,1,n,null):i.data[r],d=e[r]=function N6(t,n){return t.createText(n)}(e[P1],n);m0(i,e,d,s),Vr(s,!1)}function Wi(t){return J2("",t,""),Wi}function J2(t,n,e){const i=pt(),r=et(i,t,n,e);return r!==$1&&Fo(i,J(),r),J2}function pg(t,n,e,i,r){const s=pt(),d=lt(s,t,n,e,i,r);return d!==$1&&Fo(s,J(),d),pg}function fl(t,n,e){const i=pt();return Ve(i,rc(),n)&&Ir(fn(),q(),i,t,n,i[P1],e,!0),fl}function mg(t,n,e){const i=pt();if(Ve(i,rc(),n)){const s=fn(),d=q();Ir(s,d,i,t,n,R0(f(s.data),d,i),e,!0)}return mg}const T8="en-US";let EC=T8;function vg(t,n,e,i,r){if(t=Jt(t),Array.isArray(t))for(let s=0;s<t.length;s++)vg(t[s],n,e,i,r);else{const s=fn(),d=pt();let v=ko(t)?t:Jt(t.provide),C=cu(t);const S=v2(),V=1048575&S.providerIndexes,F=S.directiveStart,Z=S.providerIndexes>>20;if(ko(t)||!t.multi){const K=new at(C,r,W),le=xg(v,n,r?V:V+Z,F);-1===le?(gs(En(S,d),s,v),yg(s,t,n.length),n.push(v),S.directiveStart++,S.directiveEnd++,r&&(S.providerIndexes+=1048576),e.push(K),d.push(K)):(e[le]=K,d[le]=K)}else{const K=xg(v,n,V+Z,F),le=xg(v,n,V,V+Z),Me=le>=0&&e[le];if(r&&!Me||!r&&!(K>=0&&e[K])){gs(En(S,d),s,v);const He=function Sj(t,n,e,i,r){const s=new at(t,e,W);return s.multi=[],s.index=n,s.componentProviders=0,ew(s,r,i&&!e),s}(r?zj:Mj,e.length,r,i,C);!r&&Me&&(e[le].providerFactory=He),yg(s,t,n.length,0),n.push(v),S.directiveStart++,S.directiveEnd++,r&&(S.providerIndexes+=1048576),e.push(He),d.push(He)}else yg(s,t,K>-1?K:le,ew(e[r?le:K],C,!r&&i));!r&&i&&Me&&e[le].componentProviders++}}}function yg(t,n,e,i){const r=ko(n),s=function ff(t){return!!t.useClass}(n);if(r||s){const C=(s?Jt(n.useClass):n).prototype.ngOnDestroy;if(C){const S=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const V=S.indexOf(e);-1===V?S.push(e,[i,C]):S[V+1].push(i,C)}else S.push(e,C)}}}function ew(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function xg(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function Mj(t,n,e,i){return bg(this.multi,[])}function zj(t,n,e,i){const r=this.multi;let s;if(this.providerFactory){const d=this.providerFactory.componentProviders,v=ac(e,e[Rt],this.providerFactory.index,i);s=v.slice(0,d),bg(r,s);for(let C=d;C<v.length;C++)s.push(v[C])}else s=[],bg(r,s);return s}function bg(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function D1(t,n=[]){return e=>{e.providersResolver=(i,r)=>function wj(t,n,e){const i=fn();if(i.firstCreatePass){const r=k(t);vg(e,i.data,i.blueprint,r,!0),vg(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class H8{}class tw{}class nw extends H8{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new io(this);const i=R2(n);this._bootstrapComponents=lc(i.bootstrap),this._r3Injector=xu(n,e,[{provide:H8,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],mn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Cg extends tw{constructor(n){super(),this.moduleType=n}create(n){return new nw(this.moduleType,n)}}class Aj extends H8{constructor(n,e,i){super(),this.componentFactoryResolver=new io(this),this.instance=null;const r=new hf([...n,{provide:H8,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],e||i8(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function ch(t,n,e=null){return new Aj(t,n,e).injector}let Ej=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const i=au(0,e.type),r=i.length>0?ch([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,r)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=st({token:t,providedIn:"environment",factory:()=>new t(Re(bs))}),t})();function wg(t){t.getStandaloneInjector=n=>n.get(Ej).getOrCreateStandaloneInjector(t)}function Gu(t,n){const e=t[n];return e===$1?void 0:e}function dw(t,n,e,i,r,s,d){const v=n+e;return Te(t,v,r,s)?_e(t,v+2,d?i.call(d,r,s):i(r,s)):Gu(t,v+2)}function N0(t,n){const e=fn();let i;const r=t+Cn;e.firstCreatePass?(i=function Wj(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const s=i.factory||(i.factory=hs(i.type)),d=si(W);try{const v=fr(!1),C=s();return fr(v),function Un(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,pt(),r,C),C}finally{si(d)}}function k8(t,n,e){const i=t+Cn,r=pt(),s=_2(r,i);return $u(r,i)?function uw(t,n,e,i,r,s){const d=n+e;return Ve(t,d,r)?_e(t,d+1,s?i.call(s,r):i(r)):Gu(t,d+1)}(r,Si(),n,s.transform,e,s):s.transform(e)}function $u(t,n){return t[Rt].data[n].pure}function zg(t){return n=>{setTimeout(t,void 0,n)}}const Gt=class Kj extends Qt{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){let r=n,s=e||(()=>null),d=i;if(n&&"object"==typeof n){const C=n;r=C.next?.bind(C),s=C.error?.bind(C),d=C.complete?.bind(C)}this.__isAsync&&(s=zg(s),r&&(r=zg(r)),d&&(d=zg(d)));const v=super.subscribe({next:r,error:s,complete:d});return n instanceof Ze&&n.add(v),v}};function Qj(){return this._results[Symbol.iterator]()}class qu{get changes(){return this._changes||(this._changes=new Gt)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=qu.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=Qj)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=function di(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Ao(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=n[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gr=(()=>{class t{}return t.__NG_ELEMENT_ID__=tG,t})();const Jj=gr,eG=class extends Jj{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n,e){const i=this._declarationTContainer.tView,r=Q3(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null,e||null);r[wo]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[F2];return null!==d&&(r[F2]=d.createEmbeddedView(i)),Du(i,r,n),new J3(r)}};function tG(){return lh(v2(),pt())}function lh(t,n){return 4&t.type?new eG(n,t,el(t,n)):null}let Zi=(()=>{class t{}return t.__NG_ELEMENT_ID__=nG,t})();function nG(){return vw(v2(),pt())}const iG=Zi,gw=class extends iG{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return el(this._hostTNode,this._hostLView)}get injector(){return new U3(this._hostTNode,this._hostLView)}get parentInjector(){const n=Wa(this._hostTNode,this._hostLView);if(_n(n)){const e=a2(n,this._hostLView),i=Mn(n);return new U3(e[Rt].data[i+8],e)}return new U3(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=_w(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-N2}createEmbeddedView(n,e,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const d=n.createEmbeddedView(e||{},s);return this.insert(d,r),d}createComponent(n,e,i,r,s){const d=n&&!function _a(t){return"function"==typeof t}(n);let v;if(d)v=e;else{const F=e||{};v=F.index,i=F.injector,r=F.projectableNodes,s=F.environmentInjector||F.ngModuleRef}const C=d?n:new uc(dn(n)),S=i||this.parentInjector;if(!s&&null==C.ngModule){const Z=(d?S:this.parentInjector).get(bs,null);Z&&(s=Z)}const V=C.create(S,r,void 0,s);return this.insert(V.hostView,v),V}insert(n,e){const i=n._lView,r=i[Rt];if(function y6(t){return lr(t[Wn])}(i)){const V=this.indexOf(n);if(-1!==V)this.detach(V);else{const F=i[Wn],Z=new gw(F,F[l2],F[Wn]);Z.detach(Z.indexOf(n))}}const s=this._adjustIndex(e),d=this._lContainer;!function B5(t,n,e,i){const r=N2+i,s=e.length;i>0&&(e[r-1][wi]=n),i<s-N2?(n[wi]=e[r],Bc(e,N2+i,n)):(e.push(n),n[wi]=null),n[Wn]=e;const d=n[wo];null!==d&&e!==d&&function kd(t,n){const e=t[ds];n[P2]!==n[Wn][Wn][P2]&&(t[Mi]=!0),null===e?t[ds]=[n]:e.push(n)}(d,n);const v=n[F2];null!==v&&v.insertView(t),n[g1]|=64}(r,i,d,s);const v=$5(s,d),C=i[P1],S=h0(C,d[_1]);return null!==S&&function Hd(t,n,e,i,r,s){i[Ar]=r,i[l2]=n,U4(t,i,e,1,r,s)}(r,d[l2],C,i,S,v),n.attachToViewContainerRef(),Bc(Sg(d),s,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=_w(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=To(this._lContainer,e);i&&(S6(Sg(this._lContainer),e),Zc(i[Rt],i))}detach(n){const e=this._adjustIndex(n,-1),i=To(this._lContainer,e);return i&&null!=S6(Sg(this._lContainer),e)?new J3(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function _w(t){return t[zo]}function Sg(t){return t[zo]||(t[zo]=[])}function vw(t,n){let e;const i=n[t.index];if(lr(i))e=i;else{let r;if(8&t.type)r=g2(i);else{const s=n[P1];r=s.createComment("");const d=Ui(t,n);Yc(s,h0(s,d),r,function Nd(t,n){return t.nextSibling(n)}(s,d),!1)}n[t.index]=e=Tu(i,n,r,t),H0(n,e)}return new gw(e,t,n)}class Dg{constructor(n){this.queryList=n,this.matches=null}clone(){return new Dg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ag{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){const d=e.getByIndex(s);r.push(this.queries[d.indexInDeclarationView].clone())}return new Ag(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==ww(n,e).matches&&this.queries[e].setDirty()}}class yw{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class Eg{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,s=this.getByIndex(i).embeddedTView(n,r);s&&(s.indexInDeclarationView=i,null!==e?e.push(s):e=[s])}return null!==e?new Eg(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Vg{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new Vg(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(n,e,rG(e,s)),this.matchTNodeWithReadOption(n,e,e0(e,n,s,!1,!1))}else i===gr?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,e0(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ot||r===Zi||r===gr&&4&e.type)this.addMatch(e.index,-2);else{const s=e0(e,n,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function rG(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function oG(t,n,e,i){return-1===e?function aG(t,n){return 11&t.type?el(t,n):4&t.type?lh(t,n):null}(n,t):-2===e?function sG(t,n,e){return e===Ot?el(n,t):e===gr?lh(n,t):e===Zi?vw(n,t):void 0}(t,n,i):ac(t,t[Rt],e,n)}function xw(t,n,e,i){const r=n[F2].queries[i];if(null===r.matches){const s=t.data,d=e.matches,v=[];for(let C=0;C<d.length;C+=2){const S=d[C];v.push(S<0?null:oG(n,s[S],d[C+1],e.metadata.read))}r.matches=v}return r.matches}function Lg(t,n,e,i){const r=t.queries.getByIndex(e),s=r.matches;if(null!==s){const d=xw(t,n,r,e);for(let v=0;v<s.length;v+=2){const C=s[v];if(C>0)i.push(d[v/2]);else{const S=s[v+1],V=n[-C];for(let F=N2;F<V.length;F++){const Z=V[F];Z[wo]===Z[Wn]&&Lg(Z[Rt],Z,S,i)}if(null!==V[ds]){const F=V[ds];for(let Z=0;Z<F.length;Z++){const K=F[Z];Lg(K[Rt],K,S,i)}}}}}return i}function V1(t){const n=pt(),e=fn(),i=_();x(i+1);const r=ww(e,i);if(t.dirty&&function v6(t){return 4==(4&t[g1])}(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?Lg(e,n,i,[]):xw(e,n,r,i);t.reset(s,C0),t.notifyOnChanges()}return!0}return!1}function Kn(t,n,e){const i=fn();i.firstCreatePass&&(Cw(i,new yw(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),bw(i,pt(),n)}function mi(t,n,e,i){const r=fn();if(r.firstCreatePass){const s=v2();Cw(r,new yw(n,e,i),s.index),function lG(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}bw(r,pt(),e)}function L1(){return function cG(t,n){return t[F2].queries[n].queryList}(pt(),_())}function bw(t,n,e){const i=new qu(4==(4&e));T0(t,n,i,i.destroy),null===n[F2]&&(n[F2]=new Ag),n[F2].queries.push(new Dg(i))}function Cw(t,n,e){null===t.queries&&(t.queries=new Eg),t.queries.track(new Vg(n,e))}function ww(t,n){return t.queries.getByIndex(n)}function Tg(t,n){return lh(t,n)}function dh(...t){}const fh=new vt("Application Initializer");let hh=(()=>{class t{constructor(e){this.appInits=e,this.resolve=dh,this.reject=dh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(C2(s))e.push(s);else if(Li(s)){const d=new Promise((v,C)=>{s.subscribe({complete:v,error:C})});e.push(d)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Re(fh,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Zu=new vt("AppId",{providedIn:"root",factory:function Bw(){return`${Fg()}${Fg()}${Fg()}`}});function Fg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Uw=new vt("Platform Initializer"),Es=new vt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),t4=new vt("AnimationModuleType");let EG=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const u3=new vt("LocaleId",{providedIn:"root",factory:()=>o1(u3,t1.Optional|t1.SkipSelf)||function VG(){return typeof $localize<"u"&&$localize.locale||T8}()});class TG{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let jw=(()=>{class t{compileModuleSync(e){return new Cg(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),s=lc(R2(e).declarations).reduce((d,v)=>{const C=dn(v);return C&&d.push(new uc(C)),d},[]);return new TG(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const IG=(()=>Promise.resolve(0))();function Ng(t){typeof Zone>"u"?IG.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class f1{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gt(!1),this.onMicrotaskEmpty=new Gt(!1),this.onStable=new Gt(!1),this.onError=new Gt(!1),typeof Zone>"u")throw new rt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function RG(){let t=Hn.requestAnimationFrame,n=Hn.cancelAnimationFrame;if(typeof Zone<"u"&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function NG(t){const n=()=>{!function FG(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Hn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Bg(t),t.isCheckStableRunning=!0,Og(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Bg(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,s,d,v)=>{try{return qw(t),e.invokeTask(r,s,d,v)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&n(),Ww(t)}},onInvoke:(e,i,r,s,d,v,C)=>{try{return qw(t),e.invoke(r,s,d,v,C)}finally{t.shouldCoalesceRunChangeDetection&&n(),Ww(t)}},onHasTask:(e,i,r,s)=>{e.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Bg(t),Og(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,i,r,s)=>(e.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!f1.isInAngularZone())throw new rt(909,!1)}static assertNotInAngularZone(){if(f1.isInAngularZone())throw new rt(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const s=this._inner,d=s.scheduleEventTask("NgZoneEvent: "+r,n,PG,dh,dh);try{return s.runTask(d,e,i)}finally{s.cancelTask(d)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const PG={};function Og(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Bg(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function qw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ww(t){t._nesting--,Og(t)}class OG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gt,this.onMicrotaskEmpty=new Gt,this.onStable=new Gt,this.onError=new Gt}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}const Zw=new vt(""),ph=new vt("");let Gg,Ug=(()=>{class t{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Gg||(function BG(t){Gg=t}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{f1.assertNotInAngularZone(),Ng(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ng(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==s),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Re(f1),Re(jg),Re(ph))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),jg=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Gg?.findTestabilityInTree(this,e,i)??null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const n4=!1;let hl=null;const Yw=new vt("AllowMultipleToken"),$g=new vt("PlatformDestroyListeners"),qg=new vt("appBootstrapListener");class Xw{constructor(n,e){this.name=n,this.token=e}}function Qw(t,n,e=[]){const i=`Platform: ${n}`,r=new vt(i);return(s=[])=>{let d=Wg();if(!d||d.injector.get(Yw,!1)){const v=[...e,...s,{provide:r,useValue:!0}];t?t(v):function GG(t){if(hl&&!hl.get(Yw,!1))throw new rt(400,!1);hl=t;const n=t.get(eM);(function Kw(t){const n=t.get(Uw,null);n&&n.forEach(e=>e())})(t)}(function Jw(t=[],n){return kr.create({name:n,providers:[{provide:t8,useValue:"platform"},{provide:$g,useValue:new Set([()=>hl=null])},...t]})}(v,i))}return function qG(t){const n=Wg();if(!n)throw new rt(401,!1);return n}()}}function Wg(){return hl?.get(eM)??null}let eM=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function nM(t,n){let e;return e="noop"===t?new OG:("zone.js"===t?void 0:t)||new f1(n),e}(i?.ngZone,function tM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:f1,useValue:r}];return r.run(()=>{const d=kr.create({providers:s,parent:this.injector,name:e.moduleType.name}),v=e.create(d),C=v.injector.get(Ro,null);if(!C)throw new rt(402,!1);return r.runOutsideAngular(()=>{const S=r.onError.subscribe({next:V=>{C.handleError(V)}});v.onDestroy(()=>{mh(this._modules,v),S.unsubscribe()})}),function iM(t,n,e){try{const i=e();return C2(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(C,r,()=>{const S=v.injector.get(hh);return S.runInitializers(),S.donePromise.then(()=>(function VC(t){D2(t,"Expected localeId to be defined"),"string"==typeof t&&(EC=t.toLowerCase().replace(/_/g,"-"))}(v.injector.get(u3,T8)||T8),this._moduleDoBootstrap(v),v))})})}bootstrapModule(e,i=[]){const r=rM({},i);return function UG(t,n,e){const i=new Cg(e);return Promise.resolve(i)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const i=e.injector.get(P8);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new rt(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new rt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get($g,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Re(kr))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function rM(t,n){return Array.isArray(n)?n.reduce(rM,t):{...t,...n}}let P8=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,i,r){this._zone=e,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new l1(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),d=new l1(v=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{f1.assertNotInAngularZone(),Ng(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{f1.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=W2(s,d.pipe(function yt(t={}){const{connector:n=(()=>new Qt),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let d,v,C,S=0,V=!1,F=!1;const Z=()=>{v?.unsubscribe(),v=void 0},K=()=>{Z(),d=C=void 0,V=F=!1},le=()=>{const xe=d;K(),xe?.unsubscribe()};return rn((xe,Me)=>{S++,!F&&!V&&Z();const He=C=C??n();Me.add(()=>{S--,0===S&&!F&&!V&&(v=S1(le,r))}),He.subscribe(Me),!d&&S>0&&(d=new Ur({next:ut=>He.next(ut),error:ut=>{F=!0,Z(),v=S1(K,e,ut),He.error(ut)},complete:()=>{V=!0,Z(),v=S1(K,i),He.complete()}}),$(xe).subscribe(d))})(s)}}()))}bootstrap(e,i){const r=e instanceof uu;if(!this._injector.get(hh).done){!r&&function bo(t){const n=dn(t)||k2(t)||I2(t);return null!==n&&n.standalone}(e);throw new rt(405,n4)}let d;d=r?e:this._injector.get(Cs).resolveComponentFactory(e),this.componentTypes.push(d.componentType);const v=function jG(t){return t.isBoundToModule}(d)?void 0:this._injector.get(H8),S=d.create(kr.NULL,[],i||d.selector,v),V=S.location.nativeElement,F=S.injector.get(Zw,null);return F?.registerApplication(V),S.onDestroy(()=>{this.detachView(S.hostView),mh(this.components,S),F?.unregisterApplication(V)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new rt(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;mh(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(qg,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>mh(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new rt(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(e){return new(e||t)(Re(f1),Re(bs),Re(Ro))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function mh(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let Fr=(()=>{class t{}return t.__NG_ELEMENT_ID__=ZG,t})();function ZG(t){return function YG(t,n,e){if(ma(t)&&!e){const i=dr(t.index,n);return new J3(i,i)}return 47&t.type?new J3(n[P2],n):null}(v2(),pt(),16==(16&t))}class lM{constructor(){}supports(n){return X(n)}create(n){return new t$(n)}}const e$=(t,n)=>n;class t${constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||e$}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){const d=!i||e&&e.currentIndex<dM(i,r,s)?e:i,v=dM(d,r,s),C=d.currentIndex;if(d===i)r--,i=i._nextRemoved;else if(e=e._next,null==d.previousIndex)r++;else{s||(s=[]);const S=v-r,V=C-r;if(S!=V){for(let Z=0;Z<S;Z++){const K=Z<s.length?s[Z]:s[Z]=0,le=K+Z;V<=le&&le<S&&(s[Z]=K+1)}s[d.previousIndex]=V-S}}v!==C&&n(d,v,C)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!X(n))throw new rt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,s,d,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let v=0;v<this.length;v++)s=n[v],d=this._trackByFn(v,s),null!==e&&Object.is(e.trackById,d)?(i&&(e=this._verifyReinsertion(e,s,d,v)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,d,v),i=!0),e=e._next}else r=0,function pe(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,v=>{d=this._trackByFn(r,v),null!==e&&Object.is(e.trackById,d)?(i&&(e=this._verifyReinsertion(e,v,d,r)),Object.is(e.item,v)||this._addIdentityChange(e,v)):(e=this._mismatch(e,v,d,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let s;return null===n?s=this._itTail:(s=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,s,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,s,r)):n=this._addAfter(new n$(e,i),s,r),n}_verifyReinsertion(n,e,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?n=this._reinsertAfter(s,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,s=n._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new uM),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uM),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class n${constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class i${constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class uM{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new i$,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dM(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class fM{constructor(){}supports(n){return n instanceof Map||ne(n)}create(){return new r$}}class r${constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||ne(n)))throw new rt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const s=r._prev,d=r._next;return s&&(s._next=d),d&&(d._prev=s),r._next=null,r._prev=null,r}const i=new a$(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class a${constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hM(){return new d3([new lM])}let d3=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||hM()),deps:[[t,new Vo,new Hr]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new rt(901,!1)}}return t.\u0275prov=st({token:t,providedIn:"root",factory:hM}),t})();function pM(){return new B0([new fM])}let B0=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||pM()),deps:[[t,new Vo,new Hr]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new rt(901,!1)}}return t.\u0275prov=st({token:t,providedIn:"root",factory:pM}),t})();const c$=Qw(null,"core",[]);let l$=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Re(P8))},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({}),t})();function F8(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Qg=null;function i4(){return Qg}class f${}const Y1=new vt("DocumentToken");let Jg=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:function(){return function h$(){return Re(mM)}()},providedIn:"platform"}),t})();const p$=new vt("Location Initialized");let mM=(()=>{class t extends Jg{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return i4().getBaseHref(this._doc)}onPopState(e){const i=i4().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=i4().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){gM()?this._history.pushState(e,i,r):this._location.hash=r}replaceState(e,i,r){gM()?this._history.replaceState(e,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1))},t.\u0275prov=st({token:t,factory:function(){return function m$(){return new mM(Re(Y1))}()},providedIn:"platform"}),t})();function gM(){return!!window.history.pushState}function e_(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function _M(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function r4(t){return t&&"?"!==t[0]?"?"+t:t}let U0=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:function(){return o1(yM)},providedIn:"root"}),t})();const vM=new vt("appBaseHref");let yM=(()=>{class t extends U0{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??o1(Y1).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return e_(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+r4(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const d=this.prepareExternalUrl(r+r4(s));this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){const d=this.prepareExternalUrl(r+r4(s));this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(Re(Jg),Re(vM,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),g$=(()=>{class t extends U0{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=e_(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let d=this.prepareExternalUrl(r+r4(s));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){let d=this.prepareExternalUrl(r+r4(s));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(Re(Jg),Re(vM,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),vh=(()=>{class t{constructor(e){this._subject=new Gt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function y$(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(_M(xM(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+r4(i))}normalize(e){return t.stripTrailingSlash(function v$(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,xM(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+r4(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+r4(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return t.normalizeQueryParams=r4,t.joinWithSlash=e_,t.stripTrailingSlash=_M,t.\u0275fac=function(e){return new(e||t)(Re(U0))},t.\u0275prov=st({token:t,factory:function(){return function _$(){return new vh(Re(U0))}()},providedIn:"root"}),t})();function xM(t){return t.replace(/\/index.html$/,"")}function EM(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(s)}return null}const u_=/\s+/,VM=[];let j0=(()=>{class t{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=VM,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(u_):VM}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(u_):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,Boolean(e[i]));this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(u_).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(W(d3),W(B0),W(Ot),W(to))},t.\u0275dir=je({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class iq{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pl=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,d)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new iq(r.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)i.remove(null===s?void 0:s);else if(null!==s){const v=i.get(s);i.move(v,d),HM(v,r)}});for(let r=0,s=i.length;r<s;r++){const v=i.get(r).context;v.index=r,v.count=s,v.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{HM(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(W(Zi),W(gr),W(d3))},t.\u0275dir=je({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function HM(t,n){t.context.$implicit=n.item}let G0=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new aq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){kM("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){kM("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(W(Zi),W(gr))},t.\u0275dir=je({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class aq{constructor(){this.$implicit=null,this.ngIf=null}}function kM(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${mn(n)}'.`)}class d_{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let N8=(()=>{class t{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),t})(),Ah=(()=>{class t{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new d_(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(W(Zi),W(gr),W(N8,9))},t.\u0275dir=je({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),t})(),IM=(()=>{class t{constructor(e,i,r){r._addDefault(new d_(e,i))}}return t.\u0275fac=function(e){return new(e||t)(W(Zi),W(gr),W(N8,9))},t.\u0275dir=je({type:t,selectors:[["","ngSwitchDefault",""]],standalone:!0}),t})(),PM=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:d}=this;this._viewRef=i.createEmbeddedView(r,s,d?{injector:d}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(W(Zi))},t.\u0275dir=je({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[wn]}),t})();let h_=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw function vc(t,n){return new rt(2100,!1)}();return e.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=H2({name:"uppercase",type:t,pure:!0,standalone:!0}),t})(),ml=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({}),t})();const NM="browser",Aq="server";function $0(t){return t===NM}function O8(t){return t===Aq}let Lq=(()=>{class t{}return t.\u0275prov=st({token:t,providedIn:"root",factory:()=>new Tq(Re(Y1),window)}),t})();class Tq{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function Hq(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const d=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(d)return d}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=OM(this.window.history)||OM(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function OM(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class BM{}class oW extends f${constructor(){super(...arguments),this.supportsDOMEvents=!0}}class v_ extends oW{static makeCurrent(){!function d$(t){Qg||(Qg=t)}(new v_)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function sW(){return Qu=Qu||document.querySelector("base"),Qu?Qu.getAttribute("href"):null}();return null==e?null:function cW(t){Lh=Lh||document.createElement("a"),Lh.setAttribute("href",t);const n=Lh.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){Qu=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return EM(document.cookie,n)}}let Lh,Qu=null;const qM=new vt("TRANSITION_ID"),uW=[{provide:fh,useFactory:function lW(t,n,e){return()=>{e.get(hh).donePromise.then(()=>{const i=i4(),r=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[qM,Y1,kr],multi:!0}];let fW=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const Th=new vt("EventManagerPlugins");let Hh=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const d=r[s];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Re(Th),Re(f1))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();class WM{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const r=i4().getGlobalEventTarget(this._doc,n);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let ZM=(()=>{class t{constructor(){this.usageCount=new Map}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,i){const r=this.usageCount;let s=r.get(e)??0;return s+=i,s>0?r.set(e,s):r.delete(e),s}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),Ju=(()=>{class t extends ZM{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.forEach(s=>s.remove()),i.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,i){const r=this.doc.createElement("style");r.textContent=i,e.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const y_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},x_=/%COMP%/g,KM=new vt("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function QM(t,n){return n.flat(100).map(e=>e.replace(x_,t))}function JM(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let kh=(()=>{class t{constructor(e,i,r,s){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new b_(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(e,i);return r instanceof nz?r.applyToHost(e):r instanceof C_&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const d=this.eventManager,v=this.sharedStylesHost,C=this.removeStylesOnCompDestory;switch(i.encapsulation){case cr.Emulated:s=new nz(d,v,i,this.appId,C);break;case cr.ShadowDom:return new yW(d,v,e,i);default:s=new C_(d,v,i,C)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Re(Hh),Re(Ju),Re(Zu),Re(KM))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();class b_{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(y_[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){(tz(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(tz(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const s=y_[r];s?n.setAttributeNS(s,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=y_[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(Ei.DashCase|Ei.Important)?n.style.setProperty(e,i,r&Ei.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Ei.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,JM(i)):this.eventManager.addEventListener(n,e,JM(i))}}function tz(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class yW extends b_{constructor(n,e,i,r){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=QM(r.id,r.styles);for(const d of s){const v=document.createElement("style");v.textContent=d,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class C_ extends b_{constructor(n,e,i,r,s=i.id){super(n),this.sharedStylesHost=e,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=QM(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class nz extends C_{constructor(n,e,i,r,s){const d=r+"-"+i.id;super(n,e,i,s,d),this.contentAttr=function gW(t){return"_ngcontent-%COMP%".replace(x_,t)}(d),this.hostAttr=function _W(t){return"_nghost-%COMP%".replace(x_,t)}(d)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let xW=(()=>{class t extends WM{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const iz=["alt","control","meta","shift"],bW={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CW={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let wW=(()=>{class t extends WM{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const s=t.parseEventName(i),d=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>i4().onAndCancel(e,s.domEventName,d))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(i.pop());let d="",v=i.indexOf("code");if(v>-1&&(i.splice(v,1),d="code."),iz.forEach(S=>{const V=i.indexOf(S);V>-1&&(i.splice(V,1),d+=S+".")}),d+=s,0!=i.length||0===s.length)return null;const C={};return C.domEventName=r,C.fullKey=d,C}static matchEventFullKeyCode(e,i){let r=bW[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),iz.forEach(d=>{d!==r&&(0,CW[d])(e)&&(s+=d+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{t.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const DW=Qw(c$,"browser",[{provide:Es,useValue:NM},{provide:Uw,useValue:function MW(){v_.makeCurrent()},multi:!0},{provide:Y1,useFactory:function SW(){return function qd(t){G4=t}(document),document},deps:[]}]),oz=new vt(""),sz=[{provide:ph,useClass:class dW{addToWindow(n){Hn.getAngularTestability=(i,r=!0)=>{const s=n.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Hn.getAllAngularTestabilities=()=>n.getAllTestabilities(),Hn.getAllAngularRootElements=()=>n.getAllRootElements(),Hn.frameworkStabilizers||(Hn.frameworkStabilizers=[]),Hn.frameworkStabilizers.push(i=>{const r=Hn.getAllAngularTestabilities();let s=r.length,d=!1;const v=function(C){d=d||C,s--,0==s&&i(d)};r.forEach(function(C){C.whenStable(v)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?i4().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:Zw,useClass:Ug,deps:[f1,jg,ph]},{provide:Ug,useClass:Ug,deps:[f1,jg,ph]}],cz=[{provide:t8,useValue:"root"},{provide:Ro,useFactory:function zW(){return new Ro},deps:[]},{provide:Th,useClass:xW,multi:!0,deps:[Y1,f1,Es]},{provide:Th,useClass:wW,multi:!0,deps:[Y1]},{provide:kh,useClass:kh,deps:[Hh,Ju,Zu,KM]},{provide:w0,useExisting:kh},{provide:ZM,useExisting:Ju},{provide:Ju,useClass:Ju,deps:[Y1]},{provide:Hh,useClass:Hh,deps:[Th,f1]},{provide:BM,useClass:fW,deps:[]},[]];let lz=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:Zu,useValue:e.appId},{provide:qM,useExisting:Zu},uW]}}}return t.\u0275fac=function(e){return new(e||t)(Re(oz,12))},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:[...cz,...sz],imports:[ml,l$]}),t})(),uz=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1))},t.\u0275prov=st({token:t,factory:function(e){let i=null;return i=e?new e:function EW(){return new uz(Re(Y1))}(),i},providedIn:"root"}),t})();typeof window<"u"&&window;let Ih=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:function(e){let i=null;return i=e?new(e||t):Re(hz),i},providedIn:"root"}),t})(),hz=(()=>{class t extends Ih{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case Yn.NONE:return i;case Yn.HTML:return In(i,"HTML")?xa(i):rf(this._doc,String(i)).toString();case Yn.STYLE:return In(i,"Style")?xa(i):i;case Yn.SCRIPT:if(In(i,"Script"))return xa(i);throw new Error("unsafe value used in a script context");case Yn.URL:return In(i,"URL")?xa(i):y0(String(i));case Yn.RESOURCE_URL:if(In(i,"ResourceURL"))return xa(i);throw new Error(`unsafe value used in a resource URL context (see ${p2})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${p2})`)}}bypassSecurityTrustHtml(e){return function Xd(t){return new vm(t)}(e)}bypassSecurityTrustStyle(e){return function $6(t){return new ym(t)}(e)}bypassSecurityTrustScript(e){return function q6(t){return new Y5(t)}(e)}bypassSecurityTrustUrl(e){return function _0(t){return new xm(t)}(e)}bypassSecurityTrustResourceUrl(e){return function Kd(t){return new $4(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1))},t.\u0275prov=st({token:t,factory:function(e){let i=null;return i=e?new e:function kW(t){return new hz(t.get(Y1))}(Re(kr)),i},providedIn:"root"}),t})();function r1(...t){return e2(t,tn(t))}class ao extends Qt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}const Rh=Ke(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:IW}=Array,{getPrototypeOf:RW,prototype:PW,keys:FW}=Object;function pz(t){if(1===t.length){const n=t[0];if(IW(n))return{args:n,keys:null};if(function NW(t){return t&&"object"==typeof t&&RW(t)===PW}(n)){const e=FW(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:OW}=Array;function z_(t){return h1(n=>function BW(t,n){return OW(n)?t(...n):t(n)}(t,n))}function mz(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function S_(...t){const n=tn(t),e=qt(t),{args:i,keys:r}=pz(t);if(0===i.length)return e2([],n);const s=new l1(function UW(t,n,e=xi){return i=>{gz(n,()=>{const{length:r}=t,s=new Array(r);let d=r,v=r;for(let C=0;C<r;C++)gz(n,()=>{const S=e2(t[C],n);let V=!1;S.subscribe(R1(i,F=>{s[C]=F,V||(V=!0,v--),v||i.next(e(s.slice()))},()=>{--d||i.complete()}))},i)},i)}}(i,n,r?d=>mz(r,d):xi));return e?s.pipe(z_(e)):s}function gz(t,n,e){t?tt(e,t,n):n()}function Ph(...t){return function jW(){return Lt(1)}()(e2(t,tn(t)))}function D_(t){return new l1(n=>{$(t()).subscribe(n)})}function e7(t,n){const e=k1(t)?t:()=>t,i=r=>r.error(e());return new l1(n?r=>n.schedule(i,0,r):i)}function A_(){return rn((t,n)=>{let e=null;t._refCount++;const i=R1(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class E_ extends l1{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,wr(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Ze;const e=this.getSubject();n.add(this.source.subscribe(R1(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Ze.EMPTY)}return n}refCount(){return A_()(this)}}function Ts(t,n){return rn((e,i)=>{let r=null,s=0,d=!1;const v=()=>d&&!r&&i.complete();e.subscribe(R1(i,C=>{r?.unsubscribe();let S=0;const V=s++;$(t(C,V)).subscribe(r=R1(i,F=>i.next(n?n(C,F,V,S++):F),()=>{r=null,v()}))},()=>{d=!0,v()}))})}function aa(t){return t<=0?()=>Dt:rn((n,e)=>{let i=0;n.subscribe(R1(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function _l(...t){const n=tn(t);return rn((e,i)=>{(n?Ph(t,e,n):Ph(t,e)).subscribe(i)})}function Xi(t,n){return rn((e,i)=>{let r=0;e.subscribe(R1(i,s=>t.call(n,s,r++)&&i.next(s)))})}function Fh(t){return rn((n,e)=>{let i=!1;n.subscribe(R1(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function _z(t=GW){return rn((n,e)=>{let i=!1;n.subscribe(R1(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function GW(){return new Rh}function vl(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Xi((r,s)=>t(r,s,i)):xi,aa(1),e?Fh(n):_z(()=>new Rh))}function yl(t,n){return k1(n)?Je(t,n,1):Je(t,1)}function _r(t,n,e){const i=k1(t)||n||e?{next:t,error:n,complete:e}:t;return i?rn((r,s)=>{var d;null===(d=i.subscribe)||void 0===d||d.call(i);let v=!0;r.subscribe(R1(s,C=>{var S;null===(S=i.next)||void 0===S||S.call(i,C),s.next(C)},()=>{var C;v=!1,null===(C=i.complete)||void 0===C||C.call(i),s.complete()},C=>{var S;v=!1,null===(S=i.error)||void 0===S||S.call(i,C),s.error(C)},()=>{var C,S;v&&(null===(C=i.unsubscribe)||void 0===C||C.call(i)),null===(S=i.finalize)||void 0===S||S.call(i)}))}):xi}function xl(t){return rn((n,e)=>{let s,i=null,r=!1;i=n.subscribe(R1(e,void 0,void 0,d=>{s=$(t(d,xl(t)(n))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function vz(t,n){return rn(function $W(t,n,e,i,r){return(s,d)=>{let v=e,C=n,S=0;s.subscribe(R1(d,V=>{const F=S++;C=v?t(C,V,F):(v=!0,V),i&&d.next(C)},r&&(()=>{v&&d.next(C),d.complete()})))}}(t,n,arguments.length>=2,!0))}function V_(t){return t<=0?()=>Dt:rn((n,e)=>{let i=[];n.subscribe(R1(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function yz(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Xi((r,s)=>t(r,s,i)):xi,V_(1),e?Fh(n):_z(()=>new Rh))}function xz(t,n=!1){return rn((e,i)=>{let r=0;e.subscribe(R1(i,s=>{const d=t(s,r++);(d||n)&&i.next(s),!d&&i.complete()}))})}function L_(t){return rn((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}const Q1="primary",t7=Symbol("RouteTitle");class WW{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function B8(t){return new WW(t)}function ZW(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const d=i[s],v=t[s];if(d.startsWith(":"))r[d.substring(1)]=v;else if(d!==v.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function f3(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!bz(t[r],n[r]))return!1;return!0}function bz(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,s)=>i[s]===r)}return t===n}function Cz(t){return Array.prototype.concat.apply([],t)}function wz(t){return t.length>0?t[t.length-1]:null}function Nr(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function bl(t){return Li(t)?t:C2(t)?e2(Promise.resolve(t)):r1(t)}const Nh=!1,XW={exact:function Sz(t,n,e){if(!q0(t.segments,n.segments)||!Oh(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!Sz(t.children[i],n.children[i],e))return!1;return!0},subset:Dz},Mz={exact:function KW(t,n){return f3(t,n)},subset:function QW(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>bz(t[e],n[e]))},ignored:()=>!0};function zz(t,n,e){return XW[e.paths](t.root,n.root,e.matrixParams)&&Mz[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function Dz(t,n,e){return Az(t,n,n.segments,e)}function Az(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!q0(r,e)||n.hasChildren()||!Oh(r,e,i))}if(t.segments.length===e.length){if(!q0(t.segments,e)||!Oh(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!Dz(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),s=e.slice(t.segments.length);return!!(q0(t.segments,r)&&Oh(t.segments,r,i)&&t.children[Q1])&&Az(t.children[Q1],n,s,i)}}function Oh(t,n,e){return n.every((i,r)=>Mz[e](t[r].parameters,i.parameters))}class Cl{constructor(n=new pn([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=B8(this.queryParams)),this._queryParamMap}toString(){return tZ.serialize(this)}}class pn{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Nr(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bh(this)}}class n7{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=B8(this.parameters)),this._parameterMap}toString(){return Lz(this)}}function q0(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let i7=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:function(){return new T_},providedIn:"root"}),t})();class T_{parse(n){const e=new uZ(n);return new Cl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${r7(n.root,!0)}`,i=function rZ(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${Uh(e)}=${Uh(r)}`).join("&"):`${Uh(e)}=${Uh(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function nZ(t){return encodeURI(t)}(n.fragment)}`:""}`}}const tZ=new T_;function Bh(t){return t.segments.map(n=>Lz(n)).join("/")}function r7(t,n){if(!t.hasChildren())return Bh(t);if(n){const e=t.children[Q1]?r7(t.children[Q1],!1):"",i=[];return Nr(t.children,(r,s)=>{s!==Q1&&i.push(`${s}:${r7(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function eZ(t,n){let e=[];return Nr(t.children,(i,r)=>{r===Q1&&(e=e.concat(n(i,r)))}),Nr(t.children,(i,r)=>{r!==Q1&&(e=e.concat(n(i,r)))}),e}(t,(i,r)=>r===Q1?[r7(t.children[Q1],!1)]:[`${r}:${r7(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Q1]?`${Bh(t)}/${e[0]}`:`${Bh(t)}/(${e.join("//")})`}}function Ez(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uh(t){return Ez(t).replace(/%3B/gi,";")}function H_(t){return Ez(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jh(t){return decodeURIComponent(t)}function Vz(t){return jh(t.replace(/\+/g,"%20"))}function Lz(t){return`${H_(t.path)}${function iZ(t){return Object.keys(t).map(n=>`;${H_(n)}=${H_(t[n])}`).join("")}(t.parameters)}`}const aZ=/^[^\/()?;=#]+/;function Gh(t){const n=t.match(aZ);return n?n[0]:""}const oZ=/^[^=?&#]+/,cZ=/^[^&#]+/;class uZ{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[Q1]=new pn(n,e)),i}parseSegment(){const n=Gh(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new rt(4009,Nh);return this.capture(n),new n7(jh(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=Gh(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Gh(this.remaining);r&&(i=r,this.capture(i))}n[jh(e)]=jh(i)}parseQueryParam(n){const e=function sZ(t){const n=t.match(oZ);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const d=function lZ(t){const n=t.match(cZ);return n?n[0]:""}(this.remaining);d&&(i=d,this.capture(i))}const r=Vz(e),s=Vz(i);if(n.hasOwnProperty(r)){let d=n[r];Array.isArray(d)||(d=[d],n[r]=d),d.push(s)}else n[r]=s}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Gh(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new rt(4010,Nh);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=Q1);const d=this.parseChildren();e[s]=1===Object.keys(d).length?d[Q1]:new pn([],d),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new rt(4011,Nh)}}function k_(t){return t.segments.length>0?new pn([],{[Q1]:t}):t}function $h(t){const n={};for(const i of Object.keys(t.children)){const s=$h(t.children[i]);(s.segments.length>0||s.hasChildren())&&(n[i]=s)}return function dZ(t){if(1===t.numberOfChildren&&t.children[Q1]){const n=t.children[Q1];return new pn(t.segments.concat(n.segments),n.children)}return t}(new pn(t.segments,n))}function W0(t){return t instanceof Cl}const I_=!1;function fZ(t,n,e,i,r){if(0===e.length)return U8(n.root,n.root,n.root,i,r);const s=function Rz(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Iz(!0,0,t);let n=0,e=!1;const i=t.reduce((r,s,d)=>{if("object"==typeof s&&null!=s){if(s.outlets){const v={};return Nr(s.outlets,(C,S)=>{v[S]="string"==typeof C?C.split("/"):C}),[...r,{outlets:v}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===d?(s.split("/").forEach((v,C)=>{0==C&&"."===v||(0==C&&""===v?e=!0:".."===v?n++:""!=v&&r.push(v))}),r):[...r,s]},[]);return new Iz(e,n,i)}(e);return s.toRoot()?U8(n.root,n.root,new pn([],{}),i,r):function d(C){const S=function pZ(t,n,e,i){if(t.isAbsolute)return new j8(n.root,!0,0);if(-1===i)return new j8(e,e===n.root,0);return function Pz(t,n,e){let i=t,r=n,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new rt(4005,I_&&"Invalid number of '../'");r=i.segments.length}return new j8(i,!1,r-s)}(e,i+(a7(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,n,t.snapshot?._urlSegment,C),V=S.processChildren?G8(S.segmentGroup,S.index,s.commands):R_(S.segmentGroup,S.index,s.commands);return U8(n.root,S.segmentGroup,V,i,r)}(t.snapshot?._lastPathIndex)}function a7(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function o7(t){return"object"==typeof t&&null!=t&&t.outlets}function U8(t,n,e,i,r){let d,s={};i&&Nr(i,(C,S)=>{s[S]=Array.isArray(C)?C.map(V=>`${V}`):`${C}`}),d=t===n?e:kz(t,n,e);const v=k_($h(d));return new Cl(v,s,r)}function kz(t,n,e){const i={};return Nr(t.children,(r,s)=>{i[s]=r===n?e:kz(r,n,e)}),new pn(t.segments,i)}class Iz{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&a7(i[0]))throw new rt(4003,I_&&"Root segment cannot have matrix parameters");const r=i.find(o7);if(r&&r!==wz(i))throw new rt(4004,I_&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class j8{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function R_(t,n,e){if(t||(t=new pn([],{})),0===t.segments.length&&t.hasChildren())return G8(t,n,e);const i=function gZ(t,n,e){let i=0,r=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return s;const d=t.segments[r],v=e[i];if(o7(v))break;const C=`${v}`,S=i<e.length-1?e[i+1]:null;if(r>0&&void 0===C)break;if(C&&S&&"object"==typeof S&&void 0===S.outlets){if(!Nz(C,S,d))return s;i+=2}else{if(!Nz(C,{},d))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const s=new pn(t.segments.slice(0,i.pathIndex),{});return s.children[Q1]=new pn(t.segments.slice(i.pathIndex),t.children),G8(s,0,r)}return i.match&&0===r.length?new pn(t.segments,{}):i.match&&!t.hasChildren()?P_(t,n,e):i.match?G8(t,0,r):P_(t,n,e)}function G8(t,n,e){if(0===e.length)return new pn(t.segments,{});{const i=function mZ(t){return o7(t[0])?t[0].outlets:{[Q1]:t}}(e),r={};if(!i[Q1]&&t.children[Q1]&&1===t.numberOfChildren&&0===t.children[Q1].segments.length){const s=G8(t.children[Q1],n,e);return new pn(t.segments,s.children)}return Nr(i,(s,d)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[d]=R_(t.children[d],n,s))}),Nr(t.children,(s,d)=>{void 0===i[d]&&(r[d]=s)}),new pn(t.segments,r)}}function P_(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const s=e[r];if(o7(s)){const C=_Z(s.outlets);return new pn(i,C)}if(0===r&&a7(e[0])){i.push(new n7(t.segments[n].path,Fz(e[0]))),r++;continue}const d=o7(s)?s.outlets[Q1]:`${s}`,v=r<e.length-1?e[r+1]:null;d&&v&&a7(v)?(i.push(new n7(d,Fz(v))),r+=2):(i.push(new n7(d,{})),r++)}return new pn(i,{})}function _Z(t){const n={};return Nr(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=P_(new pn([],{}),0,e))}),n}function Fz(t){const n={};return Nr(t,(e,i)=>n[i]=`${e}`),n}function Nz(t,n,e){return t==e.path&&f3(n,e.parameters)}const s7="imperative";class h3{constructor(n,e){this.id=n,this.url=e}}class F_ extends h3{constructor(n,e,i="imperative",r=null){super(n,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Z0 extends h3{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qh extends h3{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wh extends h3{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=16}}class N_ extends h3{constructor(n,e,i,r){super(n,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vZ extends h3{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yZ extends h3{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xZ extends h3{constructor(n,e,i,r,s){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bZ extends h3{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CZ extends h3{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wZ{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MZ{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zZ{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SZ{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DZ{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AZ{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oz{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let LZ=(()=>{class t{createUrlTree(e,i,r,s,d,v){return fZ(e||i.root,r,s,d,v)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),HZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:function(n){return LZ.\u0275fac(n)},providedIn:"root"}),t})();class Bz{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=O_(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=O_(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=B_(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return B_(n,this._root).map(e=>e.value)}}function O_(t,n){if(t===n.value)return n;for(const e of n.children){const i=O_(t,e);if(i)return i}return null}function B_(t,n){if(t===n.value)return[n];for(const e of n.children){const i=B_(t,e);if(i.length)return i.unshift(n),i}return[]}class o4{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function $8(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class Uz extends Bz{constructor(n,e){super(n),this.snapshot=e,U_(this,n)}toString(){return this.snapshot.toString()}}function jz(t,n){const e=function kZ(t,n){const d=new Zh([],{},{},"",{},Q1,n,null,t.root,-1,{});return new $z("",new o4(d,[]))}(t,n),i=new ao([new n7("",{})]),r=new ao({}),s=new ao({}),d=new ao({}),v=new ao(""),C=new wl(i,r,d,v,s,Q1,n,e.root);return C.snapshot=e.root,new Uz(new o4(C,[]),e)}class wl{constructor(n,e,i,r,s,d,v,C){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=d,this.component=v,this.title=this.data?.pipe(h1(S=>S[t7]))??r1(void 0),this._futureSnapshot=C}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(h1(n=>B8(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(h1(n=>B8(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gz(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function IZ(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Zh{get title(){return this.data?.[t7]}constructor(n,e,i,r,s,d,v,C,S,V,F){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=d,this.component=v,this.routeConfig=C,this._urlSegment=S,this._lastPathIndex=V,this._resolve=F}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=B8(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=B8(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $z extends Bz{constructor(n,e){super(e),this.url=n,U_(this,e)}toString(){return qz(this._root)}}function U_(t,n){n.value._routerState=t,n.children.forEach(e=>U_(t,e))}function qz(t){const n=t.children.length>0?` { ${t.children.map(qz).join(", ")} } `:"";return`${t.value}${n}`}function j_(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,f3(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),f3(n.params,e.params)||t.params.next(e.params),function YW(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!f3(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),f3(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function G_(t,n){const e=f3(t.params,n.params)&&function JW(t,n){return q0(t,n)&&t.every((e,i)=>f3(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||G_(t.parent,n.parent))}function c7(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function PZ(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return c7(t,i,r);return c7(t,i)})}(t,n,e);return new o4(i,r)}{if(t.shouldAttach(n.value)){const s=t.retrieve(n.value);if(null!==s){const d=s.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(v=>c7(t,v)),d}}const i=function FZ(t){return new wl(new ao(t.url),new ao(t.params),new ao(t.queryParams),new ao(t.fragment),new ao(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(s=>c7(t,s));return new o4(i,r)}}const $_="ngNavigationCancelingError";function Wz(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=W0(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=Zz(!1,0,n);return r.url=e,r.navigationBehaviorOptions=i,r}function Zz(t,n,e){const i=new Error("NavigationCancelingError: "+(t||""));return i[$_]=!0,i.cancellationCode=n,e&&(i.url=e),i}function Yz(t){return Xz(t)&&W0(t.url)}function Xz(t){return t&&t[$_]}class NZ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new l7,this.attachRef=null}}let l7=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new NZ,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Yh=!1;let Xh=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Q1,this.activateEvents=new Gt,this.deactivateEvents=new Gt,this.attachEvents=new Gt,this.detachEvents=new Gt,this.parentContexts=o1(l7),this.location=o1(Zi),this.changeDetector=o1(Fr),this.environmentInjector=o1(bs)}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new rt(4012,Yh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new rt(4012,Yh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new rt(4012,Yh);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new rt(4013,Yh);this._activatedRoute=e;const r=this.location,d=e.snapshot.component,v=this.parentContexts.getOrCreateContext(this.name).children,C=new OZ(e,v,r.injector);if(i&&function BZ(t){return!!t.resolveComponentFactory}(i)){const S=i.resolveComponentFactory(d);this.activated=r.createComponent(S,r.length,C)}else this.activated=r.createComponent(d,{index:r.length,injector:C,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[wn]}),t})();class OZ{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===wl?this.route:n===l7?this.childContexts:this.parent.get(n,e)}}let q_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["ng-component"]],standalone:!0,features:[wg],decls:1,vars:0,template:function(e,i){1&e&&nt(0,"router-outlet")},dependencies:[Xh],encapsulation:2}),t})();function Kz(t,n){return t.providers&&!t._injector&&(t._injector=ch(t.providers,n,`Route: ${t.path}`)),t._injector??n}function Z_(t){const n=t.children&&t.children.map(Z_),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Q1&&(e.component=q_),e}function Hs(t){return t.outlet||Q1}function Qz(t,n){const e=t.filter(i=>Hs(i)===n);return e.push(...t.filter(i=>Hs(i)!==n)),e}function u7(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class qZ{constructor(n,e,i,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),j_(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=$8(e);n.children.forEach(s=>{const d=s.value.outlet;this.deactivateRoutes(s,r[d],i),delete r[d]}),Nr(r,(s,d)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(n,e,i){const r=n.value,s=e?e.value:null;if(r===s)if(r.component){const d=i.getContext(r.outlet);d&&this.deactivateChildRoutes(n,e,d.children)}else this.deactivateChildRoutes(n,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,s=$8(n);for(const d of Object.keys(s))this.deactivateRouteAndItsChildren(s[d],r);if(i&&i.outlet){const d=i.outlet.detach(),v=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:v})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,s=$8(n);for(const d of Object.keys(s))this.deactivateRouteAndItsChildren(s[d],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const r=$8(e);n.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new AZ(s.value.snapshot))}),n.children.length&&this.forwardEvent(new SZ(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,s=e?e.value:null;if(j_(r),r===s)if(r.component){const d=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,d.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const d=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const v=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),d.children.onOutletReAttached(v.contexts),d.attachRef=v.componentRef,d.route=v.route.value,d.outlet&&d.outlet.attach(v.componentRef,v.route.value),j_(v.route.value),this.activateChildRoutes(n,null,d.children)}else{const v=u7(r.snapshot),C=v?.get(Cs)??null;d.attachRef=null,d.route=r,d.resolver=C,d.injector=v,d.outlet&&d.outlet.activateWith(r,d.injector),this.activateChildRoutes(n,null,d.children)}}else this.activateChildRoutes(n,null,i)}}class Jz{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Kh{constructor(n,e){this.component=n,this.route=e}}function WZ(t,n,e){const i=t._root;return d7(i,n?n._root:null,e,[i.value])}function q8(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||function ns(t){return null!==ts(t)}(t)?n.get(t):t:i}function d7(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=$8(n);return t.children.forEach(d=>{(function YZ(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,d=n?n.value:null,v=e?e.getContext(t.value.outlet):null;if(d&&s.routeConfig===d.routeConfig){const C=function XZ(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!q0(t.url,n.url);case"pathParamsOrQueryParamsChange":return!q0(t.url,n.url)||!f3(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!G_(t,n)||!f3(t.queryParams,n.queryParams);default:return!G_(t,n)}}(d,s,s.routeConfig.runGuardsAndResolvers);C?r.canActivateChecks.push(new Jz(i)):(s.data=d.data,s._resolvedData=d._resolvedData),d7(t,n,s.component?v?v.children:null:e,i,r),C&&v&&v.outlet&&v.outlet.isActivated&&r.canDeactivateChecks.push(new Kh(v.outlet.component,d))}else d&&f7(n,v,r),r.canActivateChecks.push(new Jz(i)),d7(t,null,s.component?v?v.children:null:e,i,r)})(d,s[d.value.outlet],e,i.concat([d.value]),r),delete s[d.value.outlet]}),Nr(s,(d,v)=>f7(d,e.getContext(v),r)),r}function f7(t,n,e){const i=$8(t),r=t.value;Nr(i,(s,d)=>{f7(s,r.component?n?n.children.getContext(d):null:n,e)}),e.canDeactivateChecks.push(new Kh(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}function h7(t){return"function"==typeof t}function Y_(t){return t instanceof Rh||"EmptyError"===t?.name}const Qh=Symbol("INITIAL_VALUE");function W8(){return Ts(t=>S_(t.map(n=>n.pipe(aa(1),_l(Qh)))).pipe(h1(n=>{for(const e of n)if(!0!==e){if(e===Qh)return Qh;if(!1===e||e instanceof Cl)return e}return!0}),Xi(n=>n!==Qh),aa(1)))}function eS(t){return function Cr(...t){return Ni(t)}(_r(n=>{if(W0(n))throw Wz(0,n)}),h1(n=>!0===n))}const X_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tS(t,n,e,i,r){const s=K_(t,n,e);return s.matched?function hY(t,n,e,i){const r=n.canMatch;return r&&0!==r.length?r1(r.map(d=>{const v=q8(d,t);return bl(function nY(t){return t&&h7(t.canMatch)}(v)?v.canMatch(n,e):t.runInContext(()=>v(n,e)))})).pipe(W8(),eS()):r1(!0)}(i=Kz(n,i),n,e).pipe(h1(d=>!0===d?s:{...X_})):r1(s)}function K_(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...X_}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(n.matcher||ZW)(e,t,n);if(!r)return{...X_};const s={};Nr(r.posParams,(v,C)=>{s[C]=v.path});const d=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:d,positionalParamSegments:r.posParams??{}}}function Jh(t,n,e,i){if(e.length>0&&function gY(t,n,e){return e.some(i=>e9(t,n,i)&&Hs(i)!==Q1)}(t,e,i)){const s=new pn(n,function mY(t,n,e,i){const r={};r[Q1]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const s of e)if(""===s.path&&Hs(s)!==Q1){const d=new pn([],{});d._sourceSegment=t,d._segmentIndexShift=n.length,r[Hs(s)]=d}return r}(t,n,i,new pn(e,t.children)));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function _Y(t,n,e){return e.some(i=>e9(t,n,i))}(t,e,i)){const s=new pn(t.segments,function pY(t,n,e,i,r){const s={};for(const d of i)if(e9(t,e,d)&&!r[Hs(d)]){const v=new pn([],{});v._sourceSegment=t,v._segmentIndexShift=n.length,s[Hs(d)]=v}return{...r,...s}}(t,n,e,i,t.children));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:e}}const r=new pn(t.segments,t.children);return r._sourceSegment=t,r._segmentIndexShift=n.length,{segmentGroup:r,slicedSegments:e}}function e9(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function nS(t,n,e,i){return!!(Hs(t)===i||i!==Q1&&e9(n,e,t))&&("**"===t.path||K_(n,t,e).matched)}function iS(t,n,e){return 0===n.length&&!t.children[e]}const t9=!1;class n9{constructor(n){this.segmentGroup=n||null}}class rS{constructor(n){this.urlTree=n}}function p7(t){return e7(new n9(t))}function aS(t){return e7(new rS(t))}class bY{constructor(n,e,i,r,s){this.injector=n,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const n=Jh(this.urlTree.root,[],[],this.config).segmentGroup,e=new pn(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,e,Q1).pipe(h1(s=>this.createUrlTree($h(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xl(s=>{if(s instanceof rS)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof n9?this.noMatchError(s):s}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,Q1).pipe(h1(r=>this.createUrlTree($h(r),n.queryParams,n.fragment))).pipe(xl(r=>{throw r instanceof n9?this.noMatchError(r):r}))}noMatchError(n){return new rt(4002,t9)}createUrlTree(n,e,i){const r=k_(n);return new Cl(r,e,i)}expandSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(h1(s=>new pn([],s))):this.expandSegment(n,i,e,i.segments,r,!0)}expandChildren(n,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return e2(r).pipe(yl(s=>{const d=i.children[s],v=Qz(e,s);return this.expandSegmentGroup(n,v,d,s).pipe(h1(C=>({segment:C,outlet:s})))}),vz((s,d)=>(s[d.outlet]=d.segment,s),{}),yz())}expandSegment(n,e,i,r,s,d){return e2(i).pipe(yl(v=>this.expandSegmentAgainstRoute(n,e,i,v,r,s,d).pipe(xl(S=>{if(S instanceof n9)return r1(null);throw S}))),vl(v=>!!v),xl((v,C)=>{if(Y_(v))return iS(e,r,s)?r1(new pn([],{})):p7(e);throw v}))}expandSegmentAgainstRoute(n,e,i,r,s,d,v){return nS(r,e,s,d)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,e,r,s,d):v&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,r,s,d):p7(e):p7(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,s,d){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,d):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,s,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?aS(s):this.lineralizeSegments(i,s).pipe(Je(d=>{const v=new pn(d,{});return this.expandSegment(n,v,e,d,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,s,d){const{matched:v,consumedSegments:C,remainingSegments:S,positionalParamSegments:V}=K_(e,r,s);if(!v)return p7(e);const F=this.applyRedirectCommands(C,r.redirectTo,V);return r.redirectTo.startsWith("/")?aS(F):this.lineralizeSegments(r,F).pipe(Je(Z=>this.expandSegment(n,e,i,Z.concat(S),d,!1)))}matchSegmentAgainstRoute(n,e,i,r,s){return"**"===i.path?(n=Kz(i,n),i.loadChildren?(i._loadedRoutes?r1({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(n,i)).pipe(h1(v=>(i._loadedRoutes=v.routes,i._loadedInjector=v.injector,new pn(r,{})))):r1(new pn(r,{}))):tS(e,i,r,n).pipe(Ts(({matched:d,consumedSegments:v,remainingSegments:C})=>d?this.getChildConfig(n=i._injector??n,i,r).pipe(Je(V=>{const F=V.injector??n,Z=V.routes,{segmentGroup:K,slicedSegments:le}=Jh(e,v,C,Z),xe=new pn(K.segments,K.children);if(0===le.length&&xe.hasChildren())return this.expandChildren(F,Z,xe).pipe(h1($e=>new pn(v,$e)));if(0===Z.length&&0===le.length)return r1(new pn(v,{}));const Me=Hs(i)===s;return this.expandSegment(F,xe,Z,le,Me?Q1:s,!0).pipe(h1(ut=>new pn(v.concat(ut.segments),ut.children)))})):p7(e)))}getChildConfig(n,e,i){return e.children?r1({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?r1({routes:e._loadedRoutes,injector:e._loadedInjector}):function fY(t,n,e,i){const r=n.canLoad;return void 0===r||0===r.length?r1(!0):r1(r.map(d=>{const v=q8(d,t);return bl(function QZ(t){return t&&h7(t.canLoad)}(v)?v.canLoad(n,e):t.runInContext(()=>v(n,e)))})).pipe(W8(),eS())}(n,e,i).pipe(Je(r=>r?this.configLoader.loadChildren(n,e).pipe(_r(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function yY(t){return e7(Zz(t9,3))}())):r1({routes:[],injector:n})}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return r1(i);if(r.numberOfChildren>1||!r.children[Q1])return n.redirectTo,e7(new rt(4e3,t9));r=r.children[Q1]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreateUrlTree(n,e,i,r){const s=this.createSegmentGroup(n,e.root,i,r);return new Cl(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Nr(n,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const v=r.substring(1);i[s]=e[v]}else i[s]=r}),i}createSegmentGroup(n,e,i,r){const s=this.createSegments(n,e.segments,i,r);let d={};return Nr(e.children,(v,C)=>{d[C]=this.createSegmentGroup(n,v,i,r)}),new pn(s,d)}createSegments(n,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,r):this.findOrReturn(s,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new rt(4001,t9);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}class wY{}class SY{constructor(n,e,i,r,s,d,v){this.injector=n,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=d,this.urlSerializer=v}recognize(){const n=Jh(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,Q1).pipe(h1(e=>{if(null===e)return null;const i=new Zh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Q1,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new o4(i,e),s=new $z(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(n){const e=n.value,i=Gz(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i):this.processSegment(n,e,i,i.segments,r)}processChildren(n,e,i){return e2(Object.keys(i.children)).pipe(yl(r=>{const s=i.children[r],d=Qz(e,r);return this.processSegmentGroup(n,d,s,r)}),vz((r,s)=>r&&s?(r.push(...s),r):null),xz(r=>null!==r),Fh(null),yz(),h1(r=>{if(null===r)return null;const s=sS(r);return function DY(t){t.sort((n,e)=>n.value.outlet===Q1?-1:e.value.outlet===Q1?1:n.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(n,e,i,r,s){return e2(e).pipe(yl(d=>this.processSegmentAgainstRoute(d._injector??n,d,i,r,s)),vl(d=>!!d),xl(d=>{if(Y_(d))return iS(i,r,s)?r1([]):r1(null);throw d}))}processSegmentAgainstRoute(n,e,i,r,s){if(e.redirectTo||!nS(e,i,r,s))return r1(null);let d;if("**"===e.path){const v=r.length>0?wz(r).parameters:{},C=lS(i)+r.length;d=r1({snapshot:new Zh(r,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uS(e),Hs(e),e.component??e._loadedComponent??null,e,cS(i),C,dS(e)),consumedSegments:[],remainingSegments:[]})}else d=tS(i,e,r,n).pipe(h1(({matched:v,consumedSegments:C,remainingSegments:S,parameters:V})=>{if(!v)return null;const F=lS(i)+C.length;return{snapshot:new Zh(C,V,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uS(e),Hs(e),e.component??e._loadedComponent??null,e,cS(i),F,dS(e)),consumedSegments:C,remainingSegments:S}}));return d.pipe(Ts(v=>{if(null===v)return r1(null);const{snapshot:C,consumedSegments:S,remainingSegments:V}=v;n=e._injector??n;const F=e._loadedInjector??n,Z=function AY(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:K,slicedSegments:le}=Jh(i,S,V,Z.filter(Me=>void 0===Me.redirectTo));if(0===le.length&&K.hasChildren())return this.processChildren(F,Z,K).pipe(h1(Me=>null===Me?null:[new o4(C,Me)]));if(0===Z.length&&0===le.length)return r1([new o4(C,[])]);const xe=Hs(e)===s;return this.processSegment(F,Z,K,le,xe?Q1:s).pipe(h1(Me=>null===Me?null:[new o4(C,Me)]))}))}}function EY(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function sS(t){const n=[],e=new Set;for(const i of t){if(!EY(i)){n.push(i);continue}const r=n.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=sS(i.children);n.push(new o4(i.value,r))}return n.filter(i=>!e.has(i))}function cS(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function lS(t){let n=t,e=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift??0;return e-1}function uS(t){return t.data||{}}function dS(t){return t.resolve||{}}function fS(t){return"string"==typeof t.title||null===t.title}function Q_(t){return Ts(n=>{const e=t(n);return e?e2(e).pipe(h1(()=>n)):r1(n)})}const Z8=new vt("ROUTES");let J_=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=o1(jw)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return r1(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=bl(e.loadComponent()).pipe(h1(pS),_r(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),L_(()=>{this.componentLoaders.delete(e)})),r=new E_(i,()=>new Qt).pipe(A_());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return r1({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(h1(v=>{this.onLoadEndListener&&this.onLoadEndListener(i);let C,S,V=!1;Array.isArray(v)?S=v:(C=v.create(e).injector,S=Cz(C.get(Z8,[],t1.Self|t1.Optional)));return{routes:S.map(Z_),injector:C}}),L_(()=>{this.childrenLoaders.delete(i)})),d=new E_(s,()=>new Qt).pipe(A_());return this.childrenLoaders.set(i,d),d}loadModuleFactoryOrRoutes(e){return bl(e()).pipe(h1(pS),Je(i=>i instanceof tw||Array.isArray(i)?r1(i):e2(this.compiler.compileModuleAsync(i))))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function pS(t){return function PY(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let r9=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Qt,this.configLoader=o1(J_),this.environmentInjector=o1(bs),this.urlSerializer=o1(i7),this.rootContexts=o1(l7),this.navigationId=0,this.afterPreactivation=()=>r1(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new MZ(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new wZ(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new ao({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:s7,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xi(i=>0!==i.id),h1(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),Ts(i=>{let r=!1,s=!1;return r1(i).pipe(_r(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ts(d=>{const v=e.browserUrlTree.toString(),C=!e.navigated||d.extractedUrl.toString()!==v||v!==e.currentUrlTree.toString();if(!C&&"reload"!==(d.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const V="";return this.events.next(new Wh(d.id,e.serializeUrl(i.rawUrl),V,0)),e.rawUrlTree=d.rawUrl,d.resolve(null),Dt}if(e.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return mS(d.source)&&(e.browserUrlTree=d.extractedUrl),r1(d).pipe(Ts(V=>{const F=this.transitions?.getValue();return this.events.next(new F_(V.id,this.urlSerializer.serialize(V.extractedUrl),V.source,V.restoredState)),F!==this.transitions?.getValue()?Dt:Promise.resolve(V)}),function CY(t,n,e,i){return Ts(r=>function xY(t,n,e,i,r){return new bY(t,n,e,i,r).apply()}(t,n,e,r.extractedUrl,i).pipe(h1(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),_r(V=>{this.currentNavigation={...this.currentNavigation,finalUrl:V.urlAfterRedirects},i.urlAfterRedirects=V.urlAfterRedirects}),function LY(t,n,e,i,r){return Je(s=>function zY(t,n,e,i,r,s,d="emptyOnly"){return new SY(t,n,e,i,r,d,s).recognize().pipe(Ts(v=>null===v?function MY(t){return new l1(n=>n.error(t))}(new wY):r1(v)))}(t,n,e,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(h1(d=>({...s,targetSnapshot:d}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),_r(V=>{if(i.targetSnapshot=V.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!V.extras.skipLocationChange){const Z=e.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl);e.setBrowserUrl(Z,V)}e.browserUrlTree=V.urlAfterRedirects}const F=new vZ(V.id,this.urlSerializer.serialize(V.extractedUrl),this.urlSerializer.serialize(V.urlAfterRedirects),V.targetSnapshot);this.events.next(F)}));if(C&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:V,extractedUrl:F,source:Z,restoredState:K,extras:le}=d,xe=new F_(V,this.urlSerializer.serialize(F),Z,K);this.events.next(xe);const Me=jz(F,this.rootComponentType).snapshot;return r1(i={...d,targetSnapshot:Me,urlAfterRedirects:F,extras:{...le,skipLocationChange:!1,replaceUrl:!1}})}{const V="";return this.events.next(new Wh(d.id,e.serializeUrl(i.extractedUrl),V,1)),e.rawUrlTree=d.rawUrl,d.resolve(null),Dt}}),_r(d=>{const v=new yZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(v)}),h1(d=>i={...d,guards:WZ(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function rY(t,n){return Je(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:d}}=e;return 0===d.length&&0===s.length?r1({...e,guardsResult:!0}):function aY(t,n,e,i){return e2(t).pipe(Je(r=>function dY(t,n,e,i,r){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return s&&0!==s.length?r1(s.map(v=>{const C=u7(n)??r,S=q8(v,C);return bl(function tY(t){return t&&h7(t.canDeactivate)}(S)?S.canDeactivate(t,n,e,i):C.runInContext(()=>S(t,n,e,i))).pipe(vl())})).pipe(W8()):r1(!0)}(r.component,r.route,e,n,i)),vl(r=>!0!==r,!0))}(d,i,r,t).pipe(Je(v=>v&&function KZ(t){return"boolean"==typeof t}(v)?function oY(t,n,e,i){return e2(n).pipe(yl(r=>Ph(function cY(t,n){return null!==t&&n&&n(new zZ(t)),r1(!0)}(r.route.parent,i),function sY(t,n){return null!==t&&n&&n(new DZ(t)),r1(!0)}(r.route,i),function uY(t,n,e){const i=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(d=>function ZZ(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(d)).filter(d=>null!==d).map(d=>D_(()=>r1(d.guards.map(C=>{const S=u7(d.node)??e,V=q8(C,S);return bl(function eY(t){return t&&h7(t.canActivateChild)}(V)?V.canActivateChild(i,t):S.runInContext(()=>V(i,t))).pipe(vl())})).pipe(W8())));return r1(s).pipe(W8())}(t,r.path,e),function lY(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return r1(!0);const r=i.map(s=>D_(()=>{const d=u7(n)??e,v=q8(s,d);return bl(function JZ(t){return t&&h7(t.canActivate)}(v)?v.canActivate(n,t):d.runInContext(()=>v(n,t))).pipe(vl())}));return r1(r).pipe(W8())}(t,r.route,e))),vl(r=>!0!==r,!0))}(i,s,t,n):r1(v)),h1(v=>({...e,guardsResult:v})))})}(this.environmentInjector,d=>this.events.next(d)),_r(d=>{if(i.guardsResult=d.guardsResult,W0(d.guardsResult))throw Wz(0,d.guardsResult);const v=new xZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(v)}),Xi(d=>!!d.guardsResult||(e.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),Q_(d=>{if(d.guards.canActivateChecks.length)return r1(d).pipe(_r(v=>{const C=new bZ(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(C)}),Ts(v=>{let C=!1;return r1(v).pipe(function TY(t,n){return Je(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return r1(e);let s=0;return e2(r).pipe(yl(d=>function HY(t,n,e,i){const r=t.routeConfig,s=t._resolve;return void 0!==r?.title&&!fS(r)&&(s[t7]=r.title),function kY(t,n,e,i){const r=function IY(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return r1({});const s={};return e2(r).pipe(Je(d=>function RY(t,n,e,i){const r=u7(n)??i,s=q8(t,r);return bl(s.resolve?s.resolve(n,e):r.runInContext(()=>s(n,e)))}(t[d],n,e,i).pipe(vl(),_r(v=>{s[d]=v}))),V_(1),function qW(t){return h1(()=>t)}(s),xl(d=>Y_(d)?Dt:e7(d)))}(s,t,n,i).pipe(h1(d=>(t._resolvedData=d,t.data=Gz(t,e).resolve,r&&fS(r)&&(t.data[t7]=r.title),null)))}(d.route,i,t,n)),_r(()=>s++),V_(1),Je(d=>s===r.length?r1(e):Dt))})}(e.paramsInheritanceStrategy,this.environmentInjector),_r({next:()=>C=!0,complete:()=>{C||(e.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),_r(v=>{const C=new CZ(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(C)}))}),Q_(d=>{const v=C=>{const S=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(C.routeConfig).pipe(_r(V=>{C.component=V}),h1(()=>{})));for(const V of C.children)S.push(...v(V));return S};return S_(v(d.targetSnapshot.root)).pipe(Fh(),aa(1))}),Q_(()=>this.afterPreactivation()),h1(d=>{const v=function RZ(t,n,e){const i=c7(t,n._root,e?e._root:void 0);return new Uz(i,n)}(e.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:v}}),_r(d=>{e.currentUrlTree=d.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),e.routerState=d.targetRouterState,"deferred"===e.urlUpdateStrategy&&(d.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,d),e.browserUrlTree=d.urlAfterRedirects)}),((t,n,e)=>h1(i=>(new qZ(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,e.routeReuseStrategy,d=>this.events.next(d)),aa(1),_r({next:d=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Z0(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{r=!0}}),L_(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),xl(d=>{if(s=!0,Xz(d)){Yz(d)||(e.navigated=!0,e.restoreHistory(i,!0));const v=new qh(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode);if(this.events.next(v),Yz(d)){const C=e.urlHandlingStrategy.merge(d.url,e.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||mS(i.source)};e.scheduleNavigation(C,s7,null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const v=new N_(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);this.events.next(v);try{i.resolve(e.errorHandler(d))}catch(C){i.reject(C)}}return Dt}))}))}cancelNavigationTransition(e,i,r){const s=new qh(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function mS(t){return t!==s7}let gS=(()=>{class t{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Q1);return i}getResolvedTitleForRoute(e){return e.data[t7]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:function(){return o1(FY)},providedIn:"root"}),t})(),FY=(()=>{class t extends gS{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return t.\u0275fac=function(e){return new(e||t)(Re(uz))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),NY=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:function(){return o1(BY)},providedIn:"root"}),t})();class OY{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let BY=(()=>{class t extends OY{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const a9=new vt("",{providedIn:"root",factory:()=>({})});let jY=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:function(){return o1(GY)},providedIn:"root"}),t})(),GY=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function $Y(t){throw t}function qY(t,n,e){return n.parse("/")}const WY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let oo=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=o1(EG),this.isNgZoneEnabled=!1,this.options=o1(a9,{optional:!0})||{},this.errorHandler=this.options.errorHandler||$Y,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||qY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=o1(jY),this.routeReuseStrategy=o1(NY),this.urlCreationStrategy=o1(HZ),this.titleStrategy=o1(gS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Cz(o1(Z8,{optional:!0})??[]),this.navigationTransitions=o1(r9),this.urlSerializer=o1(i7),this.location=o1(vh),this.isNgZoneEnabled=o1(f1)instanceof f1&&f1.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Cl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=jz(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),s7,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},d=r?.navigationId?r:null;if(r){const C={...r};delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(s.state=C)}const v=this.parseUrl(e);this.scheduleNavigation(v,i,d,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(Z_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:d,queryParamsHandling:v,preserveFragment:C}=i,S=C?this.currentUrlTree.fragment:d;let V=null;switch(v){case"merge":V={...this.currentUrlTree.queryParams,...s};break;case"preserve":V=this.currentUrlTree.queryParams;break;default:V=s||null}return null!==V&&(V=this.removeEmptyProps(V)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,V,S??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=W0(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,s7,null,i)}navigate(e,i={skipLocationChange:!1}){return function YY(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new rt(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...WY}:!1===i?{...ZY}:i,W0(e))return zz(this.currentUrlTree,e,r);const s=this.parseUrl(e);return zz(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,d){if(this.disposed)return Promise.resolve(!1);let v,C,S,V;return d?(v=d.resolve,C=d.reject,S=d.promise):S=new Promise((F,Z)=>{v=F,C=Z}),V="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:V,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:v,reject:C,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(F=>Promise.reject(F))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m7=(()=>{class t{constructor(e,i,r,s,d,v){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=d,this.locationStrategy=v,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Qt;const C=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===C||"area"===C,this.isAnchorElement?this.subscription=e.events.subscribe(S=>{S instanceof Z0&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=F8(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=F8(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=F8(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,s,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||s||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function Z4(t,n,e){return function b0(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?W4:Ho}(n,e)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return t.\u0275fac=function(e){return new(e||t)(W(oo),W(wl),Fc("tabindex"),W(to),W(Ot),W(U0))},t.\u0275dir=je({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,i){1&e&&jt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&ze("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[wn]}),t})();class _S{}let QY=(()=>{class t{constructor(e,i,r,s,d){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Xi(e=>e instanceof Z0),yl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=ch(s.providers,e,`Route: ${s.path}`));const d=s._injector??e,v=s._loadedInjector??d;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(d,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(v,s.children??s._loadedRoutes))}return e2(r).pipe(Lt())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):r1(null);const s=r.pipe(Je(d=>null===d?r1(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??e,d.routes))));return i.loadComponent&&!i._loadedComponent?e2([s,this.loader.loadComponent(i)]).pipe(Lt()):s})}}return t.\u0275fac=function(e){return new(e||t)(Re(oo),Re(jw),Re(bs),Re(_S),Re(J_))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const tv=new vt("");let vS=(()=>{class t{constructor(e,i,r,s,d={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof F_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Z0&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Oz&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Oz(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(e){Ms()},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();var Oo=(()=>((Oo=Oo||{})[Oo.COMPLETE=0]="COMPLETE",Oo[Oo.FAILED=1]="FAILED",Oo[Oo.REDIRECTING=2]="REDIRECTING",Oo))();const Y8=!1;function Ml(t,n){return{\u0275kind:t,\u0275providers:n}}const nv=new vt("",{providedIn:"root",factory:()=>!1});function xS(){const t=o1(kr);return n=>{const e=t.get(P8);if(n!==e.components[0])return;const i=t.get(oo),r=t.get(bS);1===t.get(iv)&&i.initialNavigation(),t.get(CS,null,t1.Optional)?.setUpPreloading(),t.get(tv,null,t1.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const bS=new vt(Y8?"bootstrap done indicator":"",{factory:()=>new Qt}),iv=new vt(Y8?"initial navigation":"",{providedIn:"root",factory:()=>1});function iX(){let t=[];return t=Y8?[{provide:e8,multi:!0,useFactory:()=>{const n=o1(oo);return()=>n.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function EZ(t){if(!("type"in t))return`Unknown Router Event: ${t.constructor.name}`;switch(t.type){case 14:return`ActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state}, shouldActivate: ${t.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 2:return`NavigationCancel(id: ${t.id}, url: '${t.url}')`;case 16:return`NavigationSkipped(id: ${t.id}, url: '${t.url}')`;case 1:return`NavigationEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${t.id}, url: '${t.url}', error: ${t.error})`;case 0:return`NavigationStart(id: ${t.id}, url: '${t.url}')`;case 6:return`ResolveEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 5:return`ResolveStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 10:return`RouteConfigLoadEnd(path: ${t.route.path})`;case 9:return`RouteConfigLoadStart(path: ${t.route.path})`;case 4:return`RoutesRecognized(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 15:return`Scroll(anchor: '${t.anchor}', position: '${t.position?`${t.position[0]}, ${t.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],Ml(1,t)}const CS=new vt(Y8?"router preloader":"");function rX(t){return Ml(0,[{provide:CS,useExisting:QY},{provide:_S,useExisting:t}])}const g7=!1,wS=new vt(g7?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),aX=[vh,{provide:i7,useClass:T_},oo,l7,{provide:wl,useFactory:function yS(t){return t.routerState.root},deps:[oo]},J_,g7?{provide:nv,useValue:!0}:[]];function oX(){return new Xw("Router",oo)}let o9=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[aX,g7&&i?.enableTracing?iX().\u0275providers:[],{provide:Z8,multi:!0,useValue:e},{provide:wS,useFactory:uX,deps:[[oo,new Hr,new Vo]]},{provide:a9,useValue:i||{}},i?.useHash?{provide:U0,useClass:g$}:{provide:U0,useClass:yM},{provide:tv,useFactory:()=>{const t=o1(Lq),n=o1(f1),e=o1(a9),i=o1(r9),r=o1(i7);return e.scrollOffset&&t.setOffset(e.scrollOffset),new vS(r,i,t,n,e)}},i?.preloadingStrategy?rX(i.preloadingStrategy).\u0275providers:[],{provide:Xw,multi:!0,useFactory:oX},i?.initialNavigation?dX(i):[],[{provide:MS,useFactory:xS},{provide:qg,multi:!0,useExisting:MS}]]}}static forChild(e){return{ngModule:t,providers:[{provide:Z8,multi:!0,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)(Re(wS,8))},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[q_]}),t})();function uX(t){if(g7&&t)throw new rt(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function dX(t){return["disabled"===t.initialNavigation?Ml(3,[{provide:fh,multi:!0,useFactory:()=>{const n=o1(oo);return()=>{n.setUpLocationChangeListener()}}},{provide:iv,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ml(2,[{provide:iv,useValue:0},{provide:fh,multi:!0,deps:[kr],useFactory:n=>{const e=n.get(p$,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=n.get(oo),s=n.get(bS);(function JY(t,n){t.events.pipe(Xi(e=>e instanceof Z0||e instanceof qh||e instanceof N_||e instanceof Wh),h1(e=>e instanceof Z0||e instanceof Wh?Oo.COMPLETE:e instanceof qh&&(0===e.code||1===e.code)?Oo.REDIRECTING:Oo.FAILED),Xi(e=>e!==Oo.REDIRECTING),aa(1)).subscribe(()=>{n()})})(r,()=>{i(!0)}),n.get(r9).afterPreactivation=()=>(i(!0),s.closed?r1(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const MS=new vt(g7?"Router Initializer":""),hX=new vt("cdk-dir-doc",{providedIn:"root",factory:function pX(){return o1(Y1)}}),mX=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let so=(()=>{class t{constructor(e){this.value="ltr",this.change=new Gt,e&&(this.value=function gX(t){const n=t?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?mX.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(Re(hX,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),X8=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({}),t})();function zS(t){for(let n in t){let e=t[n]??"";switch(n){case"display":t.display="flex"===e?["-webkit-flex","flex"]:"inline-flex"===e?["-webkit-inline-flex","inline-flex"]:e;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":t["-webkit-"+n]=e;break;case"flex-direction":t["-webkit-flex-direction"]=e,t["flex-direction"]=e;break;case"order":t.order=t["-webkit-"+n]=isNaN(+e)?"0":e}}return t}const rv="inline",s9=["row","column","row-reverse","column-reverse"];function SS(t){let[n,e,i]=DS(t);return function vX(t,n=null,e=!1){return{display:e?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":n||null}}(n,e,i)}function DS(t){t=t?.toLowerCase()??"";let[n,e,i]=t.split(" ");return s9.find(r=>r===n)||(n=s9[0]),e===rv&&(e=i!==rv?i:"",i=rv),[n,_X(e),!!i]}function _7(t){let[n]=DS(t);return n.indexOf("row")>-1}function _X(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}function s4(t,...n){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(let e of n)if(null!=e)for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}const xX={provide:qg,useFactory:function yX(t,n){return()=>{if($0(n)){const e=Array.from(t.querySelectorAll(`[class*=${AS}]`)),i=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${AS}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[Y1,Es],multi:!0},AS="flex-layout-";let av=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:[xX]}),t})();class Y0{constructor(n=!1,e="all",i="",r="",s=0){this.matches=n,this.mediaQuery=e,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new Y0(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let bX=(()=>{class t{constructor(){this.stylesheet=new Map}addStyleToElement(e,i,r){const s=this.stylesheet.get(e);s?s.set(i,r):this.stylesheet.set(e,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(e,i){const r=this.stylesheet.get(e);let s="";if(r){const d=r.get(i);("number"==typeof d||"string"==typeof d)&&(s=d+"")}return s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ov={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},yc=new vt("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>ov}),K8=new vt("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),sv=new vt("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function ES(t,n){return t=t?.clone()??new Y0,n&&(t.mqAlias=n.alias,t.mediaQuery=n.mediaQuery,t.suffix=n.suffix,t.priority=n.priority),t}class ti{constructor(){this.shouldCache=!0}sideEffect(n,e,i){}}let w2=(()=>{class t{constructor(e,i,r,s){this._serverStylesheet=e,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(e,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:zS(i),this._applyMultiValueStyleToElement(s,e)}applyStyleToElements(e,i=[]){const r=this.layoutConfig.disableVendorPrefixes?e:zS(e);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(e){const i="flex-direction";let r=this.lookupStyle(e,i);return[r||"row",this.lookupInlineStyle(e,i)||O8(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(e){return"wrap"===this.lookupStyle(e,"flex-wrap")}lookupAttributeValue(e,i){return e.getAttribute(i)??""}lookupInlineStyle(e,i){return $0(this._platformId)?e.style.getPropertyValue(i):function CX(t,n){return VS(t)[n]??""}(e,i)}lookupStyle(e,i,r=!1){let s="";return e&&((s=this.lookupInlineStyle(e,i))||($0(this._platformId)?r||(s=getComputedStyle(e).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(e,i)))),s?s.trim():""}_applyMultiValueStyleToElement(e,i){Object.keys(e).sort().forEach(r=>{const s=e[r],d=Array.isArray(s)?s:[s];d.sort();for(let v of d)v=v?v+"":"",$0(this._platformId)||!this._serverModuleLoaded?$0(this._platformId)?i.style.setProperty(r,v):wX(i,r,v):this._serverStylesheet.addStyleToElement(i,r,v)})}}return t.\u0275fac=function(e){return new(e||t)(Re(bX),Re(K8),Re(Es),Re(yc))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function wX(t,n,e){n=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=VS(t);i[n]=e??"",function MX(t,n){let e="";for(const i in n)n[i]&&(e+=`${i}:${n[i]};`);t.setAttribute("style",e)}(t,i)}function VS(t){const n={},e=t.getAttribute("style");if(e){const i=e.split(/;+/g);for(let r=0;r<i.length;r++){const s=i[r].trim();if(s.length>0){const d=s.indexOf(":");if(-1===d)throw new Error(`Invalid CSS style: ${s}`);n[s.substr(0,d).trim()]=s.substr(d+1).trim()}}}return n}function v7(t,n){return(n&&n.priority||0)-(t&&t.priority||0)}function zX(t,n){return(t.priority||0)-(n.priority||0)}let cv=(()=>{class t{constructor(e,i,r){this._zone=e,this._platformId=i,this._document=r,this.source=new ao(new Y0(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const e=[];return this.registry.forEach((i,r)=>{i.matches&&e.push(r)}),e}isActive(e){return this.registry.get(e)?.matches??this.registerQuery(e).some(r=>r.matches)}observe(e,i=!1){if(e&&e.length){const r=this._observable$.pipe(Xi(d=>!i||e.indexOf(d.mediaQuery)>-1));return W2(new l1(d=>{const v=this.registerQuery(e);if(v.length){const C=v.pop();v.forEach(S=>{d.next(S)}),this.source.next(C)}d.complete()}),r)}return this._observable$}registerQuery(e){const i=Array.isArray(e)?e:[e],r=[];return function SX(t,n){const e=t.filter(i=>!LS[i]);if(e.length>0){const i=e.join(", ");try{const r=n.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(n.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),n.head.appendChild(r),e.forEach(s=>LS[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const d=C=>{this._zone.run(()=>this.source.next(new Y0(C.matches,s)))};let v=this.registry.get(s);v||(v=this.buildMQL(s),v.addListener(d),this.pendingRemoveListenerFns.push(()=>v.removeListener(d)),this.registry.set(s,v)),v.matches&&r.push(new Y0(!0,s))}),r}ngOnDestroy(){let e;for(;e=this.pendingRemoveListenerFns.pop();)e()}buildMQL(e){return function AX(t,n){return n&&window.matchMedia("all").addListener?window.matchMedia(t):function DX(t){const n=new EventTarget;return n.matches="all"===t||""===t,n.media=t,n.addListener=()=>{},n.removeListener=()=>{},n.addEventListener=()=>{},n.dispatchEvent=()=>!1,n.onchange=null,n}(t)}(e,$0(this._platformId))}}return t.\u0275fac=function(e){return new(e||t)(Re(f1),Re(Es),Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const LS={},EX=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],TS="(orientation: portrait) and (max-width: 599.98px)",HS="(orientation: landscape) and (max-width: 959.98px)",kS="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",IS="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",RS="(orientation: portrait) and (min-width: 840px)",PS="(orientation: landscape) and (min-width: 1280px)",c4={HANDSET:`${TS}, ${HS}`,TABLET:`${kS} , ${IS}`,WEB:`${RS}, ${PS} `,HANDSET_PORTRAIT:`${TS}`,TABLET_PORTRAIT:`${kS} `,WEB_PORTRAIT:`${RS}`,HANDSET_LANDSCAPE:`${HS}`,TABLET_LANDSCAPE:`${IS}`,WEB_LANDSCAPE:`${PS}`},VX=[{alias:"handset",priority:2e3,mediaQuery:c4.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:c4.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:c4.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:c4.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:c4.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:c4.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:c4.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:c4.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:c4.WEB_PORTRAIT,overlapping:!0}],LX=/(\.|-|_)/g;function TX(t){let n=t.length>0?t.charAt(0):"",e=t.length>1?t.slice(1):"";return n.toUpperCase()+e}const RX=new vt("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const t=o1(sv),n=o1(yc),e=[].concat.apply([],(t||[]).map(r=>Array.isArray(r)?r:[r]));return function IX(t,n=[]){const e={};return t.forEach(i=>{e[i.alias]=i}),n.forEach(i=>{e[i.alias]?s4(e[i.alias],i):e[i.alias]=i}),function kX(t){return t.forEach(n=>{n.suffix||(n.suffix=function HX(t){return t.replace(LX,"|").split("|").map(TX).join("")}(n.alias),n.overlapping=!!n.overlapping)}),t}(Object.keys(e).map(i=>e[i]))}((n.disableDefaultBps?[]:EX).concat(n.addOrientationBps?VX:[]),e)}});let lv=(()=>{class t{constructor(e){this.findByMap=new Map,this.items=[...e].sort(zX)}findByAlias(e){return e?this.findWithPredicate(e,i=>i.alias===e):null}findByQuery(e){return this.findWithPredicate(e,i=>i.mediaQuery===e)}get overlappings(){return this.items.filter(e=>e.overlapping)}get aliases(){return this.items.map(e=>e.alias)}get suffixes(){return this.items.map(e=>e?.suffix??"")}findWithPredicate(e,i){let r=this.findByMap.get(e);return r||(r=this.items.find(i)??null,this.findByMap.set(e,r)),r??null}}return t.\u0275fac=function(e){return new(e||t)(Re(RX))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Q8="print",PX={alias:Q8,mediaQuery:Q8,priority:1e3};let FX=(()=>{class t{constructor(e,i,r){this.breakpoints=e,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new NX,this.deactivations=[]}withPrintQuery(e){return[...e,Q8]}isPrintEvent(e){return e.mediaQuery.startsWith(Q8)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(e=>this.breakpoints.findByAlias(e)).filter(e=>null!==e)}getEventBreakpoints({mediaQuery:e}){const i=this.breakpoints.findByQuery(e);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(v7)}updateEvent(e){let i=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(i=this.getEventBreakpoints(e)[0],e.mediaQuery=i?.mediaQuery??""),ES(e,i)}registerBeforeAfterPrintHooks(e){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(e,this.getEventBreakpoints(new Y0(!0,Q8))),e.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(e),e.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(e){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(e,this.getEventBreakpoints(i)),e.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(e),e.updateStyles()):this.collectActivations(e,i)}}blockPropagation(){return e=>!(this.isPrinting||this.isPrintEvent(e))}startPrinting(e,i){this.isPrinting=!0,this.formerActivations=e.activatedBreakpoints,e.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(e,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const r=this.breakpoints.findByQuery(i.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),d=!this.formerActivations&&e.activatedBreakpoints.includes(r);(s||d)&&(this.deactivations.push(r),this.deactivations.sort(v7))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("beforeprint",e)),this.afterPrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("afterprint",e)))}}return t.\u0275fac=function(e){return new(e||t)(Re(lv),Re(yc),Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class NX{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(n){return n.push(PX),n.sort(v7),n.forEach(e=>this.addBreakpoint(e)),this.printBreakpoints}addBreakpoint(n){n&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===n.mediaQuery)&&(this.printBreakpoints=function OX(t){return t?.mediaQuery.startsWith(Q8)??!1}(n)?[n,...this.printBreakpoints]:[...this.printBreakpoints,n])}clear(){this.printBreakpoints=[]}}let L2=(()=>{class t{constructor(e,i,r){this.matchMedia=e,this.breakpoints=i,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Qt,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(e){this._activatedBreakpoints=[...e]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(e){this._useFallbacks=e}onMediaChange(e){const i=this.findByQuery(e.mediaQuery);if(i){e=ES(e,i);const r=this.activatedBreakpoints.indexOf(i);e.matches&&-1===r?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(v7),this.updateStyles()):!e.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(v7),this.updateStyles())}}init(e,i,r,s,d=[]){FS(this.updateMap,e,i,r),FS(this.clearMap,e,i,s),this.buildElementKeyMap(e,i),this.watchExtraTriggers(e,i,d)}getValue(e,i,r){const s=this.elementMap.get(e);if(s){const d=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(d)return d.get(i)}}hasValue(e,i){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(e,i,r,s){let d=this.elementMap.get(e);if(d){const C=(d.get(s)??new Map).set(i,r);d.set(s,C),this.elementMap.set(e,d)}else d=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(e,d);const v=this.getValue(e,i);void 0!==v&&this.updateElement(e,i,v)}trackValue(e,i){return this.subject.asObservable().pipe(Xi(r=>r.element===e&&r.key===i))}updateStyles(){this.elementMap.forEach((e,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(e);s&&s.forEach((d,v)=>{this.updateElement(i,v,d),r.delete(v)}),r.forEach(d=>{if(s=this.getActivatedValues(e,d),s){const v=s.get(d);this.updateElement(i,d,v)}else this.clearElement(i,d)})})}clearElement(e,i){const r=this.clearMap.get(e);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:e,key:i,value:""}))}}updateElement(e,i,r){const s=this.updateMap.get(e);if(s){const d=s.get(i);d&&(d(r),this.subject.next({element:e,key:i,value:r}))}}releaseElement(e){const i=this.watcherMap.get(e);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(e));const r=this.elementMap.get(e);r&&(r.forEach((s,d)=>r.delete(d)),this.elementMap.delete(e))}triggerUpdate(e,i){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(e,i,s.get(i)):s.forEach((d,v)=>this.updateElement(e,v,d)))}}buildElementKeyMap(e,i){let r=this.elementKeyMap.get(e);r||(r=new Set,this.elementKeyMap.set(e,r)),r.add(i)}watchExtraTriggers(e,i,r){if(r&&r.length){let s=this.watcherMap.get(e);if(s||(s=new Map,this.watcherMap.set(e,s)),!s.get(i)){const v=W2(...r).subscribe(()=>{const C=this.getValue(e,i);this.updateElement(e,i,C)});s.set(i,v)}}}findByQuery(e){return this.breakpoints.findByQuery(e)}getActivatedValues(e,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const v=e.get(this.activatedBreakpoints[s].alias);if(v&&(void 0===i||v.has(i)&&null!=v.get(i)))return v}if(!this._useFallbacks)return;const r=e.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const e=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe(_r(this.hook.interceptEvents(this)),Xi(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return t.\u0275fac=function(e){return new(e||t)(Re(cv),Re(lv),Re(FX))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function FS(t,n,e,i){if(void 0!==i){const r=t.get(n)??new Map;r.set(e,i),t.set(n,r)}}let j2=(()=>{class t{constructor(e,i,r,s){this.elementRef=e,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Qt,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}ngOnChanges(e){Object.keys(e).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(e[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(e=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}addStyles(e,i){const r=this.styleBuilder,s=r.shouldCache;let d=this.styleCache.get(e);(!d||!s)&&(d=r.buildStyles(e,i),s&&this.styleCache.set(e,d)),this.mru={...d},this.applyStyleToElement(d),r.sideEffect(e,d,i)}clearStyles(){Object.keys(this.mru).forEach(e=>{this.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(e,i=!1){if(e){const[r,s]=this.styler.getFlowDirection(e);if(!s&&i){const d=SS(r);this.styler.applyStyleToElements(d,[e])}return r.trim()}return"row"}hasWrap(e){return this.styler.hasWrap(e)}applyStyleToElement(e,i,r=this.nativeElement){this.styler.applyStyleToElement(r,e,i)}setValue(e,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,i)}updateWithValue(e){this.currentValue!==e&&(this.addStyles(e),this.currentValue=e)}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(ti),W(w2),W(L2))},t.\u0275dir=je({type:t,features:[wn]}),t})();class UX extends EventTarget{constructor(n){super(),this._mediaQuery=n,this._isActive=!1,this._listeners=[],this.onchange=null}get matches(){return this._isActive}get media(){return this._mediaQuery}destroy(){this.deactivate(),this._listeners=[]}activate(){return this._isActive||(this._isActive=!0,this._listeners.forEach(n=>{n.call(this,{matches:this.matches,media:this.media})})),this}deactivate(){return this._isActive&&(this._isActive=!1,this._listeners.forEach(n=>{n.call(this,{matches:this.matches,media:this.media})})),this}addListener(n){-1===this._listeners.indexOf(n)&&this._listeners.push(n),this._isActive&&n.call(this,{matches:this.matches,media:this.media})}removeListener(n){}dispatchEvent(n){return!1}}function NS(t,n="1",e="1"){let i=[n,e,t],r=t.indexOf("calc");if(r>0){i[2]=OS(t.substring(r).trim());let s=t.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=OS(t.trim());else{let s=t.split(" ");i=3===s.length?s:[n,e,t]}return i}function OS(t){return t.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}const BS="x";function c9(t,n){if(void 0===n)return t;const e=i=>{const r=+i.slice(0,-BS.length);return t.endsWith(BS)&&!isNaN(r)?`${r*n.value}${n.unit}`:t};return t.includes(" ")?t.split(" ").map(e).join(" "):e(t)}function M2(t){return rn((n,e)=>{$(t).subscribe(R1(e,()=>e.complete(),yi)),!e.closed&&n.subscribe(e)})}let jX=(()=>{class t extends ti{buildStyles(e,{display:i}){const r=SS(e);return{...r,display:"none"===i?i:r.display}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const GX=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let $X=(()=>{class t extends j2{constructor(e,i,r,s,d){super(e,r,i,s),this._config=d,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(e){const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=jS.get(r)??new Map,jS.set(r,this.styleCache),this.currentValue!==e&&(this.addStyles(e,{display:r}),this.currentValue=e)}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(w2),W(jX),W(L2),W(yc))},t.\u0275dir=je({type:t,features:[o]}),t})(),US=(()=>{class t extends $X{constructor(){super(...arguments),this.inputs=GX}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[o]}),t})();const jS=new Map,GS={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let qX=(()=>{class t extends ti{constructor(e,i){super(),this._styler=e,this._config=i}buildStyles(e,i){return e.endsWith(l9)?function eK(t,n){const[e,i]=t.split(" "),s=S=>`-${S}`;let d="0px",v=s(i??e),C="0px";return"rtl"===n?C=s(e):d=s(e),{margin:`0px ${d} ${v} ${C}`}}(e=c9(e=e.slice(0,e.indexOf(l9)),this._config.multiplier),i.directionality):{}}sideEffect(e,i,r){const s=r.items;if(e.endsWith(l9)){const d=function JX(t,n){const[e,i]=t.split(" ");let s="0px",v="0px";return"rtl"===n?v=e:s=e,{padding:`0px ${s} ${i??e} ${v}`}}(e=c9(e=e.slice(0,e.indexOf(l9)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(d,r.items)}else{e=c9(e,this._config.multiplier),e=this.addFallbackUnit(e);const d=s.pop(),v=function tK(t,n){const e=qS(n.directionality,n.layout),i={...GS};return i[e]=t,i}(e,r);this._styler.applyStyleToElements(v,s),this._styler.applyStyleToElements(GS,[d])}}addFallbackUnit(e){return isNaN(+e)?e:`${e}${this._config.defaultUnit}`}}return t.\u0275fac=function(e){return new(e||t)(Re(w2),Re(yc))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const WX=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let ZX=(()=>{class t extends j2{constructor(e,i,r,s,d,v){super(e,d,s,v),this.zone=i,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new Qt;const C=[this.directionality.change,this.observerSubject.asObservable()];this.init(C),this.marshal.trackValue(this.nativeElement,"layout").pipe(M2(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const e=this.nativeElement.children,i=[];for(let r=e.length;r--;)i[r]=e[r];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(e){const r=e.value.split(" ");this.layout=r[0],s9.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(e){const i=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const d=+this.styler.lookupStyle(r,"order"),v=+this.styler.lookupStyle(s,"order");return isNaN(d)||isNaN(v)||d===v?0:d>v?1:-1});if(i.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=YX:"row"===s&&"rtl"!==r?this.styleCache=KX:"column"===s&&"rtl"===r?this.styleCache=XX:"column"===s&&"rtl"!==r&&(this.styleCache=QX),this.addStyles(e,{directionality:r,items:i,layout:s})}}clearStyles(){const e=Object.keys(this.mru).length>0,i=e?"padding":qS(this.directionality.value,this.layout);e&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(e){const i=this.marshal.getValue(e,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(e,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{typeof MutationObserver<"u"&&(this.observer=new MutationObserver(e=>{e.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(f1),W(so),W(w2),W(qX),W(L2))},t.\u0275dir=je({type:t,features:[o]}),t})(),$S=(()=>{class t extends ZX{constructor(){super(...arguments),this.inputs=WX}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[o]}),t})();const YX=new Map,XX=new Map,KX=new Map,QX=new Map,l9=" grid";function qS(t,n){switch(n){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===t?"margin-left":"margin-right";case"row-reverse":return"rtl"===t?"margin-right":"margin-left"}}let nK=(()=>{class t extends ti{constructor(e){super(),this.layoutConfig=e}buildStyles(e,i){let[r,s,...d]=e.split(" "),v=d.join(" ");const C=i.direction.indexOf("column")>-1?"column":"row",S=_7(C)?"max-width":"max-height",V=_7(C)?"min-width":"min-height",F=String(v).indexOf("calc")>-1,Z=F||"auto"===v,K=String(v).indexOf("%")>-1&&!F,le=String(v).indexOf("px")>-1||String(v).indexOf("rem")>-1||String(v).indexOf("em")>-1||String(v).indexOf("vw")>-1||String(v).indexOf("vh")>-1;let xe=F||le;r="0"==r?0:r,s="0"==s?0:s;const Me=!r&&!s;let He={};const ut={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(v||""){case"":v="row"===C?"0%":!1!==this.layoutConfig.useColumnBasisZero?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,v="auto";break;case"grow":v="100%";break;case"noshrink":s=0,v="auto";break;case"auto":break;case"none":r=0,s=0,v="auto";break;default:!xe&&!K&&!isNaN(v)&&(v+="%"),"0%"===v&&(xe=!0),"0px"===v&&(v="0%"),He=s4(ut,F?{"flex-grow":r,"flex-shrink":s,"flex-basis":xe?v:"100%"}:{flex:`${r} ${s} ${xe?v:"100%"}`})}return He.flex||He["flex-grow"]||(He=s4(ut,F?{"flex-grow":r,"flex-shrink":s,"flex-basis":v}:{flex:`${r} ${s} ${v}`})),"0%"!==v&&"0px"!==v&&"0.000000001px"!==v&&"auto"!==v&&(He[V]=Me||xe&&r?v:null,He[S]=Me||!Z&&s?v:null),He[V]||He[S]?i.hasWrap&&(He[F?"flex-basis":"flex"]=He[S]?F?He[S]:`${r} ${s} ${He[S]}`:F?He[V]:`${r} ${s} ${He[V]}`):He=s4(ut,F?{"flex-grow":r,"flex-shrink":s,"flex-basis":v}:{flex:`${r} ${s} ${v}`}),s4(He,{"box-sizing":"border-box"})}}return t.\u0275fac=function(e){return new(e||t)(Re(yc))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const iK=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let rK=(()=>{class t extends j2{constructor(e,i,r,s,d){super(e,s,i,d),this.layoutConfig=r,this.marshal=d,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(e){this.flexShrink=e||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(e){this.flexGrow=e||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(M2(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(M2(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(e){const r=e.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(e){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),d=this.wrap;s&&d?this.styleCache=sK:s&&!d?this.styleCache=aK:!s&&d?this.styleCache=cK:!s&&!d&&(this.styleCache=oK);const C=NS(String(e).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(C.join(" "),{direction:r,hasWrap:d})}triggerReflow(){const e=this.activatedValue;if(void 0!==e){const i=NS(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(w2),W(yc),W(nK),W(L2))},t.\u0275dir=je({type:t,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[o]}),t})(),WS=(()=>{class t extends rK{constructor(){super(...arguments),this.inputs=iK}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[o]}),t})();const aK=new Map,oK=new Map,sK=new Map,cK=new Map;let LK=(()=>{class t extends ti{buildStyles(e,i){const r={},[s,d]=e.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(d){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return s4(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===d?_7(i.layout)?null:"100%":null,"max-height":"stretch"===d&&_7(i.layout)?"100%":null})}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const TK=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let HK=(()=>{class t extends j2{constructor(e,i,r,s){super(e,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(M2(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(e){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=FK:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=OK:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=NK:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=BK:"column-reverse"===i&&!r&&(this.styleCache=PK):this.styleCache=IK:this.styleCache=RK:this.styleCache=kK,this.addStyles(e,{layout:i,inline:r})}onLayoutChange(e){const i=e.value.split(" ");this.layout=i[0],this.inline=e.value.includes("inline"),s9.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(w2),W(LK),W(L2))},t.\u0275dir=je({type:t,features:[o]}),t})(),ZS=(()=>{class t extends HK{constructor(){super(...arguments),this.inputs=TK}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[o]}),t})();const kK=new Map,IK=new Map,RK=new Map,PK=new Map,FK=new Map,NK=new Map,OK=new Map,BK=new Map;let YS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[av,X8]}),t})();function ln(t){return null!=t&&"false"!=`${t}`}function uv(t,n=0){return function UK(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):n}function u9(t){return Array.isArray(t)?t:[t]}function ki(t){return null==t?"":"string"==typeof t?t:`${t}px`}function l4(t){return t instanceof Ot?t.nativeElement:t}let YK=(()=>{class t extends j2{constructor(e,i,r,s,d,v,C){super(e,null,i,r),this.ngClassInstance=C,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new j0(s,d,e,v)),this.init(),this.setValue("","")}set klass(e){this.ngClassInstance.klass=e,this.setValue(e,"")}updateWithValue(e){this.ngClassInstance.ngClass=e,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(w2),W(L2),W(d3),W(B0),W(to),W(j0,10))},t.\u0275dir=je({type:t,inputs:{klass:["class","klass"]},features:[o]}),t})();const XK=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let XS=(()=>{class t extends YK{constructor(){super(...arguments),this.inputs=XK}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[o]}),t})(),nD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[av]}),t})();const sQ=function(t,n){return{transparent:t,black:n}};let cQ=(()=>{class t{constructor(){this.isTransparent=!0}onWindowScroll(){this.isTransparent=!(window.pageYOffset>50)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-header"]],hostBindings:function(e,i){1&e&&jt("scroll",function(){return i.onWindowScroll()},0,vf)},decls:15,vars:4,consts:[["fxLayout","column","fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px",3,"ngClass"],["routerLink","/rooms"],["routerLink","/explore"],["routerLink","/restaurant"],["fxLayoutAlign","center center","routerLink","/",1,"logo"],["src","assets/imgs/Logo-Hotel-low.png","alt",""],["routerLink","/about"],["routerLink","/book"],["routerLink","/login"]],template:function(e,i){1&e&&(de(0,"header",0)(1,"a",1),Ue(2,"Rooms"),he(),de(3,"a",2),Ue(4,"Explore"),he(),de(5,"a",3),Ue(6,"Restaurant"),he(),de(7,"div",4),nt(8,"img",5),he(),de(9,"a",6),Ue(10,"About us"),he(),de(11,"a",7),Ue(12,"Contact us"),he(),de(13,"a",8),Ue(14,"Book"),he()()),2&e&&Ye("ngClass",function lw(t,n,e,i,r){return dw(pt(),Si(),t,n,e,i,r)}(1,sQ,i.isTransparent,!i.isTransparent))},dependencies:[j0,m7,US,$S,ZS,XS],styles:['header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:110px;z-index:999;transition:background-color .3s ease-in-out}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:1.2rem;font-weight:500;padding:.5rem 1rem;border-radius:5px;position:relative;overflow:hidden;transition:transform .3s ease-in-out}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%) scaleX(0);width:100%;height:2px;background-color:#fff;transition:transform .3s ease-in-out}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{transform:translate(-50%) scaleX(1) scaleY(1.2);z-index:1}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:transparent;transform:scale(1.1)}.transparent[_ngcontent-%COMP%]{background-color:transparent!important}.black[_ngcontent-%COMP%]{background-color:#0b161b!important}.content[_ngcontent-%COMP%]{margin-top:60px}.logo[_ngcontent-%COMP%]{width:30%;height:55px;box-sizing:border-box;display:flex;justify-content:center;align-items:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:375px;height:55px;cursor:pointer;transition:transform .3s ease-in-out}']}),t})();var fA={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},DA={prefix:"far",iconName:"thumbs-up",icon:[512,512,[128077,61575],"f164","M323.8 34.8c-38.2-10.9-78.1 11.2-89 49.4l-5.7 20c-3.7 13-10.4 25-19.5 35l-51.3 56.4c-8.9 9.8-8.2 25 1.6 33.9s25 8.2 33.9-1.6l51.3-56.4c14.1-15.5 24.4-34 30.1-54.1l5.7-20c3.6-12.7 16.9-20.1 29.7-16.5s20.1 16.9 16.5 29.7l-5.7 20c-5.7 19.9-14.7 38.7-26.6 55.5c-5.2 7.3-5.8 16.9-1.7 24.9s12.3 13 21.3 13L448 224c8.8 0 16 7.2 16 16c0 6.8-4.3 12.7-10.4 15c-7.4 2.8-13 9-14.9 16.7s.1 15.8 5.3 21.7c2.5 2.8 4 6.5 4 10.6c0 7.8-5.6 14.3-13 15.7c-8.2 1.6-15.1 7.3-18 15.1s-1.6 16.7 3.6 23.3c2.1 2.7 3.4 6.1 3.4 9.9c0 6.7-4.2 12.6-10.2 14.9c-11.5 4.5-17.7 16.9-14.4 28.8c.4 1.3 .6 2.8 .6 4.3c0 8.8-7.2 16-16 16H286.5c-12.6 0-25-3.7-35.5-10.7l-61.7-41.1c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l61.7 41.1c18.4 12.3 40 18.8 62.1 18.8H384c34.7 0 62.9-27.6 64-62c14.6-11.7 24-29.7 24-50c0-4.5-.5-8.8-1.3-13c15.4-11.7 25.3-30.2 25.3-51c0-6.5-1-12.8-2.8-18.7C504.8 273.7 512 257.7 512 240c0-35.3-28.6-64-64-64l-92.3 0c4.7-10.4 8.7-21.2 11.8-32.2l5.7-20c10.9-38.2-11.2-78.1-49.4-89zM32 192c-17.7 0-32 14.3-32 32V448c0 17.7 14.3 32 32 32H96c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32H32z"]},hV={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},JT={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"]},AH={prefix:"fas",iconName:"piggy-bank",icon:[576,512,[],"f4d3","M400 96l0 .7c-5.3-.4-10.6-.7-16-.7H256c-16.5 0-32.5 2.1-47.8 6c-.1-2-.2-4-.2-6c0-53 43-96 96-96s96 43 96 96zm-16 32c3.5 0 7 .1 10.4 .3c4.2 .3 8.4 .7 12.6 1.3C424.6 109.1 450.8 96 480 96h11.5c10.4 0 18 9.8 15.5 19.9l-13.8 55.2c15.8 14.8 28.7 32.8 37.5 52.9H544c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H512c-9.1 12.1-19.9 22.9-32 32v64c0 17.7-14.3 32-32 32H416c-17.7 0-32-14.3-32-32V448H256v32c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V416c-34.9-26.2-58.7-66.3-63.2-112H68c-37.6 0-68-30.4-68-68s30.4-68 68-68h4c13.3 0 24 10.7 24 24s-10.7 24-24 24H68c-11 0-20 9-20 20s9 20 20 20H99.2c12.1-59.8 57.7-107.5 116.3-122.8c12.9-3.4 26.5-5.2 40.5-5.2H384zm64 136a24 24 0 1 0 -48 0 24 24 0 1 0 48 0z"]},A9={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]},E9={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]},dy={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};function PR(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,i)}return e}function $t(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?PR(Object(e),!0).forEach(function(i){Ki(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):PR(Object(e)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}return t}function V9(t){return(V9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function FR(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ki(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function fy(t,n){return function bDe(t){if(Array.isArray(t))return t}(t)||function wDe(t,n){var e=null==t?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var d,v,i=[],r=!0,s=!1;try{for(e=e.call(t);!(r=(d=e.next()).done)&&(i.push(d.value),!n||i.length!==n);r=!0);}catch(C){s=!0,v=C}finally{try{!r&&null!=e.return&&e.return()}finally{if(s)throw v}}return i}}(t,n)||NR(t,n)||function zDe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z7(t){return function xDe(t){if(Array.isArray(t))return hy(t)}(t)||function CDe(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||NR(t)||function MDe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NR(t,n){if(t){if("string"==typeof t)return hy(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return hy(t,n)}}function hy(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}var OR=function(){},py={},BR={},UR=null,jR={mark:OR,measure:OR};try{typeof window<"u"&&(py=window),typeof document<"u"&&(BR=document),typeof MutationObserver<"u"&&(UR=MutationObserver),typeof performance<"u"&&(jR=performance)}catch{}var H9,k9,I9,R9,P9,GR=(py.navigator||{}).userAgent,$R=void 0===GR?"":GR,zl=py,z2=BR,qR=UR,T9=jR,u4=!!z2.documentElement&&!!z2.head&&"function"==typeof z2.addEventListener&&"function"==typeof z2.createElement,WR=~$R.indexOf("MSIE")||~$R.indexOf("Trident/"),d4="___FONT_AWESOME___",my=16,ZR="fa",YR="svg-inline--fa",X0="data-fa-i2svg",gy="data-fa-pseudo-element",DDe="data-fa-pseudo-element-pending",_y="data-prefix",vy="data-icon",XR="fontawesome-i2svg",ADe="async",EDe=["HTML","HEAD","STYLE","SCRIPT"],KR=function(){try{return!0}catch{return!1}}(),S2="classic",ni="sharp",yy=[S2,ni];function S7(t){return new Proxy(t,{get:function(e,i){return i in e?e[i]:e[S2]}})}var D7=S7((Ki(H9={},S2,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Ki(H9,ni,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),H9)),A7=S7((Ki(k9={},S2,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Ki(k9,ni,{solid:"fass",regular:"fasr",light:"fasl"}),k9)),E7=S7((Ki(I9={},S2,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Ki(I9,ni,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),I9)),VDe=S7((Ki(R9={},S2,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Ki(R9,ni,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),R9)),LDe=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,QR="fa-layers-text",TDe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,HDe=S7((Ki(P9={},S2,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Ki(P9,ni,{900:"fass",400:"fasr",300:"fasl"}),P9)),JR=[1,2,3,4,5,6,7,8,9,10],kDe=JR.concat([11,12,13,14,15,16,17,18,19,20]),IDe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],K0={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},V7=new Set;Object.keys(A7[S2]).map(V7.add.bind(V7)),Object.keys(A7[ni]).map(V7.add.bind(V7));var RDe=[].concat(yy,z7(V7),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",K0.GROUP,K0.SWAP_OPACITY,K0.PRIMARY,K0.SECONDARY]).concat(JR.map(function(t){return"".concat(t,"x")})).concat(kDe.map(function(t){return"w-".concat(t)})),L7=zl.FontAwesomeConfig||{};z2&&"function"==typeof z2.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(t){var n=fy(t,2),i=n[1],r=function FDe(t){return""===t||"false"!==t&&("true"===t||t)}(function PDe(t){var n=z2.querySelector("script["+t+"]");if(n)return n.getAttribute(t)}(n[0]));null!=r&&(L7[i]=r)});var eP={styleDefault:"solid",familyDefault:"classic",cssPrefix:ZR,replacementClass:YR,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};L7.familyPrefix&&(L7.cssPrefix=L7.familyPrefix);var J8=$t($t({},eP),L7);J8.autoReplaceSvg||(J8.observeMutations=!1);var e1={};Object.keys(eP).forEach(function(t){Object.defineProperty(e1,t,{enumerable:!0,set:function(e){J8[t]=e,T7.forEach(function(i){return i(e1)})},get:function(){return J8[t]}})}),Object.defineProperty(e1,"familyPrefix",{enumerable:!0,set:function(n){J8.cssPrefix=n,T7.forEach(function(e){return e(e1)})},get:function(){return J8.cssPrefix}}),zl.FontAwesomeConfig=e1;var T7=[],Sl=my,p3={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},UDe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function H7(){for(var t=12,n="";t-- >0;)n+=UDe[62*Math.random()|0];return n}function e5(t){for(var n=[],e=(t||[]).length>>>0;e--;)n[e]=t[e];return n}function xy(t){return t.classList?e5(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(n){return n})}function tP(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function F9(t){return Object.keys(t||{}).reduce(function(n,e){return n+"".concat(e,": ").concat(t[e].trim(),";")},"")}function by(t){return t.size!==p3.size||t.x!==p3.x||t.y!==p3.y||t.rotate!==p3.rotate||t.flipX||t.flipY}var qDe=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function nP(){var t=ZR,n=YR,e=e1.cssPrefix,i=e1.replacementClass,r=qDe;if(e!==t||i!==n){var s=new RegExp("\\.".concat(t,"\\-"),"g"),d=new RegExp("\\--".concat(t,"\\-"),"g"),v=new RegExp("\\.".concat(n),"g");r=r.replace(s,".".concat(e,"-")).replace(d,"--".concat(e,"-")).replace(v,".".concat(i))}return r}var iP=!1;function Cy(){e1.autoAddCss&&!iP&&(function BDe(t){if(t&&u4){var n=z2.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=t;for(var e=z2.head.childNodes,i=null,r=e.length-1;r>-1;r--){var s=e[r],d=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(d)>-1&&(i=s)}z2.head.insertBefore(n,i)}}(nP()),iP=!0)}var WDe={mixout:function(){return{dom:{css:nP,insertCss:Cy}}},hooks:function(){return{beforeDOMElementCreation:function(){Cy()},beforeI2svg:function(){Cy()}}}},f4=zl||{};f4[d4]||(f4[d4]={}),f4[d4].styles||(f4[d4].styles={}),f4[d4].hooks||(f4[d4].hooks={}),f4[d4].shims||(f4[d4].shims=[]);var xc=f4[d4],rP=[],N9=!1;function k7(t){var n=t.tag,e=t.attributes,i=void 0===e?{}:e,r=t.children,s=void 0===r?[]:r;return"string"==typeof t?tP(t):"<".concat(n," ").concat(function jDe(t){return Object.keys(t||{}).reduce(function(n,e){return n+"".concat(e,'="').concat(tP(t[e]),'" ')},"").trim()}(i),">").concat(s.map(k7).join(""),"</").concat(n,">")}function aP(t,n,e){if(t&&t[n]&&t[n][e])return{prefix:n,iconName:e,icon:t[n][e]}}u4&&((N9=(z2.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(z2.readyState))||z2.addEventListener("DOMContentLoaded",function t(){z2.removeEventListener("DOMContentLoaded",t),N9=1,rP.map(function(n){return n()})}));var wy=function(n,e,i,r){var C,S,V,s=Object.keys(n),d=s.length,v=void 0!==r?function(n,e){return function(i,r,s,d){return n.call(e,i,r,s,d)}}(e,r):e;for(void 0===i?(C=1,V=n[s[0]]):(C=0,V=i);C<d;C++)V=v(V,n[S=s[C]],S,n);return V};function My(t){var n=function KDe(t){for(var n=[],e=0,i=t.length;e<i;){var r=t.charCodeAt(e++);if(r>=55296&&r<=56319&&e<i){var s=t.charCodeAt(e++);56320==(64512&s)?n.push(((1023&r)<<10)+(1023&s)+65536):(n.push(r),e--)}else n.push(r)}return n}(t);return 1===n.length?n[0].toString(16):null}function oP(t){return Object.keys(t).reduce(function(n,e){var i=t[e];return i.icon?n[i.iconName]=i.icon:n[e]=i,n},{})}function zy(t,n){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==i&&i,s=oP(n);"function"!=typeof xc.hooks.addPack||r?xc.styles[t]=$t($t({},xc.styles[t]||{}),s):xc.hooks.addPack(t,oP(n)),"fas"===t&&zy("fa",n)}var O9,B9,U9,t5=xc.styles,JDe=xc.shims,eAe=(Ki(O9={},S2,Object.values(E7[S2])),Ki(O9,ni,Object.values(E7[ni])),O9),Sy=null,sP={},cP={},lP={},uP={},dP={},tAe=(Ki(B9={},S2,Object.keys(D7[S2])),Ki(B9,ni,Object.keys(D7[ni])),B9);var fP=function(){var n=function(s){return wy(t5,function(d,v,C){return d[C]=wy(v,s,{}),d},{})};sP=n(function(r,s,d){return s[3]&&(r[s[3]]=d),s[2]&&s[2].filter(function(C){return"number"==typeof C}).forEach(function(C){r[C.toString(16)]=d}),r}),cP=n(function(r,s,d){return r[d]=d,s[2]&&s[2].filter(function(C){return"string"==typeof C}).forEach(function(C){r[C]=d}),r}),dP=n(function(r,s,d){var v=s[2];return r[d]=d,v.forEach(function(C){r[C]=d}),r});var e="far"in t5||e1.autoFetchSvg,i=wy(JDe,function(r,s){var d=s[0],v=s[1],C=s[2];return"far"===v&&!e&&(v="fas"),"string"==typeof d&&(r.names[d]={prefix:v,iconName:C}),"number"==typeof d&&(r.unicodes[d.toString(16)]={prefix:v,iconName:C}),r},{names:{},unicodes:{}});lP=i.names,uP=i.unicodes,Sy=j9(e1.styleDefault,{family:e1.familyDefault})};function Dy(t,n){return(sP[t]||{})[n]}function Q0(t,n){return(dP[t]||{})[n]}function hP(t){return lP[t]||{prefix:null,iconName:null}}function Dl(){return Sy}(function ODe(t){T7.push(t)})(function(t){Sy=j9(t.styleDefault,{family:e1.familyDefault})}),fP();var Ay=function(){return{prefix:null,iconName:null,rest:[]}};function j9(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,i=void 0===e?S2:e;return A7[i][t]||A7[i][D7[i][t]]||(t in xc.styles?t:null)||null}var pP=(Ki(U9={},S2,Object.keys(E7[S2])),Ki(U9,ni,Object.keys(E7[ni])),U9);function G9(t){var n,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==i&&i,s=(Ki(n={},S2,"".concat(e1.cssPrefix,"-").concat(S2)),Ki(n,ni,"".concat(e1.cssPrefix,"-").concat(ni)),n),d=null,v=S2;(t.includes(s[S2])||t.some(function(S){return pP[S2].includes(S)}))&&(v=S2),(t.includes(s[ni])||t.some(function(S){return pP[ni].includes(S)}))&&(v=ni);var C=t.reduce(function(S,V){var F=function iAe(t,n){var e=n.split("-"),i=e[0],r=e.slice(1).join("-");return i!==t||""===r||function nAe(t){return~RDe.indexOf(t)}(r)?null:r}(e1.cssPrefix,V);if(t5[V]?(V=eAe[v].includes(V)?VDe[v][V]:V,d=V,S.prefix=V):tAe[v].indexOf(V)>-1?(d=V,S.prefix=j9(V,{family:v})):F?S.iconName=F:V!==e1.replacementClass&&V!==s[S2]&&V!==s[ni]&&S.rest.push(V),!r&&S.prefix&&S.iconName){var Z="fa"===d?hP(S.iconName):{},K=Q0(S.prefix,S.iconName);Z.prefix&&(d=null),S.iconName=Z.iconName||K||S.iconName,S.prefix=Z.prefix||S.prefix,"far"===S.prefix&&!t5.far&&t5.fas&&!e1.autoFetchSvg&&(S.prefix="fas")}return S},Ay());return(t.includes("fa-brands")||t.includes("fab"))&&(C.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(C.prefix="fad"),!C.prefix&&v===ni&&(t5.fass||e1.autoFetchSvg)&&(C.prefix="fass",C.iconName=Q0(C.prefix,C.iconName)||C.iconName),("fa"===C.prefix||"fa"===d)&&(C.prefix=Dl()||"fas"),C}var oAe=function(){function t(){(function _De(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")})(this,t),this.definitions={}}return function vDe(t,n,e){n&&FR(t.prototype,n),e&&FR(t,e),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"add",value:function(){for(var e=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var d=r.reduce(this._pullDefinitions,{});Object.keys(d).forEach(function(v){e.definitions[v]=$t($t({},e.definitions[v]||{}),d[v]),zy(v,d[v]);var C=E7[S2][v];C&&zy(C,d[v]),fP()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var d=r[s],v=d.prefix,C=d.iconName,S=d.icon,V=S[2];e[v]||(e[v]={}),V.length>0&&V.forEach(function(F){"string"==typeof F&&(e[v][F]=S)}),e[v][C]=S}),e}}]),t}(),mP=[],n5={},r5={},sAe=Object.keys(r5);function Ey(t,n){for(var e=arguments.length,i=new Array(e>2?e-2:0),r=2;r<e;r++)i[r-2]=arguments[r];return(n5[t]||[]).forEach(function(d){n=d.apply(null,[n].concat(i))}),n}function J0(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];(n5[t]||[]).forEach(function(s){s.apply(null,e)})}function h4(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);return r5[t]?r5[t].apply(null,n):void 0}function Vy(t){"fa"===t.prefix&&(t.prefix="fas");var n=t.iconName,e=t.prefix||Dl();if(n)return n=Q0(e,n)||n,aP(gP.definitions,e,n)||aP(xc.styles,e,n)}var gP=new oAe,uAe={i2svg:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u4?(J0("beforeI2svg",n),h4("pseudoElements2svg",n),h4("i2svg",n)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.autoReplaceSvgRoot;!1===e1.autoReplaceSvg&&(e1.autoReplaceSvg=!0),e1.observeMutations=!0,function YDe(t){u4&&(N9?setTimeout(t,0):rP.push(t))}(function(){fAe({autoReplaceSvgRoot:e}),J0("watch",n)})}},Bo={noAuto:function(){e1.autoReplaceSvg=!1,e1.observeMutations=!1,J0("noAuto")},config:e1,dom:uAe,parse:{icon:function(n){if(null===n)return null;if("object"===V9(n)&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:Q0(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&2===n.length){var e=0===n[1].indexOf("fa-")?n[1].slice(3):n[1],i=j9(n[0]);return{prefix:i,iconName:Q0(i,e)||e}}if("string"==typeof n&&(n.indexOf("".concat(e1.cssPrefix,"-"))>-1||n.match(LDe))){var r=G9(n.split(" "),{skipLookups:!0});return{prefix:r.prefix||Dl(),iconName:Q0(r.prefix,r.iconName)||r.iconName}}if("string"==typeof n){var s=Dl();return{prefix:s,iconName:Q0(s,n)||n}}}},library:gP,findIconDefinition:Vy,toHtml:k7},fAe=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,i=void 0===e?z2:e;(Object.keys(xc.styles).length>0||e1.autoFetchSvg)&&u4&&e1.autoReplaceSvg&&Bo.dom.i2svg({node:i})};function $9(t,n){return Object.defineProperty(t,"abstract",{get:n}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(i){return k7(i)})}}),Object.defineProperty(t,"node",{get:function(){if(u4){var i=z2.createElement("div");return i.innerHTML=t.html,i.children}}}),t}function Ly(t){var n=t.icons,e=n.main,i=n.mask,r=t.prefix,s=t.iconName,d=t.transform,v=t.symbol,C=t.title,S=t.maskId,V=t.titleId,F=t.extra,Z=t.watchable,K=void 0!==Z&&Z,le=i.found?i:e,xe=le.width,Me=le.height,He="fak"===r,ut=[e1.replacementClass,s?"".concat(e1.cssPrefix,"-").concat(s):""].filter(function(yr){return-1===F.classes.indexOf(yr)}).filter(function(yr){return""!==yr||!!yr}).concat(F.classes).join(" "),$e={children:[],attributes:$t($t({},F.attributes),{},{"data-prefix":r,"data-icon":s,class:ut,role:F.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(xe," ").concat(Me)})},St=He&&!~F.classes.indexOf("fa-fw")?{width:"".concat(xe/Me*16*.0625,"em")}:{};K&&($e.attributes[X0]=""),C&&($e.children.push({tag:"title",attributes:{id:$e.attributes["aria-labelledby"]||"title-".concat(V||H7())},children:[C]}),delete $e.attributes.title);var z1=$t($t({},$e),{},{prefix:r,iconName:s,main:e,mask:i,maskId:S,transform:d,symbol:v,styles:$t($t({},St),F.styles)}),J1=i.found&&e.found?h4("generateAbstractMask",z1)||{children:[],attributes:{}}:h4("generateAbstractIcon",z1)||{children:[],attributes:{}},$o=J1.attributes;return z1.children=J1.children,z1.attributes=$o,v?function pAe(t){var e=t.iconName,i=t.children,r=t.attributes,s=t.symbol,d=!0===s?"".concat(t.prefix,"-").concat(e1.cssPrefix,"-").concat(e):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:$t($t({},r),{},{id:d}),children:i}]}]}(z1):function hAe(t){var n=t.children,e=t.main,i=t.mask,r=t.attributes,s=t.styles,d=t.transform;if(by(d)&&e.found&&!i.found){var S={x:e.width/e.height/2,y:.5};r.style=F9($t($t({},s),{},{"transform-origin":"".concat(S.x+d.x/16,"em ").concat(S.y+d.y/16,"em")}))}return[{tag:"svg",attributes:r,children:n}]}(z1)}function _P(t){var n=t.content,e=t.width,i=t.height,r=t.transform,s=t.title,d=t.extra,v=t.watchable,C=void 0!==v&&v,S=$t($t($t({},d.attributes),s?{title:s}:{}),{},{class:d.classes.join(" ")});C&&(S[X0]="");var V=$t({},d.styles);by(r)&&(V.transform=function $De(t){var n=t.transform,e=t.width,r=t.height,s=void 0===r?my:r,d=t.startCentered,v=void 0!==d&&d,C="";return C+=v&&WR?"translate(".concat(n.x/Sl-(void 0===e?my:e)/2,"em, ").concat(n.y/Sl-s/2,"em) "):v?"translate(calc(-50% + ".concat(n.x/Sl,"em), calc(-50% + ").concat(n.y/Sl,"em)) "):"translate(".concat(n.x/Sl,"em, ").concat(n.y/Sl,"em) "),(C+="scale(".concat(n.size/Sl*(n.flipX?-1:1),", ").concat(n.size/Sl*(n.flipY?-1:1),") "))+"rotate(".concat(n.rotate,"deg) ")}({transform:r,startCentered:!0,width:e,height:i}),V["-webkit-transform"]=V.transform);var F=F9(V);F.length>0&&(S.style=F);var Z=[];return Z.push({tag:"span",attributes:S,children:[n]}),s&&Z.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),Z}var Ty=xc.styles;function Hy(t){var n=t[0],e=t[1],s=fy(t.slice(4),1)[0];return{found:!0,width:n,height:e,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(e1.cssPrefix,"-").concat(K0.GROUP)},children:[{tag:"path",attributes:{class:"".concat(e1.cssPrefix,"-").concat(K0.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(e1.cssPrefix,"-").concat(K0.PRIMARY),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var gAe={found:!1,width:512,height:512};function ky(t,n){var e=n;return"fa"===n&&null!==e1.styleDefault&&(n=Dl()),new Promise(function(i,r){if(h4("missingIconAbstract"),"fa"===e){var d=hP(t)||{};t=d.iconName||t,n=d.prefix||n}if(t&&n&&Ty[n]&&Ty[n][t])return i(Hy(Ty[n][t]));(function _Ae(t,n){!KR&&!e1.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(n,'" is missing.'))})(t,n),i($t($t({},gAe),{},{icon:e1.showMissingIcons&&t&&h4("missingIconAbstract")||{}}))})}var vP=function(){},Iy=e1.measurePerformance&&T9&&T9.mark&&T9.measure?T9:{mark:vP,measure:vP},I7='FA "6.4.0"',yP=function(n){Iy.mark("".concat(I7," ").concat(n," ends")),Iy.measure("".concat(I7," ").concat(n),"".concat(I7," ").concat(n," begins"),"".concat(I7," ").concat(n," ends"))},Ry={begin:function(n){return Iy.mark("".concat(I7," ").concat(n," begins")),function(){return yP(n)}},end:yP},q9=function(){};function xP(t){return"string"==typeof(t.getAttribute?t.getAttribute(X0):null)}function CAe(t){return z2.createElementNS("http://www.w3.org/2000/svg",t)}function wAe(t){return z2.createElement(t)}function bP(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,i=void 0===e?"svg"===t.tag?CAe:wAe:e;if("string"==typeof t)return z2.createTextNode(t);var r=i(t.tag);return Object.keys(t.attributes||[]).forEach(function(d){r.setAttribute(d,t.attributes[d])}),(t.children||[]).forEach(function(d){r.appendChild(bP(d,{ceFn:i}))}),r}var W9={replace:function(n){var e=n[0];if(e.parentNode)if(n[1].forEach(function(r){e.parentNode.insertBefore(bP(r),e)}),null===e.getAttribute(X0)&&e1.keepOriginalSource){var i=z2.createComment(function MAe(t){var n=" ".concat(t.outerHTML," ");return"".concat(n,"Font Awesome fontawesome.com ")}(e));e.parentNode.replaceChild(i,e)}else e.remove()},nest:function(n){var e=n[0],i=n[1];if(~xy(e).indexOf(e1.replacementClass))return W9.replace(n);var r=new RegExp("".concat(e1.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(v,C){return C===e1.replacementClass||C.match(r)?v.toSvg.push(C):v.toNode.push(C),v},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}var d=i.map(function(v){return k7(v)}).join("\n");e.setAttribute(X0,""),e.innerHTML=d}};function CP(t){t()}function wP(t,n){var e="function"==typeof n?n:q9;if(0===t.length)e();else{var i=CP;e1.mutateApproach===ADe&&(i=zl.requestAnimationFrame||CP),i(function(){var r=function bAe(){return!0===e1.autoReplaceSvg?W9.replace:W9[e1.autoReplaceSvg]||W9.replace}(),s=Ry.begin("mutate");t.map(r),s(),e()})}}var Py=!1;function MP(){Py=!0}function Fy(){Py=!1}var Z9=null;function zP(t){if(qR&&e1.observeMutations){var n=t.treeCallback,e=void 0===n?q9:n,i=t.nodeCallback,r=void 0===i?q9:i,s=t.pseudoElementsCallback,d=void 0===s?q9:s,v=t.observeMutationsRoot,C=void 0===v?z2:v;Z9=new qR(function(S){if(!Py){var V=Dl();e5(S).forEach(function(F){if("childList"===F.type&&F.addedNodes.length>0&&!xP(F.addedNodes[0])&&(e1.searchPseudoElements&&d(F.target),e(F.target)),"attributes"===F.type&&F.target.parentNode&&e1.searchPseudoElements&&d(F.target.parentNode),"attributes"===F.type&&xP(F.target)&&~IDe.indexOf(F.attributeName))if("class"===F.attributeName&&function yAe(t){var n=t.getAttribute?t.getAttribute(_y):null,e=t.getAttribute?t.getAttribute(vy):null;return n&&e}(F.target)){var Z=G9(xy(F.target)),le=Z.iconName;F.target.setAttribute(_y,Z.prefix||V),le&&F.target.setAttribute(vy,le)}else(function xAe(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(e1.replacementClass)})(F.target)&&r(F.target)})}}),u4&&Z9.observe(C,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function SP(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},e=function DAe(t){var n=t.getAttribute("data-prefix"),e=t.getAttribute("data-icon"),i=void 0!==t.innerText?t.innerText.trim():"",r=G9(xy(t));return r.prefix||(r.prefix=Dl()),n&&e&&(r.prefix=n,r.iconName=e),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function rAe(t,n){return(cP[t]||{})[n]}(r.prefix,t.innerText)||Dy(r.prefix,My(t.innerText))),!r.iconName&&e1.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}(t),i=e.iconName,r=e.prefix,s=e.rest,d=function AAe(t){var n=e5(t.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),e=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return e1.autoA11y&&(e?n["aria-labelledby"]="".concat(e1.replacementClass,"-title-").concat(i||H7()):(n["aria-hidden"]="true",n.focusable="false")),n}(t),v=Ey("parseNodeAttributes",{},t),C=n.styleParser?function SAe(t){var n=t.getAttribute("style"),e=[];return n&&(e=n.split(";").reduce(function(i,r){var s=r.split(":"),d=s[0],v=s.slice(1);return d&&v.length>0&&(i[d]=v.join(":").trim()),i},{})),e}(t):[];return $t({iconName:i,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:p3,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:C,attributes:d}},v)}var VAe=xc.styles;function DP(t){var n="nest"===e1.autoReplaceSvg?SP(t,{styleParser:!1}):SP(t);return~n.extra.classes.indexOf(QR)?h4("generateLayersText",t,n):h4("generateSvgReplacementMutation",t,n)}var Al=new Set;function AP(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!u4)return Promise.resolve();var e=z2.documentElement.classList,i=function(F){return e.add("".concat(XR,"-").concat(F))},r=function(F){return e.remove("".concat(XR,"-").concat(F))},s=e1.autoFetchSvg?Al:yy.map(function(V){return"fa-".concat(V)}).concat(Object.keys(VAe));s.includes("fa")||s.push("fa");var d=[".".concat(QR,":not([").concat(X0,"])")].concat(s.map(function(V){return".".concat(V,":not([").concat(X0,"])")})).join(", ");if(0===d.length)return Promise.resolve();var v=[];try{v=e5(t.querySelectorAll(d))}catch{}if(!(v.length>0))return Promise.resolve();i("pending"),r("complete");var C=Ry.begin("onTree"),S=v.reduce(function(V,F){try{var Z=DP(F);Z&&V.push(Z)}catch(K){KR||"MissingIcon"===K.name&&console.error(K)}return V},[]);return new Promise(function(V,F){Promise.all(S).then(function(Z){wP(Z,function(){i("active"),i("complete"),r("pending"),"function"==typeof n&&n(),C(),V()})}).catch(function(Z){C(),F(Z)})})}function LAe(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;DP(t).then(function(e){e&&wP([e],n)})}yy.map(function(t){Al.add("fa-".concat(t))}),Object.keys(D7[S2]).map(Al.add.bind(Al)),Object.keys(D7[ni]).map(Al.add.bind(Al)),Al=z7(Al);var HAe=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,r=void 0===i?p3:i,s=e.symbol,d=void 0!==s&&s,v=e.mask,C=void 0===v?null:v,S=e.maskId,V=void 0===S?null:S,F=e.title,Z=void 0===F?null:F,K=e.titleId,le=void 0===K?null:K,xe=e.classes,Me=void 0===xe?[]:xe,He=e.attributes,ut=void 0===He?{}:He,$e=e.styles,St=void 0===$e?{}:$e;if(n){var z1=n.prefix,J1=n.iconName,Tn=n.icon;return $9($t({type:"icon"},n),function(){return J0("beforeDOMElementCreation",{iconDefinition:n,params:e}),e1.autoA11y&&(Z?ut["aria-labelledby"]="".concat(e1.replacementClass,"-title-").concat(le||H7()):(ut["aria-hidden"]="true",ut.focusable="false")),Ly({icons:{main:Hy(Tn),mask:C?Hy(C.icon):{found:!1,width:null,height:null,icon:{}}},prefix:z1,iconName:J1,transform:$t($t({},p3),r),symbol:d,title:Z,maskId:V,titleId:le,extra:{attributes:ut,styles:St,classes:Me}})})}},kAe={mixout:function(){return{icon:(t=HAe,function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(n||{}).icon?n:Vy(n||{}),r=e.mask;return r&&(r=(r||{}).icon?r:Vy(r||{})),t(i,$t($t({},e),{},{mask:r}))})};var t},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=AP,e.nodeCallback=LAe,e}}},provides:function(n){n.i2svg=function(e){var i=e.node,s=e.callback;return AP(void 0===i?z2:i,void 0===s?function(){}:s)},n.generateSvgReplacementMutation=function(e,i){var r=i.iconName,s=i.title,d=i.titleId,v=i.prefix,C=i.transform,S=i.symbol,V=i.mask,F=i.maskId,Z=i.extra;return new Promise(function(K,le){Promise.all([ky(r,v),V.iconName?ky(V.iconName,V.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(xe){var Me=fy(xe,2);K([e,Ly({icons:{main:Me[0],mask:Me[1]},prefix:v,iconName:r,transform:C,symbol:S,maskId:F,title:s,titleId:d,extra:Z,watchable:!0})])}).catch(le)})},n.generateAbstractIcon=function(e){var S,i=e.children,r=e.attributes,s=e.main,d=e.transform,C=F9(e.styles);return C.length>0&&(r.style=C),by(d)&&(S=h4("generateAbstractTransformGrouping",{main:s,transform:d,containerWidth:s.width,iconWidth:s.width})),i.push(S||s.icon),{children:i,attributes:r}}}},IAe={mixout:function(){return{layer:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return $9({type:"layer"},function(){J0("beforeDOMElementCreation",{assembler:e,params:i});var d=[];return e(function(v){Array.isArray(v)?v.map(function(C){d=d.concat(C.abstract)}):d=d.concat(v.abstract)}),[{tag:"span",attributes:{class:["".concat(e1.cssPrefix,"-layers")].concat(z7(s)).join(" ")},children:d}]})}}}},RAe={mixout:function(){return{counter:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,d=i.classes,v=void 0===d?[]:d,C=i.attributes,S=void 0===C?{}:C,V=i.styles,F=void 0===V?{}:V;return $9({type:"counter",content:e},function(){return J0("beforeDOMElementCreation",{content:e,params:i}),function mAe(t){var n=t.content,e=t.title,i=t.extra,r=$t($t($t({},i.attributes),e?{title:e}:{}),{},{class:i.classes.join(" ")}),s=F9(i.styles);s.length>0&&(r.style=s);var d=[];return d.push({tag:"span",attributes:r,children:[n]}),e&&d.push({tag:"span",attributes:{class:"sr-only"},children:[e]}),d}({content:e.toString(),title:s,extra:{attributes:S,styles:F,classes:["".concat(e1.cssPrefix,"-layers-counter")].concat(z7(v))}})})}}}},PAe={mixout:function(){return{text:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?p3:r,d=i.title,v=void 0===d?null:d,C=i.classes,S=void 0===C?[]:C,V=i.attributes,F=void 0===V?{}:V,Z=i.styles,K=void 0===Z?{}:Z;return $9({type:"text",content:e},function(){return J0("beforeDOMElementCreation",{content:e,params:i}),_P({content:e,transform:$t($t({},p3),s),title:v,extra:{attributes:F,styles:K,classes:["".concat(e1.cssPrefix,"-layers-text")].concat(z7(S))}})})}}},provides:function(n){n.generateLayersText=function(e,i){var r=i.title,s=i.transform,d=i.extra,v=null,C=null;if(WR){var S=parseInt(getComputedStyle(e).fontSize,10),V=e.getBoundingClientRect();v=V.width/S,C=V.height/S}return e1.autoA11y&&!r&&(d.attributes["aria-hidden"]="true"),Promise.resolve([e,_P({content:e.innerHTML,width:v,height:C,transform:s,title:r,extra:d,watchable:!0})])}}},FAe=new RegExp('"',"ug"),EP=[1105920,1112319];function VP(t,n){var e="".concat(DDe).concat(n.replace(":","-"));return new Promise(function(i,r){if(null!==t.getAttribute(e))return i();var d=e5(t.children).filter(function(Tn){return Tn.getAttribute(gy)===n})[0],v=zl.getComputedStyle(t,n),C=v.getPropertyValue("font-family").match(TDe),S=v.getPropertyValue("font-weight"),V=v.getPropertyValue("content");if(d&&!C)return t.removeChild(d),i();if(C&&"none"!==V&&""!==V){var F=v.getPropertyValue("content"),Z=~["Sharp"].indexOf(C[2])?ni:S2,K=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(C[2])?A7[Z][C[2].toLowerCase()]:HDe[Z][S],le=function NAe(t){var n=t.replace(FAe,""),e=function QDe(t,n){var r,e=t.length,i=t.charCodeAt(n);return i>=55296&&i<=56319&&e>n+1&&(r=t.charCodeAt(n+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(n,0),i=e>=EP[0]&&e<=EP[1],r=2===n.length&&n[0]===n[1];return{value:My(r?n[0]:n),isSecondary:i||r}}(F),xe=le.value,Me=le.isSecondary,He=C[0].startsWith("FontAwesome"),ut=Dy(K,xe),$e=ut;if(He){var St=function aAe(t){var n=uP[t],e=Dy("fas",t);return n||(e?{prefix:"fas",iconName:e}:null)||{prefix:null,iconName:null}}(xe);St.iconName&&St.prefix&&(ut=St.iconName,K=St.prefix)}if(!ut||Me||d&&d.getAttribute(_y)===K&&d.getAttribute(vy)===$e)i();else{t.setAttribute(e,$e),d&&t.removeChild(d);var z1=function EAe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:p3,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),J1=z1.extra;J1.attributes[gy]=n,ky(ut,K).then(function(Tn){var $o=Ly($t($t({},z1),{},{icons:{main:Tn,mask:Ay()},prefix:K,iconName:$e,extra:J1,watchable:!0})),yr=z2.createElement("svg");"::before"===n?t.insertBefore(yr,t.firstChild):t.appendChild(yr),yr.outerHTML=$o.map(function(Cc){return k7(Cc)}).join("\n"),t.removeAttribute(e),i()}).catch(r)}}else i()})}function OAe(t){return Promise.all([VP(t,"::before"),VP(t,"::after")])}function BAe(t){return!(t.parentNode===document.head||~EDe.indexOf(t.tagName.toUpperCase())||t.getAttribute(gy)||t.parentNode&&"svg"===t.parentNode.tagName)}function LP(t){if(u4)return new Promise(function(n,e){var i=e5(t.querySelectorAll("*")).filter(BAe).map(OAe),r=Ry.begin("searchPseudoElements");MP(),Promise.all(i).then(function(){r(),Fy(),n()}).catch(function(){r(),Fy(),e()})})}var TP=!1,HP=function(n){return n.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),d=s[0],v=s.slice(1).join("-");if(d&&"h"===v)return i.flipX=!0,i;if(d&&"v"===v)return i.flipY=!0,i;if(v=parseFloat(v),isNaN(v))return i;switch(d){case"grow":i.size=i.size+v;break;case"shrink":i.size=i.size-v;break;case"left":i.x=i.x-v;break;case"right":i.x=i.x+v;break;case"up":i.y=i.y-v;break;case"down":i.y=i.y+v;break;case"rotate":i.rotate=i.rotate+v}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Ny={x:0,y:0,width:"100%",height:"100%"};function kP(t){return t.attributes&&(t.attributes.fill||!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.attributes.fill="black"),t}!function cAe(t,n){var e=n.mixoutsTo;mP=t,n5={},Object.keys(r5).forEach(function(i){-1===sAe.indexOf(i)&&delete r5[i]}),mP.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(d){"function"==typeof r[d]&&(e[d]=r[d]),"object"===V9(r[d])&&Object.keys(r[d]).forEach(function(v){e[d]||(e[d]={}),e[d][v]=r[d][v]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(d){n5[d]||(n5[d]=[]),n5[d].push(s[d])})}i.provides&&i.provides(r5)})}([WDe,kAe,IAe,RAe,PAe,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=LP,e}}},provides:function(n){n.pseudoElements2svg=function(e){var i=e.node;e1.searchPseudoElements&&LP(void 0===i?z2:i)}}},{mixout:function(){return{dom:{unwatch:function(){MP(),TP=!0}}}},hooks:function(){return{bootstrap:function(){zP(Ey("mutationObserverCallbacks",{}))},noAuto:function(){!function zAe(){Z9&&Z9.disconnect()}()},watch:function(e){var i=e.observeMutationsRoot;TP?Fy():zP(Ey("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},{mixout:function(){return{parse:{transform:function(e){return HP(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,i){var r=i.getAttribute("data-fa-transform");return r&&(e.transform=HP(r)),e}}},provides:function(n){n.generateAbstractTransformGrouping=function(e){var i=e.main,r=e.transform,d=e.iconWidth,v={transform:"translate(".concat(e.containerWidth/2," 256)")},C="translate(".concat(32*r.x,", ").concat(32*r.y,") "),S="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),V="rotate(".concat(r.rotate," 0 0)"),K={outer:v,inner:{transform:"".concat(C," ").concat(S," ").concat(V)},path:{transform:"translate(".concat(d/2*-1," -256)")}};return{tag:"g",attributes:$t({},K.outer),children:[{tag:"g",attributes:$t({},K.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:$t($t({},i.icon.attributes),K.path)}]}]}}}},{hooks:function(){return{parseNodeAttributes:function(e,i){var r=i.getAttribute("data-fa-mask"),s=r?G9(r.split(" ").map(function(d){return d.trim()})):Ay();return s.prefix||(s.prefix=Dl()),e.mask=s,e.maskId=i.getAttribute("data-fa-mask-id"),e}}},provides:function(n){n.generateAbstractMask=function(e){var t,i=e.children,r=e.attributes,s=e.main,d=e.mask,v=e.maskId,V=s.icon,Z=d.icon,K=function GDe(t){var n=t.transform,i=t.iconWidth,r={transform:"translate(".concat(t.containerWidth/2," 256)")},s="translate(".concat(32*n.x,", ").concat(32*n.y,") "),d="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),v="rotate(".concat(n.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(d," ").concat(v)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:e.transform,containerWidth:d.width,iconWidth:s.width}),le={tag:"rect",attributes:$t($t({},Ny),{},{fill:"white"})},xe=V.children?{children:V.children.map(kP)}:{},Me={tag:"g",attributes:$t({},K.inner),children:[kP($t({tag:V.tag,attributes:$t($t({},V.attributes),K.path)},xe))]},He={tag:"g",attributes:$t({},K.outer),children:[Me]},ut="mask-".concat(v||H7()),$e="clip-".concat(v||H7()),St={tag:"mask",attributes:$t($t({},Ny),{},{id:ut,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[le,He]},z1={tag:"defs",children:[{tag:"clipPath",attributes:{id:$e},children:(t=Z,"g"===t.tag?t.children:[t])},St]};return i.push(z1,{tag:"rect",attributes:$t({fill:"currentColor","clip-path":"url(#".concat($e,")"),mask:"url(#".concat(ut,")")},Ny)}),{children:i,attributes:r}}}},{provides:function(n){var e=!1;zl.matchMedia&&(e=zl.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:$t($t({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var d=$t($t({},s),{},{attributeName:"opacity"}),v={tag:"circle",attributes:$t($t({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||v.children.push({tag:"animate",attributes:$t($t({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:$t($t({},d),{},{values:"1;0;1;1;0;1;"})}),i.push(v),i.push({tag:"path",attributes:$t($t({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:$t($t({},d),{},{values:"1;0;0;0;0;1;"})}]}),e||i.push({tag:"path",attributes:$t($t({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:$t($t({},d),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},{hooks:function(){return{parseNodeAttributes:function(e,i){var r=i.getAttribute("data-fa-symbol");return e.symbol=null!==r&&(""===r||r),e}}}}],{mixoutsTo:Bo});var XAe=Bo.parse,KAe=Bo.icon;const QAe=["*"],tEe=t=>{const n={[`fa-${t.animation}`]:null!=t.animation&&!t.animation.startsWith("spin"),"fa-spin":"spin"===t.animation||"spin-reverse"===t.animation,"fa-spin-pulse":"spin-pulse"===t.animation||"spin-pulse-reverse"===t.animation,"fa-spin-reverse":"spin-reverse"===t.animation||"spin-pulse-reverse"===t.animation,"fa-pulse":"spin-pulse"===t.animation||"spin-pulse-reverse"===t.animation,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-inverse":t.inverse,"fa-layers-counter":t.counter,"fa-flip-horizontal":"horizontal"===t.flip||"both"===t.flip,"fa-flip-vertical":"vertical"===t.flip||"both"===t.flip,[`fa-${t.size}`]:null!==t.size,[`fa-rotate-${t.rotate}`]:null!==t.rotate,[`fa-pull-${t.pull}`]:null!==t.pull,[`fa-stack-${t.stackItemSize}`]:null!=t.stackItemSize};return Object.keys(n).map(e=>n[e]?e:null).filter(e=>e)};let rEe=(()=>{class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aEe=(()=>{class t{constructor(){this.definitions={}}addIcons(...e){for(const i of e){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...e){for(const i of e){const r=Object.keys(i).map(s=>i[s]);this.addIcons(...r)}}getIconDefinition(e,i){return e in this.definitions&&i in this.definitions[e]?this.definitions[e][i]:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oEe=(()=>{class t{constructor(){this.stackItemSize="1x"}ngOnChanges(e){if("size"in e)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[wn]}),t})(),sEe=(()=>{class t{constructor(e,i){this.renderer=e,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(e){"size"in e&&(null!=e.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${e.size.currentValue}`),null!=e.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${e.size.previousValue}`))}}return t.\u0275fac=function(e){return new(e||t)(W(to),W(Ot))},t.\u0275cmp=Ft({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},features:[wn],ngContentSelectors:QAe,decls:1,vars:0,template:function(e,i){1&e&&(mr(),jn(0))},encapsulation:2}),t})(),Y9=(()=>{class t{constructor(e,i,r,s,d){this.sanitizer=e,this.config=i,this.iconLibrary=r,this.stackItem=s,this.classes=[],null!=d&&null==s&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}set spin(e){this.animation=e?"spin":void 0}set pulse(e){this.animation=e?"spin-pulse":void 0}ngOnChanges(e){if(null!=this.icon||null!=this.config.fallbackIcon){if(e){const r=this.findIconDefinition(null!=this.icon?this.icon:this.config.fallbackIcon);if(null!=r){const s=this.buildParams();this.renderIcon(r,s)}}}else(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})()}render(){this.ngOnChanges({})}findIconDefinition(e){const i=((t,n)=>(t=>void 0!==t.prefix&&void 0!==t.iconName)(t)?t:"string"==typeof t?{prefix:n,iconName:t}:{prefix:t[0],iconName:t[1]})(e,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((t=>{throw new Error(`Could not find icon with iconName=${t.iconName} and prefix=${t.prefix} in the icon library.`)})(i),null)}buildParams(){const e={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?XAe.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...tEe(e),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(e,i){const r=KAe(e,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return t.\u0275fac=function(e){return new(e||t)(W(Ih),W(rEe),W(aEe),W(oEe,8),W(sEe,8))},t.\u0275cmp=Ft({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(e,i){2&e&&(fl("innerHTML",i.renderedIconHTML,sf),ze("title",i.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[wn],decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})(),Oy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({}),t})(),cEe=(()=>{class t{constructor(){this.faThumbsUp=DA,this.faClockFout=fA,this.faPiggyBank=AH,this.faFacebook=E9,this.faEnvelope=JT,this.faInstagram=A9}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-footer"]],decls:35,vars:6,consts:[[1,"grid-container"],[1,"grid-item"],[2,"font-size","50px","color","#C7E7F1",3,"icon"],[1,"contact"],[1,"social-icons"],["href","#"],[1,"face",3,"icon"],[1,"insta",3,"icon"],[1,"enve",3,"icon"],[1,"grid-item-full"],[1,"disclaimer"]],template:function(e,i){1&e&&(de(0,"footer")(1,"div",0)(2,"div",1),nt(3,"fa-icon",2),de(4,"h4"),Ue(5,"Best price"),he(),de(6,"p"),Ue(7," Promise of lowest prices compared to competitors, will match or beat lower prices found elsewhere."),he()(),de(8,"div",1),nt(9,"fa-icon",2),de(10,"h4"),Ue(11,"No surprises"),he(),de(12,"p"),Ue(13,"Instant booking and confirmation of availability guaranteed."),he()(),de(14,"div",1),nt(15,"fa-icon",2),de(16,"h4"),Ue(17,"Discounts"),he(),de(18,"p"),Ue(19,"When making your reservation you'll receive discounts and free services."),he()(),de(20,"div",3)(21,"h3"),Ue(22,"Contact Us"),he(),de(23,"div",4)(24,"a",5),nt(25,"fa-icon",6),he(),de(26,"a",5),nt(27,"fa-icon",7),he(),de(28,"a",5),nt(29,"fa-icon",8),he()()()(),de(30,"div",9)(31,"h1"),Ue(32,"- Hotel Jacqueline -"),he(),de(33,"p",10),Ue(34,"Disclaimer: This is not an official website its a University Proyect. This site offers the property's information and telephone number, as well as online Booking service."),he()()()),2&e&&(qe(3),Ye("icon",i.faThumbsUp),qe(6),Ye("icon",i.faClockFout),qe(6),Ye("icon",i.faPiggyBank),qe(10),Ye("icon",i.faFacebook),qe(2),Ye("icon",i.faInstagram),qe(2),Ye("icon",i.faEnvelope))},dependencies:[Y9],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:20px;justify-content:center;align-items:center;background-color:#0b161b;color:#fff;padding:20px}.grid-item[_ngcontent-%COMP%]{text-align:center}.grid-item-full[_ngcontent-%COMP%]{text-align:center;background-color:#081820;padding:20px;color:#fff}h1[_ngcontent-%COMP%]{font-size:2rem;margin:0}.disclaimer[_ngcontent-%COMP%]{font-size:.9rem;margin:10px 0 0}.contact[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.social-icons[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto;grid-column-gap:20px;justify-content:end}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}fa-icon[_ngcontent-%COMP%]{font-size:30px;color:#c7e7f1;cursor:pointer}fa-icon[_ngcontent-%COMP%]:hover{color:#fff;cursor:pointer}.insta[_ngcontent-%COMP%]:hover{color:#e1306c}.face[_ngcontent-%COMP%]:hover{color:#3b5998}.enve[_ngcontent-%COMP%]:hover{color:#d44638}"]}),t})(),lEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-default"]],decls:5,vars:0,consts:[["flexLayout","row","fxFlex",""],["flexLayout","column"]],template:function(e,i){1&e&&(nt(0,"app-header"),de(1,"div",0)(2,"div"),nt(3,"router-outlet"),he()(),nt(4,"app-footer",1))},dependencies:[Xh,WS,cQ,cEe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap";[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Montserrat,sans-serif}']}),t})(),uEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-section-experience"]],decls:13,vars:0,consts:[[1,"container-experience"],[1,"image-container-experience"],["src","assets/imgs/fake/fake2.jpg","alt",""],[1,"title-container-ex-main"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1),nt(2,"img",2),he(),de(3,"div",3)(4,"h1"),Ue(5,"Experience"),he(),de(6,"h2")(7,"span"),Ue(8,"OF A LIFE TIME"),he()(),de(9,"p"),Ue(10,"Take your vacation to the next level and embark on an unforgettable adventure with Experience. "),nt(11,"br"),Ue(12," Don't settle for the ordinary - let us show you the extraordinary."),he()()())},styles:[".container-experience[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;align-items:flex-start;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.container-experience[_ngcontent-%COMP%]   .image-container-experience[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;align-items:center;height:600px;max-width:500px}.container-experience[_ngcontent-%COMP%]   .image-container-experience[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:cover;width:1020px;border-radius:1rem;clip-path:polygon(10% 0,80% 0,80% 100%,10% 100%);left:-160px}.container-experience[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4.5rem;margin:0;font-family:Radley,serif;display:initial;font-weight:700;letter-spacing:.15em}.container-experience[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:10px;font-size:48px}.container-experience[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-family:Montserrat;font-weight:100}.container-experience[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container-experience[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container-experience[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.title-container-ex-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:0 450px 0 auto;height:100%;width:100%;transform:translate(-3.5%);text-align:center;border:2px solid white;border-radius:5px}"]}),t})(),dEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-section-home"]],decls:16,vars:0,consts:[[1,"container"],[1,"title-home"],[1,"image-container"],["src","assets/imgs/rooms/room-person-23.jpg",1,"img-1"],["src","assets/imgs/rooms/room4.jpg","alt","",1,"img-2"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Your home"),he(),de(4,"h2")(5,"span"),Ue(6,"AWAY FROM HOME"),he()(),de(7,"p"),Ue(8,"Experience the perfect blend of relaxation and sophistication at Your Home, our premier vacation rental service. We understand that your vacation time is precious and that you deserve a comfortable and stylish home-away-from-home experience."),he(),de(9,"p"),Ue(10,"Our properties are thoughtfully curated and meticulously maintained, ensuring that every detail is taken care of, from luxurious linens to fully equipped kitchens. Whether you're looking for a romantic getaway for two or a family vacation, we have a wide range of properties to choose from, each with its own unique charm and character. "),he(),de(11,"p"),Ue(12,"With Your Home, you can truly unwind and let your cares melt away. Book your stay today and discover the ultimate in relaxation and comfort."),he()(),de(13,"div",2),nt(14,"img",3)(15,"img",4),he()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:150px;align-items:flex-start;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{margin-top:80px;padding-right:40px}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;align-items:center;height:600px;width:855px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-1[_ngcontent-%COMP%]{position:absolute;top:40%;left:15%;transform:translate(-55%);height:300px;width:400px;z-index:1}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:400px;width:900px;top:-10%;right:25%;transform:translate(20%);grid-row-start:1;grid-column-start:1 / span 2}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})(),fEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-section-satisfy"]],decls:26,vars:0,consts:[[1,"container"],[1,"title-home"],[1,"spanP"],[1,"image-container"],["src","assets/imgs/fake/fake-comedor-2.jpg","alt","",1,"img-2"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Satisfy"),he(),de(4,"h2")(5,"span"),Ue(6,"YOUR TASTEBUDS"),he()(),de(7,"p")(8,"span",2),Ue(9," Treat yourself to a world-class dining experience with Satisfy, "),nt(10,"br"),Ue(11," our premier restaurant reservation service. "),nt(12,"br"),Ue(13," Whether you're in the mood for gourmet cuisine or casual dining, "),nt(14,"br"),Ue(15," we have a wide range of options to suit your tastes and preferences "),nt(16,"br"),Ue(17," With Satisfy, booking a table has never been easier. "),nt(18,"br")(19,"br"),Ue(20," We'll take care of everything, from securing your reservation to ensuring that your dining experience is nothing short of exceptional. "),nt(21,"br")(22,"br"),Ue(23," Don't settle for mediocre meals - indulge in the finest culinary delights with Satisfy. "),he()()(),de(24,"div",3),nt(25,"img",4),he()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px;align-items:flex-start;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;height:100%}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   .spanP[_ngcontent-%COMP%]{display:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(1fr);grid-gap:20px;align-items:center;height:600px;width:855px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:460px;width:900px;top:0;right:25%;transform:translate(20%)}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})(),hEe=(()=>{class t{constructor(){this.faStar=hV}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-home"]],decls:15,vars:5,consts:[[1,"container-main"],[1,"title-container"],[1,"star-container"],[2,"font-size","30px",3,"icon"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Hotel Jacqueline | Rinc\xf3n de Guayabitos | Mexico "),he(),de(4,"h3"),Ue(5,"Your home away from home. Book with us."),he(),de(6,"div",2),nt(7,"fa-icon",3)(8,"fa-icon",3)(9,"fa-icon",3)(10,"fa-icon",3)(11,"fa-icon",3),he()()(),nt(12,"app-section-home")(13,"app-section-experience")(14,"app-section-satisfy")),2&e&&(qe(7),Ye("icon",i.faStar),qe(1),Ye("icon",i.faStar),qe(1),Ye("icon",i.faStar),qe(1),Ye("icon",i.faStar),qe(1),Ye("icon",i.faStar))},dependencies:[Y9,uEe,dEe,fEe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#fff}.star-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.star-container[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#fff}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(fake1.af790eb95aa8ba5f.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})(),pEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-mission"]],decls:15,vars:0,consts:[[1,"container"],[1,"title-home"],[1,"image-container"],["src","assets/imgs/fake/recpecionist.jpg",1,"img-1"],["src","assets/imgs/rooms/room16.jpg","alt","",1,"img-2"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Our Mission "),he(),de(4,"h2")(5,"span"),Ue(6,"Our Vision"),he()(),de(7,"p"),Ue(8," At our hotel, our mission is to provide a memorable and comfortable stay for our guests by delivering exceptional service, state-of-the-art amenities, and a warm and welcoming environment. We strive to be the premier destination for travelers seeking relaxation and rejuvenation. "),nt(9,"br")(10,"br"),Ue(11," Our vision is to be recognized as the best hotel in the area, setting the standard for excellence in hospitality. We value integrity, respect, and teamwork, and we are committed to continuous improvement in everything we do. "),he()(),de(12,"div",2),nt(13,"img",3)(14,"img",4),he()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:150px;align-items:flex-start;padding:60px;height:900px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{margin-top:80px;padding-right:40px}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;align-items:center;height:600px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;align-items:center;height:600px;width:855px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-1[_ngcontent-%COMP%]{position:absolute;top:40%;left:15%;transform:translate(-55%);height:300px;width:450px;z-index:1}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:400px;width:900px;top:-10%;right:25%;transform:translate(20%);grid-row-start:1;grid-column-start:1 / span 2}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})();var mEe=Pi(898),By=Pi.n(mEe);let gEe=(()=>{class t{constructor(){this.map={}}inicializarMapa(){By().accessToken="pk.eyJ1IjoibHVpc25hdjYiLCJhIjoiY2xoZHVwMmdxMHEzbjNlcGcxMGNkbmR4eSJ9.NqQcfdV5l-XeRgpPHc4xEQ",this.map=new(By().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-105.267,21.0167],zoom:9,accessToken:"pk.eyJ1IjoibHVpc25hdjYiLCJhIjoiY2xoZHVwMmdxMHEzbjNlcGcxMGNkbmR4eSJ9.NqQcfdV5l-XeRgpPHc4xEQ",attributionControl:!1})}agregarMarcador(e,i){(new(By().Marker)).setLngLat([e,i]).addTo(this.map)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_Ee=(()=>{class t{constructor(e){this.mapService=e}ngAfterViewInit(){this.mapService.inicializarMapa()}agregarMarcador(){this.mapService.agregarMarcador(-105.267,21.0167)}}return t.\u0275fac=function(e){return new(e||t)(W(gEe))},t.\u0275cmp=Ft({type:t,selectors:[["app-map"]],decls:1,vars:2,consts:[["id","map"]],template:function(e,i){1&e&&nt(0,"div",0),2&e&&function hc(t){mc(oC,tU,t,!1)}("height:500px")}}),t})(),vEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-about"]],decls:8,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"About us"),he(),de(4,"h3"),Ue(5,"Discover Our Story"),he()()(),nt(6,"app-mission")(7,"app-map"))},dependencies:[pEe,_Ee],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(sea-2.a691d01fb41dfcf0.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})();var yEe=Pi(226),El=Pi.n(yEe);let IP=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(W(to),W(Ot))},t.\u0275dir=je({type:t}),t})(),e6=(()=>{class t extends IP{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,features:[o]}),t})();const ks=new vt("NgValueAccessor"),CEe={provide:ks,useExisting:nn(()=>a5),multi:!0},MEe=new vt("CompositionEventMode");let a5=(()=>{class t extends IP{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wEe(){const t=i4()?i4().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(W(to),W(Ot),W(MEe,8))},t.\u0275dir=je({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&jt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[D1([CEe]),o]}),t})();const zEe=!1;function Vl(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function PP(t){return null!=t&&"number"==typeof t.length}const vr=new vt("NgValidators"),Ll=new vt("NgAsyncValidators"),SEe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Tl{static min(n){return function FP(t){return n=>{if(Vl(n.value)||Vl(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(n)}static max(n){return function NP(t){return n=>{if(Vl(n.value)||Vl(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(n)}static required(n){return function OP(t){return Vl(t.value)?{required:!0}:null}(n)}static requiredTrue(n){return function BP(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function UP(t){return Vl(t.value)||SEe.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function jP(t){return n=>Vl(n.value)||!PP(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function GP(t){return n=>PP(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static pattern(n){return function $P(t){if(!t)return X9;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(Vl(i.value))return null;const r=i.value;return n.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(n)}static nullValidator(n){return null}static compose(n){return KP(n)}static composeAsync(n){return QP(n)}}function X9(t){return null}function qP(t){return null!=t}function WP(t){const n=C2(t)?e2(t):t;if(zEe&&!Li(n)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof t&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new rt(-1101,e)}return n}function ZP(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function YP(t,n){return n.map(e=>e(t))}function XP(t){return t.map(n=>function DEe(t){return!t.validate}(n)?n:e=>n.validate(e))}function KP(t){if(!t)return null;const n=t.filter(qP);return 0==n.length?null:function(e){return ZP(YP(e,n))}}function Uy(t){return null!=t?KP(XP(t)):null}function QP(t){if(!t)return null;const n=t.filter(qP);return 0==n.length?null:function(e){return function xEe(...t){const n=qt(t),{args:e,keys:i}=pz(t),r=new l1(s=>{const{length:d}=e;if(!d)return void s.complete();const v=new Array(d);let C=d,S=d;for(let V=0;V<d;V++){let F=!1;$(e[V]).subscribe(R1(s,Z=>{F||(F=!0,S--),v[V]=Z},()=>C--,void 0,()=>{(!C||!F)&&(S||s.next(i?mz(i,v):v),s.complete())}))}});return n?r.pipe(z_(n)):r}(YP(e,n).map(WP)).pipe(h1(ZP))}}function jy(t){return null!=t?QP(XP(t)):null}function JP(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function eF(t){return t._rawValidators}function tF(t){return t._rawAsyncValidators}function Gy(t){return t?Array.isArray(t)?t:[t]:[]}function K9(t,n){return Array.isArray(t)?t.includes(n):t===n}function nF(t,n){const e=Gy(n);return Gy(t).forEach(r=>{K9(e,r)||e.push(r)}),e}function iF(t,n){return Gy(n).filter(e=>!K9(t,e))}class rF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Uy(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=jy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Sa extends rF{get formDirective(){return null}get path(){return null}}class m3 extends rF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class aF{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Q9=(()=>{class t extends aF{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(W(m3,2))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&$n("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[o]}),t})(),J9=(()=>{class t extends aF{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Sa,10))},t.\u0275dir=je({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&$n("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[o]}),t})();function oF(t,n){return t?`with name: '${n}'`:`at index: ${n}`}const Wy=!1,R7="VALID",tp="INVALID",o5="PENDING",P7="DISABLED";function Zy(t){return(np(t)?t.validators:t)||null}function Yy(t,n){return(np(n)?n.asyncValidators:t)||null}function np(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function sF(t,n,e){const i=t.controls;if(!(n?Object.keys(i):i).length)throw new rt(1e3,Wy?function LEe(t){return`\n    There are no form controls registered with this ${t?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(n):"");if(!i[e])throw new rt(1001,Wy?function TEe(t,n){return`Cannot find form control ${oF(t,n)}`}(n,e):"")}function cF(t,n,e){t._forEachChild((i,r)=>{if(void 0===e[r])throw new rt(1002,Wy?function HEe(t,n){return`Must supply a value for form control ${oF(t,n)}`}(n,r):"")})}class ip{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===R7}get invalid(){return this.status===tp}get pending(){return this.status==o5}get disabled(){return this.status===P7}get enabled(){return this.status!==P7}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(nF(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(nF(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(iF(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(iF(n,this._rawAsyncValidators))}hasValidator(n){return K9(this._rawValidators,n)}hasAsyncValidator(n){return K9(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=o5,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=P7,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=R7,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===R7||this.status===o5)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P7:R7}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=o5,this._hasOwnPendingAsyncValidator=!0;const e=WP(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Gt,this.statusChanges=new Gt}_calculateStatus(){return this._allControlsDisabled()?P7:this.errors?tp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(o5)?o5:this._anyControlsHaveStatus(tp)?tp:R7}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){np(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function kEe(t){return Array.isArray(t)?Uy(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function IEe(t){return Array.isArray(t)?jy(t):t||null}(this._rawAsyncValidators)}}class s5 extends ip{constructor(n,e,i){super(Zy(e),Yy(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){cF(this,!0,n),Object.keys(n).forEach(i=>{sF(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{const r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class lF extends s5{}const t6=new vt("CallSetDisabledState",{providedIn:"root",factory:()=>F7}),F7="always";function rp(t,n){return[...n.path,t]}function N7(t,n,e=F7){Xy(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function PEe(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&uF(t,n)})}(t,n),function NEe(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function FEe(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&uF(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function REe(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function ap(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),sp(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function op(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Xy(t,n){const e=eF(t);null!==n.validator?t.setValidators(JP(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=tF(t);null!==n.asyncValidator?t.setAsyncValidators(JP(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();op(n._rawValidators,r),op(n._rawAsyncValidators,r)}function sp(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=eF(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(d=>d!==n.validator);s.length!==r.length&&(e=!0,t.setValidators(s))}}if(null!==n.asyncValidator){const r=tF(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(d=>d!==n.asyncValidator);s.length!==r.length&&(e=!0,t.setAsyncValidators(s))}}}const i=()=>{};return op(n._rawValidators,i),op(n._rawAsyncValidators,i),e}function uF(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function dF(t,n){Xy(t,n)}function Qy(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function fF(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Jy(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(s=>{s.constructor===a5?e=s:function UEe(t){return Object.getPrototypeOf(t.constructor)===e6}(s)?i=s:r=s}),r||i||e||null}const GEe={provide:Sa,useExisting:nn(()=>n6)},O7=(()=>Promise.resolve())();let n6=(()=>{class t extends Sa{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Gt,this.form=new s5({},Uy(e),jy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){O7.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),N7(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){O7.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){O7.then(()=>{const i=this._findContainer(e.path),r=new s5({});dF(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){O7.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){O7.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,fF(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(W(vr,10),W(Ll,10),W(t6,8))},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&jt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D1([GEe]),o]}),t})();function hF(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function pF(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const B7=class extends ip{constructor(n=null,e,i){super(Zy(e),Yy(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),np(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=pF(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){hF(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){hF(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){pF(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},WEe={provide:m3,useExisting:nn(()=>cp)},_F=(()=>Promise.resolve())();let cp=(()=>{class t extends m3{constructor(e,i,r,s,d,v){super(),this._changeDetectorRef=d,this.callSetDisabledState=v,this.control=new B7,this._registered=!1,this.update=new Gt,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Jy(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Qy(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){N7(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){_F.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&F8(i);_F.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?rp(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(W(Sa,9),W(vr,10),W(Ll,10),W(ks,10),W(Fr,8),W(t6,8))},t.\u0275dir=je({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[D1([WEe]),o,wn]}),t})(),lp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),yF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({}),t})();const ex=new vt("NgModelWithFormControlWarning"),JEe={provide:Sa,useExisting:nn(()=>c5)};let c5=(()=>{class t extends Sa{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Gt,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(sp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return N7(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){ap(e.control||null,e,!1),function jEe(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,fF(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(ap(i||null,e),(t=>t instanceof B7)(r)&&(N7(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);dF(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function OEe(t,n){return sp(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xy(this.form,this),this._oldForm&&sp(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(W(vr,10),W(Ll,10),W(t6,8))},t.\u0275dir=je({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&jt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D1([JEe]),o,wn]}),t})();const nVe={provide:m3,useExisting:nn(()=>ix)};let ix=(()=>{class t extends m3{set isDisabled(e){}constructor(e,i,r,s,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new Gt,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Jy(0,s)}ngOnChanges(e){this._added||this._setUpControl(),Qy(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return rp(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(W(Sa,13),W(vr,10),W(Ll,10),W(ks,10),W(ex,8))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[D1([nVe]),o,wn]}),t})();const iVe={provide:ks,useExisting:nn(()=>up),multi:!0};function MF(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let up=(()=>{class t extends e6{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=MF(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function rVe(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&jt("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[D1([iVe]),o]}),t})(),zF=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(MF(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(to),W(up,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const aVe={provide:ks,useExisting:nn(()=>rx),multi:!0};function SF(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let rx=(()=>{class t extends e6{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,d)=>{s._setSelected(r.indexOf(d.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const d=s;for(let v=0;v<d.length;v++){const S=this._getOptionValue(d[v].value);r.push(S)}}else{const d=i.options;for(let v=0;v<d.length;v++){const C=d[v];if(C.selected){const S=this._getOptionValue(C.value);r.push(S)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function oVe(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&jt("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[D1([aVe]),o]}),t})(),DF=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(SF(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(SF(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(to),W(rx,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),RF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[yF]}),t})();class PF extends ip{constructor(n,e,i){super(Zy(e),Yy(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){cF(this,!1,n),n.forEach((i,r)=>{sF(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function FF(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let sx,mVe=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new t;return e.useNonNullable=!0,e}group(e,i=null){const r=this._reduceControls(e);let s={};return FF(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new s5(r,s)}record(e,i=null){const r=this._reduceControls(e);return new lF(r,i)}control(e,i,r){let s={};return this.useNonNullable?(FF(i)?s=i:(s.validators=i,s.asyncValidators=r),new B7(e,{...s,nonNullable:!0})):new B7(e,i,r)}array(e,i,r){const s=e.map(d=>this._createControl(d));return new PF(s,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof B7||e instanceof ip?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gVe=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:t6,useValue:e.callSetDisabledState??F7}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[RF]}),t})(),_Ve=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:ex,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:t6,useValue:e.callSetDisabledState??F7}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[RF]}),t})();try{sx=typeof Intl<"u"&&Intl.v8BreakIterator}catch{sx=!1}let l5,Ii=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?$0(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!sx)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(Re(Es))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const NF=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function OF(){if(l5)return l5;if("object"!=typeof document||!document)return l5=new Set(NF),l5;let t=document.createElement("input");return l5=new Set(NF.filter(n=>(t.setAttribute("type",n),t.type===n))),l5}let U7,dp,r6,cx;function j7(t){return function vVe(){if(null==U7&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>U7=!0}))}finally{U7=U7||!1}return U7}()?t:!!t.capture}function BF(){if(null==r6){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return r6=!1,r6;if("scrollBehavior"in document.documentElement.style)r6=!0;else{const t=Element.prototype.scrollTo;r6=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return r6}function G7(){if("object"!=typeof document||!document)return 0;if(null==dp){const t=document.createElement("div"),n=t.style;t.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",t.appendChild(e),document.body.appendChild(t),dp=0,0===t.scrollLeft&&(t.scrollLeft=1,dp=0===t.scrollLeft?1:2),t.remove()}return dp}function UF(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function Hl(t){return t.composedPath?t.composedPath()[0]:t.target}function lx(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function bc(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class VVe extends Ze{constructor(n,e){super()}schedule(n,e=0){return this}}const pp={setInterval(t,n,...e){const{delegate:i}=pp;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=pp;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};class dx extends VVe{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(n,e,i=0){return pp.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&pp.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,p(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}const GF={now:()=>(GF.delegate||Date).now(),delegate:void 0};class W7{constructor(n,e=W7.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}W7.now=GF.now;class fx extends W7{constructor(n,e=W7.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const hx=new fx(dx),LVe=hx;function px(t,n=hx){return rn((e,i)=>{let r=null,s=null,d=null;const v=()=>{if(r){r.unsubscribe(),r=null;const S=s;s=null,i.next(S)}};function C(){const S=d+t,V=n.now();if(V<S)return r=this.schedule(void 0,S-V),void i.add(r);v()}e.subscribe(R1(i,S=>{s=S,d=n.now(),r||(r=n.schedule(C,t),i.add(r))},()=>{v(),i.complete()},void 0,()=>{s=r=null}))})}function $F(t){return Xi((n,e)=>t<=e)}function qF(t,n=xi){return t=t??TVe,rn((e,i)=>{let r,s=!0;e.subscribe(R1(i,d=>{const v=n(d);(s||!t(r,v))&&(s=!1,r=v,i.next(d))}))})}function TVe(t,n){return t===n}let WF=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),HVe=(()=>{class t{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=l4(e);return new l1(r=>{const d=this._observeElement(i).subscribe(r);return()=>{d.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Qt,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return t.\u0275fac=function(e){return new(e||t)(Re(WF))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),kVe=(()=>{class t{get disabled(){return this._disabled}set disabled(e){this._disabled=ln(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=uv(e),this._subscribe()}constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new Gt,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(px(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(W(HVe),W(Ot),W(f1))},t.\u0275dir=je({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),ZF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:[WF]}),t})();const YF=new Set;let f5,IVe=(()=>{class t{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):PVe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function RVe(t){if(!YF.has(t))try{f5||(f5=document.createElement("style"),f5.setAttribute("type","text/css"),document.head.appendChild(f5)),f5.sheet&&(f5.sheet.insertRule(`@media ${t} {body{ }}`,0),YF.add(t))}catch(n){console.error(n)}}(e),this._matchMedia(e)}}return t.\u0275fac=function(e){return new(e||t)(Re(Ii))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function PVe(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let FVe=(()=>{class t{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Qt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return XF(u9(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=S_(XF(u9(e)).map(d=>this._registerQuery(d).observable));return s=Ph(s.pipe(aa(1)),s.pipe($F(1),px(0))),s.pipe(h1(d=>{const v={matches:!1,breakpoints:{}};return d.forEach(({matches:C,query:S})=>{v.matches=v.matches||C,v.breakpoints[S]=C}),v}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new l1(d=>{const v=C=>this._zone.run(()=>d.next(C));return i.addListener(v),()=>{i.removeListener(v)}}).pipe(_l(i),h1(({matches:d})=>({query:e,matches:d})),M2(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return t.\u0275fac=function(e){return new(e||t)(Re(IVe),Re(f1))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function XF(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}class BVe{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Qt,this._typeaheadSubscription=Ze.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Qt,this.change=new Qt,n instanceof qu&&(this._itemChangesSubscription=n.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(_r(e=>this._pressedLetters.push(e)),px(n),Xi(()=>this._pressedLetters.length>0),h1(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,d=i[s];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){const e=this._activeItem;this.updateActiveItem(n),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){const e=n.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!n[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,d=this._getItemsArray().length;this._setActiveItemByIndex(s<d?s:d-1,-1);break}return;default:return void((r||bc(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const e=this._getItemsArray(),i="number"==typeof n?n:e.indexOf(n);this._activeItem=e[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+n*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){const i=this._getItemsArray();if(i[n]){for(;this._skipPredicateFn(i[n]);)if(!i[n+=e])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof qu?this._items.toArray():this._items}}class UVe extends BVe{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}}let jVe=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function $Ve(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function GVe(t){try{return t.frameElement}catch{return null}}(function JVe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(i&&(-1===eN(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=eN(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function KVe(t){let n=t.nodeName.toLowerCase(),e="input"===n&&t.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function QVe(t){return!function WVe(t){return function YVe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function qVe(t){let n=t.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(t)||function ZVe(t){return function XVe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||JF(t))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return t.\u0275fac=function(e){return new(e||t)(Re(Ii))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function JF(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let n=t.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function eN(t){if(!JF(t))return null;const n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class eLe{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,i,r,s=!1){this._element=n,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(aa(1)).subscribe(n)}}let tLe=(()=>{class t{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new eLe(e,this._checker,this._ngZone,this._document,i)}}return t.\u0275fac=function(e){return new(e||t)(Re(jVe),Re(f1),Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),nLe=(()=>{class t{get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=ln(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=ln(e)}constructor(e,i,r){this._elementRef=e,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=UF(),this.focusTrap.focusInitialElementWhenReady()}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(tLe),W(Y1))},t.\u0275dir=je({type:t,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[wn]}),t})();function tN(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function nN(t){const n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const iLe=new vt("cdk-input-modality-detector-options"),rLe={ignoreKeys:[18,17,224,91,16]},h5=j7({passive:!0,capture:!0});let aLe=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new ao(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(v=>v===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Hl(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(tN(d)?"keyboard":"mouse"),this._mostRecentTarget=Hl(d))},this._onTouchstart=d=>{nN(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Hl(d))},this._options={...rLe,...s},this.modalityDetected=this._modality.pipe($F(1)),this.modalityChanged=this.modalityDetected.pipe(qF()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,h5),r.addEventListener("mousedown",this._onMousedown,h5),r.addEventListener("touchstart",this._onTouchstart,h5)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,h5),document.removeEventListener("mousedown",this._onMousedown,h5),document.removeEventListener("touchstart",this._onTouchstart,h5))}}return t.\u0275fac=function(e){return new(e||t)(Re(Ii),Re(f1),Re(Y1),Re(iLe,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const oLe=new vt("liveAnnouncerElement",{providedIn:"root",factory:function sLe(){return null}}),cLe=new vt("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let lLe=0,uLe=(()=>{class t{constructor(e,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let s,d;return 1===i.length&&"number"==typeof i[0]?d=i[0]:[s,d]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==d&&r&&(d=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(v=>this._currentResolve=v)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof d&&(this._previousTimeout=setTimeout(()=>this.clear(),d)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+lLe++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const s=i[r],d=s.getAttribute("aria-owns");d?-1===d.indexOf(e)&&s.setAttribute("aria-owns",d+" "+e):s.setAttribute("aria-owns",e)}}}return t.\u0275fac=function(e){return new(e||t)(Re(oLe,8),Re(f1),Re(Y1),Re(cLe,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const dLe=new vt("cdk-focus-monitor-default-options"),mp=j7({passive:!0,capture:!0});let mx=(()=>{class t{constructor(e,i,r,s,d){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Qt,this._rootNodeFocusAndBlurListener=v=>{for(let S=Hl(v);S;S=S.parentElement)"focus"===v.type?this._onFocus(v,S):this._onBlur(v,S)},this._document=s,this._detectionMode=d?.detectionMode||0}monitor(e,i=!1){const r=l4(e);if(!this._platform.isBrowser||1!==r.nodeType)return r1(null);const s=function xVe(t){if(function yVe(){if(null==cx){const t=typeof document<"u"?document.head:null;cx=!(!t||!t.createShadowRoot&&!t.attachShadow)}return cx}()){const n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(r)||this._getDocument(),d=this._elementInfo.get(r);if(d)return i&&(d.checkChildren=!0),d.subject;const v={checkChildren:i,subject:new Qt,rootNode:s};return this._elementInfo.set(r,v),this._registerGlobalListeners(v),v.subject}stopMonitoring(e){const i=l4(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=l4(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([v,C])=>this._originChanged(v,i,C)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=Hl(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,mp),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,mp)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(M2(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mp),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mp),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let d=0;d<s.length;d++)if(s[d].contains(i))return!0;return!1}}return t.\u0275fac=function(e){return new(e||t)(Re(f1),Re(Ii),Re(aLe),Re(Y1,8),Re(dLe,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fLe=(()=>{class t{constructor(e,i){this._elementRef=e,this._focusMonitor=i,this._focusOrigin=null,this.cdkFocusChange=new Gt}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(mx))},t.\u0275dir=je({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]}),t})();const rN="cdk-high-contrast-black-on-white",aN="cdk-high-contrast-white-on-black",gx="cdk-high-contrast-active";let oN=(()=>{class t{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=o1(FVe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(gx,rN,aN),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(gx,rN):2===i&&e.add(gx,aN)}}}return t.\u0275fac=function(e){return new(e||t)(Re(Ii),Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hLe=(()=>{class t{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return t.\u0275fac=function(e){return new(e||t)(Re(oN))},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[ZF]}),t})();const pLe=["addListener","removeListener"],mLe=["addEventListener","removeEventListener"],gLe=["on","off"];function gp(t,n,e,i){if(k1(e)&&(i=e,e=void 0),i)return gp(t,n,e).pipe(z_(i));const[r,s]=function yLe(t){return k1(t.addEventListener)&&k1(t.removeEventListener)}(t)?mLe.map(d=>v=>t[d](n,v,e)):function _Le(t){return k1(t.addListener)&&k1(t.removeListener)}(t)?pLe.map(sN(t,n)):function vLe(t){return k1(t.on)&&k1(t.off)}(t)?gLe.map(sN(t,n)):[];if(!r&&Ta(t))return Je(d=>gp(d,n,e))($(t));if(!r)throw new TypeError("Invalid event target");return new l1(d=>{const v=(...C)=>d.next(1<C.length?C:C[0]);return r(v),()=>s(v)})}function sN(t,n){return e=>i=>t[e](n,i)}const Z7={schedule(t){let n=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Z7;i&&(n=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=n(s=>{e=void 0,t(s)});return new Ze(()=>e?.(r))},requestAnimationFrame(...t){const{delegate:n}=Z7;return(n?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:n}=Z7;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0},CLe=new class bLe extends fx{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;n=n||i.shift();do{if(r=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,r){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw r}}}(class xLe extends dx{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=Z7.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:s}=n;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(Z7.cancelAnimationFrame(e),n._scheduled=void 0)}});let _x,wLe=1;const _p={};function cN(t){return t in _p&&(delete _p[t],!0)}const MLe={setImmediate(t){const n=wLe++;return _p[n]=!0,_x||(_x=Promise.resolve()),_x.then(()=>cN(n)&&t()),n},clearImmediate(t){cN(t)}},{setImmediate:zLe,clearImmediate:SLe}=MLe,vp={setImmediate(...t){const{delegate:n}=vp;return(n?.setImmediate||zLe)(...t)},clearImmediate(t){const{delegate:n}=vp;return(n?.clearImmediate||SLe)(t)},delegate:void 0},ELe=new class ALe extends fx{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;n=n||i.shift();do{if(r=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,r){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw r}}}(class DLe extends dx{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=vp.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:s}=n;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(vp.clearImmediate(e),n._scheduled===e&&(n._scheduled=void 0))}});function vx(t,n=hx){return function VLe(t){return rn((n,e)=>{let i=!1,r=null,s=null,d=!1;const v=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const S=r;r=null,e.next(S)}d&&e.complete()},C=()=>{s=null,d&&e.complete()};n.subscribe(R1(e,S=>{i=!0,r=S,s||$(t(S)).subscribe(s=R1(e,v,C))},()=>{d=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>function TLe(t=0,n,e=LVe){let i=-1;return null!=n&&(y1(n)?e=n:i=n),new l1(r=>{let s=function LLe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;s<0&&(s=0);let d=0;return e.schedule(function(){r.closed||(r.next(d++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(t,n))}const HLe=["contentWrapper"],kLe=["*"],ILe=new vt("VIRTUAL_SCROLL_STRATEGY");let yp=(()=>{class t{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Qt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new l1(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(vx(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):r1()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Xi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=l4(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>gp(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(Re(f1),Re(Ii),Re(Y1,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lN=(()=>{class t{constructor(e,i,r,s){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Qt,this._elementScrolled=new l1(d=>this.ngZone.runOutsideAngular(()=>gp(this.elementRef.nativeElement,"scroll").pipe(M2(this._destroyed)).subscribe(d)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=G7()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==G7()?e.left=e.right:1==G7()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;BF()?i.scrollTo(e):(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left))}measureScrollOffset(e){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const d=this.dir&&"rtl"==this.dir.value;return"start"==e?e=d?r:i:"end"==e&&(e=d?i:r),d&&2==G7()?e==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:d&&1==G7()?e==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(yp),W(f1),W(so,8))},t.\u0275dir=je({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),t})(),Y7=(()=>{class t{constructor(e,i,r){this._platform=e,this._change=new Qt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(vx(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(Re(Ii),Re(f1),Re(Y1,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const uN=new vt("VIRTUAL_SCROLLABLE");let FLe=(()=>{class t extends lN{constructor(e,i,r,s){super(e,i,r,s)}measureViewportSize(e){const i=this.elementRef.nativeElement;return"horizontal"===e?i.clientWidth:i.clientHeight}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(yp),W(f1),W(so,8))},t.\u0275dir=je({type:t,features:[o]}),t})();const OLe=typeof requestAnimationFrame<"u"?CLe:ELe;let BLe=(()=>{class t extends FLe{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=ln(e)}constructor(e,i,r,s,d,v,C,S){super(e,v,r,d),this.elementRef=e,this._changeDetectorRef=i,this._scrollStrategy=s,this.scrollable=S,this._platform=o1(Ii),this._detachedSubject=new Qt,this._renderedRangeSubject=new Qt,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new l1(V=>this._scrollStrategy.scrolledIndexChange.subscribe(F=>Promise.resolve().then(()=>this.ngZone.run(()=>V.next(F))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Ze.EMPTY,this._viewportChanges=C.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(_l(null),vx(0,OLe)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(M2(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function NLe(t,n){return t.start==n.start&&t.end==n.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){e=this.appendOnly&&"to-start"===i?0:e;const s="horizontal"==this.orientation,d=s?"X":"Y";let C=`translate${d}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===i&&(C+=` translate${d}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=C&&(this._renderedContentTransform=C,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollable.scrollTo(r)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let i;const r="left",s="right",d="rtl"==this.dir?.value;i="start"==e?d?s:r:"end"==e?d?r:s:e||("horizontal"===this.orientation?"left":"top");const v=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-v}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of e)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(Fr),W(f1),W(ILe,8),W(so,8),W(yp),W(Y7),W(uN,8))},t.\u0275cmp=Ft({type:t,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,i){if(1&e&&Kn(HLe,7),2&e){let r;V1(r=L1())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,i){2&e&&$n("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[D1([{provide:lN,useFactory:(n,e)=>n||e,deps:[[new Hr,new jc(uN)],t]}]),o,wg],ngContentSelectors:kLe,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,i){1&e&&(mr(),de(0,"div",0,1),jn(2),he(),nt(3,"div",2)),2&e&&(qe(3),fc("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),t})(),xp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({}),t})(),yx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[X8,xp,BLe,X8,xp]}),t})();class xx{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class bx extends xx{constructor(n,e,i,r,s){super(),this.component=n,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class dN extends xx{constructor(n,e,i,r){super(),this.templateRef=n,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class ULe extends xx{constructor(n){super(),this.element=n instanceof Ot?n.nativeElement:n}}class fN{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof bx?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof dN?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof ULe?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class jLe extends fN{constructor(n,e,i,r,s){super(),this.outletElement=n,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=d=>{const v=d.element,C=this._document.createComment("dom-portal");v.parentNode.insertBefore(C,v),this.outletElement.appendChild(v),this._attachedPortal=d,super.setDisposeFn(()=>{C.parentNode&&C.parentNode.replaceChild(v,C)})},this._document=s}attachComponentPortal(n){const i=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let r;return n.viewContainerRef?(r=n.viewContainerRef.createComponent(i,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector,n.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(n.injector||this._defaultInjector||kr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=n,r}attachTemplatePortal(n){let e=n.viewContainerRef,i=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=n,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let hN=(()=>{class t extends fN{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Gt,this.attachDomPortal=s=>{const d=s.element,v=this._document.createComment("dom-portal");s.setAttachedHost(this),d.parentNode.insertBefore(v,d),this._getRootNode().appendChild(d),this._attachedPortal=s,super.setDisposeFn(()=>{v.parentNode&&v.parentNode.replaceChild(d,v)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),d=i.createComponent(s,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=e,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return t.\u0275fac=function(e){return new(e||t)(W(Cs),W(Zi),W(Y1))},t.\u0275dir=je({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[o]}),t})(),pN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({}),t})();const mN=BF();class GLe{constructor(n,e){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=ki(-this._previousScrollPosition.left),n.style.top=ki(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,i=n.style,r=this._document.body.style,s=i.scrollBehavior||"",d=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),mN&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),mN&&(i.scrollBehavior=s,r.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class $Le{constructor(n,e,i,r){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0).pipe(Xi(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class gN{enable(){}disable(){}attach(){}}function Cx(t,n){return n.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function _N(t,n){return n.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class qLe{constructor(n,e,i,r){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Cx(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let WLe=(()=>{class t{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new gN,this.close=d=>new $Le(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new GLe(this._viewportRuler,this._document),this.reposition=d=>new qLe(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=s}}return t.\u0275fac=function(e){return new(e||t)(Re(yp),Re(Y7),Re(f1),Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class wx{constructor(n){if(this.scrollStrategy=new gN,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const e=Object.keys(n);for(const i of e)void 0!==n[i]&&(this[i]=n[i])}}}class ZLe{constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}}let vN=(()=>{class t{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),YLe=(()=>{class t extends vN{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let d=s.length-1;d>-1;d--)if(s[d]._keydownEvents.observers.length>0){const v=s[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>v.next(r)):v.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1),Re(f1,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),XLe=(()=>{class t extends vN{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Hl(s)},this._clickListener=s=>{const d=Hl(s),v="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;const C=this._attachedOverlays.slice();for(let S=C.length-1;S>-1;S--){const V=C[S];if(V._outsidePointerEvents.observers.length<1||!V.hasAttached())continue;if(V.overlayElement.contains(d)||V.overlayElement.contains(v))break;const F=V._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>F.next(s)):F.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1),Re(Ii),Re(f1,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yN=(()=>{class t{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||lx()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),lx()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1),Re(Ii))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class KLe{constructor(n,e,i,r,s,d,v,C,S,V=!1){this._portalOutlet=n,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=d,this._document=v,this._location=C,this._outsideClickDispatcher=S,this._animationsDisabled=V,this._backdropElement=null,this._backdropClick=new Qt,this._attachments=new Qt,this._detachments=new Qt,this._locationChanges=Ze.EMPTY,this._backdropClickHandler=F=>this._backdropClick.next(F),this._backdropTransitionendHandler=F=>{this._disposeBackdrop(F.target)},this._keydownEvents=new Qt,this._outsidePointerEvents=new Qt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(aa(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=ki(this._config.width),n.height=ki(this._config.height),n.minWidth=ki(this._config.minWidth),n.minHeight=ki(this._config.minHeight),n.maxWidth=ki(this._config.maxWidth),n.maxHeight=ki(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,e,i){const r=u9(e||[]).filter(s=>!!s);r.length&&(i?n.classList.add(...r):n.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe(M2(W2(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const xN="cdk-overlay-connected-position-bounding-box",QLe=/([A-Za-z%]+)$/;class bN{get positions(){return this._preferredPositions}constructor(n,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Qt,this._resizeSubscription=Ze.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}attach(n){this._validatePositions(),n.hostElement.classList.add(xN),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let d;for(let v of this._preferredPositions){let C=this._getOriginPoint(n,r,v),S=this._getOverlayPoint(C,e,v),V=this._getOverlayFit(S,e,i,v);if(V.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(v,C);this._canFitWithFlexibleDimensions(V,S,i)?s.push({position:v,origin:C,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(C,v)}):(!d||d.overlayFit.visibleArea<V.visibleArea)&&(d={overlayFit:V,overlayPoint:S,originPoint:C,position:v,overlayRect:e})}if(s.length){let v=null,C=-1;for(const S of s){const V=S.boundingBoxRect.width*S.boundingBoxRect.height*(S.position.weight||1);V>C&&(C=V,v=S)}return this._isPushed=!1,void this._applyPosition(v.position,v.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&a6(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(xN),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,i){let r,s;if("center"==i.originX)r=n.left+n.width/2;else{const d=this._isRtl()?n.right:n.left,v=this._isRtl()?n.left:n.right;r="start"==i.originX?d:v}return e.left<0&&(r-=e.left),s="center"==i.originY?n.top+n.height/2:"top"==i.originY?n.top:n.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(n,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:n.x+r,y:n.y+s}}_getOverlayFit(n,e,i,r){const s=wN(e);let{x:d,y:v}=n,C=this._getOffset(r,"x"),S=this._getOffset(r,"y");C&&(d+=C),S&&(v+=S);let Z=0-v,K=v+s.height-i.height,le=this._subtractOverflows(s.width,0-d,d+s.width-i.width),xe=this._subtractOverflows(s.height,Z,K),Me=le*xe;return{visibleArea:Me,isCompletelyWithinViewport:s.width*s.height===Me,fitsInViewportVertically:xe===s.height,fitsInViewportHorizontally:le==s.width}}_canFitWithFlexibleDimensions(n,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,d=CN(this._overlayRef.getConfig().minHeight),v=CN(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=d&&d<=r)&&(n.fitsInViewportHorizontally||null!=v&&v<=s)}return!1}_pushOverlayOnScreen(n,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const r=wN(e),s=this._viewportRect,d=Math.max(n.x+r.width-s.width,0),v=Math.max(n.y+r.height-s.height,0),C=Math.max(s.top-i.top-n.y,0),S=Math.max(s.left-i.left-n.x,0);let V=0,F=0;return V=r.width<=s.width?S||-d:n.x<this._viewportMargin?s.left-i.left-n.x:0,F=r.height<=s.height?C||-v:n.y<this._viewportMargin?s.top-i.top-n.y:0,this._previousPushAmount={x:V,y:F},{x:n.x+V,y:n.y+F}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new ZLe(n,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=n.overlayY;i="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(n,e){const i=this._viewportRect,r=this._isRtl();let s,d,v,V,F,Z;if("top"===e.overlayY)d=n.y,s=i.height-d+this._viewportMargin;else if("bottom"===e.overlayY)v=i.height-n.y+2*this._viewportMargin,s=i.height-v+this._viewportMargin;else{const K=Math.min(i.bottom-n.y+i.top,n.y),le=this._lastBoundingBoxSize.height;s=2*K,d=n.y-K,s>le&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.y-le/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)Z=i.width-n.x+this._viewportMargin,V=n.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)F=n.x,V=i.right-n.x;else{const K=Math.min(i.right-n.x+i.left,n.x),le=this._lastBoundingBoxSize.width;V=2*K,F=n.x-K,V>le&&!this._isInitialRender&&!this._growAfterOpen&&(F=n.x-le/2)}return{top:d,left:F,bottom:v,right:Z,width:V,height:s}}_setBoundingBoxStyles(n,e){const i=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;r.height=ki(i.height),r.top=ki(i.top),r.bottom=ki(i.bottom),r.width=ki(i.width),r.left=ki(i.left),r.right=ki(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ki(s)),d&&(r.maxWidth=ki(d))}this._lastBoundingBoxSize=i,a6(this._boundingBox.style,r)}_resetBoundingBoxStyles(){a6(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){a6(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(r){const V=this._viewportRuler.getViewportScrollPosition();a6(i,this._getExactOverlayY(e,n,V)),a6(i,this._getExactOverlayX(e,n,V))}else i.position="static";let v="",C=this._getOffset(e,"x"),S=this._getOffset(e,"y");C&&(v+=`translateX(${C}px) `),S&&(v+=`translateY(${S}px)`),i.transform=v.trim(),d.maxHeight&&(r?i.maxHeight=ki(d.maxHeight):s&&(i.maxHeight="")),d.maxWidth&&(r?i.maxWidth=ki(d.maxWidth):s&&(i.maxWidth="")),a6(this._pane.style,i)}_getExactOverlayY(n,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===n.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ki(s.y),r}_getExactOverlayX(n,e,i){let d,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),d=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===d?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ki(s.x),r}_getScrollVisibility(){const n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:_N(n,i),isOriginOutsideView:Cx(n,i),isOverlayClipped:_N(e,i),isOverlayOutsideView:Cx(e,i)}}_subtractOverflows(n,...e){return e.reduce((i,r)=>i-Math.max(r,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+n-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return"x"===e?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&u9(n).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof Ot)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const e=n.width||0,i=n.height||0;return{top:n.y,bottom:n.y+i,left:n.x,right:n.x+e,height:i,width:e}}}function a6(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function CN(t){if("number"!=typeof t&&null!=t){const[n,e]=t.split(QLe);return e&&"px"!==e?null:parseFloat(n)}return t||null}function wN(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const MN="cdk-global-overlay-wrapper";class JLe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(MN),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:d,maxHeight:v}=i,C=!("100%"!==r&&"100vw"!==r||d&&"100%"!==d&&"100vw"!==d),S=!("100%"!==s&&"100vh"!==s||v&&"100%"!==v&&"100vh"!==v),V=this._xPosition,F=this._xOffset,Z="rtl"===this._overlayRef.getConfig().direction;let K="",le="",xe="";C?xe="flex-start":"center"===V?(xe="center",Z?le=F:K=F):Z?"left"===V||"end"===V?(xe="flex-end",K=F):("right"===V||"start"===V)&&(xe="flex-start",le=F):"left"===V||"start"===V?(xe="flex-start",K=F):("right"===V||"end"===V)&&(xe="flex-end",le=F),n.position=this._cssPosition,n.marginLeft=C?"0":K,n.marginTop=S?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=C?"0":le,e.justifyContent=xe,e.alignItems=S?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(MN),i.justifyContent=i.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let eTe=(()=>{class t{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new JLe}flexibleConnectedTo(e){return new bN(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(Re(Y7),Re(Y1),Re(Ii),Re(yN))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),tTe=0,p5=(()=>{class t{constructor(e,i,r,s,d,v,C,S,V,F,Z,K){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=d,this._injector=v,this._ngZone=C,this._document=S,this._directionality=V,this._location=F,this._outsideClickDispatcher=Z,this._animationsModuleType=K}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),d=new wx(e);return d.direction=d.direction||this._directionality.value,new KLe(s,i,r,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+tTe++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(P8)),new jLe(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(Re(WLe),Re(yN),Re(Cs),Re(eTe),Re(YLe),Re(kr),Re(f1),Re(Y1),Re(so),Re(vh),Re(XLe),Re(t4,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const nTe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],zN=new vt("cdk-connected-overlay-scroll-strategy");let Mx=(()=>{class t{constructor(e){this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(W(Ot))},t.\u0275dir=je({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),t})(),SN=(()=>{class t{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ln(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=ln(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=ln(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=ln(e)}get push(){return this._push}set push(e){this._push=ln(e)}constructor(e,i,r,s,d){this._overlay=e,this._dir=d,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Ze.EMPTY,this._attachSubscription=Ze.EMPTY,this._detachSubscription=Ze.EMPTY,this._positionSubscription=Ze.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Gt,this.positionChange=new Gt,this.attach=new Gt,this.detach=new Gt,this.overlayKeydown=new Gt,this.overlayOutsideClick=new Gt,this._templatePortal=new dN(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=nTe);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!bc(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new wx({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof Mx?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(xz(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(W(p5),W(gr),W(Zi),W(zN),W(so,8))},t.\u0275dir=je({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[wn]}),t})();const rTe={provide:zN,deps:[p5],useFactory:function iTe(t){return()=>t.scrollStrategies.reposition()}};let DN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:[p5,rTe],imports:[X8,pN,yx,yx]}),t})();const aTe=["text"];function oTe(t,n){if(1&t&&nt(0,"mat-pseudo-checkbox",6),2&t){const e=w1();Ye("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function sTe(t,n){1&t&&nt(0,"mat-pseudo-checkbox",7),2&t&&Ye("disabled",w1().disabled)}function cTe(t,n){if(1&t&&(de(0,"span",8),Ue(1),he()),2&t){const e=w1();qe(1),J2("(",e.group.label,")")}}const lTe=[[["mat-icon"]],"*"],uTe=["mat-icon","*"],fTe=new vt("mat-sanity-checks",{providedIn:"root",factory:function dTe(){return!0}});let Or=(()=>{class t{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!lx()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return t.\u0275fac=function(e){return new(e||t)(Re(oN),Re(fTe,8),Re(Y1))},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[X8,X8]}),t})();function zx(t){return class extends t{get disabled(){return this._disabled}set disabled(n){this._disabled=ln(n)}constructor(...n){super(...n),this._disabled=!1}}}function Sx(t,n){return class extends t{get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...e){super(...e),this.defaultColor=n,this.color=n}}}function Dx(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=ln(n)}constructor(...n){super(...n),this._disableRipple=!1}}}function VN(t,n=0){return class extends t{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?uv(e):this.defaultTabIndex}constructor(...e){super(...e),this._tabIndex=n,this.defaultTabIndex=n}}}function LN(t){return class extends t{updateErrorState(){const n=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==n&&(this.errorState=s,this.stateChanges.next())}constructor(...n){super(...n),this.errorState=!1}}}const hTe=new vt("MAT_DATE_LOCALE",{providedIn:"root",factory:function pTe(){return o1(u3)}});class Br{constructor(){this._localeChanges=new Qt,this.localeChanges=this._localeChanges}getValidDateOrNull(n){return this.isDateInstance(n)&&this.isValid(n)?n:null}deserialize(n){return null==n||this.isDateInstance(n)&&this.isValid(n)?n:this.invalid()}setLocale(n){this.locale=n,this._localeChanges.next()}compareDate(n,e){return this.getYear(n)-this.getYear(e)||this.getMonth(n)-this.getMonth(e)||this.getDate(n)-this.getDate(e)}sameDate(n,e){if(n&&e){let i=this.isValid(n),r=this.isValid(e);return i&&r?!this.compareDate(n,e):i==r}return n==e}clampDate(n,e,i){return e&&this.compareDate(n,e)<0?e:i&&this.compareDate(n,i)>0?i:n}}const o6=new vt("mat-date-formats"),mTe=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Ax(t,n){const e=Array(t);for(let i=0;i<t;i++)e[i]=n(i);return e}let gTe=(()=>{class t extends Br{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return Ax(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Ax(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return Ax(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let s=this._createDateWithOverflow(e,i,r);return s.getMonth(),s}today(){return new Date}parse(e,i){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(mTe.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const s=new Date;return s.setFullYear(e,i,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return t.\u0275fac=function(e){return new(e||t)(Re(hTe,8),Re(Ii))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const _Te={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let vTe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:[{provide:Br,useClass:gTe}]}),t})(),yTe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:[{provide:o6,useValue:_Te}],imports:[vTe]}),t})(),TN=(()=>{class t{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class xTe{constructor(n,e,i,r=!1){this._renderer=n,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const HN=j7({passive:!0,capture:!0});class bTe{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=Hl(n);e&&this._events.get(n.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(n))})}}addHandler(n,e,i,r){const s=this._events.get(e);if(s){const d=s.get(i);d?d.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,HN)})}removeHandler(n,e,i){const r=this._events.get(n);if(!r)return;const s=r.get(e);s&&(s.delete(i),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,HN)))}}const kN={enterDuration:225,exitDuration:150},IN=j7({passive:!0,capture:!0}),RN=["mousedown","touchstart"],PN=["mouseup","mouseleave","touchend","touchcancel"];class K7{constructor(n,e,i,r){this._target=n,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=l4(i))}fadeInRipple(n,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...kN,...i.animation};i.centered&&(n=r.left+r.width/2,e=r.top+r.height/2);const d=i.radius||function wTe(t,n,e){const i=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),r=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(i*i+r*r)}(n,e,r),v=n-r.left,C=e-r.top,S=s.enterDuration,V=document.createElement("div");V.classList.add("mat-ripple-element"),V.style.left=v-d+"px",V.style.top=C-d+"px",V.style.height=2*d+"px",V.style.width=2*d+"px",null!=i.color&&(V.style.backgroundColor=i.color),V.style.transitionDuration=`${S}ms`,this._containerElement.appendChild(V);const F=window.getComputedStyle(V),K=F.transitionDuration,le="none"===F.transitionProperty||"0s"===K||"0s, 0s"===K||0===r.width&&0===r.height,xe=new xTe(this,V,i,le);V.style.transform="scale3d(1, 1, 1)",xe.state=0,i.persistent||(this._mostRecentTransientRipple=xe);let Me=null;return!le&&(S||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const He=()=>this._finishRippleTransition(xe),ut=()=>this._destroyRipple(xe);V.addEventListener("transitionend",He),V.addEventListener("transitioncancel",ut),Me={onTransitionEnd:He,onTransitionCancel:ut}}),this._activeRipples.set(xe,Me),(le||!S)&&this._finishRippleTransition(xe),xe}fadeOutRipple(n){if(2===n.state||3===n.state)return;const e=n.element,i={...kN,...n.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=l4(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,RN.forEach(i=>{K7._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{PN.forEach(e=>{this._triggerElement.addEventListener(e,this,IN)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=1,!i&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel)),n.element.remove()}_onMousedown(n){const e=tN(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!nN(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(RN.forEach(e=>K7._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&PN.forEach(e=>n.removeEventListener(e,this,IN)))}}K7._eventManager=new bTe;const MTe=new vt("mat-ripple-global-options");let Q7=(()=>{class t{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,r,s,d){this._elementRef=e,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new K7(this,i,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(f1),W(Ii),W(MTe,8),W(t4,8))},t.\u0275dir=je({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&$n("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),t})(),Ex=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[Or,Or]}),t})(),zTe=(()=>{class t{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return t.\u0275fac=function(e){return new(e||t)(W(t4,8))},t.\u0275cmp=Ft({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(e,i){2&e&&$n("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(e,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),t})(),STe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[Or]}),t})();const FN=new vt("MAT_OPTION_PARENT_COMPONENT"),NN=new vt("MatOptgroup");let DTe=0;class ATe{constructor(n,e=!1){this.source=n,this.isUserInput=e}}let ETe=(()=>{class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=ln(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(e,i,r,s){this._element=e,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+DTe++,this.onSelectionChange=new Gt,this._stateChanges=new Qt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!bc(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new ATe(this,e))}}return t.\u0275fac=function(e){Ms()},t.\u0275dir=je({type:t,viewQuery:function(e,i){if(1&e&&Kn(aTe,7),2&e){let r;V1(r=L1())&&(i._text=r.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),t})(),ON=(()=>{class t extends ETe{constructor(e,i,r,s){super(e,i,r,s)}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(Fr),W(FN,8),W(NN,8))},t.\u0275cmp=Ft({type:t,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(e,i){1&e&&jt("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&e&&(fl("id",i.id),ze("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),$n("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},exportAs:["matOption"],features:[o],ngContentSelectors:uTe,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(mr(lTe),xt(0,oTe,1,2,"mat-pseudo-checkbox",0),jn(1),de(2,"span",1,2),jn(4,1),he(),xt(5,sTe,1,1,"mat-pseudo-checkbox",3),xt(6,cTe,2,1,"span",4),nt(7,"div",5)),2&e&&(Ye("ngIf",i.multiple),qe(5),Ye("ngIf",!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator),qe(1),Ye("ngIf",i.group&&i.group._inert),qe(1),Ye("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[Q7,G0,zTe],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),t})(),BN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[Ex,ml,Or,STe]}),t})();const TTe=["mat-button",""],HTe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],kTe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],RTe=["mat-icon-button",""],PTe=["*"],FTe=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],NTe=Sx(zx(Dx(class{constructor(t){this._elementRef=t}})));let UN=(()=>{class t extends NTe{constructor(e,i,r,s){super(e),this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=o1(mx),this._isFab=!1;const d=e.nativeElement.classList;for(const v of FTe)this._hasHostAttributes(v.selector)&&v.mdcClasses.forEach(C=>{d.add(C)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...e){return e.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return t.\u0275fac=function(e){Ms()},t.\u0275dir=je({type:t,viewQuery:function(e,i){if(1&e&&Kn(Q7,5),2&e){let r;V1(r=L1())&&(i.ripple=r.first)}},features:[o]}),t})(),jN=(()=>{class t extends UN{constructor(e,i,r,s){super(e,i,r,s)}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(Ii),W(f1),W(t4,8))},t.\u0275cmp=Ft({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,i){2&e&&(ze("disabled",i.disabled||null),$n("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[o],attrs:TTe,ngContentSelectors:kTe,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,i){1&e&&(mr(HTe),nt(0,"span",0),jn(1),de(2,"span",1),jn(3,1),he(),jn(4,2),nt(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&($n("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),qe(6),Ye("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[Q7],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),t})(),GN=(()=>{class t extends UN{constructor(e,i,r,s){super(e,i,r,s)}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(Ii),W(f1),W(t4,8))},t.\u0275cmp=Ft({type:t,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(e,i){2&e&&(ze("disabled",i.disabled||null),$n("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[o],attrs:RTe,ngContentSelectors:PTe,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,i){1&e&&(mr(),nt(0,"span",0),jn(1),nt(2,"span",1)(3,"span",2)(4,"span",3)),2&e&&(qe(3),Ye("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[Q7],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),t})(),UTe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[Or,Ex,Or]}),t})();class $N{}class jTe{}const g4="*";function J7(t,n){return{type:7,name:t,definitions:n,options:{}}}function s6(t,n=null){return{type:4,styles:n,timings:t}}function qN(t,n=null){return{type:2,steps:t,options:n}}function co(t){return{type:6,styles:t,offset:null}}function bp(t,n,e){return{type:0,name:t,styles:n,options:e}}function WN(t){return{type:5,steps:t}}function Rl(t,n,e=null){return{type:1,expr:t,animation:n,options:e}}function GTe(t=null){return{type:9,options:t}}function $Te(t,n,e=null){return{type:11,selector:t,animation:n,options:e}}function ZN(t){Promise.resolve().then(t)}class ed{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ZN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class YN{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,r=0;const s=this.players.length;0==s?ZN(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++e==s&&this._onFinish()}),d.onDestroy(()=>{++i==s&&this._onDestroy()}),d.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((d,v)=>Math.max(d,v.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const Vx="!",qTe=["matFormFieldNotchedOutline",""],WTe=["*"],ZTe=["textField"],YTe=["iconPrefixContainer"],XTe=["textPrefixContainer"];function KTe(t,n){1&t&&nt(0,"span",19)}function QTe(t,n){if(1&t){const e=u2();de(0,"label",17),jt("cdkObserveContent",function(){return A2(e),E2(w1(2)._refreshOutlineNotchWidth())}),jn(1,1),xt(2,KTe,1,0,"span",18),he()}if(2&t){const e=w1(2);Ye("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),ze("for",e._control.id)("aria-owns",e._control.id),qe(2),Ye("ngIf",!e.hideRequiredMarker&&e._control.required)}}function JTe(t,n){1&t&&xt(0,QTe,3,6,"label",16),2&t&&Ye("ngIf",w1()._hasFloatingLabel())}function eHe(t,n){1&t&&nt(0,"div",20)}function tHe(t,n){}function nHe(t,n){1&t&&xt(0,tHe,0,0,"ng-template",22),2&t&&(w1(2),Ye("ngTemplateOutlet",vn(1)))}function iHe(t,n){if(1&t&&(de(0,"div",21),xt(1,nHe,1,1,"ng-template",9),he()),2&t){const e=w1();Ye("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),qe(1),Ye("ngIf",!e._forceDisplayInfixLabel())}}function rHe(t,n){1&t&&(de(0,"div",23,24),jn(2,2),he())}function aHe(t,n){1&t&&(de(0,"div",25,26),jn(2,3),he())}function oHe(t,n){}function sHe(t,n){1&t&&xt(0,oHe,0,0,"ng-template",22),2&t&&(w1(),Ye("ngTemplateOutlet",vn(1)))}function cHe(t,n){1&t&&(de(0,"div",27),jn(1,4),he())}function lHe(t,n){1&t&&(de(0,"div",28),jn(1,5),he())}function uHe(t,n){1&t&&nt(0,"div",29)}function dHe(t,n){1&t&&(de(0,"div",30),jn(1,6),he()),2&t&&Ye("@transitionMessages",w1()._subscriptAnimationState)}function fHe(t,n){if(1&t&&(de(0,"mat-hint",34),Ue(1),he()),2&t){const e=w1(2);Ye("id",e._hintLabelId),qe(1),Wi(e.hintLabel)}}function hHe(t,n){if(1&t&&(de(0,"div",31),xt(1,fHe,2,2,"mat-hint",32),jn(2,7),nt(3,"div",33),jn(4,8),he()),2&t){const e=w1();Ye("@transitionMessages",e._subscriptAnimationState),qe(1),Ye("ngIf",e.hintLabel)}}const pHe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],mHe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let Lx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["mat-label"]]}),t})();const gHe=new vt("MatError");let _He=0,XN=(()=>{class t{constructor(){this.align="start",this.id="mat-mdc-hint-"+_He++}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,i){2&e&&(fl("id",i.id),ze("align",null),$n("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}}),t})();const vHe=new vt("MatPrefix"),KN=new vt("MatSuffix");let yHe=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[D1([{provide:KN,useExisting:t}])]}),t})(),QN=(()=>{class t{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function xHe(t){if(null!==t.offsetParent)return t.scrollWidth;const e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const i=e.scrollWidth;return e.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(W(Ot))},t.\u0275dir=je({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,i){2&e&&$n("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating"}}),t})();const JN="mdc-line-ripple--active",Cp="mdc-line-ripple--deactivating";let eO=(()=>{class t{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,d=s.contains(Cp);"opacity"===r.propertyName&&d&&s.remove(JN,Cp)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(Cp),e.add(JN)}deactivate(){this._elementRef.nativeElement.classList.add(Cp)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(f1))},t.\u0275dir=je({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),t})(),tO=(()=>{class t{constructor(e,i){this._elementRef=e,this._ngZone=i,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(f1))},t.\u0275cmp=Ft({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,i){2&e&&$n("mdc-notched-outline--notched",i.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:qTe,ngContentSelectors:WTe,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,i){1&e&&(mr(),nt(0,"div",0),de(1,"div",1),jn(2),he(),nt(3,"div",2)),2&e&&(qe(1),fc("width",i._getNotchWidth()))},encapsulation:2,changeDetection:0}),t})();const bHe={transitionMessages:J7("transitionMessages",[bp("enter",co({opacity:1,transform:"translateY(0%)"})),Rl("void => enter",[co({opacity:0,transform:"translateY(-5px)"}),s6("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Tx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t}),t})();const wp=new vt("MatFormField"),CHe=new vt("MAT_FORM_FIELD_DEFAULT_OPTIONS");let nO=0,zHe=(()=>{class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=ln(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,i,r,s,d,v,C,S){this._elementRef=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=d,this._defaults=v,this._animationMode=C,this._document=S,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+nO++,this._hintLabelId="mat-mdc-hint-"+nO++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Qt,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,v&&(v.appearance&&(this.appearance=v.appearance),this._hideRequiredMarker=Boolean(v?.hideRequiredMarker),v.color&&(this.color=v.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(M2(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),W2(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(M2(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(M2(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,d=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+d}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(Fr),W(f1),W(so),W(Ii),W(CHe,8),W(t4,8),W(Y1))},t.\u0275cmp=Ft({type:t,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(mi(r,Lx,5),mi(r,Lx,7),mi(r,Tx,5),mi(r,vHe,5),mi(r,KN,5),mi(r,gHe,5),mi(r,XN,5)),2&e){let s;V1(s=L1())&&(i._labelChildNonStatic=s.first),V1(s=L1())&&(i._labelChildStatic=s.first),V1(s=L1())&&(i._formFieldControl=s.first),V1(s=L1())&&(i._prefixChildren=s),V1(s=L1())&&(i._suffixChildren=s),V1(s=L1())&&(i._errorChildren=s),V1(s=L1())&&(i._hintChildren=s)}},viewQuery:function(e,i){if(1&e&&(Kn(ZTe,5),Kn(YTe,5),Kn(XTe,5),Kn(QN,5),Kn(tO,5),Kn(eO,5)),2&e){let r;V1(r=L1())&&(i._textField=r.first),V1(r=L1())&&(i._iconPrefixContainer=r.first),V1(r=L1())&&(i._textPrefixContainer=r.first),V1(r=L1())&&(i._floatingLabel=r.first),V1(r=L1())&&(i._notchedOutline=r.first),V1(r=L1())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,i){2&e&&$n("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[D1([{provide:wp,useExisting:t}])],ngContentSelectors:mHe,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,i){1&e&&(mr(pHe),xt(0,JTe,1,1,"ng-template",null,0,Tg),de(2,"div",1,2),jt("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),xt(4,eHe,1,0,"div",3),de(5,"div",4),xt(6,iHe,2,3,"div",5),xt(7,rHe,3,0,"div",6),xt(8,aHe,3,0,"div",7),de(9,"div",8),xt(10,sHe,1,1,"ng-template",9),jn(11),he(),xt(12,cHe,2,0,"div",10),xt(13,lHe,2,0,"div",11),he(),xt(14,uHe,1,0,"div",12),he(),de(15,"div",13),xt(16,dHe,2,1,"div",14),xt(17,hHe,5,2,"div",15),he()),2&e&&(qe(2),$n("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),qe(2),Ye("ngIf",!i._hasOutline()&&!i._control.disabled),qe(2),Ye("ngIf",i._hasOutline()),qe(1),Ye("ngIf",i._hasIconPrefix),qe(1),Ye("ngIf",i._hasTextPrefix),qe(2),Ye("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),qe(2),Ye("ngIf",i._hasTextSuffix),qe(1),Ye("ngIf",i._hasIconSuffix),qe(1),Ye("ngIf",!i._hasOutline()),qe(1),$n("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),Ye("ngSwitch",i._getDisplayedMessages()),qe(1),Ye("ngSwitchCase","error"),qe(1),Ye("ngSwitchCase","hint"))},dependencies:[G0,PM,N8,Ah,kVe,XN,QN,tO,eO],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[bHe.transitionMessages]},changeDetection:0}),t})(),Mp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[Or,ml,ZF,Or]}),t})();const aO=j7({passive:!0});let SHe=(()=>{class t{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Dt;const i=l4(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Qt,d="cdk-text-field-autofilled",v=C=>{"cdk-text-field-autofill-start"!==C.animationName||i.classList.contains(d)?"cdk-text-field-autofill-end"===C.animationName&&i.classList.contains(d)&&(i.classList.remove(d),this._ngZone.run(()=>s.next({target:C.target,isAutofilled:!1}))):(i.classList.add(d),this._ngZone.run(()=>s.next({target:C.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",v,aO),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",v,aO)}}),s}stopMonitoring(e){const i=l4(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return t.\u0275fac=function(e){return new(e||t)(Re(Ii),Re(f1))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),DHe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({}),t})();const oO=new vt("MAT_INPUT_VALUE_ACCESSOR"),AHe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let EHe=0;const VHe=LN(class{constructor(t,n,e,i){this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new Qt}});let LHe=(()=>{class t extends VHe{get disabled(){return this._disabled}set disabled(e){this._disabled=ln(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Tl.required)??!1}set required(e){this._required=ln(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&OF().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=ln(e)}constructor(e,i,r,s,d,v,C,S,V,F){super(v,s,d,r),this._elementRef=e,this._platform=i,this._autofillMonitor=S,this._formField=F,this._uid="mat-input-"+EHe++,this.focused=!1,this.stateChanges=new Qt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(le=>OF().has(le)),this._iOSKeyupListener=le=>{const xe=le.target;!xe.value&&0===xe.selectionStart&&0===xe.selectionEnd&&(xe.setSelectionRange(1,1),xe.setSelectionRange(0,0))};const Z=this._elementRef.nativeElement,K=Z.nodeName.toLowerCase();this._inputValueAccessor=C||Z,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&V.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===K,this._isTextarea="textarea"===K,this._isInFormField=!!F,this._isNativeSelect&&(this.controlType=Z.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){AHe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(Ii),W(m3,10),W(n6,8),W(c5,8),W(TN),W(oO,10),W(SHe),W(f1),W(wp,8))},t.\u0275dir=je({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,i){1&e&&jt("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(fl("id",i.id)("disabled",i.disabled)("required",i.required),ze("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),$n("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[D1([{provide:Tx,useExisting:t}]),o,wn]}),t})(),THe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[Or,Mp,Mp,DHe,Or]}),t})();const HHe=["mat-calendar-body",""];function kHe(t,n){if(1&t&&(de(0,"tr",3)(1,"td",4),Ue(2),he()()),2&t){const e=w1();qe(1),fc("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),ze("colspan",e.numCols),qe(1),J2(" ",e.label," ")}}function IHe(t,n){if(1&t&&(de(0,"td",4),Ue(1),he()),2&t){const e=w1(2);fc("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),ze("colspan",e._firstRowOffset),qe(1),J2(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function RHe(t,n){if(1&t){const e=u2();de(0,"td",8)(1,"button",9),jt("click",function(r){const d=A2(e).$implicit;return E2(w1(2)._cellClicked(d,r))})("focus",function(r){const d=A2(e).$implicit;return E2(w1(2)._emitActiveDateChange(d,r))}),de(2,"span",10),Ue(3),he(),nt(4,"span",11),he()()}if(2&t){const e=n.$implicit,i=n.index,r=w1().index,s=w1();fc("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),ze("data-mat-row",r)("data-mat-col",i),qe(1),$n("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",s._isActiveCell(r,i))("mat-calendar-body-range-start",s._isRangeStart(e.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",s._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(e.compareValue,r,i))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(e.compareValue,r,i))("mat-calendar-body-comparison-start",s._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",s._isInPreview(e.compareValue)),Ye("ngClass",e.cssClasses)("tabindex",s._isActiveCell(r,i)?0:-1),ze("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",s._isSelected(e.compareValue))("aria-current",s.todayValue===e.compareValue?"date":null)("aria-describedby",s._getDescribedby(e.compareValue)),qe(1),$n("mat-calendar-body-selected",s._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",s.todayValue===e.compareValue),qe(1),J2(" ",e.displayValue," ")}}function PHe(t,n){if(1&t&&(de(0,"tr",5),xt(1,IHe,2,6,"td",6),xt(2,RHe,5,48,"td",7),he()),2&t){const e=n.$implicit,i=n.index,r=w1();qe(1),Ye("ngIf",0===i&&r._firstRowOffset),qe(1),Ye("ngForOf",e)}}function FHe(t,n){if(1&t&&(de(0,"th",5)(1,"span",6),Ue(2),he(),de(3,"span",7),Ue(4),he()()),2&t){const e=n.$implicit;qe(2),Wi(e.long),qe(2),Wi(e.narrow)}}const NHe=["*"];function OHe(t,n){}function BHe(t,n){if(1&t){const e=u2();de(0,"mat-month-view",5),jt("activeDateChange",function(r){return A2(e),E2(w1().activeDate=r)})("_userSelection",function(r){return A2(e),E2(w1()._dateSelected(r))})("dragStarted",function(r){return A2(e),E2(w1()._dragStarted(r))})("dragEnded",function(r){return A2(e),E2(w1()._dragEnded(r))}),he()}if(2&t){const e=w1();Ye("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function UHe(t,n){if(1&t){const e=u2();de(0,"mat-year-view",6),jt("activeDateChange",function(r){return A2(e),E2(w1().activeDate=r)})("monthSelected",function(r){return A2(e),E2(w1()._monthSelectedInYearView(r))})("selectedChange",function(r){return A2(e),E2(w1()._goToDateInView(r,"month"))}),he()}if(2&t){const e=w1();Ye("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function jHe(t,n){if(1&t){const e=u2();de(0,"mat-multi-year-view",7),jt("activeDateChange",function(r){return A2(e),E2(w1().activeDate=r)})("yearSelected",function(r){return A2(e),E2(w1()._yearSelectedInMultiYearView(r))})("selectedChange",function(r){return A2(e),E2(w1()._goToDateInView(r,"year"))}),he()}if(2&t){const e=w1();Ye("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function GHe(t,n){}const $He=["button"];function qHe(t,n){1&t&&(oe(),de(0,"svg",3),nt(1,"path",4),he())}const WHe=[[["","matDatepickerToggleIcon",""]]],ZHe=["[matDatepickerToggleIcon]"];let td=(()=>{class t{constructor(){this.changes=new Qt,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Hx{constructor(n,e,i,r,s={},d=n,v){this.value=n,this.displayValue=e,this.ariaLabel=i,this.enabled=r,this.cssClasses=s,this.compareValue=d,this.rawValue=v}}let YHe=1,m5=(()=>{class t{ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}constructor(e,i){this._elementRef=e,this._ngZone=i,this._platform=o1(Ii),this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new Gt,this.previewChange=new Gt,this.activeDateChange=new Gt,this.dragStarted=new Gt,this.dragEnded=new Gt,this._didDragSinceMouseDown=!1,this._enterHandler=r=>{if(this._skipNextFocus&&"focus"===r.type)this._skipNextFocus=!1;else if(r.target&&this.isRange){const s=this._getCellFromElement(r.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:r}))}},this._touchmoveHandler=r=>{if(!this.isRange)return;const s=sO(r),d=s?this._getCellFromElement(s):null;s!==r.target&&(this._didDragSinceMouseDown=!0),Ix(r.target)&&r.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:d?.enabled?d:null,event:r}))},this._leaveHandler=r=>{null!==this.previewEnd&&this.isRange&&("blur"!==r.type&&(this._didDragSinceMouseDown=!0),r.target&&this._getCellFromElement(r.target)&&(!r.relatedTarget||!this._getCellFromElement(r.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:r})))},this._mousedownHandler=r=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;const s=r.target&&this._getCellFromElement(r.target);!s||!this._isInRange(s.rawValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:s.rawValue,event:r})})},this._mouseupHandler=r=>{if(!this.isRange)return;const s=Ix(r.target);s?s.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{const d=this._getCellFromElement(s);this.dragEnded.emit({value:d?.rawValue??null,event:r})}):this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:r})})},this._touchendHandler=r=>{const s=sO(r);s&&this._mouseupHandler({target:s})},this._id="mat-calendar-body-"+YHe++,this._startDateLabelId=`${this._id}-start-date`,this._endDateLabelId=`${this._id}-end-date`,i.runOutsideAngular(()=>{const r=e.nativeElement;r.addEventListener("mouseenter",this._enterHandler,!0),r.addEventListener("touchmove",this._touchmoveHandler,!0),r.addEventListener("focus",this._enterHandler,!0),r.addEventListener("mouseleave",this._leaveHandler,!0),r.addEventListener("blur",this._leaveHandler,!0),r.addEventListener("mousedown",this._mousedownHandler),r.addEventListener("touchstart",this._mousedownHandler),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(e,i){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_emitActiveDateChange(e,i){e.enabled&&this.activeDateChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const i=e.numCols,{rows:r,numCols:s}=this;(e.rows||i)&&(this._firstRowOffset=r&&r.length&&r[0].length?s-r[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/s+"%"),(i||!this._cellWidth)&&(this._cellWidth=100/s+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("touchmove",this._touchmoveHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("touchstart",this._mousedownHandler),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(e,i){let r=e*this.numCols+i;return e&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(aa(1)).subscribe(()=>{setTimeout(()=>{const i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})})})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return Rx(e,this.startValue,this.endValue)}_isRangeEnd(e){return Px(e,this.startValue,this.endValue)}_isInRange(e){return Fx(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return Rx(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,r){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let s=this.rows[i][r-1];if(!s){const d=this.rows[i-1];s=d&&d[d.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(e,i,r){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let s=this.rows[i][r+1];if(!s){const d=this.rows[i+1];s=d&&d[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(e){return Px(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return Fx(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return Rx(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return Px(e,this.previewStart,this.previewEnd)}_isInPreview(e){return Fx(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){return this.isRange?this.startValue===e&&this.endValue===e?`${this._startDateLabelId} ${this._endDateLabelId}`:this.startValue===e?this._startDateLabelId:this.endValue===e?this._endDateLabelId:null:null}_getCellFromElement(e){const i=Ix(e);if(i){const r=i.getAttribute("data-mat-row"),s=i.getAttribute("data-mat-col");if(r&&s)return this.rows[parseInt(r)][parseInt(s)]}return null}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(f1))},t.\u0275cmp=Ft({type:t,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[wn],attrs:HHe,decls:6,vars:6,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],[1,"mat-calendar-body-hidden-label",3,"id"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click","focus"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(e,i){1&e&&(xt(0,kHe,3,6,"tr",0),xt(1,PHe,3,2,"tr",1),de(2,"label",2),Ue(3),he(),de(4,"label",2),Ue(5),he()),2&e&&(Ye("ngIf",i._firstRowOffset<i.labelMinRequiredCells),qe(1),Ye("ngForOf",i.rows),qe(1),Ye("id",i._startDateLabelId),qe(1),J2(" ",i.startDateAccessibleName,"\n"),qe(1),Ye("id",i._endDateLabelId),qe(1),J2(" ",i.endDateAccessibleName,"\n"))},dependencies:[j0,pl,G0],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}'],encapsulation:2,changeDetection:0}),t})();function kx(t){return"TD"===t?.nodeName}function Ix(t){let n;return kx(t)?n=t:kx(t.parentNode)?n=t.parentNode:kx(t.parentNode?.parentNode)&&(n=t.parentNode.parentNode),null!=n?.getAttribute("data-mat-row")?n:null}function Rx(t,n,e){return null!==e&&n!==e&&t<e&&t===n}function Px(t,n,e){return null!==n&&n!==e&&t>=n&&t===e}function Fx(t,n,e,i){return i&&null!==n&&null!==e&&n!==e&&t>=n&&t<=e}function sO(t){const n=t.changedTouches[0];return document.elementFromPoint(n.clientX,n.clientY)}class Da{constructor(n,e){this.start=n,this.end=e}}let Pl=(()=>{class t{constructor(e,i){this.selection=e,this._adapter=i,this._selectionChanged=new Qt,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,i){const r=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}}return t.\u0275fac=function(e){Ms()},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),XHe=(()=>{class t extends Pl{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new t(this._adapter);return e.updateSelection(this.selection,this),e}}return t.\u0275fac=function(e){return new(e||t)(Re(Br))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const cO={provide:Pl,deps:[[new Hr,new Vo,Pl],Br],useFactory:function QHe(t,n){return t||new XHe(n)}},zp=new vt("MAT_DATE_RANGE_SELECTION_STRATEGY");let lO=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){const i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Da?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,r,s,d){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=r,this._dir=s,this._rangeStrategy=d,this._rerenderSubscription=Ze.EMPTY,this.activeDrag=null,this.selectedChange=new Gt,this._userSelection=new Gt,this.dragStarted=new Gt,this.dragEnded=new Gt,this.activeDateChange=new Gt,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(_l(null)).subscribe(()=>this._init())}ngOnChanges(e){const i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const i=e.value,r=this._getDateFromDayOfMonth(i);let s,d;this._selected instanceof Da?(s=this._getDateInCurrentMonth(this._selected.start),d=this._getDateInCurrentMonth(this._selected.end)):s=d=this._getDateInCurrentMonth(this._selected),(s!==i||d!==i)&&this.selectedChange.emit(r),this._userSelection.emit({value:r,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){const r=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(e.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!bc(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:i}){if(this._rangeStrategy){const r=i?i.rawValue:null,s=this._rangeStrategy.createPreview(r,this.selected,e);if(this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this.activeDrag&&r){const d=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,r,e);d&&(this._previewStart=this._getCellCompareValue(d.start),this._previewEnd=this._getCellCompareValue(d.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){const i=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:i??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow");let s=this._dateAdapter.getDayOfWeekNames("long").map((d,v)=>({long:d,narrow:i[v]}));this._weekdays=s.slice(e).concat(s.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,s=this._firstWeekOffset;r<e;r++,s++){7==s&&(this._weeks.push([]),s=0);const d=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),v=this._shouldEnableDate(d),C=this._dateAdapter.format(d,this._dateFormats.display.dateA11yLabel),S=this.dateClass?this.dateClass(d,"month"):void 0;this._weeks[this._weeks.length-1].push(new Hx(r+1,i[r],C,v,S,this._getCellCompareValue(d),d))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!(!e||!i||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(i)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){const i=this._dateAdapter.getYear(e),r=this._dateAdapter.getMonth(e),s=this._dateAdapter.getDate(e);return new Date(i,r,s).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof Da?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}}return t.\u0275fac=function(e){return new(e||t)(W(Fr),W(o6,8),W(Br,8),W(so,8),W(zp,8))},t.\u0275cmp=Ft({type:t,selectors:[["mat-month-view"]],viewQuery:function(e,i){if(1&e&&Kn(m5,5),2&e){let r;V1(r=L1())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[wn],decls:7,vars:15,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName","selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(e,i){1&e&&(de(0,"table",0)(1,"thead",1)(2,"tr"),xt(3,FHe,5,2,"th",2),he(),de(4,"tr"),nt(5,"th",3),he()(),de(6,"tbody",4),jt("selectedValueChange",function(s){return i._dateSelected(s)})("activeDateChange",function(s){return i._updateActiveDate(s)})("previewChange",function(s){return i._previewChanged(s)})("dragStarted",function(s){return i.dragStarted.emit(s)})("dragEnded",function(s){return i._dragEnded(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),he()()),2&e&&(qe(3),Ye("ngForOf",i._weekdays),qe(3),Ye("label",i._monthLabel)("rows",i._weeks)("todayValue",i._todayDate)("startValue",i._rangeStart)("endValue",i._rangeEnd)("comparisonStart",i._comparisonRangeStart)("comparisonEnd",i._comparisonRangeEnd)("previewStart",i._previewStart)("previewEnd",i._previewEnd)("isRange",i._isRange)("labelMinRequiredCells",3)("activeCell",i._dateAdapter.getDate(i.activeDate)-1)("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName))},dependencies:[pl,m5],encapsulation:2,changeDetection:0}),t})();const Uo=24;let uO=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),dO(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Da?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,r){this._changeDetectorRef=e,this._dateAdapter=i,this._dir=r,this._rerenderSubscription=Ze.EMPTY,this.selectedChange=new Gt,this.yearSelected=new Gt,this.activeDateChange=new Gt,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(_l(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const i=this._dateAdapter.getYear(this._activeDate)-nd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,s=[];r<Uo;r++)s.push(i+r),4==s.length&&(this._years.push(s.map(d=>this._createCellForYear(d))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const i=e.value,r=this._dateAdapter.createDate(i,0,1),s=this._getDateFromYear(i);this.yearSelected.emit(r),this.selectedChange.emit(s)}_updateActiveDate(e){const r=this._activeDate;this.activeDate=this._getDateFromYear(e.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-nd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Uo-nd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10*-Uo:-Uo);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10*Uo:Uo);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return nd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){const i=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,i,1));return this._dateAdapter.createDate(e,i,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForYear(e){const i=this._dateAdapter.createDate(e,0,1),r=this._dateAdapter.getYearName(i),s=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new Hx(e,r,r,this._shouldEnableYear(e),s)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof Da){const i=e.start||e.end;i&&(this._selectedYear=this._dateAdapter.getYear(i))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return t.\u0275fac=function(e){return new(e||t)(W(Fr),W(Br,8),W(so,8))},t.\u0275cmp=Ft({type:t,selectors:[["mat-multi-year-view"]],viewQuery:function(e,i){if(1&e&&Kn(m5,5),2&e){let r;V1(r=L1())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(e,i){1&e&&(de(0,"table",0)(1,"thead",1)(2,"tr"),nt(3,"th",2),he()(),de(4,"tbody",3),jt("selectedValueChange",function(s){return i._yearSelected(s)})("activeDateChange",function(s){return i._updateActiveDate(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),he()()),2&e&&(qe(4),Ye("rows",i._years)("todayValue",i._todayYear)("startValue",i._selectedYear)("endValue",i._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._getActiveCell()))},dependencies:[m5],encapsulation:2,changeDetection:0}),t})();function dO(t,n,e,i,r){const s=t.getYear(n),d=t.getYear(e),v=fO(t,i,r);return Math.floor((s-v)/Uo)===Math.floor((d-v)/Uo)}function nd(t,n,e,i){return function nke(t,n){return(t%n+n)%n}(t.getYear(n)-fO(t,e,i),Uo)}function fO(t,n,e){let i=0;return e?i=t.getYear(e)-Uo+1:n&&(i=t.getYear(n)),i}let hO=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Da?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,r,s){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=r,this._dir=s,this._rerenderSubscription=Ze.EMPTY,this.selectedChange=new Gt,this.monthSelected=new Gt,this.activeDateChange=new Gt,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(_l(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const i=e.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(r);const s=this._getDateFromMonth(i);this.selectedChange.emit(s)}_updateActiveDate(e){const r=this._activeDate;this.activeDate=this._getDateFromMonth(e.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(r=>this._createCellForMonth(r,e[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){const i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.getNumDaysInMonth(i);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForMonth(e,i){const r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),s=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),d=this.dateClass?this.dateClass(r,"year"):void 0;return new Hx(e,i.toLocaleUpperCase(),s,this._shouldEnableMonth(e),d)}_shouldEnableMonth(e){const i=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(i,e,1);this._dateAdapter.getMonth(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){const r=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return e>r||e===r&&i>s}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){const r=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return e<r||e===r&&i<s}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof Da?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Fr),W(o6,8),W(Br,8),W(so,8))},t.\u0275cmp=Ft({type:t,selectors:[["mat-year-view"]],viewQuery:function(e,i){if(1&e&&Kn(m5,5),2&e){let r;V1(r=L1())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(e,i){1&e&&(de(0,"table",0)(1,"thead",1)(2,"tr"),nt(3,"th",2),he()(),de(4,"tbody",3),jt("selectedValueChange",function(s){return i._monthSelected(s)})("activeDateChange",function(s){return i._updateActiveDate(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),he()()),2&e&&(qe(4),Ye("label",i._yearLabel)("rows",i._months)("todayValue",i._todayMonth)("startValue",i._selectedMonth)("endValue",i._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._dateAdapter.getMonth(i.activeDate)))},dependencies:[m5],encapsulation:2,changeDetection:0}),t})(),ike=1,rke=(()=>{class t{constructor(e,i,r,s,d){this._intl=e,this.calendar=i,this._dateAdapter=r,this._dateFormats=s,this._id="mat-calendar-header-"+ike++,this._periodButtonLabelId=`${this._id}-period-label`,this.calendar.stateChanges.subscribe(()=>d.markForCheck())}get periodButtonText(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-Uo)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:Uo)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,i){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):dO(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){const i=this._dateAdapter.getYear(this.calendar.activeDate)-nd(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=i+Uo-1;return[this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1))]}}return t.\u0275fac=function(e){return new(e||t)(W(td),W(nn(()=>Bx)),W(Br,8),W(o6,8),W(Fr))},t.\u0275cmp=Ft({type:t,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:NHe,decls:13,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"],[1,"mat-calendar-hidden-label",3,"id"]],template:function(e,i){1&e&&(mr(),de(0,"div",0)(1,"div",1)(2,"button",2),jt("click",function(){return i.currentPeriodClicked()}),de(3,"span",3),Ue(4),he(),oe(),de(5,"svg",4),nt(6,"polygon",5),he()(),ce(),nt(7,"div",6),jn(8),de(9,"button",7),jt("click",function(){return i.previousClicked()}),he(),de(10,"button",8),jt("click",function(){return i.nextClicked()}),he()()(),de(11,"label",9),Ue(12),he()),2&e&&(qe(2),ze("aria-label",i.periodButtonLabel)("aria-describedby",i._periodButtonLabelId),qe(2),Wi(i.periodButtonText),qe(1),$n("mat-calendar-invert","month"!==i.calendar.currentView),qe(4),Ye("disabled",!i.previousEnabled()),ze("aria-label",i.prevButtonLabel),qe(1),Ye("disabled",!i.nextEnabled()),ze("aria-label",i.nextButtonLabel),qe(1),Ye("id",i._periodButtonLabelId),qe(1),Wi(i.periodButtonDescription))},dependencies:[jN,GN],encapsulation:2,changeDetection:0}),t})(),Bx=(()=>{class t{get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof Da?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&this.viewChanged.emit(i)}constructor(e,i,r,s){this._dateAdapter=i,this._dateFormats=r,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new Gt,this.yearSelected=new Gt,this.monthSelected=new Gt,this.viewChanged=new Gt(!0),this._userSelection=new Gt,this._userDragDrop=new Gt,this._activeDrag=null,this.stateChanges=new Qt,this._intlChanges=e.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new bx(this.headerComponent||rke),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,r=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,s=i||r||e.dateFilter;if(s&&!s.firstChange){const d=this._getCurrentViewComponent();d&&(this._changeDetectorRef.detectChanges(),d._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const i=e.value;(this.selected instanceof Da||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return t.\u0275fac=function(e){return new(e||t)(W(td),W(Br,8),W(o6,8),W(Fr))},t.\u0275cmp=Ft({type:t,selectors:[["mat-calendar"]],viewQuery:function(e,i){if(1&e&&(Kn(lO,5),Kn(hO,5),Kn(uO,5)),2&e){let r;V1(r=L1())&&(i.monthView=r.first),V1(r=L1())&&(i.yearView=r.first),V1(r=L1())&&(i.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[D1([cO]),wn],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag","activeDateChange","_userSelection","dragStarted","dragEnded",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag","activeDateChange","_userSelection","dragStarted","dragEnded"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,i){1&e&&(xt(0,OHe,0,0,"ng-template",0),de(1,"div",1),xt(2,BHe,1,11,"mat-month-view",2),xt(3,UHe,1,6,"mat-year-view",3),xt(4,jHe,1,6,"mat-multi-year-view",4),he()),2&e&&(Ye("cdkPortalOutlet",i._calendarHeaderPortal),qe(1),Ye("ngSwitch",i.currentView),qe(1),Ye("ngSwitchCase","month"),qe(1),Ye("ngSwitchCase","year"),qe(1),Ye("ngSwitchCase","multi-year"))},dependencies:[N8,Ah,fLe,hN,lO,hO,uO],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}.mat-calendar-hidden-label{display:none}'],encapsulation:2,changeDetection:0}),t})();const pO={transformPanel:J7("transformPanel",[Rl("void => enter-dropdown",s6("120ms cubic-bezier(0, 0, 0.2, 1)",WN([co({opacity:0,transform:"scale(1, 0.8)"}),co({opacity:1,transform:"scale(1, 1)"})]))),Rl("void => enter-dialog",s6("150ms cubic-bezier(0, 0, 0.2, 1)",WN([co({opacity:0,transform:"scale(0.7)"}),co({transform:"none",opacity:1})]))),Rl("* => void",s6("100ms linear",co({opacity:0})))]),fadeInCalendar:J7("fadeInCalendar",[bp("void",co({opacity:0})),bp("enter",co({opacity:1})),Rl("void => *",s6("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let ake=0;const mO=new vt("mat-datepicker-scroll-strategy"),ske={provide:mO,deps:[p5],useFactory:function oke(t){return()=>t.scrollStrategies.reposition()}},cke=Sx(class{constructor(t){this._elementRef=t}});let lke=(()=>{class t extends cke{constructor(e,i,r,s,d,v){super(e),this._changeDetectorRef=i,this._globalModel=r,this._dateAdapter=s,this._rangeSelectionStrategy=d,this._subscriptions=new Ze,this._animationDone=new Qt,this._isAnimating=!1,this._actionsPortal=null,this._closeButtonText=v.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const i=this._model.selection,r=e.value,s=i instanceof Da;if(s&&this._rangeSelectionStrategy){const d=this._rangeSelectionStrategy.selectionFinished(r,i,e.event);this._model.updateSelection(d,this)}else r&&(s||!this._dateAdapter.sameDate(r,i))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(e){this._isAnimating="start"===e.phaseName,this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,i){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,i&&this._changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(Fr),W(Pl),W(Br),W(zp,8),W(td))},t.\u0275cmp=Ft({type:t,selectors:[["mat-datepicker-content"]],viewQuery:function(e,i){if(1&e&&Kn(Bx,5),2&e){let r;V1(r=L1())&&(i._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(e,i){1&e&&No("@transformPanel.start",function(s){return i._handleAnimationEvent(s)})("@transformPanel.done",function(s){return i._handleAnimationEvent(s)}),2&e&&(mg("@transformPanel",i._animationState),$n("mat-datepicker-content-touch",i.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[o],decls:5,vars:26,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(e,i){if(1&e&&(de(0,"div",0)(1,"mat-calendar",1),jt("yearSelected",function(s){return i.datepicker._selectYear(s)})("monthSelected",function(s){return i.datepicker._selectMonth(s)})("viewChanged",function(s){return i.datepicker._viewChanged(s)})("_userSelection",function(s){return i._handleUserSelection(s)})("_userDragDrop",function(s){return i._handleUserDragDrop(s)}),he(),xt(2,GHe,0,0,"ng-template",2),de(3,"button",3),jt("focus",function(){return i._closeButtonFocused=!0})("blur",function(){return i._closeButtonFocused=!1})("click",function(){return i.datepicker.close()}),Ue(4),he()()),2&e){let r;$n("mat-datepicker-content-container-with-custom-header",i.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",i._actionsPortal),ze("aria-modal",!0)("aria-labelledby",null!==(r=i._dialogLabelId)&&void 0!==r?r:void 0),qe(1),Ye("id",i.datepicker.id)("ngClass",i.datepicker.panelClass)("startAt",i.datepicker.startAt)("startView",i.datepicker.startView)("minDate",i.datepicker._getMinDate())("maxDate",i.datepicker._getMaxDate())("dateFilter",i.datepicker._getDateFilter())("headerComponent",i.datepicker.calendarHeaderComponent)("selected",i._getSelected())("dateClass",i.datepicker.dateClass)("comparisonStart",i.comparisonStart)("comparisonEnd",i.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName),qe(1),Ye("cdkPortalOutlet",i._actionsPortal),qe(1),$n("cdk-visually-hidden",!i._closeButtonFocused),Ye("color",i.color||"primary"),qe(1),Wi(i._closeButtonText)}},dependencies:[j0,jN,nLe,hN,Bx],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[pO.transformPanel,pO.fadeInCalendar]},changeDetection:0}),t})(),gO=(()=>{class t{get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=ln(e)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){const i=ln(e);i!==this._disabled&&(this._disabled=i,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(e){this._restoreFocus=ln(e)}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=function jK(t,n=/\s+/){const e=[];if(null!=t){const i=Array.isArray(t)?t:`${t}`.split(n);for(const r of i){const s=`${r}`.trim();s&&e.push(s)}}return e}(e)}get opened(){return this._opened}set opened(e){ln(e)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}constructor(e,i,r,s,d,v,C){this._overlay=e,this._ngZone=i,this._viewContainerRef=r,this._dateAdapter=d,this._dir=v,this._model=C,this._inputStateChanges=Ze.EMPTY,this._document=o1(Y1),this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new Gt,this.monthSelected=new Gt,this.viewChanged=new Gt(!0),this.openedStream=new Gt,this.closedStream=new Gt,this._opened=!1,this.id="mat-datepicker-"+ake++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new Qt,this._scrollStrategy=s}ngOnChanges(e){const i=e.xPosition||e.yPosition;if(i&&!i.firstChange&&this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;r instanceof bN&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this._focusedElementBeforeOpen=UF(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;const e=this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus,i=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){const{instance:r,location:s}=this._componentRef;r._startExitAnimation(),r._animationDone.pipe(aa(1)).subscribe(()=>{const d=this._document.activeElement;e&&(!d||d===this._document.activeElement||s.nativeElement.contains(d))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}e?setTimeout(i):i()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();const e=this.touchUi,i=new bx(lke,this._viewContainerRef),r=this._overlayRef=this._overlay.create(new wx({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(e?"dialog":"popup")}));this._getCloseStream(r).subscribe(s=>{s&&s.preventDefault(),this.close()}),r.keydownEvents().subscribe(s=>{const d=s.keyCode;(38===d||40===d||37===d||39===d||33===d||34===d)&&s.preventDefault()}),this._componentRef=r.attach(i),this._forwardContentValues(this._componentRef.instance),e||this._ngZone.onStable.pipe(aa(1)).subscribe(()=>r.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){const i="end"===this.xPosition?"end":"start",r="start"===i?"end":"start",s="above"===this.yPosition?"bottom":"top",d="top"===s?"bottom":"top";return e.withPositions([{originX:i,originY:d,overlayX:i,overlayY:s},{originX:i,originY:s,overlayX:i,overlayY:d},{originX:r,originY:d,overlayX:r,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:d}])}_getCloseStream(e){const i=["ctrlKey","shiftKey","metaKey"];return W2(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(Xi(r=>27===r.keyCode&&!bc(r)||this.datepickerInput&&bc(r,"altKey")&&38===r.keyCode&&i.every(s=>!bc(r,s)))))}}return t.\u0275fac=function(e){return new(e||t)(W(p5),W(f1),W(Zi),W(mO),W(Br,8),W(so,8),W(Pl))},t.\u0275dir=je({type:t,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[wn]}),t})(),uke=(()=>{class t extends gO{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Ft({type:t,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[D1([cO,{provide:gO,useExisting:t}]),o],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),t})();class Sp{constructor(n,e){this.target=n,this.targetElement=e,this.value=this.target.value}}let dke=(()=>{class t{get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){const i=ln(e),r=this._elementRef.nativeElement;this._disabled!==i&&(this._disabled=i,this.stateChanges.next(void 0)),i&&this._isInitialized&&r.blur&&r.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(i=>{if(this._shouldHandleChangeEvent(i)){const r=this._getValueFromModel(i.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new Sp(this,this._elementRef.nativeElement)),this.dateChange.emit(new Sp(this,this._elementRef.nativeElement))}})}constructor(e,i,r){this._elementRef=e,this._dateAdapter=i,this._dateFormats=r,this.dateChange=new Gt,this.dateInput=new Gt,this.stateChanges=new Qt,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=Ze.EMPTY,this._localeSubscription=Ze.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=s=>{const d=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value));return!d||this._matchesFilter(d)?null:{matDatepickerFilter:!0}},this._minValidator=s=>{const d=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),v=this._getMinDate();return!v||!d||this._dateAdapter.compareDate(v,d)<=0?null:{matDatepickerMin:{min:v,actual:d}}},this._maxValidator=s=>{const d=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),v=this._getMaxDate();return!v||!d||this._dateAdapter.compareDate(v,d)>=0?null:{matDatepickerMax:{max:v,actual:d}}},this._lastValueValid=!1,this._localeSubscription=i.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){(function fke(t,n){const e=Object.keys(t);for(let i of e){const{previousValue:r,currentValue:s}=t[i];if(!n.isDateInstance(r)||!n.isDateInstance(s))return!0;if(!n.sameDate(r,s))return!0}return!1})(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){bc(e,"altKey")&&40===e.keyCode&&["ctrlKey","shiftKey","metaKey"].every(s=>!bc(e,s))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){const i=this._lastValueValid;let r=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);const s=!this._dateAdapter.sameDate(r,this.value);!r||s?this._cvaOnChange(r):(e&&!this.value&&this._cvaOnChange(r),i!==this._lastValueValid&&this._validatorOnChange()),s&&(this._assignValue(r),this.dateInput.emit(new Sp(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new Sp(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=null!=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){const i=this._getDateFilter();return!i||i(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(Br,8),W(o6,8))},t.\u0275dir=je({type:t,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[wn]}),t})();const hke={provide:ks,useExisting:nn(()=>Ux),multi:!0},pke={provide:vr,useExisting:nn(()=>Ux),multi:!0};let Ux=(()=>{class t extends dke{set matDatepicker(e){e&&(this._datepicker=e,this._closedSubscription=e.closedStream.subscribe(()=>this._onTouched()),this._registerModel(e.registerInput(this)))}get min(){return this._min}set min(e){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._min)||(this._min=i,this._validatorOnChange())}get max(){return this._max}set max(e){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._max)||(this._max=i,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(e){const i=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==i&&this._validatorOnChange()}constructor(e,i,r,s){super(e,i,r),this._formField=s,this._closedSubscription=Ze.EMPTY,this._validator=Tl.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}}return t.\u0275fac=function(e){return new(e||t)(W(Ot),W(Br,8),W(o6,8),W(wp,8))},t.\u0275dir=je({type:t,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(e,i){1&e&&jt("input",function(s){return i._onInput(s.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)}),2&e&&(fl("disabled",i.disabled),ze("aria-haspopup",i._datepicker?"dialog":null)("aria-owns",(null==i._datepicker?null:i._datepicker.opened)&&i._datepicker.id||null)("min",i.min?i._dateAdapter.toIso8601(i.min):null)("max",i.max?i._dateAdapter.toIso8601(i.max):null)("data-mat-calendar",i._datepicker?i._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[D1([hke,pke,{provide:oO,useExisting:t}]),o]}),t})(),mke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["","matDatepickerToggleIcon",""]]}),t})(),gke=(()=>{class t{get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=ln(e)}constructor(e,i,r){this._intl=e,this._changeDetectorRef=i,this._stateChanges=Ze.EMPTY;const s=Number(r);this.tabIndex=s||0===s?s:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:r1(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:r1(),r=this.datepicker?W2(this.datepicker.openedStream,this.datepicker.closedStream):r1();this._stateChanges.unsubscribe(),this._stateChanges=W2(this._intl.changes,e,i,r).subscribe(()=>this._changeDetectorRef.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(W(td),W(Fr),Fc("tabindex"))},t.\u0275cmp=Ft({type:t,selectors:[["mat-datepicker-toggle"]],contentQueries:function(e,i,r){if(1&e&&mi(r,mke,5),2&e){let s;V1(s=L1())&&(i._customIcon=s.first)}},viewQuery:function(e,i){if(1&e&&Kn($He,5),2&e){let r;V1(r=L1())&&(i._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(e,i){1&e&&jt("click",function(s){return i._open(s)}),2&e&&(ze("tabindex",null)("data-mat-calendar",i.datepicker?i.datepicker.id:null),$n("mat-datepicker-toggle-active",i.datepicker&&i.datepicker.opened)("mat-accent",i.datepicker&&"accent"===i.datepicker.color)("mat-warn",i.datepicker&&"warn"===i.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[wn],ngContentSelectors:ZHe,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(e,i){1&e&&(mr(WHe),de(0,"button",0,1),xt(2,qHe,2,0,"svg",2),jn(3),he()),2&e&&(Ye("disabled",i.disabled)("disableRipple",i.disableRipple),ze("aria-haspopup",i.datepicker?"dialog":null)("aria-label",i.ariaLabel||i._intl.openCalendarLabel)("tabindex",i.disabled?-1:i.tabIndex),qe(2),Ye("ngIf",!i._customIcon))},dependencies:[G0,GN],styles:[".mat-datepicker-toggle{pointer-events:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0}),t})(),yke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:[td,ske],imports:[ml,UTe,DN,hLe,pN,Or,xp]}),t})();function Gx(t){return t&&"function"==typeof t.connect&&!(t instanceof E_)}class vO{applyChanges(n,e,i,r,s){n.forEachOperation((d,v,C)=>{let S,V;if(null==d.previousIndex){const F=i(d,v,C);S=e.createEmbeddedView(F.templateRef,F.context,F.index),V=1}else null==C?(e.remove(v),V=3):(S=e.get(v),e.move(S,C),V=2);s&&s({context:S?.context,operation:V,record:d})})}detach(){}}class xke{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(n=!1,e,i=!0,r){this._multiple=n,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Qt,e&&e.length&&(n?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(i=>this._markSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(i=>this._unmarkSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);const e=this.selected,i=new Set(n);n.forEach(s=>this._markSelected(s)),e.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(n){if(this.compareWith){for(let e of this._selection)if(this.compareWith(n,e))return e;return n}return n}}const id=new vt("_ViewRepeater"),bke=["trigger"],Cke=["panel"];function wke(t,n){if(1&t&&(de(0,"span",10),Ue(1),he()),2&t){const e=w1();qe(1),Wi(e.placeholder)}}function Mke(t,n){if(1&t&&(de(0,"span",14),Ue(1),he()),2&t){const e=w1(2);qe(1),Wi(e.triggerValue)}}function zke(t,n){1&t&&jn(0,0,["*ngSwitchCase","true"])}function Ske(t,n){1&t&&(de(0,"span",11),xt(1,Mke,2,1,"span",12),xt(2,zke,1,0,"ng-content",13),he()),2&t&&(Ye("ngSwitch",!!w1().customTrigger),qe(2),Ye("ngSwitchCase",!0))}function Dke(t,n){if(1&t){const e=u2();oe(),ce(),de(0,"div",15,16),jt("@transformPanel.done",function(r){return A2(e),E2(w1()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return A2(e),E2(w1()._handleKeydown(r))}),jn(2,1),he()}if(2&t){const e=w1();(function _C(t,n,e){mc(x2,l3,et(pt(),t,n,e),!0)})("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),Ye("ngClass",e.panelClass)("@transformPanel","showing"),ze("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const Ake=[[["mat-select-trigger"]],"*"],Eke=["mat-select-trigger","*"],Vke={transformPanelWrap:J7("transformPanelWrap",[Rl("* => void",$Te("@transformPanel",[GTe()],{optional:!0}))]),transformPanel:J7("transformPanel",[bp("void",co({opacity:0,transform:"scale(1, 0.8)"})),Rl("void => showing",s6("120ms cubic-bezier(0, 0, 0.2, 1)",co({opacity:1,transform:"scale(1, 1)"}))),Rl("* => void",s6("100ms linear",co({opacity:0})))])};let xO=0;const bO=new vt("mat-select-scroll-strategy"),Tke=new vt("MAT_SELECT_CONFIG"),Hke={provide:bO,deps:[p5],useFactory:function Lke(t){return()=>t.scrollStrategies.reposition()}},kke=new vt("MatSelectTrigger");class Ike{constructor(n,e){this.source=n,this.value=e}}const Rke=Dx(VN(zx(LN(class{constructor(t,n,e,i,r){this._elementRef=t,this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new Qt}}))));let Pke=(()=>{class t extends Rke{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Tl.required)??!1}set required(e){this._required=ln(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=ln(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=ln(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=uv(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}constructor(e,i,r,s,d,v,C,S,V,F,Z,K,le,xe){super(d,s,C,S,F),this._viewportRuler=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=v,this._parentFormField=V,this._liveAnnouncer=le,this._defaultOptions=xe,this._panelOpen=!1,this._compareWith=(Me,He)=>Me===He,this._uid="mat-select-"+xO++,this._triggerAriaLabelledBy=null,this._destroy=new Qt,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+xO++,this._panelDoneAnimatingStream=new Qt,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=D_(()=>{const Me=this.options;return Me?Me.changes.pipe(_l(Me),Ts(()=>W2(...Me.map(He=>He.onSelectionChange)))):this._ngZone.onStable.pipe(aa(1),Ts(()=>this.optionSelectionChanges))}),this.openedChange=new Gt,this._openedStream=this.openedChange.pipe(Xi(Me=>Me),h1(()=>{})),this._closedStream=this.openedChange.pipe(Xi(Me=>!Me),h1(()=>{})),this.selectionChange=new Gt,this.valueChange=new Gt,this.ngControl&&(this.ngControl.valueAccessor=this),null!=xe?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=xe.typeaheadDebounceInterval),this._scrollStrategyFactory=K,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Z)||0,this.id=this.id}ngOnInit(){this._selectionModel=new xke(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(qF(),M2(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(M2(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(_l(null),M2(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,d=this._keyManager;if(!d.isTyping()&&s&&!bc(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const v=this.selected;d.onKeydown(e);const C=this.selected;C&&v!==C&&this._liveAnnouncer.announce(C.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,r=e.keyCode,s=40===r||38===r,d=i.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(d||13!==r&&32!==r||!i.activeItem||bc(e))if(!d&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const v=this.options.some(C=>!C.disabled&&!C.selected);this.options.forEach(C=>{C.disabled||(v?C.select():C.deselect())})}else{const v=i.activeItemIndex;i.onKeydown(e),this._multiple&&s&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==v&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(aa(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new UVe(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=W2(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(M2(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),W2(...this.options.map(i=>i._stateChanges)).pipe(M2(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return t.\u0275fac=function(e){return new(e||t)(W(Y7),W(Fr),W(f1),W(TN),W(Ot),W(so,8),W(n6,8),W(c5,8),W(wp,8),W(m3,10),Fc("tabindex"),W(bO),W(uLe),W(Tke,8))},t.\u0275dir=je({type:t,viewQuery:function(e,i){if(1&e&&(Kn(bke,5),Kn(Cke,5),Kn(SN,5)),2&e){let r;V1(r=L1())&&(i.trigger=r.first),V1(r=L1())&&(i.panel=r.first),V1(r=L1())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[o,wn]}),t})(),Fke=(()=>{class t extends Pke{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(M2(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const i=this.options.toArray()[e];if(i){const r=this.panel.nativeElement,s=function VTe(t,n,e){if(e.length){let i=n.toArray(),r=e.toArray(),s=0;for(let d=0;d<t+1;d++)i[d].group&&i[d].group===r[s]&&s++;return s}return 0}(e,this.options,this.optionGroups),d=i._getHostElement();r.scrollTop=0===e&&1===s?0:function LTe(t,n,e,i){return t<e?t:t+n>e+i?Math.max(0,t-i+n):e}(d.offsetTop,d.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new Ike(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof Mx?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=ln(e),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Ft({type:t,selectors:[["mat-select"]],contentQueries:function(e,i,r){if(1&e&&(mi(r,kke,5),mi(r,ON,5),mi(r,NN,5)),2&e){let s;V1(s=L1())&&(i.customTrigger=s.first),V1(s=L1())&&(i.options=s),V1(s=L1())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,i){1&e&&jt("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&e&&(ze("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),$n("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[D1([{provide:Tx,useExisting:t},{provide:FN,useExisting:t}]),o],ngContentSelectors:Eke,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,i){if(1&e&&(mr(Ake),de(0,"div",0,1),jt("click",function(){return i.toggle()}),de(3,"div",2),xt(4,wke,2,1,"span",3),xt(5,Ske,3,2,"span",4),he(),de(6,"div",5)(7,"div",6),oe(),de(8,"svg",7),nt(9,"path",8),he()()()(),xt(10,Dke,3,9,"ng-template",9),jt("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&e){const r=vn(1);ze("aria-owns",i.panelOpen?i.id+"-panel":null),qe(3),Ye("ngSwitch",i.empty),ze("id",i._valueId),qe(1),Ye("ngSwitchCase",!0),qe(1),Ye("ngSwitchCase",!1),qe(5),Ye("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[j0,N8,Ah,IM,SN,Mx],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Vke.transformPanel]},changeDetection:0}),t})(),Nke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:[Hke],imports:[ml,DN,BN,Or,xp,Mp,BN,Or]}),t})(),Oke=(()=>{class t{constructor(){this.rating=0,this.comment="",this.submitForm=new Gt,this.placeholder="Enter your comment"}onSubmit(){this.submitForm.emit({rating:this.rating,comment:this.comment}),this.rating=0,this.comment=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-satisfaction-form"]],inputs:{placeholder:"placeholder"},outputs:{submitForm:"submitForm"},decls:26,vars:2,consts:[[1,"container"],[1,"title-home"],[1,"form",3,"ngSubmit"],[1,"col-4","input-cont","py-2"],["name","rating",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","4"],["value","3"],["value","2"],["value","1"],["name","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4","offset-md-4","btn-sub"],["type","submit"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Rate us and leave your comments "),he()(),de(4,"form",2),jt("ngSubmit",function(){return i.onSubmit()}),de(5,"div",3)(6,"label"),Ue(7,"Rating:"),he(),de(8,"select",4),jt("ngModelChange",function(s){return i.rating=s}),de(9,"option",5),Ue(10,"5 stars"),he(),de(11,"option",6),Ue(12,"4 stars"),he(),de(13,"option",7),Ue(14,"3 stars"),he(),de(15,"option",8),Ue(16,"2 stars"),he(),de(17,"option",9),Ue(18,"1 star"),he()()(),de(19,"div",3)(20,"label"),Ue(21,"Comment:"),he(),de(22,"textarea",10),jt("ngModelChange",function(s){return i.comment=s}),he()(),de(23,"div",11)(24,"button",12),Ue(25,"Submit"),he()()()()),2&e&&(qe(8),Ye("ngModel",i.rating),qe(14),Ye("ngModel",i.comment))},dependencies:[lp,zF,DF,a5,up,Q9,J9,cp,n6],styles:[".input-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:600px;padding:5px;border:2px solid gray}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;margin-left:auto;display:block;width:200px;margin-top:25px;height:50px;border-radius:2rem;background-color:#c7e7f1;border:2px solid #081820;color:#000;transition:background-color .3s ease,border .3s ease,transform .3s ease}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#081820;color:#fff;border:2px solid white;transform:scale(1.1)}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif;background-color:#0b161b}.container[_ngcontent-%COMP%]{display:grid;justify-content:center;align-items:center;background-color:#0b161b;margin-bottom:15px}.form[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:16px}label[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif;font-size:larger}"]}),t})();function Bke(t,n){if(1&t&&(de(0,"mat-option",24),Ue(1),he()),2&t){const e=n.$implicit;Ye("value",e),qe(1),J2(" ",e," ")}}function Uke(t,n){if(1&t){const e=u2();de(0,"div")(1,"h1",25),Ue(2,"Satisfaction Survey"),he(),de(3,"app-satisfaction-form",26),jt("submitForm",function(r){return A2(e),E2(w1().onSatisfactionSubmit(r))}),he(),nt(4,"br"),he()}2&t&&(qe(3),Ye("placeholder","Type your comment here"))}function jke(t,n){1&t&&(de(0,"div")(1,"div",27)(2,"h1"),Ue(3,"Check-In"),he(),de(4,"h2")(5,"span"),Ue(6,"TRAVEL WITH PEACE"),he()(),de(7,"p"),Ue(8,"Start your vacation on the right foot with our hassle-free check-in process. "),nt(9,"br"),Ue(10,"At Your Home, our premier vacation rental service, we understand that your time is precious and you deserve a stress-free start to your trip. "),nt(11,"br"),Ue(12," Relax and enjoy the perfect blend of comfort and sophistication in our stylish and welcoming vacation rentals. "),he()()())}function Gke(t,n){if(1&t&&(de(0,"div")(1,"p"),Ue(2),he(),de(3,"p"),Ue(4),he()()),2&t){const e=w1(2);qe(2),J2("Rating: ",e.satisfaction.rating,""),qe(2),J2("Comment: ",e.satisfaction.comment,"")}}function $ke(t,n){if(1&t&&(de(0,"div")(1,"div",28)(2,"p",29),Ue(3,"Submitted answers:"),he(),xt(4,Gke,5,2,"div",23),he()()),2&t){const e=w1();qe(4),Ye("ngIf",e.satisfaction)}}let qke=(()=>{class t{constructor(e){this.router=e,this.satisfaction={rating:0,comment:""},this.reservationIn="",this.reservationOut="",this.array1=[],this.array2=[],this.array3=[],this.array4=[],this.array5=[],this.array6=[],this.numAdults=["1","2","3","4","5","6","7","8","9","10"],this.band=0,this.send=0,this.nombre="",this.checkInDate=new Date(""),this.checkOutDate=new Date(""),this.name="",this.numGuests="",this.checkInTime="16:00",this.checkOutTime="11:00"}enviarNombre(){console.log(this.nombre),this.router.navigate(["reservations",this.nombre])}ngOnInit(){}onSatisfactionSubmit(e){this.satisfaction=e}onSubmit(){this.send=0,this.satisfaction.rating=0,this.satisfaction.comment="";const e=new Date,d=`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`;let v=new Date(this.checkInDate),F=`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}-${String(v.getDate()).padStart(2,"0")}`,Z=new Date(this.checkOutDate),Me=`${Z.getFullYear()}-${String(Z.getMonth()+1).padStart(2,"0")}-${String(Z.getDate()).padStart(2,"0")}`;this.band=0;const He=localStorage.getItem("checkIn");He&&(this.array1=JSON.parse(He));const ut=localStorage.getItem("checkOut");ut&&(this.array2=JSON.parse(ut));const $e=localStorage.getItem("checkInTime");$e&&(this.array3=JSON.parse($e));const St=localStorage.getItem("checkOutTime");St&&(this.array4=JSON.parse(St));const z1=localStorage.getItem("name");z1&&(this.array5=JSON.parse(z1));const J1=localStorage.getItem("numGuests");if(J1&&(this.array6=JSON.parse(J1)),F<d||Me<d)this.band=1;else if(F>=Me)this.band=2;else for(let Tn=0;Tn<=this.array1.length;Tn++){if(F>=this.array1[Tn]&&F<this.array2[Tn]){this.band=3;break}if(Me>this.array1[Tn]&&Me<=this.array2[Tn]){this.band=4;break}if(F<this.array1[Tn]&&Me>this.array2[Tn]){this.reservationIn=this.array1[Tn],this.reservationOut=this.array2[Tn],this.band=5;break}}switch(this.band){case 0:this.array1.push(F),this.array2.push(Me),this.array3.push(this.checkInTime),this.array4.push(this.checkOutTime),this.array5.push(this.name),this.array6.push(this.numGuests),localStorage.setItem("checkIn",JSON.stringify(this.array1)),localStorage.setItem("checkOut",JSON.stringify(this.array2)),localStorage.setItem("checkInTime",JSON.stringify(this.array3)),localStorage.setItem("checkOutTime",JSON.stringify(this.array4)),localStorage.setItem("name",JSON.stringify(this.array5)),localStorage.setItem("numGuests",JSON.stringify(this.array6)),El().fire({icon:"success",title:"Your reservation has been made..."}),this.send=1,this.name=" ",this.numGuests="",this.checkInDate=new Date(""),this.checkOutDate=new Date("");break;case 1:El().fire({icon:"error",title:"Oops...",text:"Reservations must be done after current date!"});break;case 2:El().fire({icon:"error",title:"Oops...",text:"You can not make a reservation in these dates!"});break;case 3:El().fire({icon:"error",title:"Oops...",text:"Check-In date occupied!"});break;case 4:El().fire({icon:"error",title:"Oops...",text:"Check-Out date occupied!"});break;case 5:El().fire({icon:"error",title:"Oops...",text:"Date occupied:"+this.reservationIn+"a"+this.reservationOut})}}}return t.\u0275fac=function(e){return new(e||t)(W(oo))},t.\u0275cmp=Ft({type:t,selectors:[["app-contact"]],decls:47,vars:13,consts:[[1,"container-home"],[1,"cont-search"],[1,"form-search",3,"submit"],[1,"input-cont-search"],["type","text","name","nombre","placeholder","Search for name",3,"ngModel","ngModelChange"],[1,"btn-sub"],["type","submit"],[1,"cont-forms"],[1,"container","form-cont",3,"ngSubmit"],[1,"row"],[1,"example-full-width"],["matInput","","id","name","name","name",3,"ngModel","ngModelChange"],["appearance","fill"],["matInput","","id","checkIn","name","checkIn",3,"matDatepicker","ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],["matInput","","id","checkOut","name","checkOut",3,"matDatepicker","ngModel","ngModelChange"],["picker2",""],[1,"eS"],["id","guests","name","guests",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","color","primary","type","submit"],[1,"survey-container"],[4,"ngIf"],[3,"value"],[1,"survey-title"],[3,"placeholder","submitForm"],[1,"title-home"],[1,"s-cont"],["id","p2"]],template:function(e,i){if(1&e&&(de(0,"div",0)(1,"div",1)(2,"form",2),jt("submit",function(){return i.enviarNombre()}),de(3,"div",3)(4,"input",4),jt("ngModelChange",function(s){return i.nombre=s}),he()(),de(5,"div",5)(6,"button",6),Ue(7,"Send"),he()()()(),de(8,"div",7)(9,"form",8),jt("ngSubmit",function(){return i.onSubmit()}),de(10,"div",9)(11,"mat-form-field",10)(12,"mat-label"),Ue(13,"Full Name"),he(),de(14,"input",11),jt("ngModelChange",function(s){return i.name=s}),he()(),de(15,"div")(16,"div")(17,"mat-form-field",12)(18,"mat-label"),Ue(19,"Check-In"),he(),de(20,"input",13),jt("ngModelChange",function(s){return i.checkInDate=s}),he(),nt(21,"mat-datepicker-toggle",14)(22,"mat-datepicker",null,15),he()(),de(24,"div")(25,"mat-form-field",12)(26,"mat-label"),Ue(27,"Check-Out"),he(),de(28,"input",16),jt("ngModelChange",function(s){return i.checkOutDate=s}),he(),nt(29,"mat-datepicker-toggle",14)(30,"mat-datepicker",null,17),he()()(),de(32,"div",18)(33,"mat-form-field",12)(34,"mat-label"),Ue(35,"Number of Visitors"),he(),de(36,"mat-select",19),jt("ngModelChange",function(s){return i.numGuests=s}),xt(37,Bke,2,2,"mat-option",20),he()()(),de(38,"div")(39,"div",5)(40,"button",21),Ue(41,"Send"),he()()()()(),de(42,"div",22),xt(43,Uke,5,1,"div",23),xt(44,jke,13,0,"div",23),xt(45,$ke,5,1,"div",23),he(),nt(46,"br"),he()()),2&e){const r=vn(23),s=vn(31);qe(4),Ye("ngModel",i.nombre),qe(10),Ye("ngModel",i.name),qe(6),Ye("matDatepicker",r)("ngModel",i.checkInDate),qe(1),Ye("for",r),qe(7),Ye("matDatepicker",s)("ngModel",i.checkOutDate),qe(1),Ye("for",s),qe(7),Ye("ngModel",i.numGuests),qe(1),Ye("ngForOf",i.numAdults),qe(6),Ye("ngIf",1==i.send&&0==i.satisfaction.rating),qe(1),Ye("ngIf",0===i.send),qe(1),Ye("ngIf",i.satisfaction.rating>0)}},dependencies:[pl,G0,lp,a5,Q9,J9,cp,n6,uke,Ux,gke,zHe,Lx,yHe,LHe,Fke,ON,Oke],styles:[".container-home[_ngcontent-%COMP%]{padding:30px;min-height:100%;min-width:100%;margin:0 auto;background-color:#081820}.cont-forms[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.input-cont-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px;border:2px solid gray}.input-cont-search[_ngcontent-%COMP%]{margin-right:30px}.form-search[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.cont-search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;padding:20px}.input-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:5px;border:2px solid gray}.title-home[_ngcontent-%COMP%]{margin:0 auto}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.title-home[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.title-home[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.title-home[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .title-home[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .title-home[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.title-home[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;margin-left:auto;display:block;width:200px;height:50px;border-radius:2rem;background-color:#c7e7f1;color:#000;transition:background-color .3s ease,border .3s ease,transform .3s ease}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#081820;color:#fff;border:2px solid white;transform:scale(1.1)}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.survey-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:0;min-height:100%;min-width:80%;margin:0 auto;background-color:#072230;font-size:1.2em}.survey-title[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:bolder}#p2[_ngcontent-%COMP%]{font-size:x-large;color:#fff;text-decoration:underline}.form-cont[_ngcontent-%COMP%]{margin-left:40px}.s-cont[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:left;align-items:center;color:#fff}"]}),t})(),Wke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-login"]],decls:7,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Book now"),he(),de(4,"h3"),Ue(5,"We are waiting for you!"),he()()(),nt(6,"app-contact"))},dependencies:[qke],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(fake-recep.269e82a7e7bd0831.jpg);background-size:cover;background-position:center;margin:0 auto}.check-container[_ngcontent-%COMP%]{padding:30px;height:400px;background-color:#072230;margin:0 auto}.container2[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:600px;min-height:80%;min-width:80%;width:95%;background-size:cover;background-position:center;margin:0 auto}']}),t})();function Zke(t,n){if(1&t&&(de(0,"div",4)(1,"div",5)(2,"div",6),nt(3,"img",7),he(),de(4,"div",8)(5,"h5",9),Ue(6),N0(7,"uppercase"),he(),de(8,"h6",10),Ue(9),N0(10,"uppercase"),N0(11,"uppercase"),he(),de(12,"p",11),Ue(13),he()()()()),2&t){const e=n.$implicit;qe(3),$i("src",e.url,Ho),qe(3),Wi(k8(7,5,e.title)),qe(3),pg(" Bed: ",k8(10,7,e.bed)," | Bath: ",k8(11,9,e.bath),""),qe(4),Wi(e.desc)}}let Yke=(()=>{class t{constructor(){this.rooms=[{title:"Room one",bed:"1 ",bath:"2",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room1.jpg"},{title:"Room two",bed:"2",bath:"2",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room3.jpg"},{title:"Room five",bed:"2",bath:"1",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room5.jpg"},{title:"Room six",bed:"2",bath:"1",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room7.jpg"},{title:"Room eigth",bed:"1",bath:"3",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room8.jpg"},{title:"Room ten",bed:"1",bath:"2",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room10.jpg"},{title:"Room eleven",bed:"3",bath:"2",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room4.jpg"},{title:"Room twelve",bed:"1",bath:"3",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room2.jpg"},{title:"Room fifteen",bed:"1",bath:"3",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room6.jpg"},{title:"Room sixteen",bed:"3",bath:"1",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room15.webp"}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-room-types"]],decls:8,vars:1,consts:[[1,"container"],[1,"title-home"],[1,"row"],["class","col-md-6 col-sm-12 p-3",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12","p-3"],[1,"card","bg-dark-blue"],[1,"img-container"],["alt","Card image cap",1,"card-img-top","col-sm-12",3,"src"],[1,"card-body"],[1,"card-title","text-left"],[1,"card-subtitle","mb-2","text-muted","text-left",2,"font-weight","bold"],[1,"card-text","text-left"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Relax in comfort"),he(),de(4,"h2"),Ue(5,"WITH OUR ROOMS"),he(),de(6,"div",2),xt(7,Zke,14,11,"div",3),he()()()),2&e&&(qe(7),Ye("ngForOf",i.rooms))},dependencies:[pl,h_],styles:[".container[_ngcontent-%COMP%]{padding:60px;gap:50px;min-height:100%;min-width:100%;background-color:#072230;margin:0 auto}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.title-home[_ngcontent-%COMP%]{text-align:center;padding:20px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-weight:700;letter-spacing:.1em;padding-bottom:30px}.bg-dark-blue[_ngcontent-%COMP%]{background-color:#e7f1fa}.bg-dark-blue[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;min-height:350px;min-width:300px}.img-container[_ngcontent-%COMP%]{padding-top:20px}"]}),t})(),Xke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-rooms"]],decls:7,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Hotel Rooms "),he(),de(4,"h3"),Ue(5,"Experience comfort and luxury in our elegant rooms"),he()()(),nt(6,"app-room-types"))},dependencies:[Yke],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(fake-room.9364e96a4abbe615.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})(),Kke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-explore-home"]],decls:14,vars:0,consts:[[1,"container"],[1,"image-container"],["src","assets/imgs/fake/fake-4.jpg","alt","",1,"img-2"],[1,"title-home"],[1,"spanP"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1),nt(2,"img",2),he(),de(3,"div",3)(4,"h1"),Ue(5,"Discover"),he(),de(6,"h2")(7,"span"),Ue(8,"YOUR PARADISE"),he()(),de(9,"p")(10,"span",4),Ue(11," If you're looking for a getaway that combines adventure and relaxation, look no further than Discover. "),nt(12,"br"),Ue(13," Our Hotel specializes in creating best experiences that can bring you some of the most beautiful and pristine locations in the world. "),he()()()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px;align-items:center;justify-content:center;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;height:100%}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   .spanP[_ngcontent-%COMP%]{display:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(1fr);grid-gap:20px;align-items:center;margin-top:50px;height:400px;width:780px;margin-left:100px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:400px;width:775px;top:0;right:5%;transform:translateY(-20px)}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})(),Qke=(()=>{class t{constructor(e){this.domSanitizer=e}transform(e,i){return this.domSanitizer.bypassSecurityTrustResourceUrl(i+e)}}return t.\u0275fac=function(e){return new(e||t)(W(Ih,16))},t.\u0275pipe=H2({name:"domseguro",type:t,pure:!0}),t})(),Jke=(()=>{class t{constructor(){this.video="rGx310iRHBo"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-video-explore"]],decls:18,vars:4,consts:[[1,"container"],[1,"video-container"],["width","560","height","315","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"],[1,"title-container"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1),nt(2,"iframe",2),N0(3,"domseguro"),he(),de(4,"div",3)(5,"h1"),Ue(6,"Explore"),he(),de(7,"h2")(8,"span"),Ue(9,"YOUR PERFECT GATEWAY"),he()(),de(10,"p"),Ue(11," Discover a world of indulgence and sophistication at our premier hotel, the perfect destination for your next getaway. With world-class amenities, luxurious accommodations, and unparalleled service, we offer a truly unforgettable experience that will leave you feeling relaxed, rejuvenated, and inspired. "),he(),de(12,"p"),Ue(13," Whether you're traveling for business or pleasure, our hotel has everything you need to make your stay comfortable and enjoyable. From spacious rooms and suites to fine dining restaurants and a full-service spa, we have everything you need to unwind in style. "),he(),de(14,"p"),Ue(15," Our expert staff is committed to providing you with personalized attention and exceptional service, ensuring that your every need is met. Whether you need help with dinner reservations or recommendations for local attractions, we are here to help. "),he(),de(16,"p"),Ue(17," So why wait? Explore your perfect getaway and book your stay at our luxurious hotel today. "),he()()()),2&e&&(qe(2),Ye("src",function mw(t,n,e,i){const r=t+Cn,s=pt(),d=_2(s,r);return $u(s,r)?dw(s,Si(),n,d.transform,e,i,d):d.transform(e,i)}(3,1,i.video,"https://www.youtube.com/embed/"),W4))},dependencies:[Qke],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto auto;grid-gap:20px;justify-content:center;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto;padding:50px}.title-container[_ngcontent-%COMP%]{margin-top:0;padding-right:40px}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.video-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),t})();function eIe(t,n){if(1&t){const e=u2();de(0,"div",4)(1,"img",5),jt("load",function(r){return A2(e),E2(w1().onImageLoad(r))}),he()()}if(2&t){const e=n.$implicit;qe(1),Ye("src",e.url,Ho)}}let tIe=(()=>{class t{constructor(){this.images=[{url:"assets/imgs/beach/beach17.jpg"},{url:"assets/imgs/beach/beach15.jpg"},{url:"assets/imgs/beach/beach16.jpg"},{url:"assets/imgs/beach/beach13.jpg"},{url:"assets/imgs/beach/beach14.jpg"},{url:"assets/imgs/beach/beach12.jpg"},{url:"assets/imgs/beach/beach11.jpg"},{url:"assets/imgs/beach/beach10.jpg"},{url:"assets/imgs/beach/beach8.jpg"},{url:"assets/imgs/beach/beach2.jpg"},{url:"assets/imgs/beach/beach6.jpg"},{url:"assets/imgs/beach/beach5.jpg"},{url:"assets/imgs/beach/beach7.jpg"},{url:"assets/imgs/beach/beach3.jpg"},{url:"assets/imgs/beach/beach4.jpg"},{url:"assets/imgs/beach/beach1.jpg"},{url:"assets/imgs/beach/beach9.jpg"}],this.shuffle(this.images)}shuffle(e){let r,s,i=e.length;for(;0!==i;)s=Math.floor(Math.random()*i),i-=1,r=e[i],e[i]=e[s],e[s]=r;return e}onImageLoad(e){e.target.classList.add("loaded")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-img-explore"]],decls:8,vars:1,consts:[[1,"title-cont"],[1,"title-home"],[1,"container"],["class","img-container",4,"ngFor","ngForOf"],[1,"img-container"],[3,"src","load"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Reveal "),he(),de(4,"h3"),Ue(5,"YOUR PERSONAL HEAVEN"),he()()(),de(6,"div",2),xt(7,eIe,2,1,"div",3),he()),2&e&&(qe(7),Ye("ngForOf",i.images))},dependencies:[pl],styles:[".container[_ngcontent-%COMP%]{padding:60px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto;columns:5 320px;column-gap:.5rem}.title-cont[_ngcontent-%COMP%]{padding:20px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-cont[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;font-size:3.5rem;letter-spacing:.15em;font-family:Radley,serif}.title-cont[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.1em}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;display:block;margin-bottom:.5rem}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:0;transition:opacity .5s ease-in-out}.img-container[_ngcontent-%COMP%]   img.loaded[_ngcontent-%COMP%]{opacity:1}"]}),t})(),nIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-explore"]],decls:9,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Explore Rinc\xf3n de Guayabitos | Mexico |"),he(),de(4,"h3"),Ue(5,"Your paradise awaits!"),he()()(),nt(6,"app-explore-home")(7,"app-img-explore")(8,"app-video-explore"))},dependencies:[Kke,Jke,tIe],styles:[".title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:3.5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(fake-5.8c571756f601d68e.jpg);background-size:cover;background-position:center;margin:0 auto}"]}),t})(),iIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-restaurant-home"]],decls:20,vars:0,consts:[[1,"container"],[1,"title-home"],[1,"spanP"],[1,"image-container"],["src","assets/imgs/fake/hotel-fake.jpg","alt","",1,"img-2"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Satisfaction"),he(),de(4,"h2")(5,"span"),Ue(6,"FLAVOR THAT DAZZLES"),he()(),de(7,"p")(8,"span",2),Ue(9," At our hotel, we understand that food is an important part of any travel experience. "),nt(10,"br"),Ue(11," That's why we take great pride in offering a dining experience that is sure to dazzle your "),nt(12,"br"),Ue(13," taste buds. "),nt(14,"br"),Ue(15," Our expert chefs use only the finest ingredients to create dishes that are as beautiful "),nt(16,"br"),Ue(17," as they are delicious. "),he()()(),de(18,"div",3),nt(19,"img",4),he()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px;align-items:flex-start;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;height:100%}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   .spanP[_ngcontent-%COMP%]{display:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(1fr);grid-gap:20px;align-items:center;height:600px;width:855px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:460px;width:900px;top:0;right:25%;transform:translate(20%)}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})();class Dp{}class $x{}class _4{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),d=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(d):this.headers.set(s,[d])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(e=>{let i=n[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof _4?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new _4;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof _4?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const r=("a"===n.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=n.value;if(s){let d=this.headers.get(e);if(!d)return;d=d.filter(v=>-1===s.indexOf(v)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class rIe{encodeKey(n){return CO(n)}encodeValue(n){return CO(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const oIe=/%(\d[a-f0-9])/gi,sIe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function CO(t){return encodeURIComponent(t).replace(oIe,(n,e)=>sIe[e]??n)}function Ap(t){return`${t}`}class Fl{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new rIe,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function aIe(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[d,v]=-1==s?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,s)),n.decodeValue(r.slice(s+1))],C=e.get(d)||[];C.push(v),e.set(d,C)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],r=Array.isArray(i)?i.map(Ap):[Ap(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const r=n[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Fl({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(Ap(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const r=i.indexOf(Ap(n.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class cIe{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function wO(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function MO(t){return typeof Blob<"u"&&t instanceof Blob}function zO(t){return typeof FormData<"u"&&t instanceof FormData}class rd{constructor(n,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function lIe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new _4),this.context||(this.context=new cIe),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const v=e.indexOf("?");this.urlWithParams=e+(-1===v?"?":v<e.length-1?"&":"")+d}}else this.params=new Fl,this.urlWithParams=e}serializeBody(){return null===this.body?null:wO(this.body)||MO(this.body)||zO(this.body)||function uIe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Fl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zO(this.body)?null:MO(this.body)?this.body.type||null:wO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,d=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,v=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let C=n.headers||this.headers,S=n.params||this.params;const V=n.context??this.context;return void 0!==n.setHeaders&&(C=Object.keys(n.setHeaders).reduce((F,Z)=>F.set(Z,n.setHeaders[Z]),C)),n.setParams&&(S=Object.keys(n.setParams).reduce((F,Z)=>F.set(Z,n.setParams[Z]),S)),new rd(e,i,s,{params:S,headers:C,context:V,reportProgress:v,responseType:r,withCredentials:d})}}var Ri=(()=>((Ri=Ri||{})[Ri.Sent=0]="Sent",Ri[Ri.UploadProgress=1]="UploadProgress",Ri[Ri.ResponseHeader=2]="ResponseHeader",Ri[Ri.DownloadProgress=3]="DownloadProgress",Ri[Ri.Response=4]="Response",Ri[Ri.User=5]="User",Ri))();class qx{constructor(n,e=200,i="OK"){this.headers=n.headers||new _4,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class Wx extends qx{constructor(n={}){super(n),this.type=Ri.ResponseHeader}clone(n={}){return new Wx({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Ep extends qx{constructor(n={}){super(n),this.type=Ri.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Ep({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class SO extends qx{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function Zx(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let DO=(()=>{class t{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof rd)s=e;else{let C,S;C=r.headers instanceof _4?r.headers:new _4(r.headers),r.params&&(S=r.params instanceof Fl?r.params:new Fl({fromObject:r.params})),s=new rd(e,i,void 0!==r.body?r.body:null,{headers:C,context:r.context,params:S,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const d=r1(s).pipe(yl(C=>this.handler.handle(C)));if(e instanceof rd||"events"===r.observe)return d;const v=d.pipe(Xi(C=>C instanceof Ep));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return v.pipe(h1(C=>{if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return v.pipe(h1(C=>{if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return v.pipe(h1(C=>{if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));default:return v.pipe(h1(C=>C.body))}case"response":return v;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Fl).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Zx(r,i))}post(e,i,r={}){return this.request("POST",e,Zx(r,i))}put(e,i,r={}){return this.request("PUT",e,Zx(r,i))}}return t.\u0275fac=function(e){return new(e||t)(Re(Dp))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();function AO(t,n){return n(t)}function dIe(t,n){return(e,i)=>n.intercept(e,{handle:r=>t(r,i)})}const hIe=new vt("HTTP_INTERCEPTORS"),ad=new vt("HTTP_INTERCEPTOR_FNS");function pIe(){let t=null;return(n,e)=>(null===t&&(t=(o1(hIe,{optional:!0})??[]).reduceRight(dIe,AO)),t(n,e))}let EO=(()=>{class t extends Dp{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=Array.from(new Set(this.injector.get(ad)));this.chain=i.reduceRight((r,s)=>function fIe(t,n,e){return(i,r)=>e.runInContext(()=>n(i,s=>t(s,r)))}(r,s,this.injector),AO)}return this.chain(e,i=>this.backend.handle(i))}}return t.\u0275fac=function(e){return new(e||t)(Re($x),Re(bs))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const vIe=/^\)\]\}',?\n/;let LO=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new l1(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((K,le)=>r.setRequestHeader(K,le.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const K=e.detectContentTypeHeader();null!==K&&r.setRequestHeader("Content-Type",K)}if(e.responseType){const K=e.responseType.toLowerCase();r.responseType="json"!==K?K:"text"}const s=e.serializeBody();let d=null;const v=()=>{if(null!==d)return d;const K=r.statusText||"OK",le=new _4(r.getAllResponseHeaders()),xe=function yIe(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||e.url;return d=new Wx({headers:le,status:r.status,statusText:K,url:xe}),d},C=()=>{let{headers:K,status:le,statusText:xe,url:Me}=v(),He=null;204!==le&&(He=typeof r.response>"u"?r.responseText:r.response),0===le&&(le=He?200:0);let ut=le>=200&&le<300;if("json"===e.responseType&&"string"==typeof He){const $e=He;He=He.replace(vIe,"");try{He=""!==He?JSON.parse(He):null}catch(St){He=$e,ut&&(ut=!1,He={error:St,text:He})}}ut?(i.next(new Ep({body:He,headers:K,status:le,statusText:xe,url:Me||void 0})),i.complete()):i.error(new SO({error:He,headers:K,status:le,statusText:xe,url:Me||void 0}))},S=K=>{const{url:le}=v(),xe=new SO({error:K,status:r.status||0,statusText:r.statusText||"Unknown Error",url:le||void 0});i.error(xe)};let V=!1;const F=K=>{V||(i.next(v()),V=!0);let le={type:Ri.DownloadProgress,loaded:K.loaded};K.lengthComputable&&(le.total=K.total),"text"===e.responseType&&r.responseText&&(le.partialText=r.responseText),i.next(le)},Z=K=>{let le={type:Ri.UploadProgress,loaded:K.loaded};K.lengthComputable&&(le.total=K.total),i.next(le)};return r.addEventListener("load",C),r.addEventListener("error",S),r.addEventListener("timeout",S),r.addEventListener("abort",S),e.reportProgress&&(r.addEventListener("progress",F),null!==s&&r.upload&&r.upload.addEventListener("progress",Z)),r.send(s),i.next({type:Ri.Sent}),()=>{r.removeEventListener("error",S),r.removeEventListener("abort",S),r.removeEventListener("load",C),r.removeEventListener("timeout",S),e.reportProgress&&(r.removeEventListener("progress",F),null!==s&&r.upload&&r.upload.removeEventListener("progress",Z)),r.readyState!==r.DONE&&r.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(Re(BM))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const Yx=new vt("XSRF_ENABLED"),TO=new vt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),HO=new vt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class kO{}let CIe=(()=>{class t{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=EM(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1),Re(Es),Re(TO))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();function wIe(t,n){const e=t.url.toLowerCase();if(!o1(Yx)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const i=o1(kO).getToken(),r=o1(HO);return null!=i&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),n(t)}var vi=(()=>((vi=vi||{})[vi.Interceptors=0]="Interceptors",vi[vi.LegacyInterceptors=1]="LegacyInterceptors",vi[vi.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",vi[vi.NoXsrfProtection=3]="NoXsrfProtection",vi[vi.JsonpSupport=4]="JsonpSupport",vi[vi.RequestsMadeViaParent=5]="RequestsMadeViaParent",vi))();function g5(t,n){return{\u0275kind:t,\u0275providers:n}}function MIe(...t){const n=[DO,LO,EO,{provide:Dp,useExisting:EO},{provide:$x,useExisting:LO},{provide:ad,useValue:wIe,multi:!0},{provide:Yx,useValue:!0},{provide:kO,useClass:CIe}];for(const e of t)n.push(...e.\u0275providers);return function cf(t){return{\u0275providers:t}}(n)}const IO=new vt("LEGACY_INTERCEPTOR_FN");let SIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:[MIe(g5(vi.LegacyInterceptors,[{provide:IO,useFactory:pIe},{provide:ad,useExisting:IO,multi:!0}]))]}),t})(),DIe=(()=>{class t{constructor(e){this.http=e,this.apiUrlMeals="https://www.themealdb.com/api/json/v1/1"}getMealsByCategory(e){return this.http.get(`${this.apiUrlMeals}/filter.php?c=${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Re(DO))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function AIe(t,n){if(1&t&&(de(0,"tr")(1,"td"),Ue(2),he(),de(3,"td"),nt(4,"img",7),he()()),2&t){const e=n.$implicit;qe(2),Wi(e.strMeal),qe(2),$i("alt",e.strMeal),Ye("src",e.strMealThumb,Ho)}}function EIe(t,n){if(1&t&&(de(0,"tr")(1,"td"),Ue(2),he(),de(3,"td"),nt(4,"img",7),he()()),2&t){const e=n.$implicit;qe(2),Wi(e.strMeal),qe(2),$i("alt",e.strMeal),Ye("src",e.strMealThumb,Ho)}}function VIe(t,n){if(1&t&&(de(0,"tr")(1,"td"),Ue(2),he(),de(3,"td"),nt(4,"img",7),he()()),2&t){const e=n.$implicit;qe(2),Wi(e.strMeal),qe(2),$i("alt",e.strMeal),Ye("src",e.strMealThumb,Ho)}}function LIe(t,n){if(1&t&&(de(0,"tr")(1,"td"),Ue(2),he(),de(3,"td"),nt(4,"img",7),he()()),2&t){const e=n.$implicit;qe(2),Wi(e.strMeal),qe(2),$i("alt",e.strMeal),Ye("src",e.strMealThumb,Ho)}}let TIe=(()=>{class t{constructor(e){this.mealService=e,this.meals_seaFood=[],this.meals_meats=[],this.meals_dessert=[],this.meals_soups=[]}ngOnInit(){this.mealService.getMealsByCategory("SeaFood").subscribe(e=>{this.meals_seaFood=e.meals?.slice(0,5)}),this.mealService.getMealsByCategory("Beef").subscribe(e=>{this.meals_meats=e.meals?.slice(0,5)}),this.mealService.getMealsByCategory("Dessert").subscribe(e=>{this.meals_dessert=e.meals?.slice(0,5)}),this.mealService.getMealsByCategory("Beef").subscribe(e=>{this.meals_soups=e.meals?.slice(6,11)})}}return t.\u0275fac=function(e){return new(e||t)(W(DIe))},t.\u0275cmp=Ft({type:t,selectors:[["app-menu-search"]],decls:53,vars:4,consts:[[1,"container"],[1,"title-home"],[1,"menu-deploy"],[1,"table","table-hover"],["colspan","2",1,"title-cat"],["scope","col"],[4,"ngFor","ngForOf"],[3,"src","alt"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Savor your favorites"),he()(),de(4,"div",2)(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),Ue(9,"SeaFood"),he()(),de(10,"tr")(11,"th",5),Ue(12,"Name"),he(),de(13,"th",5),Ue(14,"Image"),he()()(),de(15,"tbody"),xt(16,AIe,5,3,"tr",6),he()(),de(17,"table",3)(18,"thead")(19,"tr")(20,"th",4),Ue(21,"Meats"),he()(),de(22,"tr")(23,"th",5),Ue(24,"Name"),he(),de(25,"th",5),Ue(26,"Image"),he()()(),de(27,"tbody"),xt(28,EIe,5,3,"tr",6),he()(),de(29,"table",3)(30,"thead")(31,"tr")(32,"th",4),Ue(33,"Desserts"),he()(),de(34,"tr")(35,"th",5),Ue(36,"Name"),he(),de(37,"th",5),Ue(38,"Image"),he()()(),de(39,"tbody"),xt(40,VIe,5,3,"tr",6),he()(),de(41,"table",3)(42,"thead")(43,"tr")(44,"th",4),Ue(45,"Meats VIP"),he()(),de(46,"tr")(47,"th",5),Ue(48,"Name"),he(),de(49,"th",5),Ue(50,"Image"),he()()(),de(51,"tbody"),xt(52,LIe,5,3,"tr",6),he()()()()),2&e&&(qe(16),Ye("ngForOf",i.meals_seaFood),qe(12),Ye("ngForOf",i.meals_meats),qe(12),Ye("ngForOf",i.meals_dessert),qe(12),Ye("ngForOf",i.meals_soups))},dependencies:[pl],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-gap:20px;align-items:flex-start;padding:60px;min-height:100%;min-width:100%;background-color:#072230;margin:0 auto}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}table[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto;border-collapse:collapse;background-color:#081820;color:#fff}.title-cat[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:1.2em;padding:10px 0;color:#fff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center}img[_ngcontent-%COMP%]{display:block;margin:0 auto;max-height:150px;max-width:150px}td[_ngcontent-%COMP%]{vertical-align:middle}.menu-deploy[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto auto;gap:30px}"]}),t})(),HIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-restaurant"]],decls:8,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Restaurant "),he(),de(4,"h3"),Ue(5,"Where every meal is a masterpiece"),he()()(),nt(6,"app-restaurant-home")(7,"app-menu-search"))},dependencies:[iIe,TIe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(hotel-fake-6.ea5ccc068a338c5e.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})();function kIe(t,n){if(1&t&&(de(0,"div",4)(1,"div",5)(2,"div",6),nt(3,"img",7),he(),de(4,"div",8)(5,"h5",9),Ue(6),N0(7,"uppercase"),he(),de(8,"h6",10),Ue(9),N0(10,"uppercase"),he(),de(11,"p",11),Ue(12),he(),de(13,"div",12)(14,"a",13),nt(15,"fa-icon",14),he(),de(16,"a",13),nt(17,"fa-icon",15),he(),de(18,"a",13),nt(19,"fa-icon",16),he()()()()()),2&t){const e=n.$implicit,i=w1();qe(3),$i("src",e.url,Ho),qe(3),Wi(k8(7,7,e.name)),qe(3),Wi(k8(10,9,e.charge)),qe(3),Wi(e.cardText),qe(3),Ye("icon",i.faFacebook),qe(2),Ye("icon",i.faTwitter),qe(2),Ye("icon",i.faInstagram)}}let IIe=(()=>{class t{constructor(){this.faInstagram=A9,this.faFacebook=E9,this.faTwitter=dy,this.names=[{name:"Antonio Romo",charge:"Front-Dev",cardText:"Antonio is a skilled Front-End Developer with a passion for creating visually appealing and user-friendly websites.",url:"assets/imgs/team/tony.jpg"},{name:"Salvador Gaytan",charge:"Back-Dev",cardText:"Salvador is a skilled Back-End Developer with a passion for building efficient and reliable systems.",url:"assets/imgs/team/salvador.png"},{name:"Luis Navarrete",charge:"Back-Dev",cardText:"Luis is a skilled Back-End Developer with a passion for building robust and scalable applications.",url:"assets/imgs/team/luis.jpg"},{name:"Michelle Ruvalcaba",charge:"Front-Dev",cardText:"Michelle is a skilled Front-End Developer with a passion for creating beautiful and engaging websites.",url:"assets/imgs/team/michelle.png"}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-meet-our-team"]],decls:6,vars:1,consts:[[1,"container"],[1,"title-home"],[1,"row"],["class","col-md-3 col-sm-12",4,"ngFor","ngForOf"],[1,"col-md-3","col-sm-12"],[1,"card","bg-dark-blue"],[1,"img-container"],["alt","Card image cap",1,"card-img-top","col-md-6","col-sm-12",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted",2,"font-weight","bold"],[1,"card-text"],[1,"social-icons"],["href","#"],[1,"enve","face",3,"icon"],[1,"enve","tw",3,"icon"],[1,"enve","insta",3,"icon"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Meet Our Team of Developers"),he()(),de(4,"div",2),xt(5,kIe,20,11,"div",3),he()()),2&e&&(qe(5),Ye("ngForOf",i.names))},dependencies:[pl,Y9,h_],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;align-items:flex-start;padding:60px;gap:50px;min-height:100%;min-width:100%;background-color:#072230;margin:0 auto}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.bg-dark-blue[_ngcontent-%COMP%]{background-color:#e7f1fa;text-align:center}.bg-dark-blue[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;min-height:350px;min-width:350px;border-radius:50%;object-fit:cover;display:block}.img-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;align-items:center;justify-content:center;height:350px;overflow:hidden}.social-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-evenly;font-size:2rem}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.insta[_ngcontent-%COMP%]:hover{color:#e1306c}fa-icon[_ngcontent-%COMP%]{color:#072230;cursor:pointer}.tw[_ngcontent-%COMP%]:hover{color:#83a5ee}.face[_ngcontent-%COMP%]:hover{color:#3b5998}"]}),t})(),RIe=(()=>{class t{constructor(e){this.formBuilder=e,this.faInstagram=A9,this.faFacebook=E9,this.faTwitter=dy,this.contactForm=new s5({})}ngOnInit(){this.contactForm=this.formBuilder.group({name:["",Tl.required],email:["",[Tl.required,Tl.email]],phone:["",Tl.required],message:["",Tl.required]})}onSubmit(){this.contactForm.valid?console.log(this.contactForm.value):console.log("Formulario inv\xe1lido")}}return t.\u0275fac=function(e){return new(e||t)(W(mVe))},t.\u0275cmp=Ft({type:t,selectors:[["app-form-book"]],decls:29,vars:4,consts:[[1,"container"],[1,"title-container"],[1,"social-icons"],["href","#"],[1,"enve","face",3,"icon"],[1,"enve","tw",3,"icon"],[1,"enve","insta",3,"icon"],[1,"form-cont",3,"formGroup","ngSubmit"],[1,"py-2","input-cont"],["type","text","id","name","formControlName","name","placeholder","Name"],["type","email","id","email","formControlName","email","placeholder","Email"],["type","text","id","phone","formControlName","phone","placeholder","Phone"],[1,"py-3","btn-sub"],["type","submit"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h3"),Ue(3,"We\u2019d love to hear from you. Just choose the most convenient method and we\u2019ll get back to you as soon as we can."),he(),de(4,"p"),Ue(5,"Retorno Cedros 4, Rinc\xf3n de Guayabitos"),nt(6,"br"),Ue(7," M\xe9xico , 63727 "),nt(8,"br"),Ue(9," 555 555 555 "),nt(10,"br"),Ue(11," hoteljacqueline@gmail.com "),he(),de(12,"div",2)(13,"a",3),nt(14,"fa-icon",4),he(),de(15,"a",3),nt(16,"fa-icon",5),he(),de(17,"a",3),nt(18,"fa-icon",6),he()()(),de(19,"form",7),jt("ngSubmit",function(){return i.onSubmit()}),de(20,"div",8),nt(21,"input",9),he(),de(22,"div",8),nt(23,"input",10),he(),de(24,"div",8),nt(25,"input",11),he(),de(26,"div",12)(27,"button",13),Ue(28,"Submit"),he()()()()),2&e&&(qe(14),Ye("icon",i.faFacebook),qe(2),Ye("icon",i.faTwitter),qe(2),Ye("icon",i.faInstagram),qe(1),Ye("formGroup",i.contactForm))},dependencies:[Y9,lp,a5,Q9,J9,c5,ix],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;padding:60px;gap:20px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-container[_ngcontent-%COMP%]{padding:0 60px;color:#fff;text-align:left;font-size:1.5rem}.form-cont[_ngcontent-%COMP%]{max-width:700px}.social-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;font-size:2rem}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;transition:transform .3s ease-in-out}fa-icon[_ngcontent-%COMP%]{color:#c7e7f1;cursor:pointer}.tw[_ngcontent-%COMP%]:hover{color:#83a5ee}.face[_ngcontent-%COMP%]:hover{color:#3b5998}.insta[_ngcontent-%COMP%]:hover{color:#e1306c}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;margin-left:auto;width:200px;margin-top:25px;height:50px;border-radius:2rem;background-color:#c7e7f1;border:2px solid #081820;color:#000;transition:background-color .3s ease,border .3s ease,transform .3s ease}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#081820;color:#fff;border:2px solid white;transform:scale(1.1)}.input-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px;border:2px solid gray}"]}),t})(),PIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-book"]],decls:8,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Contact Us "),he(),de(4,"h3"),Ue(5,"Send us your feedback!"),he()()(),nt(6,"app-form-book")(7,"app-meet-our-team"))},dependencies:[IIe,RIe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(living-room-2.d5fb30b65a3b2c1a.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})();const NIe=[[["caption"]],[["colgroup"],["col"]]],OIe=["caption","colgroup, col"];function Xx(t){return class extends t{get sticky(){return this._sticky}set sticky(n){const e=this._sticky;this._sticky=ln(n),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const n=this._hasStickyChanged;return this._hasStickyChanged=!1,n}resetStickyChanged(){this._hasStickyChanged=!1}constructor(...n){super(...n),this._sticky=!1,this._hasStickyChanged=!1}}}const _5=new vt("CDK_TABLE");let v5=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(W(gr))},t.\u0275dir=je({type:t,selectors:[["","cdkCellDef",""]]}),t})(),y5=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(W(gr))},t.\u0275dir=je({type:t,selectors:[["","cdkHeaderCellDef",""]]}),t})(),Vp=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(W(gr))},t.\u0275dir=je({type:t,selectors:[["","cdkFooterCellDef",""]]}),t})();class GIe{}const $Ie=Xx(GIe);let v4=(()=>{class t extends $Ie{get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const i=this._stickyEnd;this._stickyEnd=ln(e),this._hasStickyChanged=i!==this._stickyEnd}constructor(e){super(),this._table=e,this._stickyEnd=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return t.\u0275fac=function(e){return new(e||t)(W(_5,8))},t.\u0275dir=je({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,i,r){if(1&e&&(mi(r,v5,5),mi(r,y5,5),mi(r,Vp,5)),2&e){let s;V1(s=L1())&&(i.cell=s.first),V1(s=L1())&&(i.headerCell=s.first),V1(s=L1())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[D1([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),o]}),t})();class Kx{constructor(n,e){e.nativeElement.classList.add(...n._columnCssClassName)}}let Qx=(()=>{class t extends Kx{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(W(v4),W(Ot))},t.\u0275dir=je({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[o]}),t})(),Jx=(()=>{class t extends Kx{constructor(e,i){if(super(e,i),1===e._table?._elementRef.nativeElement.nodeType){const r=e._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return t.\u0275fac=function(e){return new(e||t)(W(v4),W(Ot))},t.\u0275dir=je({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[o]}),t})();class PO{constructor(){this.tasks=[],this.endTasks=[]}}const eb=new vt("_COALESCED_STYLE_SCHEDULER");let FO=(()=>{class t{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Qt}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new PO,this._getScheduleObservable().pipe(M2(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new PO;for(const i of e.tasks)i();for(const i of e.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?e2(Promise.resolve(void 0)):this._ngZone.onStable.pipe(aa(1))}}return t.\u0275fac=function(e){return new(e||t)(Re(f1))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),tb=(()=>{class t{constructor(e,i){this.template=e,this._differs=i}ngOnChanges(e){if(!this._columnsDiffer){const i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof od?e.headerCell.template:this instanceof sd?e.footerCell.template:e.cell.template}}return t.\u0275fac=function(e){return new(e||t)(W(gr),W(d3))},t.\u0275dir=je({type:t,features:[wn]}),t})();class qIe extends tb{}const WIe=Xx(qIe);let od=(()=>{class t extends WIe{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return t.\u0275fac=function(e){return new(e||t)(W(gr),W(d3),W(_5,8))},t.\u0275dir=je({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[o,wn]}),t})();class ZIe extends tb{}const YIe=Xx(ZIe);let sd=(()=>{class t extends YIe{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return t.\u0275fac=function(e){return new(e||t)(W(gr),W(d3),W(_5,8))},t.\u0275dir=je({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[o,wn]}),t})(),Lp=(()=>{class t extends tb{constructor(e,i,r){super(e,i),this._table=r}}return t.\u0275fac=function(e){return new(e||t)(W(gr),W(d3),W(_5,8))},t.\u0275dir=je({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[o]}),t})(),y4=(()=>{class t{constructor(e){this._viewContainer=e,t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}}return t.mostRecentCellOutlet=null,t.\u0275fac=function(e){return new(e||t)(W(Zi))},t.\u0275dir=je({type:t,selectors:[["","cdkCellOutlet",""]]}),t})(),nb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&Ln(0,0)},dependencies:[y4],encapsulation:2}),t})(),rb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&Ln(0,0)},dependencies:[y4],encapsulation:2}),t})(),Tp=(()=>{class t{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return t.\u0275fac=function(e){return new(e||t)(W(gr))},t.\u0275dir=je({type:t,selectors:[["ng-template","cdkNoDataRow",""]]}),t})();const NO=["top","bottom","left","right"];class XIe{constructor(n,e,i,r,s=!0,d=!0,v){this._isNativeHtmlTable=n,this._stickCellCss=e,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=d,this._positionListener=v,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(n,e){const i=[];for(const r of n)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,e)})}updateStickyColumns(n,e,i,r=!0){if(!n.length||!this._isBrowser||!e.some(Z=>Z)&&!i.some(Z=>Z))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=n[0],d=s.children.length,v=this._getCellWidths(s,r),C=this._getStickyStartColumnPositions(v,e),S=this._getStickyEndColumnPositions(v,i),V=e.lastIndexOf(!0),F=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const Z="rtl"===this.direction,K=Z?"right":"left",le=Z?"left":"right";for(const xe of n)for(let Me=0;Me<d;Me++){const He=xe.children[Me];e[Me]&&this._addStickyStyle(He,K,C[Me],Me===V),i[Me]&&this._addStickyStyle(He,le,S[Me],Me===F)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===V?[]:v.slice(0,V+1).map((xe,Me)=>e[Me]?xe:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===F?[]:v.slice(F).map((xe,Me)=>i[Me+F]?xe:null).reverse()}))})}stickRows(n,e,i){if(!this._isBrowser)return;const r="bottom"===i?n.slice().reverse():n,s="bottom"===i?e.slice().reverse():e,d=[],v=[],C=[];for(let V=0,F=0;V<r.length;V++){if(!s[V])continue;d[V]=F;const Z=r[V];C[V]=this._isNativeHtmlTable?Array.from(Z.children):[Z];const K=Z.getBoundingClientRect().height;F+=K,v[V]=K}const S=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let V=0;V<r.length;V++){if(!s[V])continue;const F=d[V],Z=V===S;for(const K of C[V])this._addStickyStyle(K,i,F,Z)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:v,offsets:d,elements:C}):this._positionListener?.stickyFooterRowsUpdated({sizes:v,offsets:d,elements:C})})}updateStickyFooterContainer(n,e){if(!this._isNativeHtmlTable)return;const i=n.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(n,e){for(const r of e)n.style[r]="",n.classList.remove(this._borderCellCss[r]);NO.some(r=>-1===e.indexOf(r)&&n.style[r])?n.style.zIndex=this._getCalculatedZIndex(n):(n.style.zIndex="",this._needsPositionStickyOnElement&&(n.style.position=""),n.classList.remove(this._stickCellCss))}_addStickyStyle(n,e,i,r){n.classList.add(this._stickCellCss),r&&n.classList.add(this._borderCellCss[e]),n.style[e]=`${i}px`,n.style.zIndex=this._getCalculatedZIndex(n),this._needsPositionStickyOnElement&&(n.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(n){const e={top:100,bottom:10,left:1,right:1};let i=0;for(const r of NO)n.style[r]&&(i+=e[r]);return i?`${i}`:""}_getCellWidths(n,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=n.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(n,e){const i=[];let r=0;for(let s=0;s<n.length;s++)e[s]&&(i[s]=r,r+=n[s]);return i}_getStickyEndColumnPositions(n,e){const i=[];let r=0;for(let s=n.length;s>0;s--)e[s]&&(i[s]=r,r+=n[s]);return i}}const ab=new vt("CDK_SPL");let Hp=(()=>{class t{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return t.\u0275fac=function(e){return new(e||t)(W(Zi),W(Ot))},t.\u0275dir=je({type:t,selectors:[["","rowOutlet",""]]}),t})(),kp=(()=>{class t{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return t.\u0275fac=function(e){return new(e||t)(W(Zi),W(Ot))},t.\u0275dir=je({type:t,selectors:[["","headerRowOutlet",""]]}),t})(),Ip=(()=>{class t{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return t.\u0275fac=function(e){return new(e||t)(W(Zi),W(Ot))},t.\u0275dir=je({type:t,selectors:[["","footerRowOutlet",""]]}),t})(),Rp=(()=>{class t{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return t.\u0275fac=function(e){return new(e||t)(W(Zi),W(Ot))},t.\u0275dir=je({type:t,selectors:[["","noDataRowOutlet",""]]}),t})(),Pp=(()=>{class t{get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=ln(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=ln(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,i,r,s,d,v,C,S,V,F,Z,K){this._differs=e,this._changeDetectorRef=i,this._elementRef=r,this._dir=d,this._platform=C,this._viewRepeater=S,this._coalescedStyleScheduler=V,this._viewportRuler=F,this._stickyPositioningListener=Z,this._ngZone=K,this._onDestroy=new Qt,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Gt,this.viewChange=new ao({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=v,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(M2(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),Gx(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(r,s,d)=>this._getEmbeddedViewArgs(r.item,d),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&f1.isInAngularZone()?this._ngZone.onStable.pipe(aa(1),M2(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const s=this._headerRowDefs.map(d=>d.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(d=>d.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const s=this._footerRowDefs.map(d=>d.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(d=>d.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,d)=>{this._addStickyColumnStyles([s],this._headerRowDefs[d])}),this._rowDefs.forEach(s=>{const d=[];for(let v=0;v<i.length;v++)this._renderRows[v].rowDef===s&&d.push(i[v]);this._addStickyColumnStyles(d,s)}),r.forEach((s,d)=>{this._addStickyColumnStyles([s],this._footerRowDefs[d])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const d=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let v=0;v<d.length;v++){let C=d[v];const S=this._cachedRenderRowsMap.get(C.data);S.has(C.rowDef)?S.get(C.rowDef).push(C):S.set(C.rowDef,[C]),e.push(C)}}return e}_getRenderRowsForData(e,i,r){return this._getRowDefs(e,i).map(d=>{const v=r&&r.has(d)?r.get(d):[];if(v.length){const C=v.shift();return C.dataIndex=i,C}return{data:e,rowDef:d,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Fp(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=Fp(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Fp(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Fp(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(d,v)=>d||!!v.getColumnsDiff(),i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(e){this._data=[],Gx(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;Gx(this.dataSource)?e=this.dataSource.connect(this):function FIe(t){return!!t&&(t instanceof l1||k1(t.lift)&&k1(t.subscribe))}(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=r1(this.dataSource)),this._renderChangeSubscription=e.pipe(M2(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){const r=Array.from(i.columns||[]).map(v=>this._columnDefsByName.get(v)),s=r.map(v=>v.sticky),d=r.map(v=>v.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,d,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const i=[];for(let r=0;r<e.viewContainer.length;r++){const s=e.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(e,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,e));else{let s=this._rowDefs.find(d=>d.when&&d.when(i,e))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(e,i){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:i}}_renderRow(e,i,r,s={}){const d=e.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),d}_renderCellTemplateForItem(e,i){for(let r of this._getCellTemplates(e))y4.mostRecentCellOutlet&&y4.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let i=0,r=e.length;i<r;i++){const d=e.get(i).context;d.count=r,d.first=0===i,d.last=i===r-1,d.even=i%2==0,d.odd=!d.even,this.multiTemplateDataRows?(d.dataIndex=this._renderRows[i].dataIndex,d.renderIndex=i):d.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,i=>{const r=this._columnDefsByName.get(i);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const d of r.outlets)s.appendChild(d.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new XIe(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:r1()).pipe(M2(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(e.templateRef),d=s.rootNodes[0];1===s.rootNodes.length&&d?.nodeType===this._document.ELEMENT_NODE&&(d.setAttribute("role","row"),d.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return t.\u0275fac=function(e){return new(e||t)(W(d3),W(Fr),W(Ot),Fc("role"),W(so,8),W(Y1),W(Ii),W(id),W(eb),W(Y7),W(ab,12),W(f1,8))},t.\u0275cmp=Ft({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,i,r){if(1&e&&(mi(r,Tp,5),mi(r,v4,5),mi(r,Lp,5),mi(r,od,5),mi(r,sd,5)),2&e){let s;V1(s=L1())&&(i._noDataRow=s.first),V1(s=L1())&&(i._contentColumnDefs=s),V1(s=L1())&&(i._contentRowDefs=s),V1(s=L1())&&(i._contentHeaderRowDefs=s),V1(s=L1())&&(i._contentFooterRowDefs=s)}},viewQuery:function(e,i){if(1&e&&(Kn(Hp,7),Kn(kp,7),Kn(Ip,7),Kn(Rp,7)),2&e){let r;V1(r=L1())&&(i._rowOutlet=r.first),V1(r=L1())&&(i._headerRowOutlet=r.first),V1(r=L1())&&(i._footerRowOutlet=r.first),V1(r=L1())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,i){2&e&&$n("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[D1([{provide:_5,useExisting:t},{provide:id,useClass:vO},{provide:eb,useClass:FO},{provide:ab,useValue:null}])],ngContentSelectors:OIe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(mr(NIe),jn(0),jn(1,1),Ln(2,0)(3,1)(4,2)(5,3))},dependencies:[Hp,kp,Ip,Rp],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),t})();function Fp(t,n){return t.concat(Array.from(n))}let QIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[yx]}),t})();const JIe=[[["caption"]],[["colgroup"],["col"]]],eRe=["caption","colgroup, col"];let BO=(()=>{class t extends Pp{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}ngOnInit(){super.ngOnInit(),this._isNativeHtmlTable&&this._elementRef.nativeElement.querySelector("tbody").classList.add("mdc-data-table__content")}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Ft({type:t,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(e,i){2&e&&$n("mdc-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[D1([{provide:Pp,useExisting:t},{provide:_5,useExisting:t},{provide:eb,useClass:FO},{provide:id,useClass:vO},{provide:ab,useValue:null}]),o],ngContentSelectors:eRe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(mr(JIe),jn(0),jn(1,1),Ln(2,0)(3,1)(4,2)(5,3))},dependencies:[Hp,kp,Ip,Rp],styles:[".mdc-data-table{border-radius:var(--mdc-shape-medium, 4px);border-width:1px;border-style:solid}.mdc-data-table .mdc-data-table__header-cell:first-child{border-top-left-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table .mdc-data-table__header-cell:first-child,.mdc-data-table .mdc-data-table__header-cell:first-child[dir=rtl]{border-top-right-radius:var(--mdc-shape-medium, 4px);border-top-left-radius:0}.mdc-data-table .mdc-data-table__header-cell:last-child{border-top-right-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table .mdc-data-table__header-cell:last-child,.mdc-data-table .mdc-data-table__header-cell:last-child[dir=rtl]{border-top-left-radius:var(--mdc-shape-medium, 4px);border-top-right-radius:0}.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child{border-bottom-left-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child,.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child[dir=rtl]{border-bottom-right-radius:var(--mdc-shape-medium, 4px);border-bottom-left-radius:0}.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child{border-bottom-right-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child,.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child[dir=rtl]{border-bottom-left-radius:var(--mdc-shape-medium, 4px);border-bottom-right-radius:0}.mdc-data-table__cell,.mdc-data-table__header-cell{border-bottom-width:1px;border-bottom-style:solid}.mdc-data-table__pagination{border-top-width:1px;border-top-style:solid}.mdc-data-table__row:last-child .mdc-data-table__cell{border-bottom:none}.mdc-data-table__row{height:52px}.mdc-data-table__pagination{min-height:52px}.mdc-data-table__header-row{height:56px}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__cell--checkbox{width:1px}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--checkbox{width:1px}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__sort-icon-button{width:28px;height:28px;padding:2px;transform:rotate(0.0001deg);margin-left:4px;margin-right:0;opacity:0}.mdc-data-table__sort-icon-button .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:28px;height:28px;margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:28px;left:50%;width:28px;transform:translate(-50%, -50%)}[dir=rtl] .mdc-data-table__sort-icon-button,.mdc-data-table__sort-icon-button[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__header-cell--sorted-descending .mdc-data-table__sort-icon-button{transform:rotate(-180deg)}.mdc-data-table__sort-icon-button:focus,.mdc-data-table__header-cell:hover .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--sorted .mdc-data-table__sort-icon-button{opacity:1}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__header-cell--with-sort{cursor:pointer}.mdc-data-table__sort-status-label{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.mdc-data-table--sticky-header .mdc-data-table__header-cell{position:sticky;top:0;z-index:1}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--checkbox{width:1px}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__sort-icon-button{width:28px;height:28px;padding:2px;transform:rotate(0.0001deg);margin-left:4px;margin-right:0;opacity:0}.mdc-data-table__sort-icon-button .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:28px;height:28px;margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:28px;left:50%;width:28px;transform:translate(-50%, -50%)}[dir=rtl] .mdc-data-table__sort-icon-button,.mdc-data-table__sort-icon-button[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__header-cell--sorted-descending .mdc-data-table__sort-icon-button{transform:rotate(-180deg)}.mdc-data-table__sort-icon-button:focus,.mdc-data-table__header-cell:hover .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--sorted .mdc-data-table__sort-icon-button{opacity:1}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__header-cell--with-sort{cursor:pointer}.mdc-data-table__sort-status-label{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__cell--checkbox{width:1px}.mdc-data-table__pagination{box-sizing:border-box;display:flex;justify-content:flex-end}.mdc-data-table__pagination-trailing{margin-left:4px;margin-right:0;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-end}[dir=rtl] .mdc-data-table__pagination-trailing,.mdc-data-table__pagination-trailing[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__pagination-navigation{align-items:center;display:flex}.mdc-data-table__pagination-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__pagination-button .mdc-button__icon,.mdc-data-table__pagination-button .mdc-button__icon[dir=rtl]{transform:rotate(180deg)}[dir=rtl] .mdc-data-table__pagination-button,.mdc-data-table__pagination-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__pagination-total{margin-left:14px;margin-right:36px;white-space:nowrap}[dir=rtl] .mdc-data-table__pagination-total,.mdc-data-table__pagination-total[dir=rtl]{margin-left:36px;margin-right:14px}.mdc-data-table__pagination-rows-per-page{margin-left:0;margin-right:22px;align-items:center;display:inline-flex}[dir=rtl] .mdc-data-table__pagination-rows-per-page,.mdc-data-table__pagination-rows-per-page[dir=rtl]{margin-left:22px;margin-right:0}.mdc-data-table__pagination-rows-per-page-label{margin-left:0;margin-right:12px;white-space:nowrap}[dir=rtl] .mdc-data-table__pagination-rows-per-page-label,.mdc-data-table__pagination-rows-per-page-label[dir=rtl]{margin-left:12px;margin-right:0}.mdc-data-table__pagination-rows-per-page-select{min-width:var(--mdc-menu-min-width, 80px);margin:8px 0}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor{width:100%;min-width:80px}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor{height:36px}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-data-table__pagination-rows-per-page-select .mdc-select__dropdown-icon{width:20px;height:20px}.mdc-data-table__pagination-rows-per-page-select.mdc-select--outlined .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 56px)}.mdc-data-table__pagination-rows-per-page-select .mdc-list-item.mdc-list-item--with-one-line{height:36px}.mdc-data-table__progress-indicator{display:none;position:absolute;width:100%}.mdc-data-table--in-progress .mdc-data-table__progress-indicator{display:block}.mdc-data-table__scrim{background-color:var(--mdc-theme-surface, #fff);height:100%;opacity:.32;position:absolute;top:0;width:100%}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table-sticky{position:sticky !important}.mat-mdc-table{table-layout:auto;white-space:normal}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table .mat-mdc-row:hover,.mat-mdc-table .mat-mdc-footer-row:hover{background-color:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2}),t})(),ob=(()=>{class t extends v5{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matCellDef",""]],features:[D1([{provide:v5,useExisting:t}]),o]}),t})(),sb=(()=>{class t extends y5{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matHeaderCellDef",""]],features:[D1([{provide:y5,useExisting:t}]),o]}),t})(),cb=(()=>{class t extends v4{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[D1([{provide:v4,useExisting:t},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),o]}),t})(),lb=(()=>{class t extends Qx{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[o]}),t})(),ub=(()=>{class t extends Jx{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[o]}),t})(),UO=(()=>{class t extends od{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[D1([{provide:od,useExisting:t}]),o]}),t})(),jO=(()=>{class t extends Lp{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[D1([{provide:Lp,useExisting:t}]),o]}),t})(),GO=(()=>{class t extends nb{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Ft({type:t,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[D1([{provide:nb,useExisting:t}]),o],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&Ln(0,0)},dependencies:[y4],encapsulation:2}),t})(),$O=(()=>{class t extends rb{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Ft({type:t,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[D1([{provide:rb,useExisting:t}]),o],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&Ln(0,0)},dependencies:[y4],encapsulation:2}),t})(),uRe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[Or,QIe,Or]}),t})();function fRe(t,n){1&t&&(de(0,"th",12),Ue(1," Name "),he())}function hRe(t,n){if(1&t&&(de(0,"td",13),Ue(1),he()),2&t){const e=n.$implicit;qe(1),J2(" ",e.name," ")}}function pRe(t,n){1&t&&(de(0,"th",12),Ue(1," Num Guests "),he())}function mRe(t,n){if(1&t&&(de(0,"td",13),Ue(1),he()),2&t){const e=n.$implicit;qe(1),J2(" ",e.num," ")}}function gRe(t,n){1&t&&(de(0,"th",12),Ue(1," Check In "),he())}function _Re(t,n){if(1&t&&(de(0,"td",13),Ue(1),he()),2&t){const e=n.$implicit;qe(1),J2(" ",e.checkIn," ")}}function vRe(t,n){1&t&&(de(0,"th",12),Ue(1," Check Out "),he())}function yRe(t,n){if(1&t&&(de(0,"td",13),Ue(1),he()),2&t){const e=n.$implicit;qe(1),J2(" ",e.checkOut," ")}}function xRe(t,n){1&t&&(de(0,"th",12),Ue(1," Time In "),he())}function bRe(t,n){if(1&t&&(de(0,"td",13),Ue(1),he()),2&t){const e=n.$implicit;qe(1),J2(" ",e.timeIn," ")}}function CRe(t,n){1&t&&(de(0,"th",12),Ue(1," Time Out "),he())}function wRe(t,n){if(1&t&&(de(0,"td",13),Ue(1),he()),2&t){const e=n.$implicit;qe(1),J2(" ",e.timeOut," ")}}function MRe(t,n){1&t&&nt(0,"tr",14)}function zRe(t,n){1&t&&nt(0,"tr",15)}let SRe=(()=>{class t{ngOnInit(){this.route.paramMap.subscribe(e=>{const i=e.get("nombre");this.nombre=i||""})}constructor(e){this.route=e,this.nombre="",this.displayedColumns=["name","num","checkIn","checkOut","timeIn","timeOut"],this.dataSource=[];let i=JSON.parse(localStorage.getItem("checkIn")??"[]"),r=JSON.parse(localStorage.getItem("checkOut")??"[]"),s=JSON.parse(localStorage.getItem("checkInTime")??"[]"),d=JSON.parse(localStorage.getItem("checkOutTime")??"[]"),v=JSON.parse(localStorage.getItem("name")??"[]"),C=JSON.parse(localStorage.getItem("numGuests")??"[]"),S=[];for(let V=0;V<i.length;V++)S.push({name:v[V],num:C[V],checkIn:i[V],checkOut:r[V],timeIn:s[V],timeOut:d[V]});this.dataSource=S}}return t.\u0275fac=function(e){return new(e||t)(W(wl))},t.\u0275cmp=Ft({type:t,selectors:[["app-table-reserved"]],decls:22,vars:3,consts:[[1,"containerTab"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","num"],["matColumnDef","checkIn"],["matColumnDef","checkOut"],["matColumnDef","timeIn"],["matColumnDef","timeOut"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(de(0,"div",0)(1,"table",1),Rn(2,2),xt(3,fRe,2,0,"th",3),xt(4,hRe,2,1,"td",4),q1(),Rn(5,5),xt(6,pRe,2,0,"th",3),xt(7,mRe,2,1,"td",4),q1(),Rn(8,6),xt(9,gRe,2,0,"th",3),xt(10,_Re,2,1,"td",4),q1(),Rn(11,7),xt(12,vRe,2,0,"th",3),xt(13,yRe,2,1,"td",4),q1(),Rn(14,8),xt(15,xRe,2,0,"th",3),xt(16,bRe,2,1,"td",4),q1(),Rn(17,9),xt(18,CRe,2,0,"th",3),xt(19,wRe,2,1,"td",4),q1(),xt(20,MRe,1,0,"tr",10),xt(21,zRe,1,0,"tr",11),he()()),2&e&&(qe(1),Ye("dataSource",i.dataSource),qe(19),Ye("matHeaderRowDef",i.displayedColumns),qe(1),Ye("matRowDefColumns",i.displayedColumns))},dependencies:[BO,sb,UO,cb,ob,jO,lb,ub,GO,$O],styles:[".containerTab[_ngcontent-%COMP%]{margin:auto 50px;padding:20px}"]}),t})();function DRe(t,n){1&t&&(Rn(0),nt(1,"app-table-reserved"),de(2,"div",5)(3,"button",6),Ue(4,"Regresar"),he()(),q1())}function ARe(t,n){1&t&&(de(0,"div",5)(1,"button",6),Ue(2,"Regresar"),he()())}const ERe=[{path:"",component:lEe,children:[{path:"",component:hEe},{path:"about",component:vEe},{path:"login",component:Wke},{path:"rooms",component:Xke},{path:"explore",component:nIe},{path:"restaurant",component:HIe},{path:"book",component:PIe},{path:"reservations/:nombre",component:(()=>{class t{constructor(e){this.route=e,this.nombreEncontrado=!1,this.reservations=[]}ngOnInit(){let e=JSON.parse(localStorage.getItem("name")??"[]");this.route.paramMap.subscribe(i=>{this.nombre=i.get("nombre"),e.includes(this.nombre)?(this.nombreEncontrado=!0,El().fire({icon:"success",title:"You currently have a reservation "+this.nombre}),this.reservations=JSON.parse(localStorage.getItem(this.nombre)??"[]")):El().fire({icon:"error",title:"You did not have a reservation",text:"Check-In again "+this.nombre})})}}return t.\u0275fac=function(e){return new(e||t)(W(wl))},t.\u0275cmp=Ft({type:t,selectors:[["app-reservations"]],decls:10,vars:2,consts:[[1,"container-main"],[1,"title-container"],[1,"container2"],[4,"ngIf","ngIfElse"],["noEncontrado",""],[1,"btn-sub"],["mat-button","","color","primary","routerLink","/login"]],template:function(e,i){if(1&e&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Reserved dates"),he(),de(4,"h3"),Ue(5,"Check out the dates in which our rooms are occupied"),he()()(),de(6,"div",2),xt(7,DRe,5,0,"ng-container",3),xt(8,ARe,3,0,"ng-template",null,4,Tg),he()),2&e){const r=vn(9);qe(7),Ye("ngIf",i.nombreEncontrado)("ngIfElse",r)}},dependencies:[G0,m7,SRe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;min-width:100%;background-image:url(fake-4.0b25e5538f6fd0a6.jpg);background-size:cover;background-position:center;margin:0 auto}.check-container[_ngcontent-%COMP%]{padding:30px;height:400px;background-color:#072230;margin:0 auto}.container2[_ngcontent-%COMP%]{padding:30px;min-height:100%;min-width:100%;height:600px;margin:0 auto;background-color:#081820}.btn-sub[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;display:block;width:200px;height:50px;border-radius:2rem;background-color:#c7e7f1;color:#000;transition:background-color .3s ease,border .3s ease,transform .3s ease}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#081820;color:#fff;border:2px solid white;transform:scale(1.1)}']}),t})()}]}];let VRe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[o9.forRoot(ERe),o9]}),t})(),LRe=(()=>{class t{constructor(){this.title="reservaHotel"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ft({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&nt(0,"router-outlet")},dependencies:[Xh]}),t})(),JO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[av]}),t})(),eB=(()=>{class t{constructor(e,i){O8(i)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,i=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:yc,useValue:{...ov,...e}},{provide:sv,useValue:i,multi:!0},{provide:K8,useValue:!0}]:[{provide:yc,useValue:{...ov,...e}},{provide:sv,useValue:i,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(Re(K8),Re(Es))},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[YS,nD,JO,YS,nD,JO]}),t})(),JPe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[ml,o9,eB,Oy]}),t})(),nB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({}),t})(),uFe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[nB,Or,Ex,ml,nB,Or]}),t})(),dFe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({imports:[ml,o9,eB,JPe,Oy,gVe,_Ve,SIe,uFe,yTe,yke,Mp,THe,Nke,uRe]}),t})();function iB(t){return new rt(3e3,!1)}function qFe(){return typeof window<"u"&&typeof window.document<"u"}function db(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Nl(t){switch(t.length){case 0:return new ed;case 1:return t[0];default:return new YN(t)}}function rB(t,n,e,i,r=new Map,s=new Map){const d=[],v=[];let C=-1,S=null;if(i.forEach(V=>{const F=V.get("offset"),Z=F==C,K=Z&&S||new Map;V.forEach((le,xe)=>{let Me=xe,He=le;if("offset"!==xe)switch(Me=n.normalizePropertyName(Me,d),He){case Vx:He=r.get(xe);break;case g4:He=s.get(xe);break;default:He=n.normalizeStyleValue(xe,Me,He,d)}K.set(Me,He)}),Z||v.push(K),S=K,C=F}),d.length)throw function kFe(t){return new rt(3502,!1)}();return v}function fb(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&hb(e,"start",t)));break;case"done":t.onDone(()=>i(e&&hb(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&hb(e,"destroy",t)))}}function hb(t,n,e){const s=pb(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),d=t._data;return null!=d&&(s._data=d),s}function pb(t,n,e,i,r="",s=0,d){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!d}}function jo(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function aB(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}let mb=(t,n)=>!1,oB=(t,n,e)=>[],sB=null;function gb(t){const n=t.parentNode||t.host;return n===sB?null:n}(db()||typeof Element<"u")&&(qFe()?(sB=(()=>document.documentElement)(),mb=(t,n)=>{for(;n;){if(n===t)return!0;n=gb(n)}return!1}):mb=(t,n)=>t.contains(n),oB=(t,n,e)=>{if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]});let c6=null,cB=!1;const lB=mb,uB=oB;let dB=(()=>{class t{validateStyleProperty(e){return function ZFe(t){c6||(c6=function YFe(){return typeof document<"u"?document.body:null}()||{},cB=!!c6.style&&"WebkitAppearance"in c6.style);let n=!0;return c6.style&&!function WFe(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in c6.style,!n&&cB&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in c6.style)),n}(e)}matchesElement(e,i){return!1}containsElement(e,i){return lB(e,i)}getParentElement(e){return gb(e)}query(e,i,r){return uB(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,d,v=[],C){return new ed(r,s)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),_b=(()=>{class t{}return t.NOOP=new dB,t})();const XFe=1e3,vb="ng-enter",Np="ng-leave",Op="ng-trigger",Bp=".ng-trigger",hB="ng-animating",yb=".ng-animating";function x4(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:xb(parseFloat(n[1]),n[2])}function xb(t,n){return"s"===n?t*XFe:t}function Up(t,n,e){return t.hasOwnProperty("duration")?t:function QFe(t,n,e){let r,s=0,d="";if("string"==typeof t){const v=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===v)return n.push(iB()),{duration:0,delay:0,easing:""};r=xb(parseFloat(v[1]),v[2]);const C=v[3];null!=C&&(s=xb(parseFloat(C),v[4]));const S=v[5];S&&(d=S)}else r=t;if(!e){let v=!1,C=n.length;r<0&&(n.push(function fFe(){return new rt(3100,!1)}()),v=!0),s<0&&(n.push(function hFe(){return new rt(3101,!1)}()),v=!0),v&&n.splice(C,0,iB())}return{duration:r,delay:s,easing:d}}(t,n,e)}function cd(t,n={}){return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function pB(t){const n=new Map;return Object.keys(t).forEach(e=>{n.set(e,t[e])}),n}function Ol(t,n=new Map,e){if(e)for(let[i,r]of e)n.set(i,r);for(let[i,r]of t)n.set(i,r);return n}function gB(t,n,e){return e?n+":"+e+";":""}function _B(t){let n="";for(let e=0;e<t.style.length;e++){const i=t.style.item(e);n+=gB(0,i,t.style.getPropertyValue(i))}for(const e in t.style)t.style.hasOwnProperty(e)&&!e.startsWith("_")&&(n+=gB(0,nNe(e),t.style[e]));t.setAttribute("style",n)}function g3(t,n,e){t.style&&(n.forEach((i,r)=>{const s=Cb(r);e&&!e.has(r)&&e.set(r,t.style[s]),t.style[s]=i}),db()&&_B(t))}function l6(t,n){t.style&&(n.forEach((e,i)=>{const r=Cb(i);t.style[r]=""}),db()&&_B(t))}function ld(t){return Array.isArray(t)?1==t.length?t[0]:qN(t):t}const bb=new RegExp("{{\\s*(.+?)\\s*}}","g");function vB(t){let n=[];if("string"==typeof t){let e;for(;e=bb.exec(t);)n.push(e[1]);bb.lastIndex=0}return n}function ud(t,n,e){const i=t.toString(),r=i.replace(bb,(s,d)=>{let v=n[d];return null==v&&(e.push(function mFe(t){return new rt(3003,!1)}()),v=""),v.toString()});return r==i?t:r}function jp(t){const n=[];let e=t.next();for(;!e.done;)n.push(e.value),e=t.next();return n}const tNe=/-+([a-z0-9])/g;function Cb(t){return t.replace(tNe,(...n)=>n[1].toUpperCase())}function nNe(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Go(t,n,e){switch(n.type){case 7:return t.visitTrigger(n,e);case 0:return t.visitState(n,e);case 1:return t.visitTransition(n,e);case 2:return t.visitSequence(n,e);case 3:return t.visitGroup(n,e);case 4:return t.visitAnimate(n,e);case 5:return t.visitKeyframes(n,e);case 6:return t.visitStyle(n,e);case 8:return t.visitReference(n,e);case 9:return t.visitAnimateChild(n,e);case 10:return t.visitAnimateRef(n,e);case 11:return t.visitQuery(n,e);case 12:return t.visitStagger(n,e);default:throw function gFe(t){return new rt(3004,!1)}()}}const qp="*";function cNe(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function lNe(t,n,e){if(":"==t[0]){const C=function uNe(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function VFe(t){return new rt(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof C)return void n.push(C);t=C}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function EFe(t){return new rt(3015,!1)}()),n;const r=i[1],s=i[2],d=i[3];n.push(xB(r,d));"<"==s[0]&&!(r==qp&&d==qp)&&n.push(xB(d,r))}(i,e,n)):e.push(t),e}const Wp=new Set(["true","1"]),Zp=new Set(["false","0"]);function xB(t,n){const e=Wp.has(t)||Zp.has(t),i=Wp.has(n)||Zp.has(n);return(r,s)=>{let d=t==qp||t==r,v=n==qp||n==s;return!d&&e&&"boolean"==typeof r&&(d=r?Wp.has(t):Zp.has(t)),!v&&i&&"boolean"==typeof s&&(v=s?Wp.has(n):Zp.has(n)),d&&v}}const dNe=new RegExp("s*:selfs*,?","g");function wb(t,n,e,i){return new fNe(t).build(n,e,i)}class fNe{constructor(n){this._driver=n}build(n,e,i){const r=new mNe(e);return this._resetContextStyleTimingState(r),Go(this,ld(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],d=[];return"@"==n.name.charAt(0)&&e.errors.push(function vFe(){return new rt(3006,!1)}()),n.definitions.forEach(v=>{if(this._resetContextStyleTimingState(e),0==v.type){const C=v,S=C.name;S.toString().split(/\s*,\s*/).forEach(V=>{C.name=V,s.push(this.visitState(C,e))}),C.name=S}else if(1==v.type){const C=this.visitTransition(v,e);i+=C.queryCount,r+=C.depCount,d.push(C)}else e.errors.push(function yFe(){return new rt(3007,!1)}())}),{type:7,name:n.name,states:s,transitions:d,queryCount:i,depCount:r,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){const s=new Set,d=r||{};i.styles.forEach(v=>{v instanceof Map&&v.forEach(C=>{vB(C).forEach(S=>{d.hasOwnProperty(S)||s.add(S)})})}),s.size&&(jp(s.values()),e.errors.push(function xFe(t,n){return new rt(3008,!1)}()))}return{type:0,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=Go(this,ld(n.animation),e);return{type:1,matchers:cNe(n.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:u6(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(i=>Go(this,i,e)),options:u6(n.options)}}visitGroup(n,e){const i=e.currentTime;let r=0;const s=n.steps.map(d=>{e.currentTime=i;const v=Go(this,d,e);return r=Math.max(r,e.currentTime),v});return e.currentTime=r,{type:3,steps:s,options:u6(n.options)}}visitAnimate(n,e){const i=function _Ne(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return Mb(Up(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Mb(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=Up(e,n);return Mb(r.duration,r.delay,r.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let r,s=n.styles?n.styles:co({});if(5==s.type)r=this.visitKeyframes(s,e);else{let d=n.styles,v=!1;if(!d){v=!0;const S={};i.easing&&(S.easing=i.easing),d=co(S)}e.currentTime+=i.duration+i.delay;const C=this.visitStyle(d,e);C.isEmptyStep=v,r=C}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let v of r)"string"==typeof v?v===g4?i.push(v):e.errors.push(new rt(3002,!1)):i.push(pB(v));let s=!1,d=null;return i.forEach(v=>{if(v instanceof Map&&(v.has("easing")&&(d=v.get("easing"),v.delete("easing")),!s))for(let C of v.values())if(C.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:d,offset:n.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),n.styles.forEach(d=>{"string"!=typeof d&&d.forEach((v,C)=>{const S=e.collectedStyles.get(e.currentQuerySelector),V=S.get(C);let F=!0;V&&(s!=r&&s>=V.startTime&&r<=V.endTime&&(e.errors.push(function CFe(t,n,e,i,r){return new rt(3010,!1)}()),F=!1),s=V.startTime),F&&S.set(C,{startTime:s,endTime:r}),e.options&&function eNe(t,n,e){const i=n.params||{},r=vB(t);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function pFe(t){return new rt(3001,!1)}())})}(v,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function wFe(){return new rt(3011,!1)}()),i;let s=0;const d=[];let v=!1,C=!1,S=0;const V=n.steps.map(He=>{const ut=this._makeStyleAst(He,e);let $e=null!=ut.offset?ut.offset:function gNe(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(ut.styles),St=0;return null!=$e&&(s++,St=ut.offset=$e),C=C||St<0||St>1,v=v||St<S,S=St,d.push(St),ut});C&&e.errors.push(function MFe(){return new rt(3012,!1)}()),v&&e.errors.push(function zFe(){return new rt(3200,!1)}());const F=n.steps.length;let Z=0;s>0&&s<F?e.errors.push(function SFe(){return new rt(3202,!1)}()):0==s&&(Z=1/(F-1));const K=F-1,le=e.currentTime,xe=e.currentAnimateTimings,Me=xe.duration;return V.forEach((He,ut)=>{const $e=Z>0?ut==K?1:Z*ut:d[ut],St=$e*Me;e.currentTime=le+xe.delay+St,xe.duration=St,this._validateStyleAst(He,e),He.offset=$e,i.styles.push(He)}),i}visitReference(n,e){return{type:8,animation:Go(this,ld(n.animation),e),options:u6(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:u6(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:u6(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;const[s,d]=function hNe(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(dNe,"")),t=t.replace(/@\*/g,Bp).replace(/@\w+/g,e=>Bp+"-"+e.slice(1)).replace(/:animating/g,yb),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+s:s,jo(e.collectedStyles,e.currentQuerySelector,new Map);const v=Go(this,ld(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:d,animation:v,originalSelector:n.selector,options:u6(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function DFe(){return new rt(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:Up(n.timings,e.errors,!0);return{type:12,animation:Go(this,ld(n.animation),e),timings:i,options:null}}}class mNe{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function u6(t){return t?(t=cd(t)).params&&(t.params=function pNe(t){return t?cd(t):null}(t.params)):t={},t}function Mb(t,n,e){return{duration:t,delay:n,easing:e}}function zb(t,n,e,i,r,s,d=null,v=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:d,subTimeline:v}}class Yp{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const xNe=new RegExp(":enter","g"),CNe=new RegExp(":leave","g");function Sb(t,n,e,i,r,s=new Map,d=new Map,v,C,S=[]){return(new wNe).buildKeyframes(t,n,e,i,r,s,d,v,C,S)}class wNe{buildKeyframes(n,e,i,r,s,d,v,C,S,V=[]){S=S||new Yp;const F=new Db(n,e,S,r,s,V,[]);F.options=C;const Z=C.delay?x4(C.delay):0;F.currentTimeline.delayNextStep(Z),F.currentTimeline.setStyles([d],null,F.errors,C),Go(this,i,F);const K=F.timelines.filter(le=>le.containsAnimation());if(K.length&&v.size){let le;for(let xe=K.length-1;xe>=0;xe--){const Me=K[xe];if(Me.element===e){le=Me;break}}le&&!le.allowOnlyTimelineStyles()&&le.setStyles([v],null,F.errors,C)}return K.length?K.map(le=>le.buildKeyframes()):[zb(e,[],[],[],0,Z,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(n.options),s=e.currentTimeline.currentTime,d=this._visitSubInstructions(i,r,r.options);s!=d&&e.transformIntoNewTimeline(d)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const r of n){const s=r?.delay;if(s){const d="number"==typeof s?s:x4(ud(s,r?.params??{},e.errors));i.delayNextStep(d)}}}_visitSubInstructions(n,e,i){let s=e.currentTimeline.currentTime;const d=null!=i.duration?x4(i.duration):null,v=null!=i.delay?x4(i.delay):null;return 0!==d&&n.forEach(C=>{const S=e.appendInstructionToTimeline(C,d,v);s=Math.max(s,S.duration+S.delay)}),s}visitReference(n,e){e.updateOptions(n.options,!0),Go(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let r=e;const s=n.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Xp);const d=x4(s.delay);r.delayNextStep(d)}n.steps.length&&(n.steps.forEach(d=>Go(this,d,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let r=e.currentTimeline.currentTime;const s=n.options&&n.options.delay?x4(n.options.delay):0;n.steps.forEach(d=>{const v=e.createSubContext(n.options);s&&v.delayNextStep(s),Go(this,d,v),r=Math.max(r,v.currentTimeline.currentTime),i.push(v.currentTimeline)}),i.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return Up(e.params?ud(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=n.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(s):i.setStyles(n.styles,s,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,v=e.createSubContext().currentTimeline;v.easing=i.easing,n.styles.forEach(C=>{v.forwardTime((C.offset||0)*s),v.setStyles(C.styles,C.easing,e.errors,e.options),v.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(v),e.transformIntoNewTimeline(r+s),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,r=n.options||{},s=r.delay?x4(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Xp);let d=i;const v=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=v.length;let C=null;v.forEach((S,V)=>{e.currentQueryIndex=V;const F=e.createSubContext(n.options,S);s&&F.delayNextStep(s),S===e.element&&(C=F.currentTimeline),Go(this,n.animation,F),F.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,F.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),C&&(e.currentTimeline.mergeTimelineCollectedStyles(C),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,r=e.currentTimeline,s=n.timings,d=Math.abs(s.duration),v=d*(e.currentQueryTotal-1);let C=d*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":C=v-C;break;case"full":C=i.currentStaggerTime}const V=e.currentTimeline;C&&V.delayNextStep(C);const F=V.currentTime;Go(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-F+(r.startTime-i.currentTimeline.startTime)}}const Xp={};class Db{constructor(n,e,i,r,s,d,v,C){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=d,this.timelines=v,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Xp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=C||new Kp(this._driver,e,0),v.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let r=this.options;null!=i.duration&&(r.duration=x4(i.duration)),null!=i.delay&&(r.delay=x4(i.delay));const s=i.params;if(s){let d=r.params;d||(d=this.options.params={}),Object.keys(s).forEach(v=>{(!e||!d.hasOwnProperty(v))&&(d[v]=ud(s[v],d,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){const r=e||this.element,s=new Db(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(n),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(n){return this.previousNode=Xp,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const r={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},s=new MNe(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,s,d){let v=[];if(r&&v.push(this.element),n.length>0){n=(n=n.replace(xNe,"."+this._enterClassName)).replace(CNe,"."+this._leaveClassName);let S=this._driver.query(this.element,n,1!=i);0!==i&&(S=i<0?S.slice(S.length+i,S.length):S.slice(0,i)),v.push(...S)}return!s&&0==v.length&&d.push(function AFe(t){return new rt(3014,!1)}()),v}}class Kp{constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new Kp(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||g4),this._currentKeyframe.set(e,g4);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},d=function zNe(t,n){const e=new Map;let i;return t.forEach(r=>{if("*"===r){i=i||n.keys();for(let s of i)e.set(s,g4)}else Ol(r,e)}),e}(n,this._globalTimelineStyles);for(let[v,C]of d){const S=ud(C,s,i);this._pendingStyles.set(v,S),this._localTimelineStyles.has(v)||this._backFill.set(v,this._globalTimelineStyles.get(v)??g4),this._updateStyle(v,S)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((v,C)=>{const S=Ol(v,new Map,this._backFill);S.forEach((V,F)=>{V===Vx?n.add(F):V===g4&&e.add(F)}),i||S.set("offset",C/this.duration),r.push(S)});const s=n.size?jp(n.values()):[],d=e.size?jp(e.values()):[];if(i){const v=r[0],C=new Map(v);v.set("offset",0),C.set("offset",1),r=[v,C]}return zb(this.element,r,s,d,this.duration,this.startTime,this.easing,!1)}}class MNe extends Kp{constructor(n,e,i,r,s,d,v=!1){super(n,e,d.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=v,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],d=i+e,v=e/d,C=Ol(n[0]);C.set("offset",0),s.push(C);const S=Ol(n[0]);S.set("offset",wB(v)),s.push(S);const V=n.length-1;for(let F=1;F<=V;F++){let Z=Ol(n[F]);const K=Z.get("offset");Z.set("offset",wB((e+K*i)/d)),s.push(Z)}i=d,e=0,r="",n=s}return zb(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function wB(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}class Ab{}const SNe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class DNe extends Ab{normalizePropertyName(n,e){return Cb(n)}normalizeStyleValue(n,e,i,r){let s="";const d=i.toString().trim();if(SNe.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const v=i.match(/^[+-]?[\d\.]+([a-z]*)$/);v&&0==v[1].length&&r.push(function _Fe(t,n){return new rt(3005,!1)}())}return d+s}}function MB(t,n,e,i,r,s,d,v,C,S,V,F,Z){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:d,timelines:v,queriedElements:C,preStyleProps:S,postStyleProps:V,totalTime:F,errors:Z}}const Eb={};class zB{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return function ANe(t,n,e,i,r){return t.some(s=>s(n,e,i,r))}(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){let r=this._stateStyles.get("*");return void 0!==n&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(e,i):new Map}build(n,e,i,r,s,d,v,C,S,V){const F=[],Z=this.ast.options&&this.ast.options.params||Eb,le=this.buildStyles(i,v&&v.params||Eb,F),xe=C&&C.params||Eb,Me=this.buildStyles(r,xe,F),He=new Set,ut=new Map,$e=new Map,St="void"===r,z1={params:ENe(xe,Z),delay:this.ast.options?.delay},J1=V?[]:Sb(n,e,this.ast.animation,s,d,le,Me,z1,S,F);let Tn=0;if(J1.forEach(yr=>{Tn=Math.max(yr.duration+yr.delay,Tn)}),F.length)return MB(e,this._triggerName,i,r,St,le,Me,[],[],ut,$e,Tn,F);J1.forEach(yr=>{const Cc=yr.element,OB=jo(ut,Cc,new Set);yr.preStyleProps.forEach(d6=>OB.add(d6));const fd=jo($e,Cc,new Set);yr.postStyleProps.forEach(d6=>fd.add(d6)),Cc!==e&&He.add(Cc)});const $o=jp(He.values());return MB(e,this._triggerName,i,r,St,le,Me,J1,$o,ut,$e,Tn)}}function ENe(t,n){const e=cd(n);for(const i in t)t.hasOwnProperty(i)&&null!=t[i]&&(e[i]=t[i]);return e}class VNe{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,r=cd(this.defaultParams);return Object.keys(n).forEach(s=>{const d=n[s];null!==d&&(r[s]=d)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((d,v)=>{d&&(d=ud(d,r,e));const C=this.normalizer.normalizePropertyName(v,e);d=this.normalizer.normalizeStyleValue(v,C,d,e),i.set(v,d)})}),i}}class TNe{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new VNe(r.style,r.options&&r.options.params||{},i))}),SB(this.states,"true","1"),SB(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new zB(n,r,this.states))}),this.fallbackTransition=function HNe(t,n,e){return new zB(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,v)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(d=>d.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function SB(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const kNe=new Yp;class INe{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],r=[],s=wb(this._driver,e,i,r);if(i.length)throw function IFe(t){return new rt(3503,!1)}();this._animations.set(n,s)}_buildPlayer(n,e,i){const r=n.element,s=rB(0,this._normalizer,0,n.keyframes,e,i);return this._driver.animate(r,s,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const r=[],s=this._animations.get(n);let d;const v=new Map;if(s?(d=Sb(this._driver,e,s,vb,Np,new Map,new Map,i,kNe,r),d.forEach(V=>{const F=jo(v,V.element,new Map);V.postStyleProps.forEach(Z=>F.set(Z,null))})):(r.push(function RFe(){return new rt(3300,!1)}()),d=[]),r.length)throw function PFe(t){return new rt(3504,!1)}();v.forEach((V,F)=>{V.forEach((Z,K)=>{V.set(K,this._driver.computeStyle(F,K,g4))})});const S=Nl(d.map(V=>{const F=v.get(V.element);return this._buildPlayer(V,new Map,F)}));return this._playersById.set(n,S),S.onDestroy(()=>this.destroy(n)),this.players.push(S),S}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function FFe(t){return new rt(3301,!1)}();return e}listen(n,e,i,r){const s=pb(e,"","","");return fb(this._getPlayer(n),i,s,r),()=>{}}command(n,e,i,r){if("register"==i)return void this.register(n,r[0]);if("create"==i)return void this.create(n,e,r[0]||{});const s=this._getPlayer(n);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n)}}}const DB="ng-animate-queued",Vb="ng-animate-disabled",ONe=[],AB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},BNe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Is="__ng_removed";class Lb{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function $Ne(t){return t??null}(i?n.value:n),i){const s=cd(n);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const dd="void",Tb=new Lb(dd);class UNe{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Rs(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.has(e))throw function NFe(t,n){return new rt(3302,!1)}();if(null==i||0==i.length)throw function OFe(t){return new rt(3303,!1)}();if(!function qNe(t){return"start"==t||"done"==t}(i))throw function BFe(t,n){return new rt(3400,!1)}();const s=jo(this._elementListeners,n,[]),d={name:e,phase:i,callback:r};s.push(d);const v=jo(this._engine.statesByElement,n,new Map);return v.has(e)||(Rs(n,Op),Rs(n,Op+"-"+e),v.set(e,Tb)),()=>{this._engine.afterFlush(()=>{const C=s.indexOf(d);C>=0&&s.splice(C,1),this._triggers.has(e)||v.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function UFe(t){return new rt(3401,!1)}();return e}trigger(n,e,i,r=!0){const s=this._getTrigger(e),d=new Hb(this.id,e,n);let v=this._engine.statesByElement.get(n);v||(Rs(n,Op),Rs(n,Op+"-"+e),this._engine.statesByElement.set(n,v=new Map));let C=v.get(e);const S=new Lb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&C&&S.absorbOptions(C.options),v.set(e,S),C||(C=Tb),S.value!==dd&&C.value===S.value){if(!function YNe(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!n.hasOwnProperty(s)||t[s]!==n[s])return!1}return!0}(C.params,S.params)){const xe=[],Me=s.matchStyles(C.value,C.params,xe),He=s.matchStyles(S.value,S.params,xe);xe.length?this._engine.reportError(xe):this._engine.afterFlush(()=>{l6(n,Me),g3(n,He)})}return}const Z=jo(this._engine.playersByElement,n,[]);Z.forEach(xe=>{xe.namespaceId==this.id&&xe.triggerName==e&&xe.queued&&xe.destroy()});let K=s.matchTransition(C.value,S.value,n,S.params),le=!1;if(!K){if(!r)return;K=s.fallbackTransition,le=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:K,fromState:C,toState:S,player:d,isFallbackTransition:le}),le||(Rs(n,DB),d.onStart(()=>{x5(n,DB)})),d.onDone(()=>{let xe=this.players.indexOf(d);xe>=0&&this.players.splice(xe,1);const Me=this._engine.playersByElement.get(n);if(Me){let He=Me.indexOf(d);He>=0&&Me.splice(He,1)}}),this.players.push(d),Z.push(d),d}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,Bp,!0);i.forEach(r=>{if(r[Is])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(d=>d.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){const s=this._engine.statesByElement.get(n),d=new Map;if(s){const v=[];if(s.forEach((C,S)=>{if(d.set(S,C.value),this._triggers.has(S)){const V=this.trigger(n,S,dd,r);V&&v.push(V)}}),v.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,d),i&&Nl(v).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const r=new Set;e.forEach(s=>{const d=s.name;if(r.has(d))return;r.add(d);const C=this._triggers.get(d).fallbackTransition,S=i.get(d)||Tb,V=new Lb(dd),F=new Hb(this.id,d,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:d,transition:C,fromState:S,toState:V,player:F,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(n):[];if(s&&s.length)r=!0;else{let d=n;for(;d=d.parentNode;)if(i.statesByElement.get(d)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{const s=n[Is];(!s||s===AB)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){Rs(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,d=this._elementListeners.get(s);d&&d.forEach(v=>{if(v.name==i.triggerName){const C=pb(s,i.triggerName,i.fromState.value,i.toState.value);C._data=n,fb(i.player,v.phase,C,v.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,d=r.transition.ast.depCount;return 0==s||0==d?s-d:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let e=!1;return this._elementListeners.has(n)&&(e=!0),e=!!this._queue.find(i=>i.element===n)||e,e}}class jNe{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new UNe(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let d=!1,v=this.driver.getParentElement(e);for(;v;){const C=r.get(v);if(C){const S=i.indexOf(C);i.splice(S+1,0,n),d=!0;break}v=this.driver.getParentElement(v)}d||i.unshift(n)}else i.push(n);return r.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){if(!n)return;const i=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[n];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(n,e,i,r){if(Qp(e)){const s=this._fetchNamespace(n);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!Qp(e))return;const s=e[Is];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(n){const d=this._fetchNamespace(n);d&&d.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Rs(n,Vb)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),x5(n,Vb))}removeNode(n,e,i,r){if(Qp(e)){const s=n?this._fetchNamespace(n):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r),i){const d=this.namespacesByHostElement.get(e);d&&d.id!==n&&d.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,i,r,s){this.collectedLeaveElements.push(e),e[Is]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(n,e,i,r,s){return Qp(e)?this._fetchNamespace(n).listen(e,i,r,s):()=>{}}_buildInstruction(n,e,i,r,s){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,s)}destroyInnerAnimations(n){let e=this.driver.query(n,Bp,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,yb,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Nl(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Is];if(e&&e.setForRemoval){if(n[Is]=AB,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(Vb)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Rs(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Nl(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw function jFe(t){return new rt(3402,!1)}()}_flushAnimations(n,e){const i=new Yp,r=[],s=new Map,d=[],v=new Map,C=new Map,S=new Map,V=new Set;this.disabledNodes.forEach(Kt=>{V.add(Kt);const v1=this.driver.query(Kt,".ng-animate-queued",!0);for(let H1=0;H1<v1.length;H1++)V.add(v1[H1])});const F=this.bodyNode,Z=Array.from(this.statesByElement.keys()),K=LB(Z,this.collectedEnterElements),le=new Map;let xe=0;K.forEach((Kt,v1)=>{const H1=vb+xe++;le.set(v1,H1),Kt.forEach(Fn=>Rs(Fn,H1))});const Me=[],He=new Set,ut=new Set;for(let Kt=0;Kt<this.collectedLeaveElements.length;Kt++){const v1=this.collectedLeaveElements[Kt],H1=v1[Is];H1&&H1.setForRemoval&&(Me.push(v1),He.add(v1),H1.hasAnimation?this.driver.query(v1,".ng-star-inserted",!0).forEach(Fn=>He.add(Fn)):ut.add(v1))}const $e=new Map,St=LB(Z,Array.from(He));St.forEach((Kt,v1)=>{const H1=Np+xe++;$e.set(v1,H1),Kt.forEach(Fn=>Rs(Fn,H1))}),n.push(()=>{K.forEach((Kt,v1)=>{const H1=le.get(v1);Kt.forEach(Fn=>x5(Fn,H1))}),St.forEach((Kt,v1)=>{const H1=$e.get(v1);Kt.forEach(Fn=>x5(Fn,H1))}),Me.forEach(Kt=>{this.processLeaveNode(Kt)})});const z1=[],J1=[];for(let Kt=this._namespaceList.length-1;Kt>=0;Kt--)this._namespaceList[Kt].drainQueuedTransitions(e).forEach(H1=>{const Fn=H1.player,xr=H1.element;if(z1.push(Fn),this.collectedEnterElements.length){const oa=xr[Is];if(oa&&oa.setForMove){if(oa.previousTriggersValues&&oa.previousTriggersValues.has(H1.triggerName)){const f6=oa.previousTriggersValues.get(H1.triggerName),Ps=this.statesByElement.get(H1.element);if(Ps&&Ps.has(H1.triggerName)){const tm=Ps.get(H1.triggerName);tm.value=f6,Ps.set(H1.triggerName,tm)}}return void Fn.destroy()}}const _3=!F||!this.driver.containsElement(F,xr),qo=$e.get(xr),Bl=le.get(xr),G2=this._buildInstruction(H1,i,Bl,qo,_3);if(G2.errors&&G2.errors.length)return void J1.push(G2);if(_3)return Fn.onStart(()=>l6(xr,G2.fromStyles)),Fn.onDestroy(()=>g3(xr,G2.toStyles)),void r.push(Fn);if(H1.isFallbackTransition)return Fn.onStart(()=>l6(xr,G2.fromStyles)),Fn.onDestroy(()=>g3(xr,G2.toStyles)),void r.push(Fn);const jB=[];G2.timelines.forEach(oa=>{oa.stretchStartingKeyframe=!0,this.disabledNodes.has(oa.element)||jB.push(oa)}),G2.timelines=jB,i.append(xr,G2.timelines),d.push({instruction:G2,player:Fn,element:xr}),G2.queriedElements.forEach(oa=>jo(v,oa,[]).push(Fn)),G2.preStyleProps.forEach((oa,f6)=>{if(oa.size){let Ps=C.get(f6);Ps||C.set(f6,Ps=new Set),oa.forEach((tm,Ib)=>Ps.add(Ib))}}),G2.postStyleProps.forEach((oa,f6)=>{let Ps=S.get(f6);Ps||S.set(f6,Ps=new Set),oa.forEach((tm,Ib)=>Ps.add(Ib))})});if(J1.length){const Kt=[];J1.forEach(v1=>{Kt.push(function GFe(t,n){return new rt(3505,!1)}())}),z1.forEach(v1=>v1.destroy()),this.reportError(Kt)}const Tn=new Map,$o=new Map;d.forEach(Kt=>{const v1=Kt.element;i.has(v1)&&($o.set(v1,v1),this._beforeAnimationBuild(Kt.player.namespaceId,Kt.instruction,Tn))}),r.forEach(Kt=>{const v1=Kt.element;this._getPreviousPlayers(v1,!1,Kt.namespaceId,Kt.triggerName,null).forEach(Fn=>{jo(Tn,v1,[]).push(Fn),Fn.destroy()})});const yr=Me.filter(Kt=>HB(Kt,C,S)),Cc=new Map;VB(Cc,this.driver,ut,S,g4).forEach(Kt=>{HB(Kt,C,S)&&yr.push(Kt)});const fd=new Map;K.forEach((Kt,v1)=>{VB(fd,this.driver,new Set(Kt),C,Vx)}),yr.forEach(Kt=>{const v1=Cc.get(Kt),H1=fd.get(Kt);Cc.set(Kt,new Map([...Array.from(v1?.entries()??[]),...Array.from(H1?.entries()??[])]))});const d6=[],BB=[],UB={};d.forEach(Kt=>{const{element:v1,player:H1,instruction:Fn}=Kt;if(i.has(v1)){if(V.has(v1))return H1.onDestroy(()=>g3(v1,Fn.toStyles)),H1.disabled=!0,H1.overrideTotalTime(Fn.totalTime),void r.push(H1);let xr=UB;if($o.size>1){let qo=v1;const Bl=[];for(;qo=qo.parentNode;){const G2=$o.get(qo);if(G2){xr=G2;break}Bl.push(qo)}Bl.forEach(G2=>$o.set(G2,xr))}const _3=this._buildAnimation(H1.namespaceId,Fn,Tn,s,fd,Cc);if(H1.setRealPlayer(_3),xr===UB)d6.push(H1);else{const qo=this.playersByElement.get(xr);qo&&qo.length&&(H1.parentPlayer=Nl(qo)),r.push(H1)}}else l6(v1,Fn.fromStyles),H1.onDestroy(()=>g3(v1,Fn.toStyles)),BB.push(H1),V.has(v1)&&r.push(H1)}),BB.forEach(Kt=>{const v1=s.get(Kt.element);if(v1&&v1.length){const H1=Nl(v1);Kt.setRealPlayer(H1)}}),r.forEach(Kt=>{Kt.parentPlayer?Kt.syncPlayerEvents(Kt.parentPlayer):Kt.destroy()});for(let Kt=0;Kt<Me.length;Kt++){const v1=Me[Kt],H1=v1[Is];if(x5(v1,Np),H1&&H1.hasAnimation)continue;let Fn=[];if(v.size){let _3=v.get(v1);_3&&_3.length&&Fn.push(..._3);let qo=this.driver.query(v1,yb,!0);for(let Bl=0;Bl<qo.length;Bl++){let G2=v.get(qo[Bl]);G2&&G2.length&&Fn.push(...G2)}}const xr=Fn.filter(_3=>!_3.destroyed);xr.length?WNe(this,v1,xr):this.processLeaveNode(v1)}return Me.length=0,d6.forEach(Kt=>{this.players.push(Kt),Kt.onDone(()=>{Kt.destroy();const v1=this.players.indexOf(Kt);this.players.splice(v1,1)}),Kt.play()}),d6}elementContainsData(n,e){let i=!1;const r=e[Is];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(n).elementContainsData(e)||i}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,s){let d=[];if(e){const v=this.playersByQueriedElement.get(n);v&&(d=v)}else{const v=this.playersByElement.get(n);if(v){const C=!s||s==dd;v.forEach(S=>{S.queued||!C&&S.triggerName!=r||d.push(S)})}}return(i||r)&&(d=d.filter(v=>!(i&&i!=v.namespaceId||r&&r!=v.triggerName))),d}_beforeAnimationBuild(n,e,i){const s=e.element,d=e.isRemovalTransition?void 0:n,v=e.isRemovalTransition?void 0:e.triggerName;for(const C of e.timelines){const S=C.element,V=S!==s,F=jo(i,S,[]);this._getPreviousPlayers(S,V,d,v,e.toState).forEach(K=>{const le=K.getRealPlayer();le.beforeDestroy&&le.beforeDestroy(),K.destroy(),F.push(K)})}l6(s,e.fromStyles)}_buildAnimation(n,e,i,r,s,d){const v=e.triggerName,C=e.element,S=[],V=new Set,F=new Set,Z=e.timelines.map(le=>{const xe=le.element;V.add(xe);const Me=xe[Is];if(Me&&Me.removedBeforeQueried)return new ed(le.duration,le.delay);const He=xe!==C,ut=function ZNe(t){const n=[];return TB(t,n),n}((i.get(xe)||ONe).map(Tn=>Tn.getRealPlayer())).filter(Tn=>!!Tn.element&&Tn.element===xe),$e=s.get(xe),St=d.get(xe),z1=rB(0,this._normalizer,0,le.keyframes,$e,St),J1=this._buildPlayer(le,z1,ut);if(le.subTimeline&&r&&F.add(xe),He){const Tn=new Hb(n,v,xe);Tn.setRealPlayer(J1),S.push(Tn)}return J1});S.forEach(le=>{jo(this.playersByQueriedElement,le.element,[]).push(le),le.onDone(()=>function GNe(t,n,e){let i=t.get(n);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,le.element,le))}),V.forEach(le=>Rs(le,hB));const K=Nl(Z);return K.onDestroy(()=>{V.forEach(le=>x5(le,hB)),g3(C,e.toStyles)}),F.forEach(le=>{jo(r,le,[]).push(K)}),K}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new ed(n.duration,n.delay)}}class Hb{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new ed,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>fb(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){jo(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function Qp(t){return t&&1===t.nodeType}function EB(t,n){const e=t.style.display;return t.style.display=n??"none",e}function VB(t,n,e,i,r){const s=[];e.forEach(C=>s.push(EB(C)));const d=[];i.forEach((C,S)=>{const V=new Map;C.forEach(F=>{const Z=n.computeStyle(S,F,r);V.set(F,Z),(!Z||0==Z.length)&&(S[Is]=BNe,d.push(S))}),t.set(S,V)});let v=0;return e.forEach(C=>EB(C,s[v++])),d}function LB(t,n){const e=new Map;if(t.forEach(v=>e.set(v,[])),0==n.length)return e;const i=1,r=new Set(n),s=new Map;function d(v){if(!v)return i;let C=s.get(v);if(C)return C;const S=v.parentNode;return C=e.has(S)?S:r.has(S)?i:d(S),s.set(v,C),C}return n.forEach(v=>{const C=d(v);C!==i&&e.get(C).push(v)}),e}function Rs(t,n){t.classList?.add(n)}function x5(t,n){t.classList?.remove(n)}function WNe(t,n,e){Nl(e).onDone(()=>t.processLeaveNode(n))}function TB(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof YN?TB(i.players,n):n.push(i)}}function HB(t,n,e){const i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(s=>r.add(s)):n.set(t,i),e.delete(t),!0}class Jp{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new jNe(n,e,i),this._timelineEngine=new INe(n,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(n,e,i,r,s){const d=n+"-"+r;let v=this._triggerCache[d];if(!v){const C=[],S=[],V=wb(this._driver,s,C,S);if(C.length)throw function HFe(t,n){return new rt(3404,!1)}();v=function LNe(t,n,e){return new TNe(t,n,e)}(r,V,this._normalizer),this._triggerCache[d]=v}this._transitionEngine.registerTrigger(e,r,v)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i,r){this._transitionEngine.removeNode(n,e,r||!1,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if("@"==i.charAt(0)){const[s,d]=aB(i);this._timelineEngine.command(s,e,d,r)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,s){if("@"==i.charAt(0)){const[d,v]=aB(i);return this._timelineEngine.listen(d,e,v,s)}return this._transitionEngine.listen(n,e,i,r,s)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let eOe=(()=>{class t extends $N{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:cr.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?qN(e):e;return IB(this._renderer,null,i,"register",[r]),new tOe(i,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Re(w0),Re(Y1))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();class tOe extends jTe{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new nOe(this._id,n,e||{},this._renderer)}}class nOe{constructor(n,e,i,r){this.id=n,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return IB(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function IB(t,n,e,i,r){return t.setProperty(n,`@@${e}:${i}`,r)}const RB="@.disabled";let iOe=(()=>{class t{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,d)=>{const v=d?.parentNode(s);v&&d.removeChild(v,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let V=this._rendererCache.get(s);return V||(V=new PB("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,V)),V}const d=i.id,v=i.id+"-"+this._currentId;this._currentId++,this.engine.register(v,e);const C=V=>{Array.isArray(V)?V.forEach(C):this.engine.registerTrigger(d,v,e,V.name,V)};return i.data.animation.forEach(C),new rOe(this,v,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[d,v]=s;d(v)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Re(w0),Re(Jp),Re(f1))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();class PB{constructor(n,e,i,r){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==RB?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class rOe extends PB{constructor(n,e,i,r,s){super(e,i,r,s),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==RB?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const r=function aOe(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let s=e.slice(1),d="";return"@"!=s.charAt(0)&&([s,d]=function oOe(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(s)),this.engine.listen(this.namespaceId,r,s,d,v=>{this.factory.scheduleListenerCallback(v._data||-1,i,v)})}return this.delegate.listen(n,e,i)}}const NB=[{provide:_b,useClass:dB},{provide:t4,useValue:"NoopAnimations"},...[{provide:$N,useClass:eOe},{provide:Ab,useFactory:function cOe(){return new DNe}},{provide:Jp,useClass:(()=>{class t extends Jp{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(Re(Y1),Re(_b),Re(Ab),Re(P8))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})()},{provide:w0,useFactory:function lOe(t,n,e){return new iOe(t,n,e)},deps:[kh,Jp,f1]}]];let dOe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t}),t.\u0275inj=u1({providers:NB,imports:[lz]}),t})(),fOe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n1({type:t,bootstrap:[LRe]}),t.\u0275inj=u1({imports:[lz,VRe,Oy,dFe,dOe]}),t})();DW().bootstrapModule(fOe).catch(t=>console.error(t))},898:function(Ul){Ul.exports=function(){"use strict";var b1,Pi,k1;function Ke(p,Ze){if(b1)if(Pi){var Qi="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+b1+")(sharedChunk); ("+Pi+")(sharedChunk); self.onerror = null;",Gn={};b1(Gn),k1=Ze(Gn),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(k1.workerUrl=window.URL.createObjectURL(new Blob([Qi],{type:"text/javascript"})))}else Pi=Ze;else b1=Ze}return Ke(0,function(p){var Ze=typeof self<"u"?self:{},Qi="2.14.1";let Gn;const a1={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Gn){const o=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Gn=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):o}catch{Gn=o}}return Gn},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!a1.API_URL)return null;try{const o=new URL(a1.API_URL);return"api.mapbox.cn"===o.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===o.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},m1={supported:!1,testSupport:function(o){!yi&&$2&&(lo?sa(o):h2=o)}};let h2,$2,yi=!1,lo=!1;function sa(o){const a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,$2),o.isContextLost())return;m1.supported=!0}catch{}o.deleteTexture(a),yi=!0}Ze.document&&($2=Ze.document.createElement("img"),$2.onload=function(){h2&&sa(h2),h2=null,lo=!0},$2.onerror=function(){yi=!0,h2=null},$2.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Fi="01";var qn=q2;function q2(o,a,c,u){this.cx=3*o,this.bx=3*(c-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(u-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=c,this.p2y=u}q2.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,a){if(void 0===a&&(a=1e-6),o<0)return 0;if(o>1)return 1;for(var c=o,u=0;u<8;u++){var h=this.sampleCurveX(c)-o;if(Math.abs(h)<a)return c;var g=this.sampleCurveDerivativeX(c);if(Math.abs(g)<1e-6)break;c-=h/g}var y=0,b=1;for(c=o,u=0;u<20&&(h=this.sampleCurveX(c),!(Math.abs(h-o)<a));u++)o>h?y=c:b=c,c=.5*(b-y)+y;return c},solve:function(o,a){return this.sampleCurveY(this.solveCurveX(o,a))}};var ht=U1;function U1(o,a){this.x=o,this.y=a}U1.prototype={clone:function(){return new U1(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,a){return this.clone()._rotateAround(o,a)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var a=o.x-this.x,c=o.y-this.y;return a*a+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,a){return Math.atan2(this.x*a-this.y*o,this.x*o+this.y*a)},_matMult:function(o){var a=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=a,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var a=Math.cos(o),c=Math.sin(o),u=c*this.x+a*this.y;return this.x=a*this.x-c*this.y,this.y=u,this},_rotateAround:function(o,a){var c=Math.cos(o),u=Math.sin(o),h=a.y+u*(this.x-a.x)+c*(this.y-a.y);return this.x=a.x+c*(this.x-a.x)-u*(this.y-a.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},U1.convert=function(o){return o instanceof U1?o:Array.isArray(o)?new U1(o[0],o[1]):o};const br=Math.PI/180,uo=180/Math.PI;function I1(o){return o*br}function o2(o){return o*uo}const Ur=[[0,0],[1,0],[1,1],[0,1]];function ca(o){if(o<=0)return 0;if(o>=1)return 1;const a=o*o,c=a*o;return 4*(o<.5?c:3*(o-a)+c-.75)}function Aa(o,a,c,u){const h=new qn(o,a,c,u);return function(g){return h.solve(g)}}const ii=Aa(.25,.1,.25,1);function d1(o,a,c){return Math.min(c,Math.max(a,o))}function ri(o,a,c){return(c=d1((c-o)/(a-o),0,1))*c*(3-2*c)}function xi(o,a,c){const u=c-a,h=((o-a)%u+u)%u+a;return h===a?c:h}function Cr(o,a,c){if(!o.length)return c(null,[]);let u=o.length;const h=new Array(o.length);let g=null;o.forEach((y,b)=>{a(y,(M,z)=>{M&&(g=M),h[b]=z,0==--u&&c(g,h)})})}function Ni(o){const a=[];for(const c in o)a.push(o[c]);return a}function l1(o,...a){for(const c of a)for(const u in c)o[u]=c[u];return o}let Ji=1;function Ea(){return Ji++}function jr(){return function o(a){return a?(a^Math.random()*(16>>a/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function er(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function Qt(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function tr(o,a){o.forEach(c=>{a[c]&&(a[c]=a[c].bind(a))})}function wr(o,a){return-1!==o.indexOf(a,o.length-a.length)}function rn(o,a,c){const u={};for(const h in o)u[h]=a.call(c||this,o[h],h,o);return u}function R1(o,a,c){const u={};for(const h in o)a.call(c||this,o[h],h,o)&&(u[h]=o[h]);return u}function s2(o){return Array.isArray(o)?o.map(s2):"object"==typeof o&&o?rn(o,s2):o}const h1={};function en(o){h1[o]||(typeof console<"u"&&console.warn(o),h1[o]=!0)}function nr(o,a,c){return(c.y-o.y)*(a.x-o.x)>(a.y-o.y)*(c.x-o.x)}function X1(o){let a=0;for(let c,u,h=0,g=o.length,y=g-1;h<g;y=h++)c=o[h],u=o[y],a+=(u.x-c.x)*(c.y+u.y);return a}function Mr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function j1(o){const a={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,u,h,g)=>{const y=h||g;return a[u]=!y||y.toLowerCase(),""}),a["max-age"]){const c=parseInt(a["max-age"],10);isNaN(c)?delete a["max-age"]:a["max-age"]=c}return a}let Oi=null;function ai(o){if(null==Oi){const a=o.navigator?o.navigator.userAgent:null;Oi=!!o.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Oi}function la(o){try{const a=Ze[o];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}}function Qn(o,a){return[o[4*a],o[4*a+1],o[4*a+2],o[4*a+3]]}const d2="mapbox-tiles";let zr,Bi,T2=500,fo=50;function Ns(){try{return Ze.caches}catch{}}function Gr(){Ns()&&!zr&&(zr=Ze.caches.open(d2))}function Va(o){const a=o.indexOf("?");if(a<0)return o;const u=function(h){const g=h.indexOf("?");return g>0?h.slice(g+1).split("&"):[]}(o).filter(h=>{const g=h.split("=");return"language"===g[0]||"worldview"===g[0]});return u.length?`${o.slice(0,a)}?${u.join("&")}`:o.slice(0,a)}let Os=1/0;const Bs={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Bs);class p1 extends Error{constructor(a,c,u){401===c&&Yo(u)&&(a+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(a),this.status=c,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Sr=Mr()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Ze.location.protocol?Ze.parent:Ze).location.href,La=function(o,a){if(!(/^file:/.test(c=o.url)||/^file:/.test(Sr())&&!/^\w+:/.test(c))){if(Ze.fetch&&Ze.Request&&Ze.AbortController&&Ze.Request.prototype.hasOwnProperty("signal"))return function(u,h){const g=new Ze.AbortController,y=new Ze.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Sr(),referrerPolicy:u.referrerPolicy,signal:g.signal});let b=!1,M=!1;const z=(E=y.url).indexOf("sku=")>0&&Yo(E);var E;"json"===u.type&&y.headers.set("Accept","application/json");const T=(N,O,j)=>{if(M)return;if(N&&"SecurityError"!==N.message&&en(N),O&&j)return I(O);const X=Date.now();Ze.fetch(y).then(ae=>{if(ae.ok){const pe=z?ae.clone():null;return I(ae,pe,X)}return h(new p1(ae.statusText,ae.status,u.url))}).catch(ae=>{"AbortError"!==ae.name&&h(new Error(`${ae.message} ${u.url}`))})},I=(N,O,j)=>{("arrayBuffer"===u.type?N.arrayBuffer():"json"===u.type?N.json():N.text()).then(X=>{M||(O&&j&&function(ae,pe,ne){if(Gr(),!zr)return;const fe={status:pe.status,statusText:pe.statusText,headers:new Ze.Headers};pe.headers.forEach((Ve,Te)=>fe.headers.set(Te,Ve));const _e=j1(pe.headers.get("Cache-Control")||"");if(_e["no-store"])return;_e["max-age"]&&fe.headers.set("Expires",new Date(ne+1e3*_e["max-age"]).toUTCString());const me=fe.headers.get("Expires");me&&(new Date(me).getTime()-ne<42e4||function(Ve,Te){if(void 0===Bi)try{new Response(new ReadableStream),Bi=!0}catch{Bi=!1}Bi?Te(Ve.body):Ve.blob().then(Te)}(pe,Ve=>{const Te=new Ze.Response(Ve,fe);Gr(),zr&&zr.then(We=>We.put(Va(ae.url),Te)).catch(We=>en(We.message))}))}(y,O,j),b=!0,h(null,X,N.headers.get("Cache-Control"),N.headers.get("Expires")))}).catch(X=>{M||h(new Error(X.message))})};return z?function(N,O){if(Gr(),!zr)return O(null);const j=Va(N.url);zr.then(X=>{X.match(j).then(ae=>{const pe=function(ne){if(!ne)return!1;const fe=new Date(ne.headers.get("Expires")||0),_e=j1(ne.headers.get("Cache-Control")||"");return fe>Date.now()&&!_e["no-cache"]}(ae);X.delete(j),pe&&X.put(j,ae.clone()),O(null,ae,pe)}).catch(O)}).catch(O)}(y,T):T(null,null),{cancel:()=>{M=!0,b||g.abort()}}}(o,a);if(Mr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,a,void 0,!0)}var c;return function(u,h){const g=new Ze.XMLHttpRequest;g.open(u.method||"GET",u.url,!0),"arrayBuffer"===u.type&&(g.responseType="arraybuffer");for(const y in u.headers)g.setRequestHeader(y,u.headers[y]);return"json"===u.type&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials="include"===u.credentials,g.onerror=()=>{h(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||0===g.status)&&null!==g.response){let y=g.response;if("json"===u.type)try{y=JSON.parse(g.response)}catch(b){return h(b)}h(null,y,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else h(new p1(g.statusText,g.status,u.url))},g.send(u.body),{cancel:()=>g.abort()}}(o,a)},ho=function(o,a){return La(l1(o,{type:"arrayBuffer"}),a)};function Us(o){const a=Ze.document.createElement("a");return a.href=o,a.protocol===Ze.document.location.protocol&&a.host===Ze.document.location.host}const js="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ir,Wo;ir=[],Wo=0;const wc=function(o,a){if(m1.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),Wo>=a1.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:o,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return ir.push(g),g}Wo++;let c=!1;const u=()=>{if(!c)for(c=!0,Wo--;ir.length&&Wo<a1.MAX_PARALLEL_IMAGE_REQUESTS;){const g=ir.shift(),{requestParameters:y,callback:b,cancelled:M}=g;M||(g.cancel=wc(y,b).cancel)}},h=ho(o,(g,y,b,M)=>{u(),g?a(g):y&&(Ze.createImageBitmap?function(z,E){const T=new Ze.Blob([new Uint8Array(z)],{type:"image/png"});Ze.createImageBitmap(T).then(I=>{E(null,I)}).catch(I=>{E(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(z,E)=>a(z,E,b,M)):function(z,E){const T=new Ze.Image,I=Ze.URL;T.onload=()=>{E(null,T),I.revokeObjectURL(T.src),T.onload=null,Ze.requestAnimationFrame(()=>{T.src=js})},T.onerror=()=>E(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const N=new Ze.Blob([new Uint8Array(z)],{type:"image/png"});T.src=z.byteLength?I.createObjectURL(N):js}(y,(z,E)=>a(z,E,b,M)))});return{cancel:()=>{h.cancel(),u()}}},Zo="NO_ACCESS_TOKEN";function $r(o){return 0===o.indexOf("mapbox:")}function Yo(o){return a1.API_URL_REGEX.test(o)}function Ta(o){return a1.API_CDN_URL_REGEX.test(o)}function Gs(o){return a1.API_STYLE_REGEX.test(o)&&!po(o)}function po(o){return a1.API_SPRITE_REGEX.test(o)}const rr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function bi(o){const a=o.match(rr);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function Ha(o){const a=o.params.length?`?${o.params.join("&")}`:"";return`${o.protocol}://${o.authority}${o.path}${a}`}function $s(o){if(!o)return null;const a=o.split(".");if(!a||3!==a.length)return null;try{return JSON.parse(decodeURIComponent(Ze.atob(a[1]).split("").map(c=>"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ka{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const c=$s(a1.ACCESS_TOKEN);let u="";return u=c&&c.u?Ze.btoa(encodeURIComponent(c.u).replace(/%([0-9A-F]{2})/g,(h,g)=>String.fromCharCode(Number("0x"+g)))):a1.ACCESS_TOKEN||"",a?`mapbox.eventData.${a}:${u}`:`mapbox.eventData:${u}`}fetchEventData(){const a=la("localStorage"),c=this.getStorageKey(),u=this.getStorageKey("uuid");if(a)try{const h=Ze.localStorage.getItem(c);h&&(this.eventData=JSON.parse(h));const g=Ze.localStorage.getItem(u);g&&(this.anonId=g)}catch{en("Unable to read from LocalStorage")}}saveEventData(){const a=la("localStorage"),c=this.getStorageKey(),u=this.getStorageKey("uuid");if(a)try{Ze.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&Ze.localStorage.setItem(c,JSON.stringify(this.eventData))}catch{en("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,c,u,h){if(!a1.EVENTS_URL)return;const g=bi(a1.EVENTS_URL);g.params.push(`access_token=${h||a1.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(a).toISOString()},b=c?l1(y,c):y,M={url:Ha(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};var E;this.pendingRequest=(E=z=>{this.pendingRequest=null,u(z),this.saveEventData(),this.processRequests(h)},La(l1(M,{method:"POST"}),E))}queueRequest(a,c){this.queue.push(a),this.processRequests(c)}}const re=new class extends ka{constructor(o){super("appUserTurnstile"),this._customAccessToken=o}postTurnstileEvent(o,a){a1.EVENTS_URL&&a1.ACCESS_TOKEN&&Array.isArray(o)&&o.some(c=>$r(c)||Yo(c))&&this.queueRequest(Date.now(),a)}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=$s(a1.ACCESS_TOKEN),c=a?a.u:a1.ACCESS_TOKEN;let u=c!==this.eventData.tokenU;Qt(this.anonId)||(this.anonId=jr(),u=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),y=new Date(h),b=(h-this.eventData.lastSuccess)/864e5;u=u||b>=1||b<-1||g.getDate()!==y.getDate()}else u=!0;u?this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Qi,skuId:Fi,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=h,this.eventData.tokenU=c)},o):this.processRequests()}},U=re.postTurnstileEvent.bind(re),$=new class extends ka{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(o,a,c,u){this.skuToken=a,this.errorCb=u,a1.EVENTS_URL&&(c||a1.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},c):this.errorCb(new Error(Zo)))}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;const{id:a,timestamp:c}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),Qt(this.anonId)||(this.anonId=jr()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Qi,skuId:Fi,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):a&&(this.success[a]=!0)},o))}},ie=$.postMapLoadEvent.bind($),ue=new class extends ka{constructor(){super("gljs.performance")}postPerformanceEvent(o,a){a1.EVENTS_URL&&(o||a1.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},o)}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:a,performanceData:c}=this.queue.shift(),u=function(h){const g=Ze.performance.getEntriesByType("resource"),y=Ze.performance.getEntriesByType("mark"),b=function(I){const N={};if(I)for(const O in I)if("other"!==O)for(const j of I[O]){const X=`${O}ResolveRangeMin`,ae=`${O}ResolveRangeMax`,pe=`${O}RequestCount`,ne=`${O}RequestCachedCount`;N[X]=Math.min(N[X]||1/0,j.startTime),N[ae]=Math.max(N[ae]||-1/0,j.responseEnd);const fe=_e=>{void 0===N[_e]&&(N[_e]=0),++N[_e]};void 0!==j.transferSize&&0===j.transferSize&&fe(ne),fe(pe)}return N}(function(I,N){const O={};if(I)for(const j of I){const X=N(j);void 0===O[X]&&(O[X]=[]),O[X].push(j)}return O}(g,wt)),M=Ze.devicePixelRatio,z=Ze.navigator.connection||Ze.navigator.mozConnection||Ze.navigator.webkitConnection,E={counters:[],metadata:[],attributes:[]},T=(I,N,O)=>{null!=O&&I.push({name:N,value:O.toString()})};for(const I in b)T(E.counters,I,b[I]);if(h.interactionRange[0]!==1/0&&h.interactionRange[1]!==-1/0&&(T(E.counters,"interactionRangeMin",h.interactionRange[0]),T(E.counters,"interactionRangeMax",h.interactionRange[1])),y)for(const I of Object.keys(ke)){const N=ke[I],O=y.find(j=>j.name===N);O&&T(E.counters,N,O.startTime)}return T(E.counters,"visibilityHidden",h.visibilityHidden),T(E.attributes,"style",function(I){if(I)for(const N of I){const O=N.name.split("?")[0];if(Gs(O)){const j=O.split("/").slice(-2);if(2===j.length)return`mapbox://styles/${j[0]}/${j[1]}`}}}(g)),T(E.attributes,"terrainEnabled",h.terrainEnabled?"true":"false"),T(E.attributes,"fogEnabled",h.fogEnabled?"true":"false"),T(E.attributes,"projection",h.projection),T(E.attributes,"zoom",h.zoom),T(E.metadata,"devicePixelRatio",M),T(E.metadata,"connectionEffectiveType",z?z.effectiveType:void 0),T(E.metadata,"navigatorUserAgent",Ze.navigator.userAgent),T(E.metadata,"screenWidth",Ze.screen.width),T(E.metadata,"screenHeight",Ze.screen.height),T(E.metadata,"windowWidth",Ze.innerWidth),T(E.metadata,"windowHeight",Ze.innerHeight),T(E.metadata,"mapWidth",h.width/M),T(E.metadata,"mapHeight",h.height/M),T(E.metadata,"webglRenderer",h.renderer),T(E.metadata,"webglVendor",h.vendor),T(E.metadata,"sdkVersion",Qi),T(E.metadata,"sdkIdentifier","mapbox-gl-js"),E}(c);for(const h of u.metadata);for(const h of u.counters);for(const h of u.attributes);this.postEvent(a,u,()=>{},o)}},be=ue.postPerformanceEvent.bind(ue),Ee=new class extends ka{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(o,a,c,u){if(!a1.API_URL||!a1.SESSION_PATH)return;const h=bi(a1.API_URL+a1.SESSION_PATH);h.params.push(`sku=${a||""}`),h.params.push(`access_token=${u||a1.ACCESS_TOKEN||""}`);const g={url:Ha(h),headers:{"Content-Type":"text/plain"}};var b;this.pendingRequest=(b=y=>{this.pendingRequest=null,c(y),this.saveEventData(),this.processRequests(u)},La(l1(g,{method:"GET"}),b))}getSessionAPI(o,a,c,u){this.skuToken=a,this.errorCb=u,a1.SESSION_PATH&&a1.API_URL&&(c||a1.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},c):this.errorCb(new Error(Zo)))}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;const{id:a,timestamp:c}=this.queue.shift();a&&this.success[a]||this.getSession(c,this.skuToken,u=>{u?this.errorCb(u):a&&(this.success[a]=!0)},o)}},De=Ee.getSessionAPI.bind(Ee),we=new Set,ke={create:"create",load:"load",fullLoad:"fullLoad"},tt={mark(o){Ze.performance.mark(o)},measure(o,a,c){Ze.performance.measure(o,a,c)}};function wt(o){const a=o.name.split("?")[0];return Ta(a)&&a.includes("mapbox-gl.js")?"javascript":Ta(a)&&a.includes("mapbox-gl.css")?"css":a1.API_FONTS_REGEX.test(a)?"fontRange":po(a)?"sprite":Gs(a)?"style":a1.API_TILEJSON_REGEX.test(a)?"tilejson":"other"}const Je=Ze.performance;function Lt(o){const a=o?o.url.toString():void 0;return Je.getEntriesByName(a)}let Dt,It,Tt,y1;const K1={now:()=>void 0!==Tt?Tt:Ze.performance.now(),setNow(o){Tt=o},restoreNow(){Tt=void 0},frame(o){const a=Ze.requestAnimationFrame(o);return{cancel:()=>Ze.cancelAnimationFrame(a)}},getImageData(o,a=0){const{width:c,height:u}=o;y1||(y1=Ze.document.createElement("canvas"));const h=y1.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(c>y1.width||u>y1.height)&&(y1.width=c,y1.height=u),h.clearRect(-a,-a,c+2*a,u+2*a),h.drawImage(o,0,0,c,u),h.getImageData(-a,-a,c+2*a,u+2*a)},resolveURL:o=>(Dt||(Dt=Ze.document.createElement("a")),Dt.href=o,Dt.href),get devicePixelRatio(){return Ze.devicePixelRatio},get prefersReducedMotion(){return!!Ze.matchMedia&&(null==It&&(It=Ze.matchMedia("(prefers-reduced-motion: reduce)")),It.matches)}};function qt(o,a,c){c[o]&&-1!==c[o].indexOf(a)||(c[o]=c[o]||[],c[o].push(a))}function tn(o,a,c){if(c&&c[o]){const u=c[o].indexOf(a);-1!==u&&c[o].splice(u,1)}}class yn{constructor(a,c={}){l1(this,c),this.type=a}}class ua extends yn{constructor(a,c={}){super("error",l1({error:a},c))}}class qr{on(a,c){return this._listeners=this._listeners||{},qt(a,c,this._listeners),this}off(a,c){return tn(a,c,this._listeners),tn(a,c,this._oneTimeListeners),this}once(a,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},qt(a,c,this._oneTimeListeners),this):new Promise(u=>this.once(a,u))}fire(a,c){"string"==typeof a&&(a=new yn(a,c||{}));const u=a.type;if(this.listens(u)){a.target=this;const h=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const b of h)b.call(this,a);const g=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const b of g)tn(u,b,this._oneTimeListeners),b.call(this,a);const y=this._eventedParent;y&&(l1(a,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),y.fire(a))}else a instanceof ua&&console.error(a.error);return this}listens(a){return!!(this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a))}setEventedParent(a,c){return this._eventedParent=a,this._eventedParentData=c,this}}var Ge=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function da(o,...a){for(const c of a)for(const u in c)o[u]=c[u];return o}function Jn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Ia(o){if(Array.isArray(o))return o.map(Ia);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const a={};for(const c in o)a[c]=Ia(o[c]);return a}return Jn(o)}class v3 extends Error{constructor(a,c){super(c),this.message=c,this.key=a}}var Wr=v3;class Xo{constructor(a,c=[]){this.parent=a,this.bindings={};for(const[u,h]of c)this.bindings[u]=h}concat(a){return new Xo(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}var e2=Xo;const W2={kind:"null"},yt={kind:"number"},S1={kind:"string"},Ht={kind:"boolean"},ar={kind:"color"},mn={kind:"object"},C1={kind:"value"},Ko={kind:"collator"},nn={kind:"formatted"},Jt={kind:"resolvedImage"};function t2(o,a){return{kind:"array",itemType:o,N:a}}function gn(o){if("array"===o.kind){const a=gn(o.itemType);return"number"==typeof o.N?`array<${a}, ${o.N}>`:"value"===o.itemType.kind?"array":`array<${a}>`}return o.kind}const jl=[W2,yt,S1,Ht,ar,nn,mn,t2(C1),Jt];function p2(o,a){if("error"===a.kind)return null;if("array"===o.kind){if("array"===a.kind&&(0===a.N&&"value"===a.itemType.kind||!p2(o.itemType,a.itemType))&&("number"!=typeof o.N||o.N===a.N))return null}else{if(o.kind===a.kind)return null;if("value"===o.kind)for(const c of jl)if(!p2(c,a))return null}return`Expected ${gn(o)} but found ${gn(a)} instead.`}function rt(o,a){return a.some(c=>c.kind===o.kind)}function Zr(o,a){return a.some(c=>"null"===c?null===o:"array"===c?Array.isArray(o):"object"===c?o&&!Array.isArray(o)&&"object"==typeof o:c===typeof o)}var x1,un={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function qs(o){return(o=Math.round(o))<0?0:o>255?255:o}function Qo(o){return qs("%"===o[o.length-1]?parseFloat(o)/100*255:parseInt(o))}function Jo(o){return(a="%"===o[o.length-1]?parseFloat(o)/100:parseFloat(o))<0?0:a>1?1:a;var a}function Yr(o,a,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?o+(a-o)*c*6:2*c<1?a:3*c<2?o+(a-o)*(2/3-c)*6:o}try{x1={}.parseCSSColor=function(o){var a,c=o.replace(/ /g,"").toLowerCase();if(c in un)return un[c].slice();if("#"===c[0])return 4===c.length?(a=parseInt(c.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:7===c.length&&(a=parseInt(c.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var u=c.indexOf("("),h=c.indexOf(")");if(-1!==u&&h+1===c.length){var g=c.substr(0,u),y=c.substr(u+1,h-(u+1)).split(","),b=1;switch(g){case"rgba":if(4!==y.length)return null;b=Jo(y.pop());case"rgb":return 3!==y.length?null:[Qo(y[0]),Qo(y[1]),Qo(y[2]),b];case"hsla":if(4!==y.length)return null;b=Jo(y.pop());case"hsl":if(3!==y.length)return null;var M=(parseFloat(y[0])%360+360)%360/360,z=Jo(y[1]),E=Jo(y[2]),T=E<=.5?E*(z+1):E+z-E*z,I=2*E-T;return[qs(255*Yr(I,T,M+1/3)),qs(255*Yr(I,T,M)),qs(255*Yr(I,T,M-1/3)),b];default:return null}}return null}}catch{}class Nn{constructor(a,c,u,h=1){this.r=a,this.g=c,this.b=u,this.a=h}static parse(a){if(!a)return;if(a instanceof Nn)return a;if("string"!=typeof a)return;const c=x1(a);return c?new Nn(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]):void 0}toString(){const[a,c,u,h]=this.toArray();return`rgba(${Math.round(a)},${Math.round(c)},${Math.round(u)},${h})`}toArray(){const{r:a,g:c,b:u,a:h}=this;return 0===h?[0,0,0,0]:[255*a/h,255*c/h,255*u/h,h]}toArray01(){const{r:a,g:c,b:u,a:h}=this;return 0===h?[0,0,0,0]:[a/h,c/h,u/h,h]}toArray01PremultipliedAlpha(){const{r:a,g:c,b:u,a:h}=this;return[a,c,u,h]}}Nn.black=new Nn(0,0,0,1),Nn.white=new Nn(1,1,1,1),Nn.transparent=new Nn(0,0,0,0),Nn.red=new Nn(1,0,0,1),Nn.blue=new Nn(0,0,1,1);var n2=Nn;class Mc{constructor(a,c,u){this.sensitivity=a?c?"variant":"case":c?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,c){return this.collator.compare(a,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class zc{constructor(a,c,u,h,g){this.text=a.normalize?a.normalize():a,this.image=c,this.scale=u,this.fontStack=h,this.textColor=g}}class c2{constructor(a){this.sections=a}static fromString(a){return new c2([new zc(a,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(a=>0!==a.text.length||a.image&&0!==a.image.name.length)}static factory(a){return a instanceof c2?a:c2.fromString(a)}toString(){return 0===this.sections.length?"":this.sections.map(a=>a.text).join("")}serialize(){const a=["format"];for(const c of this.sections){if(c.image){a.push(["image",c.image.name]);continue}a.push(c.text);const u={};c.fontStack&&(u["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(u["font-scale"]=c.scale),c.textColor&&(u["text-color"]=["rgba"].concat(c.textColor.toArray())),a.push(u)}return a}}class Ci{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new Ci({name:a,available:!1}):null}serialize(){return["image",this.name]}}function Gl(o,a,c,u){return"number"==typeof o&&o>=0&&o<=255&&"number"==typeof a&&a>=0&&a<=255&&"number"==typeof c&&c>=0&&c<=255?void 0===u||"number"==typeof u&&u>=0&&u<=1?null:`Invalid rgba value [${[o,a,c,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof u?[o,a,c,u]:[o,a,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function y3(o){if(null===o||"string"==typeof o||"boolean"==typeof o||"number"==typeof o||o instanceof n2||o instanceof Mc||o instanceof c2||o instanceof Ci)return!0;if(Array.isArray(o)){for(const a of o)if(!y3(a))return!1;return!0}if("object"==typeof o){for(const a in o)if(!y3(o[a]))return!1;return!0}return!1}function m2(o){if(null===o)return W2;if("string"==typeof o)return S1;if("boolean"==typeof o)return Ht;if("number"==typeof o)return yt;if(o instanceof n2)return ar;if(o instanceof Mc)return Ko;if(o instanceof c2)return nn;if(o instanceof Ci)return Jt;if(Array.isArray(o)){const a=o.length;let c;for(const u of o){const h=m2(u);if(c){if(c===h)continue;c=C1;break}c=h}return t2(c||C1,a)}return mn}function Ws(o){const a=typeof o;return null===o?"":"string"===a||"number"===a||"boolean"===a?String(o):o instanceof n2||o instanceof c2||o instanceof Ci?o.toString():JSON.stringify(o)}class b4{constructor(a,c){this.type=a,this.value=c}static parse(a,c){if(2!==a.length)return c.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!y3(a[1]))return c.error("invalid value");const u=a[1];let h=m2(u);const g=c.expectedType;return"array"!==h.kind||0!==h.N||!g||"array"!==g.kind||"number"==typeof g.N&&0!==g.N||(h=g),new b4(h,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof n2?["rgba"].concat(this.value.toArray()):this.value instanceof c2?this.value.serialize():this.value}}var es=b4,Z2=class{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}};const D2={string:S1,number:yt,boolean:Ht,object:mn};class an{constructor(a,c){this.type=a,this.args=c}static parse(a,c){if(a.length<2)return c.error("Expected at least one argument.");let u,h=1;const g=a[0];if("array"===g){let b,M;if(a.length>2){const z=a[1];if("string"!=typeof z||!(z in D2)||"object"===z)return c.error('The item type argument of "array" must be one of string, number, boolean',1);b=D2[z],h++}else b=C1;if(a.length>3){if(null!==a[2]&&("number"!=typeof a[2]||a[2]<0||a[2]!==Math.floor(a[2])))return c.error('The length argument to "array" must be a positive integer literal',2);M=a[2],h++}u=t2(b,M)}else u=D2[g];const y=[];for(;h<a.length;h++){const b=c.parse(a[h],h,C1);if(!b)return null;y.push(b)}return new an(u,y)}evaluate(a){for(let c=0;c<this.args.length;c++){const u=this.args[c].evaluate(a);if(!p2(this.type,m2(u)))return u;if(c===this.args.length-1)throw new Z2(`Expected value to be of type ${gn(this.type)}, but found ${gn(m2(u))} instead.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=this.type,c=[a.kind];if("array"===a.kind){const u=a.itemType;if("string"===u.kind||"number"===u.kind||"boolean"===u.kind){c.push(u.kind);const h=a.N;("number"==typeof h||this.args.length>1)&&c.push(h)}}return c.concat(this.args.map(u=>u.serialize()))}}var Ra=an;class Sc{constructor(a){this.type=nn,this.sections=a}static parse(a,c){if(a.length<2)return c.error("Expected at least one argument.");const u=a[1];if(!Array.isArray(u)&&"object"==typeof u)return c.error("First argument must be an image or text section.");const h=[];let g=!1;for(let y=1;y<=a.length-1;++y){const b=a[y];if(g&&"object"==typeof b&&!Array.isArray(b)){g=!1;let M=null;if(b["font-scale"]&&(M=c.parse(b["font-scale"],1,yt),!M))return null;let z=null;if(b["text-font"]&&(z=c.parse(b["text-font"],1,t2(S1)),!z))return null;let E=null;if(b["text-color"]&&(E=c.parse(b["text-color"],1,ar),!E))return null;const T=h[h.length-1];T.scale=M,T.font=z,T.textColor=E}else{const M=c.parse(a[y],1,C1);if(!M)return null;const z=M.type.kind;if("string"!==z&&"value"!==z&&"null"!==z&&"resolvedImage"!==z)return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,h.push({content:M,scale:null,font:null,textColor:null})}}return new Sc(h)}evaluate(a){return new c2(this.sections.map(c=>{const u=c.content.evaluate(a);return m2(u)===Jt?new zc("",u,null,null,null):new zc(Ws(u),null,c.scale?c.scale.evaluate(a):null,c.font?c.font.evaluate(a).join(","):null,c.textColor?c.textColor.evaluate(a):null)}))}eachChild(a){for(const c of this.sections)a(c.content),c.scale&&a(c.scale),c.font&&a(c.font),c.textColor&&a(c.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const c of this.sections){a.push(c.content.serialize());const u={};c.scale&&(u["font-scale"]=c.scale.serialize()),c.font&&(u["text-font"]=c.font.serialize()),c.textColor&&(u["text-color"]=c.textColor.serialize()),a.push(u)}return a}}class mo{constructor(a){this.type=Jt,this.input=a}static parse(a,c){if(2!==a.length)return c.error("Expected two arguments.");const u=c.parse(a[1],1,S1);return u?new mo(u):c.error("No image name provided.")}evaluate(a){const c=this.input.evaluate(a),u=Ci.fromString(c);return u&&a.availableImages&&(u.available=a.availableImages.indexOf(c)>-1),u}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const st={"to-boolean":Ht,"to-color":ar,"to-number":yt,"to-string":S1};class C4{constructor(a,c){this.type=a,this.args=c}static parse(a,c){if(a.length<2)return c.error("Expected at least one argument.");const u=a[0];if(("to-boolean"===u||"to-string"===u)&&2!==a.length)return c.error("Expected one argument.");const h=st[u],g=[];for(let y=1;y<a.length;y++){const b=c.parse(a[y],y,C1);if(!b)return null;g.push(b)}return new C4(h,g)}evaluate(a){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(a));if("color"===this.type.kind){let c,u;for(const h of this.args){if(c=h.evaluate(a),u=null,c instanceof n2)return c;if("string"==typeof c){const g=a.parseColor(c);if(g)return g}else if(Array.isArray(c)&&(u=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:Gl(c[0],c[1],c[2],c[3]),!u))return new n2(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Z2(u||`Could not parse color from value '${"string"==typeof c?c:String(JSON.stringify(c))}'`)}if("number"===this.type.kind){let c=null;for(const u of this.args){if(c=u.evaluate(a),null===c)return 0;const h=Number(c);if(!isNaN(h))return h}throw new Z2(`Could not convert ${JSON.stringify(c)} to number.`)}return"formatted"===this.type.kind?c2.fromString(Ws(this.args[0].evaluate(a))):"resolvedImage"===this.type.kind?Ci.fromString(Ws(this.args[0].evaluate(a))):Ws(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Sc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new mo(this.args[0]).serialize();const a=[`to-${this.type.kind}`];return this.eachChild(c=>{a.push(c.serialize())}),a}}var u1=C4;const ts=["Unknown","Point","LineString","Polygon"];var ns=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ts[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,a=this.featureDistanceData.scale,{x:c,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(c*a-o[0])+this.featureDistanceData.bearing[1]*(u*a-o[1])}return 0}parseColor(o){let a=this._parseColorCache[o];return a||(a=this._parseColorCache[o]=n2.parse(o)),a}};class Pa{constructor(a,c,u,h){this.name=a,this.type=c,this._evaluate=u,this.args=h}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(a=>a.serialize()))}static parse(a,c){const u=a[0],h=Pa.definitions[u];if(!h)return c.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,b=y.filter(([z])=>!Array.isArray(z)||z.length===a.length-1);let M=null;for(const[z,E]of b){M=new M3(c.registry,c.path,null,c.scope);const T=[];let I=!1;for(let N=1;N<a.length;N++){const O=a[N],j=Array.isArray(z)?z[N-1]:z.type,X=M.parse(O,1+T.length,j);if(!X){I=!0;break}T.push(X)}if(!I)if(Array.isArray(z)&&z.length!==T.length)M.error(`Expected ${z.length} arguments, but found ${T.length} instead.`);else{for(let N=0;N<T.length;N++){const O=Array.isArray(z)?z[N]:z.type,j=T[N];M.concat(N+1).checkSubtype(O,j.type)}if(0===M.errors.length)return new Pa(u,g,E,T)}}if(1===b.length)c.errors.push(...M.errors);else{const z=(b.length?b:y).map(([T])=>{return I=T,Array.isArray(I)?`(${I.map(gn).join(", ")})`:`(${gn(I.type)}...)`;var I}).join(" | "),E=[];for(let T=1;T<a.length;T++){const I=c.parse(a[T],1+E.length);if(!I)return null;E.push(gn(I.type))}c.error(`Expected arguments of type ${z}, but found (${E.join(", ")}) instead.`)}return null}static register(a,c){Pa.definitions=c;for(const u in c)a[u]=Pa}}var Fa=Pa;class Dc{constructor(a,c,u){this.type=Ko,this.locale=u,this.caseSensitive=a,this.diacriticSensitive=c}static parse(a,c){if(2!==a.length)return c.error("Expected one argument.");const u=a[1];if("object"!=typeof u||Array.isArray(u))return c.error("Collator options argument must be an object.");const h=c.parse(void 0!==u["case-sensitive"]&&u["case-sensitive"],1,Ht);if(!h)return null;const g=c.parse(void 0!==u["diacritic-sensitive"]&&u["diacritic-sensitive"],1,Ht);if(!g)return null;let y=null;return u.locale&&(y=c.parse(u.locale,1,S1),!y)?null:new Dc(h,g,y)}evaluate(a){return new Mc(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}const fa=8192;function oi(o,a){o[0]=Math.min(o[0],a[0]),o[1]=Math.min(o[1],a[1]),o[2]=Math.max(o[2],a[0]),o[3]=Math.max(o[3],a[1])}function go(o,a){return!(o[0]<=a[0]||o[2]>=a[2]||o[1]<=a[1]||o[3]>=a[3])}function x3(o,a){const c=(180+o[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,h=Math.pow(2,a.z);return[Math.round(c*h*fa),Math.round(u*h*fa)]}function _o(o,a,c){const u=o[0]-a[0],h=o[1]-a[1],g=o[0]-c[0],y=o[1]-c[1];return u*y-g*h==0&&u*g<=0&&h*y<=0}function t1(o,a){let c=!1;for(let y=0,b=a.length;y<b;y++){const M=a[y];for(let z=0,E=M.length;z<E-1;z++){if(_o(o,M[z],M[z+1]))return!1;(h=M[z])[1]>(u=o)[1]!=(g=M[z+1])[1]>u[1]&&u[0]<(g[0]-h[0])*(u[1]-h[1])/(g[1]-h[1])+h[0]&&(c=!c)}}var u,h,g;return c}function Ac(o,a){for(let c=0;c<a.length;c++)if(t1(o,a[c]))return!0;return!1}function b3(o,a,c,u){const h=u[0]-c[0],g=u[1]-c[1],y=(o[0]-c[0])*g-h*(o[1]-c[1]),b=(a[0]-c[0])*g-h*(a[1]-c[1]);return y>0&&b<0||y<0&&b>0}function si(o,a,c){for(const z of c)for(let E=0;E<z.length-1;++E)if((b=[(y=z[E+1])[0]-(g=z[E])[0],y[1]-g[1]])[0]*(M=[(h=a)[0]-(u=o)[0],h[1]-u[1]])[1]-b[1]*M[0]!=0&&b3(u,h,g,y)&&b3(g,y,u,h))return!0;var u,h,g,y,b,M;return!1}function Na(o,a){for(let c=0;c<o.length;++c)if(!t1(o[c],a))return!1;for(let c=0;c<o.length-1;++c)if(si(o[c],o[c+1],a))return!1;return!0}function C3(o,a){for(let c=0;c<a.length;c++)if(Na(o,a[c]))return!0;return!1}function Hn(o,a,c){const u=[];for(let h=0;h<o.length;h++){const g=[];for(let y=0;y<o[h].length;y++){const b=x3(o[h][y],c);oi(a,b),g.push(b)}u.push(g)}return u}function w3(o,a,c){const u=[];for(let h=0;h<o.length;h++){const g=Hn(o[h],a,c);u.push(g)}return u}function w4(o,a,c,u){if(o[0]<c[0]||o[0]>c[2]){const h=.5*u;let g=o[0]-c[0]>h?-u:c[0]-o[0]>h?u:0;0===g&&(g=o[0]-c[2]>h?-u:c[2]-o[0]>h?u:0),o[0]+=g}oi(a,o)}function is(o,a,c,u){const h=Math.pow(2,u.z)*fa,g=[u.x*fa,u.y*fa],y=[];if(!o)return y;for(const b of o)for(const M of b){const z=[M.x+g[0],M.y+g[1]];w4(z,a,c,h),y.push(z)}return y}function Z1(o,a,c,u){const h=Math.pow(2,u.z)*fa,g=[u.x*fa,u.y*fa],y=[];if(!o)return y;for(const M of o){const z=[];for(const E of M){const T=[E.x+g[0],E.y+g[1]];oi(a,T),z.push(T)}y.push(z)}if(a[2]-a[0]<=h/2){(b=a)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const M of y)for(const z of M)w4(z,a,c,h)}var b;return y}class vo{constructor(a,c){this.type=Ht,this.geojson=a,this.geometries=c}static parse(a,c){if(2!==a.length)return c.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(y3(a[1])){const u=a[1];if("FeatureCollection"===u.type)for(let h=0;h<u.features.length;++h){const g=u.features[h].geometry.type;if("Polygon"===g||"MultiPolygon"===g)return new vo(u,u.features[h].geometry)}else if("Feature"===u.type){const h=u.geometry.type;if("Polygon"===h||"MultiPolygon"===h)return new vo(u,u.geometry)}else if("Polygon"===u.type||"MultiPolygon"===u.type)return new vo(u,u)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(null!=a.geometry()&&null!=a.canonicalID()){if("Point"===a.geometryType())return function(c,u){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=c.canonicalID();if(!y)return!1;if("Polygon"===u.type){const b=Hn(u.coordinates,g,y),M=is(c.geometry(),h,g,y);if(!go(h,g))return!1;for(const z of M)if(!t1(z,b))return!1}if("MultiPolygon"===u.type){const b=w3(u.coordinates,g,y),M=is(c.geometry(),h,g,y);if(!go(h,g))return!1;for(const z of M)if(!Ac(z,b))return!1}return!0}(a,this.geometries);if("LineString"===a.geometryType())return function(c,u){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=c.canonicalID();if(!y)return!1;if("Polygon"===u.type){const b=Hn(u.coordinates,g,y),M=Z1(c.geometry(),h,g,y);if(!go(h,g))return!1;for(const z of M)if(!Na(z,b))return!1}if("MultiPolygon"===u.type){const b=w3(u.coordinates,g,y),M=Z1(c.geometry(),h,g,y);if(!go(h,g))return!1;for(const z of M)if(!C3(z,b))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var rs=vo;function Zs(o){if(o instanceof Fa&&("get"===o.name&&1===o.args.length||"feature-state"===o.name||"has"===o.name&&1===o.args.length||"properties"===o.name||"geometry-type"===o.name||"id"===o.name||/^filter-/.test(o.name))||o instanceof rs)return!1;let a=!0;return o.eachChild(c=>{a&&!Zs(c)&&(a=!1)}),a}function as(o){if(o instanceof Fa&&"feature-state"===o.name)return!1;let a=!0;return o.eachChild(c=>{a&&!as(c)&&(a=!1)}),a}function os(o,a){if(o instanceof Fa&&a.indexOf(o.name)>=0)return!1;let c=!0;return o.eachChild(u=>{c&&!os(u,a)&&(c=!1)}),c}class ss{constructor(a,c){this.type=c.type,this.name=a,this.boundExpression=c}static parse(a,c){if(2!==a.length||"string"!=typeof a[1])return c.error("'var' expression requires exactly one string literal argument.");const u=a[1];return c.scope.has(u)?new ss(u,c.scope.get(u)):c.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var or=ss;class ha{constructor(a,c=[],u,h=new e2,g=[]){this.registry=a,this.path=c,this.key=c.map(y=>`[${y}]`).join(""),this.scope=h,this.errors=g,this.expectedType=u}parse(a,c,u,h,g={}){return c?this.concat(c,u,h)._parse(a,g):this._parse(a,g)}_parse(a,c){function u(h,g,y){return"assert"===y?new Ra(g,[h]):"coerce"===y?new u1(g,[h]):h}if(null!==a&&"string"!=typeof a&&"boolean"!=typeof a&&"number"!=typeof a||(a=["literal",a]),Array.isArray(a)){if(0===a.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=a[0];if("string"!=typeof h)return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[h];if(g){let y=g.parse(a,this);if(!y)return null;if(this.expectedType){const b=this.expectedType,M=y.type;if("string"!==b.kind&&"number"!==b.kind&&"boolean"!==b.kind&&"object"!==b.kind&&"array"!==b.kind||"value"!==M.kind)if("color"!==b.kind&&"formatted"!==b.kind&&"resolvedImage"!==b.kind||"value"!==M.kind&&"string"!==M.kind){if(this.checkSubtype(b,M))return null}else y=u(y,b,c.typeAnnotation||"coerce");else y=u(y,b,c.typeAnnotation||"assert")}if(!(y instanceof es)&&"resolvedImage"!==y.type.kind&&Re(y)){const b=new ns;try{y=new es(y.type,y.evaluate(b))}catch(M){return this.error(M.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===a?"'undefined' value invalid. Use null instead.":"object"==typeof a?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,c,u){const h="number"==typeof a?this.path.concat(a):this.path,g=u?this.scope.concat(u):this.scope;return new ha(this.registry,h,c||null,g,this.errors)}error(a,...c){const u=`${this.key}${c.map(h=>`[${h}]`).join("")}`;this.errors.push(new Wr(u,a))}checkSubtype(a,c){const u=p2(a,c);return u&&this.error(u),u}}var M3=ha;function Re(o){if(o instanceof or)return Re(o.boundExpression);if(o instanceof Fa&&"error"===o.name||o instanceof Dc||o instanceof rs)return!1;const a=o instanceof u1||o instanceof Ra;let c=!0;return o.eachChild(u=>{c=a?c&&Re(u):c&&u instanceof es}),!!c&&Zs(o)&&os(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Oa(o,a){const c=o.length-1;let u,h,g=0,y=c,b=0;for(;g<=y;)if(b=Math.floor((g+y)/2),u=o[b],h=o[b+1],u<=a){if(b===c||a<h)return b;g=b+1}else{if(!(u>a))throw new Z2("Input is not a number.");y=b-1}return 0}class o1{constructor(a,c,u){this.type=a,this.input=c,this.labels=[],this.outputs=[];for(const[h,g]of u)this.labels.push(h),this.outputs.push(g)}static parse(a,c){if(a.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return c.error("Expected an even number of arguments.");const u=c.parse(a[1],1,yt);if(!u)return null;const h=[];let g=null;c.expectedType&&"value"!==c.expectedType.kind&&(g=c.expectedType);for(let y=1;y<a.length;y+=2){const b=1===y?-1/0:a[y],M=a[y+1],z=y,E=y+1;if("number"!=typeof b)return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(h.length&&h[h.length-1][0]>=b)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const T=c.parse(M,E,g);if(!T)return null;g=g||T.type,h.push([b,T])}return new o1(g,u,h)}evaluate(a){const c=this.labels,u=this.outputs;if(1===c.length)return u[0].evaluate(a);const h=this.input.evaluate(a);if(h<=c[0])return u[0].evaluate(a);const g=c.length;return h>=c[g-1]?u[g-1].evaluate(a):u[Oa(c,h)].evaluate(a)}eachChild(a){a(this.input);for(const c of this.outputs)a(c)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){const a=["step",this.input.serialize()];for(let c=0;c<this.labels.length;c++)c>0&&a.push(this.labels[c]),a.push(this.outputs[c].serialize());return a}}var cs=o1;function G1(o,a,c){return o*(1-c)+a*c}var pa=Object.freeze({__proto__:null,number:G1,color:function(o,a,c){return new n2(G1(o.r,a.r,c),G1(o.g,a.g,c),G1(o.b,a.b,c),G1(o.a,a.a,c))},array:function(o,a,c){return o.map((u,h)=>G1(u,a[h],c))}});const M4=.95047,Ec=1.08883,Vc=4/29,Dr=6/29,sr=3*Dr*Dr,cr=Math.PI/180,Xr=180/Math.PI;function sn(o){return o>.008856451679035631?Math.pow(o,1/3):o/sr+Vc}function Ba(o){return o>Dr?o*o*o:sr*(o-Vc)}function yo(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function xo(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Ys(o){const a=xo(o.r),c=xo(o.g),u=xo(o.b),h=sn((.4124564*a+.3575761*c+.1804375*u)/M4),g=sn((.2126729*a+.7151522*c+.072175*u)/1);return{l:116*g-16,a:500*(h-g),b:200*(g-sn((.0193339*a+.119192*c+.9503041*u)/Ec)),alpha:o.a}}function Kr(o){let a=(o.l+16)/116,c=isNaN(o.a)?a:a+o.a/500,u=isNaN(o.b)?a:a-o.b/200;return a=1*Ba(a),c=M4*Ba(c),u=Ec*Ba(u),new n2(yo(3.2404542*c-1.5371385*a-.4985314*u),yo(-.969266*c+1.8760108*a+.041556*u),yo(.0556434*c-.2040259*a+1.0572252*u),o.alpha)}function Xs(o,a,c){const u=a-o;return o+c*(u>180||u<-180?u-360*Math.round(u/360):u)}const Ks={forward:Ys,reverse:Kr,interpolate:function(o,a,c){return{l:G1(o.l,a.l,c),a:G1(o.a,a.a,c),b:G1(o.b,a.b,c),alpha:G1(o.alpha,a.alpha,c)}}},Ft={forward:function(o){const{l:a,a:c,b:u}=Ys(o),h=Math.atan2(u,c)*Xr;return{h:h<0?h+360:h,c:Math.sqrt(c*c+u*u),l:a,alpha:o.a}},reverse:function(o){const a=o.h*cr,c=o.c;return Kr({l:o.l,a:Math.cos(a)*c,b:Math.sin(a)*c,alpha:o.alpha})},interpolate:function(o,a,c){return{h:Xs(o.h,a.h,c),c:G1(o.c,a.c,c),l:G1(o.l,a.l,c),alpha:G1(o.alpha,a.alpha,c)}}};var z4=Object.freeze({__proto__:null,lab:Ks,hcl:Ft});class Qs{constructor(a,c,u,h,g){this.type=a,this.operator=c,this.interpolation=u,this.input=h,this.labels=[],this.outputs=[];for(const[y,b]of g)this.labels.push(y),this.outputs.push(b)}static interpolationFactor(a,c,u,h){let g=0;if("exponential"===a.name)g=z3(c,a.base,u,h);else if("linear"===a.name)g=z3(c,1,u,h);else if("cubic-bezier"===a.name){const y=a.controlPoints;g=new qn(y[0],y[1],y[2],y[3]).solve(z3(c,1,u,h))}return g}static parse(a,c){let[u,h,g,...y]=a;if(!Array.isArray(h)||0===h.length)return c.error("Expected an interpolation type expression.",1);if("linear"===h[0])h={name:"linear"};else if("exponential"===h[0]){const z=h[1];if("number"!=typeof z)return c.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:z}}else{if("cubic-bezier"!==h[0])return c.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const z=h.slice(1);if(4!==z.length||z.some(E=>"number"!=typeof E||E<0||E>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:z}}}if(a.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(g=c.parse(g,2,yt),!g)return null;const b=[];let M=null;"interpolate-hcl"===u||"interpolate-lab"===u?M=ar:c.expectedType&&"value"!==c.expectedType.kind&&(M=c.expectedType);for(let z=0;z<y.length;z+=2){const E=y[z],T=y[z+1],I=z+3,N=z+4;if("number"!=typeof E)return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(b.length&&b[b.length-1][0]>=E)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const O=c.parse(T,N,M);if(!O)return null;M=M||O.type,b.push([E,O])}return"number"===M.kind||"color"===M.kind||"array"===M.kind&&"number"===M.itemType.kind&&"number"==typeof M.N?new Qs(M,u,h,g,b):c.error(`Type ${gn(M)} is not interpolatable.`)}evaluate(a){const c=this.labels,u=this.outputs;if(1===c.length)return u[0].evaluate(a);const h=this.input.evaluate(a);if(h<=c[0])return u[0].evaluate(a);const g=c.length;if(h>=c[g-1])return u[g-1].evaluate(a);const y=Oa(c,h),b=Qs.interpolationFactor(this.interpolation,h,c[y],c[y+1]),M=u[y].evaluate(a),z=u[y+1].evaluate(a);return"interpolate"===this.operator?pa[this.type.kind.toLowerCase()](M,z,b):"interpolate-hcl"===this.operator?Ft.reverse(Ft.interpolate(Ft.forward(M),Ft.forward(z),b)):Ks.reverse(Ks.interpolate(Ks.forward(M),Ks.forward(z),b))}eachChild(a){a(this.input);for(const c of this.outputs)a(c)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){let a;a="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const c=[this.operator,a,this.input.serialize()];for(let u=0;u<this.labels.length;u++)c.push(this.labels[u],this.outputs[u].serialize());return c}}function z3(o,a,c,u){const h=u-c,g=o-c;return 0===h?0:1===a?g/h:(Math.pow(a,g)-1)/(Math.pow(a,h)-1)}var n1=Qs;class Lc{constructor(a,c){this.type=a,this.args=c}static parse(a,c){if(a.length<2)return c.error("Expectected at least one argument.");let u=null;const h=c.expectedType;h&&"value"!==h.kind&&(u=h);const g=[];for(const b of a.slice(1)){const M=c.parse(b,1+g.length,u,void 0,{typeAnnotation:"omit"});if(!M)return null;u=u||M.type,g.push(M)}const y=h&&g.some(b=>p2(h,b.type));return new Lc(y?C1:u,g)}evaluate(a){let c,u=null,h=0;for(const g of this.args){if(h++,u=g.evaluate(a),u&&u instanceof Ci&&!u.available&&(c||(c=u),u=null,h===this.args.length))return c;if(null!==u)break}return u}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=["coalesce"];return this.eachChild(c=>{a.push(c.serialize())}),a}}var S3=Lc;class je{constructor(a,c){this.type=c.type,this.bindings=[].concat(a),this.result=c}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const c of this.bindings)a(c[1]);a(this.result)}static parse(a,c){if(a.length<4)return c.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const u=[];for(let g=1;g<a.length-1;g+=2){const y=a[g];if("string"!=typeof y)return c.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return c.error("Variable names must contain only alphanumeric characters or '_'.",g);const b=c.parse(a[g+1],g+1);if(!b)return null;u.push([y,b])}const h=c.parse(a[a.length-1],a.length-1,c.expectedType,u);return h?new je(u,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[c,u]of this.bindings)a.push(c,u.serialize());return a.push(this.result.serialize()),a}}var H2=je;class dn{constructor(a,c,u){this.type=a,this.index=c,this.input=u}static parse(a,c){if(3!==a.length)return c.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const u=c.parse(a[1],1,yt),h=c.parse(a[2],2,t2(c.expectedType||C1));return u&&h?new dn(h.type.itemType,u,h):null}evaluate(a){const c=this.index.evaluate(a),u=this.input.evaluate(a);if(c<0)throw new Z2(`Array index out of bounds: ${c} < 0.`);if(c>=u.length)throw new Z2(`Array index out of bounds: ${c} > ${u.length-1}.`);if(c!==Math.floor(c))throw new Z2(`Array index must be an integer, but found ${c} instead.`);return u[c]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var k2=dn;class I2{constructor(a,c){this.type=Ht,this.needle=a,this.haystack=c}static parse(a,c){if(3!==a.length)return c.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const u=c.parse(a[1],1,C1),h=c.parse(a[2],2,C1);return u&&h?rt(u.type,[Ht,S1,yt,W2,C1])?new I2(u,h):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${gn(u.type)} instead`):null}evaluate(a){const c=this.needle.evaluate(a),u=this.haystack.evaluate(a);if(null==u)return!1;if(!Zr(c,["boolean","string","number","null"]))throw new Z2(`Expected first argument to be of type boolean, string, number or null, but found ${gn(m2(c))} instead.`);if(!Zr(u,["string","array"]))throw new Z2(`Expected second argument to be of type array or string, but found ${gn(m2(u))} instead.`);return u.indexOf(c)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var bo=I2;class R2{constructor(a,c,u){this.type=yt,this.needle=a,this.haystack=c,this.fromIndex=u}static parse(a,c){if(a.length<=2||a.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const u=c.parse(a[1],1,C1),h=c.parse(a[2],2,C1);if(!u||!h)return null;if(!rt(u.type,[Ht,S1,yt,W2,C1]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${gn(u.type)} instead`);if(4===a.length){const g=c.parse(a[3],3,yt);return g?new R2(u,h,g):null}return new R2(u,h)}evaluate(a){const c=this.needle.evaluate(a),u=this.haystack.evaluate(a);if(!Zr(c,["boolean","string","number","null"]))throw new Z2(`Expected first argument to be of type boolean, string, number or null, but found ${gn(m2(c))} instead.`);if(!Zr(u,["string","array"]))throw new Z2(`Expected second argument to be of type array or string, but found ${gn(m2(u))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(a);return u.indexOf(c,h)}return u.indexOf(c)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var D3=R2;class Js{constructor(a,c,u,h,g,y){this.inputType=a,this.type=c,this.input=u,this.cases=h,this.outputs=g,this.otherwise=y}static parse(a,c){if(a.length<5)return c.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return c.error("Expected an even number of arguments.");let u,h;c.expectedType&&"value"!==c.expectedType.kind&&(h=c.expectedType);const g={},y=[];for(let z=2;z<a.length-1;z+=2){let E=a[z];const T=a[z+1];Array.isArray(E)||(E=[E]);const I=c.concat(z);if(0===E.length)return I.error("Expected at least one branch label.");for(const O of E){if("number"!=typeof O&&"string"!=typeof O)return I.error("Branch labels must be numbers or strings.");if("number"==typeof O&&Math.abs(O)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof O&&Math.floor(O)!==O)return I.error("Numeric branch labels must be integer values.");if(u){if(I.checkSubtype(u,m2(O)))return null}else u=m2(O);if(void 0!==g[String(O)])return I.error("Branch labels must be unique.");g[String(O)]=y.length}const N=c.parse(T,z,h);if(!N)return null;h=h||N.type,y.push(N)}const b=c.parse(a[1],1,C1);if(!b)return null;const M=c.parse(a[a.length-1],a.length-1,h);return M?"value"!==b.type.kind&&c.concat(1).checkSubtype(u,b.type)?null:new Js(u,h,b,g,y,M):null}evaluate(a){const c=this.input.evaluate(a);return(m2(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],c=Object.keys(this.cases).sort(),u=[],h={};for(const y of c){const b=h[this.cases[y]];void 0===b?(h[this.cases[y]]=u.length,u.push([this.cases[y],[y]])):u[b][1].push(y)}const g=y=>"number"===this.inputType.kind?Number(y):y;for(const[y,b]of u)a.push(1===b.length?g(b[0]):b.map(g)),a.push(this.outputs[y].serialize());return a.push(this.otherwise.serialize()),a}}var ls=Js;class Ar{constructor(a,c,u){this.type=a,this.branches=c,this.otherwise=u}static parse(a,c){if(a.length<4)return c.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return c.error("Expected an odd number of arguments.");let u;c.expectedType&&"value"!==c.expectedType.kind&&(u=c.expectedType);const h=[];for(let y=1;y<a.length-1;y+=2){const b=c.parse(a[y],y,Ht);if(!b)return null;const M=c.parse(a[y+1],y+1,u);if(!M)return null;h.push([b,M]),u=u||M.type}const g=c.parse(a[a.length-1],a.length-1,u);return g?new Ar(u,h,g):null}evaluate(a){for(const[c,u]of this.branches)if(c.evaluate(a))return u.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[c,u]of this.branches)a(c),a(u);a(this.otherwise)}outputDefined(){return this.branches.every(([a,c])=>c.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild(c=>{a.push(c.serialize())}),a}}var Rt=Ar;class g1{constructor(a,c,u,h){this.type=a,this.input=c,this.beginIndex=u,this.endIndex=h}static parse(a,c){if(a.length<=2||a.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const u=c.parse(a[1],1,C1),h=c.parse(a[2],2,yt);if(!u||!h)return null;if(!rt(u.type,[t2(C1),S1,C1]))return c.error(`Expected first argument to be of type array or string, but found ${gn(u.type)} instead`);if(4===a.length){const g=c.parse(a[3],3,yt);return g?new g1(u.type,u,h,g):null}return new g1(u.type,u,h)}evaluate(a){const c=this.input.evaluate(a),u=this.beginIndex.evaluate(a);if(!Zr(c,["string","array"]))throw new Z2(`Expected first argument to be of type array or string, but found ${gn(m2(c))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(a);return c.slice(u,h)}return c.slice(u)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Wn=g1;function wi(o,a){return"=="===o||"!="===o?"boolean"===a.kind||"string"===a.kind||"number"===a.kind||"null"===a.kind||"value"===a.kind:"string"===a.kind||"number"===a.kind||"value"===a.kind}function Ua(o,a,c,u){return 0===u.compare(a,c)}function l2(o,a,c){const u="=="!==o&&"!="!==o;return class GB{constructor(g,y,b){this.type=Ht,this.lhs=g,this.rhs=y,this.collator=b,this.hasUntypedArgument="value"===g.type.kind||"value"===y.type.kind}static parse(g,y){if(3!==g.length&&4!==g.length)return y.error("Expected two or three arguments.");const b=g[0];let M=y.parse(g[1],1,C1);if(!M)return null;if(!wi(b,M.type))return y.concat(1).error(`"${b}" comparisons are not supported for type '${gn(M.type)}'.`);let z=y.parse(g[2],2,C1);if(!z)return null;if(!wi(b,z.type))return y.concat(2).error(`"${b}" comparisons are not supported for type '${gn(z.type)}'.`);if(M.type.kind!==z.type.kind&&"value"!==M.type.kind&&"value"!==z.type.kind)return y.error(`Cannot compare types '${gn(M.type)}' and '${gn(z.type)}'.`);u&&("value"===M.type.kind&&"value"!==z.type.kind?M=new Ra(z.type,[M]):"value"!==M.type.kind&&"value"===z.type.kind&&(z=new Ra(M.type,[z])));let E=null;if(4===g.length){if("string"!==M.type.kind&&"string"!==z.type.kind&&"value"!==M.type.kind&&"value"!==z.type.kind)return y.error("Cannot use collator to compare non-string types.");if(E=y.parse(g[3],3,Ko),!E)return null}return new GB(M,z,E)}evaluate(g){const y=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(u&&this.hasUntypedArgument){const M=m2(y),z=m2(b);if(M.kind!==z.kind||"string"!==M.kind&&"number"!==M.kind)throw new Z2(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${M.kind}, ${z.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const M=m2(y),z=m2(b);if("string"!==M.kind||"string"!==z.kind)return a(g,y,b)}return this.collator?c(g,y,b,this.collator.evaluate(g)):a(g,y,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[o];return this.eachChild(y=>{g.push(y.serialize())}),g}}}const us=l2("==",function(o,a,c){return a===c},Ua),r2=l2("!=",function(o,a,c){return a!==c},function(o,a,c,u){return!Ua(0,a,c,u)}),ec=l2("<",function(o,a,c){return a<c},function(o,a,c,u){return u.compare(a,c)<0}),tc=l2(">",function(o,a,c){return a>c},function(o,a,c,u){return u.compare(a,c)>0}),P1=l2("<=",function(o,a,c){return a<=c},function(o,a,c,u){return u.compare(a,c)<=0}),A3=l2(">=",function(o,a,c){return a>=c},function(o,a,c,u){return u.compare(a,c)>=0});class Co{constructor(a,c,u,h,g,y){this.type=S1,this.number=a,this.locale=c,this.currency=u,this.unit=h,this.minFractionDigits=g,this.maxFractionDigits=y}static parse(a,c){if(3!==a.length)return c.error("Expected two arguments.");const u=c.parse(a[1],1,yt);if(!u)return null;const h=a[2];if("object"!=typeof h||Array.isArray(h))return c.error("NumberFormat options argument must be an object.");let g=null;if(h.locale&&(g=c.parse(h.locale,1,S1),!g))return null;let y=null;if(h.currency&&(y=c.parse(h.currency,1,S1),!y))return null;let b=null;if(h.unit&&(b=c.parse(h.unit,1,S1),!b))return null;let M=null;if(h["min-fraction-digits"]&&(M=c.parse(h["min-fraction-digits"],1,yt),!M))return null;let z=null;return h["max-fraction-digits"]&&(z=c.parse(h["max-fraction-digits"],1,yt),!z)?null:new Co(u,g,y,b,M,z)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class Qr{constructor(a){this.type=yt,this.input=a}static parse(a,c){if(2!==a.length)return c.error(`Expected 1 argument, but found ${a.length-1} instead.`);const u=c.parse(a[1],1);return u?"array"!==u.type.kind&&"string"!==u.type.kind&&"value"!==u.type.kind?c.error(`Expected argument of type string or array, but found ${gn(u.type)} instead.`):new Qr(u):null}evaluate(a){const c=this.input.evaluate(a);if("string"==typeof c||Array.isArray(c))return c.length;throw new Z2(`Expected value to be of type string or array, but found ${gn(m2(c))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild(c=>{a.push(c.serialize())}),a}}const ja={"==":us,"!=":r2,">":tc,"<":ec,">=":A3,"<=":P1,array:Ra,at:k2,boolean:Ra,case:Rt,coalesce:S3,collator:Dc,format:Sc,image:mo,in:bo,"index-of":D3,interpolate:n1,"interpolate-hcl":n1,"interpolate-lab":n1,length:Qr,let:H2,literal:es,match:ls,number:Ra,"number-format":Co,object:Ra,slice:Wn,step:cs,string:Ra,"to-boolean":u1,"to-color":u1,"to-number":u1,"to-string":u1,var:or,within:rs};function P2(o,[a,c,u,h]){a=a.evaluate(o),c=c.evaluate(o),u=u.evaluate(o);const g=h?h.evaluate(o):1,y=Gl(a,c,u,g);if(y)throw new Z2(y);return new n2(a/255*g,c/255*g,u/255*g,g)}function wo(o,a){return o in a}function Ga(o,a){const c=a[o];return void 0===c?null:c}function F2(o){return{type:o}}Fa.register(ja,{error:[{kind:"error"},[S1],(o,[a])=>{throw new Z2(a.evaluate(o))}],typeof:[S1,[C1],(o,[a])=>gn(m2(a.evaluate(o)))],"to-rgba":[t2(yt,4),[ar],(o,[a])=>a.evaluate(o).toArray()],rgb:[ar,[yt,yt,yt],P2],rgba:[ar,[yt,yt,yt,yt],P2],has:{type:Ht,overloads:[[[S1],(o,[a])=>wo(a.evaluate(o),o.properties())],[[S1,mn],(o,[a,c])=>wo(a.evaluate(o),c.evaluate(o))]]},get:{type:C1,overloads:[[[S1],(o,[a])=>Ga(a.evaluate(o),o.properties())],[[S1,mn],(o,[a,c])=>Ga(a.evaluate(o),c.evaluate(o))]]},"feature-state":[C1,[S1],(o,[a])=>Ga(a.evaluate(o),o.featureState||{})],properties:[mn,[],o=>o.properties()],"geometry-type":[S1,[],o=>o.geometryType()],id:[C1,[],o=>o.id()],zoom:[yt,[],o=>o.globals.zoom],pitch:[yt,[],o=>o.globals.pitch||0],"distance-from-center":[yt,[],o=>o.distanceFromCenter()],"heatmap-density":[yt,[],o=>o.globals.heatmapDensity||0],"line-progress":[yt,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[yt,[],o=>o.globals.skyRadialProgress||0],accumulated:[C1,[],o=>void 0===o.globals.accumulated?null:o.globals.accumulated],"+":[yt,F2(yt),(o,a)=>{let c=0;for(const u of a)c+=u.evaluate(o);return c}],"*":[yt,F2(yt),(o,a)=>{let c=1;for(const u of a)c*=u.evaluate(o);return c}],"-":{type:yt,overloads:[[[yt,yt],(o,[a,c])=>a.evaluate(o)-c.evaluate(o)],[[yt],(o,[a])=>-a.evaluate(o)]]},"/":[yt,[yt,yt],(o,[a,c])=>a.evaluate(o)/c.evaluate(o)],"%":[yt,[yt,yt],(o,[a,c])=>a.evaluate(o)%c.evaluate(o)],ln2:[yt,[],()=>Math.LN2],pi:[yt,[],()=>Math.PI],e:[yt,[],()=>Math.E],"^":[yt,[yt,yt],(o,[a,c])=>Math.pow(a.evaluate(o),c.evaluate(o))],sqrt:[yt,[yt],(o,[a])=>Math.sqrt(a.evaluate(o))],log10:[yt,[yt],(o,[a])=>Math.log(a.evaluate(o))/Math.LN10],ln:[yt,[yt],(o,[a])=>Math.log(a.evaluate(o))],log2:[yt,[yt],(o,[a])=>Math.log(a.evaluate(o))/Math.LN2],sin:[yt,[yt],(o,[a])=>Math.sin(a.evaluate(o))],cos:[yt,[yt],(o,[a])=>Math.cos(a.evaluate(o))],tan:[yt,[yt],(o,[a])=>Math.tan(a.evaluate(o))],asin:[yt,[yt],(o,[a])=>Math.asin(a.evaluate(o))],acos:[yt,[yt],(o,[a])=>Math.acos(a.evaluate(o))],atan:[yt,[yt],(o,[a])=>Math.atan(a.evaluate(o))],min:[yt,F2(yt),(o,a)=>Math.min(...a.map(c=>c.evaluate(o)))],max:[yt,F2(yt),(o,a)=>Math.max(...a.map(c=>c.evaluate(o)))],abs:[yt,[yt],(o,[a])=>Math.abs(a.evaluate(o))],round:[yt,[yt],(o,[a])=>{const c=a.evaluate(o);return c<0?-Math.round(-c):Math.round(c)}],floor:[yt,[yt],(o,[a])=>Math.floor(a.evaluate(o))],ceil:[yt,[yt],(o,[a])=>Math.ceil(a.evaluate(o))],"filter-==":[Ht,[S1,C1],(o,[a,c])=>o.properties()[a.value]===c.value],"filter-id-==":[Ht,[C1],(o,[a])=>o.id()===a.value],"filter-type-==":[Ht,[S1],(o,[a])=>o.geometryType()===a.value],"filter-<":[Ht,[S1,C1],(o,[a,c])=>{const u=o.properties()[a.value],h=c.value;return typeof u==typeof h&&u<h}],"filter-id-<":[Ht,[C1],(o,[a])=>{const c=o.id(),u=a.value;return typeof c==typeof u&&c<u}],"filter->":[Ht,[S1,C1],(o,[a,c])=>{const u=o.properties()[a.value],h=c.value;return typeof u==typeof h&&u>h}],"filter-id->":[Ht,[C1],(o,[a])=>{const c=o.id(),u=a.value;return typeof c==typeof u&&c>u}],"filter-<=":[Ht,[S1,C1],(o,[a,c])=>{const u=o.properties()[a.value],h=c.value;return typeof u==typeof h&&u<=h}],"filter-id-<=":[Ht,[C1],(o,[a])=>{const c=o.id(),u=a.value;return typeof c==typeof u&&c<=u}],"filter->=":[Ht,[S1,C1],(o,[a,c])=>{const u=o.properties()[a.value],h=c.value;return typeof u==typeof h&&u>=h}],"filter-id->=":[Ht,[C1],(o,[a])=>{const c=o.id(),u=a.value;return typeof c==typeof u&&c>=u}],"filter-has":[Ht,[C1],(o,[a])=>a.value in o.properties()],"filter-has-id":[Ht,[],o=>null!==o.id()&&void 0!==o.id()],"filter-type-in":[Ht,[t2(S1)],(o,[a])=>a.value.indexOf(o.geometryType())>=0],"filter-id-in":[Ht,[t2(C1)],(o,[a])=>a.value.indexOf(o.id())>=0],"filter-in-small":[Ht,[S1,t2(C1)],(o,[a,c])=>c.value.indexOf(o.properties()[a.value])>=0],"filter-in-large":[Ht,[S1,t2(C1)],(o,[a,c])=>function(u,h,g,y){for(;g<=y;){const b=g+y>>1;if(h[b]===u)return!0;h[b]>u?y=b-1:g=b+1}return!1}(o.properties()[a.value],c.value,0,c.value.length-1)],all:{type:Ht,overloads:[[[Ht,Ht],(o,[a,c])=>a.evaluate(o)&&c.evaluate(o)],[F2(Ht),(o,a)=>{for(const c of a)if(!c.evaluate(o))return!1;return!0}]]},any:{type:Ht,overloads:[[[Ht,Ht],(o,[a,c])=>a.evaluate(o)||c.evaluate(o)],[F2(Ht),(o,a)=>{for(const c of a)if(c.evaluate(o))return!0;return!1}]]},"!":[Ht,[Ht],(o,[a])=>!a.evaluate(o)],"is-supported-script":[Ht,[S1],(o,[a])=>{const c=o.globals&&o.globals.isSupportedScript;return!c||c(a.evaluate(o))}],upcase:[S1,[S1],(o,[a])=>a.evaluate(o).toUpperCase()],downcase:[S1,[S1],(o,[a])=>a.evaluate(o).toLowerCase()],concat:[S1,F2(C1),(o,a)=>a.map(c=>Ws(c.evaluate(o))).join("")],"resolved-locale":[S1,[Ko],(o,[a])=>a.evaluate(o).resolvedLocale()]});var Jr=ja;function Mo(o){return{result:"success",value:o}}function Cn(o){return{result:"error",value:o}}function nc(o){return"data-driven"===o["property-type"]}function Er(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Mi(o){return!!o.expression&&o.expression.interpolated}function _1(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":null===o?"null":typeof o}function zo(o){return"object"==typeof o&&null!==o&&!Array.isArray(o)}function ds(o){return o}function N2(o,a){const c="color"===a.type,u=o.stops&&"object"==typeof o.stops[0][0],h=u||!(u||void 0!==o.property),g=o.type||(Mi(a)?"exponential":"interval");if(c&&((o=da({},o)).stops&&(o.stops=o.stops.map(z=>[z[0],n2.parse(z[1])])),o.default=n2.parse(o.default?o.default:a.default)),o.colorSpace&&"rgb"!==o.colorSpace&&!z4[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let y,b,M;if("exponential"===g)y=fs;else if("interval"===g)y=lr;else if("categorical"===g){y=ci,b=Object.create(null);for(const z of o.stops)b[z[0]]=z[1];M=typeof o.stops[0][0]}else{if("identity"!==g)throw new Error(`Unknown function type "${g}"`);y=ma}if(u){const z={},E=[];for(let N=0;N<o.stops.length;N++){const O=o.stops[N],j=O[0].zoom;void 0===z[j]&&(z[j]={zoom:j,type:o.type,property:o.property,default:o.default,stops:[]},E.push(j)),z[j].stops.push([O[0].value,O[1]])}const T=[];for(const N of E)T.push([z[N].zoom,N2(z[N],a)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:n1.interpolationFactor.bind(void 0,I),zoomStops:T.map(N=>N[0]),evaluate:({zoom:N},O)=>fs({stops:T,base:o.base},a,N).evaluate(N,O)}}if(h){const z="exponential"===g?{name:"exponential",base:void 0!==o.base?o.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:n1.interpolationFactor.bind(void 0,z),zoomStops:o.stops.map(E=>E[0]),evaluate:({zoom:E})=>y(o,a,E,b,M)}}return{kind:"source",evaluate(z,E){const T=E&&E.properties?E.properties[o.property]:void 0;return void 0===T?Tc(o.default,a.default):y(o,a,T,b,M)}}}function Tc(o,a,c){return void 0!==o?o:void 0!==a?a:void 0!==c?c:void 0}function ci(o,a,c,u,h){return Tc(typeof c===h?u[c]:void 0,o.default,a.default)}function lr(o,a,c){if("number"!==_1(c))return Tc(o.default,a.default);const u=o.stops.length;if(1===u||c<=o.stops[0][0])return o.stops[0][1];if(c>=o.stops[u-1][0])return o.stops[u-1][1];const h=Oa(o.stops.map(g=>g[0]),c);return o.stops[h][1]}function fs(o,a,c){const u=void 0!==o.base?o.base:1;if("number"!==_1(c))return Tc(o.default,a.default);const h=o.stops.length;if(1===h||c<=o.stops[0][0])return o.stops[0][1];if(c>=o.stops[h-1][0])return o.stops[h-1][1];const g=Oa(o.stops.map(E=>E[0]),c),y=function(E,T,I,N){const O=N-I,j=E-I;return 0===O?0:1===T?j/O:(Math.pow(T,j)-1)/(Math.pow(T,O)-1)}(c,u,o.stops[g][0],o.stops[g+1][0]),b=o.stops[g][1],M=o.stops[g+1][1];let z=pa[a.type]||ds;if(o.colorSpace&&"rgb"!==o.colorSpace){const E=z4[o.colorSpace];z=(T,I)=>E.reverse(E.interpolate(E.forward(T),E.forward(I),y))}return"function"==typeof b.evaluate?{evaluate(...E){const T=b.evaluate.apply(void 0,E),I=M.evaluate.apply(void 0,E);if(void 0!==T&&void 0!==I)return z(T,I,y)}}:z(b,M,y)}function ma(o,a,c){return"color"===a.type?c=n2.parse(c):"formatted"===a.type?c=c2.fromString(c.toString()):"resolvedImage"===a.type?c=Ci.fromString(c.toString()):_1(c)===a.type||"enum"===a.type&&a.values[c]||(c=void 0),Tc(c,o.default,a.default)}class H{constructor(a,c){var u;this.expression=a,this._warningHistory={},this._evaluator=new ns,this._defaultValue=c?"color"===(u=c).type&&(zo(u.default)||Array.isArray(u.default))?new n2(0,0,0,0):"color"===u.type?n2.parse(u.default)||null:void 0===u.default?null:u.default:null,this._enumValues=c&&"enum"===c.type?c.values:null}evaluateWithoutErrorHandling(a,c,u,h,g,y,b,M){return this._evaluator.globals=a,this._evaluator.feature=c,this._evaluator.featureState=u,this._evaluator.canonical=h||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=M||null,this.expression.evaluate(this._evaluator)}evaluate(a,c,u,h,g,y,b,M){this._evaluator.globals=a,this._evaluator.feature=c||null,this._evaluator.featureState=u||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=M||null;try{const z=this.expression.evaluate(this._evaluator);if(null==z||"number"==typeof z&&z!=z)return this._defaultValue;if(this._enumValues&&!(z in this._enumValues))throw new Z2(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(z)} instead.`);return z}catch(z){return this._warningHistory[z.message]||(this._warningHistory[z.message]=!0,typeof console<"u"&&console.warn(z.message)),this._defaultValue}}}function k(o){return Array.isArray(o)&&o.length>0&&"string"==typeof o[0]&&o[0]in Jr}function G(o,a){const c=new M3(Jr,[],a?function(h){const g={color:ar,string:S1,number:yt,enum:S1,boolean:Ht,formatted:nn,resolvedImage:Jt};return"array"===h.type?t2(g[h.value]||C1,h.length):g[h.type]}(a):void 0),u=c.parse(o,void 0,void 0,void 0,a&&"string"===a.type?{typeAnnotation:"coerce"}:void 0);return u?Mo(new H(u,a)):Cn(c.errors)}class ge{constructor(a,c){this.kind=a,this._styleExpression=c,this.isStateDependent="constant"!==a&&!as(c.expression)}evaluateWithoutErrorHandling(a,c,u,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(a,c,u,h,g,y)}evaluate(a,c,u,h,g,y){return this._styleExpression.evaluate(a,c,u,h,g,y)}}class Qe{constructor(a,c,u,h){this.kind=a,this.zoomStops=u,this._styleExpression=c,this.isStateDependent="camera"!==a&&!as(c.expression),this.interpolationType=h}evaluateWithoutErrorHandling(a,c,u,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(a,c,u,h,g,y)}evaluate(a,c,u,h,g,y){return this._styleExpression.evaluate(a,c,u,h,g,y)}interpolationFactor(a,c,u){return this.interpolationType?n1.interpolationFactor(this.interpolationType,a,c,u):0}}function Wt(o,a){if("error"===(o=G(o,a)).result)return o;const c=o.value.expression,u=Zs(c);if(!u&&!nc(a))return Cn([new Wr("","data expressions not supported")]);const h=os(c,["zoom","pitch","distance-from-center"]);if(!h&&!Er(a))return Cn([new Wr("","zoom expressions not supported")]);const g=Y2(c);return g||h?g instanceof Wr?Cn([g]):g instanceof n1&&!Mi(a)?Cn([new Wr("",'"interpolate" expressions cannot be used with this property')]):Mo(g?new Qe(u?"camera":"composite",o.value,g.labels,g instanceof n1?g.interpolation:void 0):new ge(u?"constant":"source",o.value)):Cn([new Wr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Dn{constructor(a,c){this._parameters=a,this._specification=c,da(this,N2(this._parameters,this._specification))}static deserialize(a){return new Dn(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Y2(o){let a=null;if(o instanceof H2)a=Y2(o.result);else if(o instanceof S3){for(const c of o.args)if(a=Y2(c),a)break}else(o instanceof cs||o instanceof n1)&&o.input instanceof Fa&&"zoom"===o.input.name&&(a=o);return a instanceof Wr||o.eachChild(c=>{const u=Y2(c);u instanceof Wr?a=u:!a&&u?a=new Wr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&u&&a!==u&&(a=new Wr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}class gt{constructor(a,c,u,h){this.message=(a?`${a}: `:"")+u,h&&(this.identifier=h),null!=c&&c.__line__&&(this.line=c.__line__)}}function X2(o){const a=o.key,c=o.value,u=o.valueSpec||{},h=o.objectElementValidators||{},g=o.style,y=o.styleSpec;let b=[];const M=_1(c);if("object"!==M)return[new gt(a,c,`object expected, ${M} found`)];for(const z in c){const E=z.split(".")[0];let I;h[E]?I=h[E]:u[E]?I=_2:h["*"]?I=h["*"]:u["*"]&&(I=_2),I?b=b.concat(I({key:(a&&`${a}.`)+z,value:c[z],valueSpec:u[E]||u["*"],style:g,styleSpec:y,object:c,objectKey:z},c)):b.push(new gt(a,c[z],`unknown property "${z}"`))}for(const z in u)h[z]||u[z].required&&void 0===u[z].default&&void 0===c[z]&&b.push(new gt(a,c,`missing required property "${z}"`));return b}function E3(o){const a=o.value,c=o.valueSpec,u=o.style,h=o.styleSpec,g=o.key,y=o.arrayElementValidator||_2;if("array"!==_1(a))return[new gt(g,a,`array expected, ${_1(a)} found`)];if(c.length&&a.length!==c.length)return[new gt(g,a,`array length ${c.length} expected, length ${a.length} found`)];if(c["min-length"]&&a.length<c["min-length"])return[new gt(g,a,`array length at least ${c["min-length"]} expected, length ${a.length} found`)];let b={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};h.$version<7&&(b.function=c.function),"object"===_1(c.value)&&(b=c.value);let M=[];for(let z=0;z<a.length;z++)M=M.concat(y({array:a,arrayIndex:z,value:a[z],valueSpec:b,style:u,styleSpec:h,key:`${g}[${z}]`}));return M}function h6(o){const a=o.key,c=o.value,u=o.valueSpec;let h=_1(c);if("number"===h&&c!=c&&(h="NaN"),"number"!==h)return[new gt(a,c,`number expected, ${h} found`)];if("minimum"in u){let g=u.minimum;if("array"===_1(u.minimum)&&(g=u.minimum[o.arrayIndex]),c<g)return[new gt(a,c,`${c} is less than the minimum value ${g}`)]}if("maximum"in u){let g=u.maximum;if("array"===_1(u.maximum)&&(g=u.maximum[o.arrayIndex]),c>g)return[new gt(a,c,`${c} is greater than the maximum value ${g}`)]}return[]}function S4(o){const a=o.valueSpec,c=Jn(o.value.type);let u,h,g,y={};const b="categorical"!==c&&void 0===o.value.property,M=!b,z="array"===_1(o.value.stops)&&"array"===_1(o.value.stops[0])&&"object"===_1(o.value.stops[0][0]),E=X2({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(N){if("identity"===c)return[new gt(N.key,N.value,'identity function may not have a "stops" property')];let O=[];const j=N.value;return O=O.concat(E3({key:N.key,value:j,valueSpec:N.valueSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:T})),"array"===_1(j)&&0===j.length&&O.push(new gt(N.key,j,"array must have at least one stop")),O},default:function(N){return _2({key:N.key,value:N.value,valueSpec:a,style:N.style,styleSpec:N.styleSpec})}}});return"identity"===c&&b&&E.push(new gt(o.key,o.value,'missing required property "property"')),"identity"===c||o.value.stops||E.push(new gt(o.key,o.value,'missing required property "stops"')),"exponential"===c&&o.valueSpec.expression&&!Mi(o.valueSpec)&&E.push(new gt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(M&&!nc(o.valueSpec)?E.push(new gt(o.key,o.value,"property functions not supported")):b&&!Er(o.valueSpec)&&E.push(new gt(o.key,o.value,"zoom functions not supported"))),"categorical"!==c&&!z||void 0!==o.value.property||E.push(new gt(o.key,o.value,'"property" property is required')),E;function T(N){let O=[];const j=N.value,X=N.key;if("array"!==_1(j))return[new gt(X,j,`array expected, ${_1(j)} found`)];if(2!==j.length)return[new gt(X,j,`array length 2 expected, length ${j.length} found`)];if(z){if("object"!==_1(j[0]))return[new gt(X,j,`object expected, ${_1(j[0])} found`)];if(void 0===j[0].zoom)return[new gt(X,j,"object stop key must have zoom")];if(void 0===j[0].value)return[new gt(X,j,"object stop key must have value")];const ae=Jn(j[0].zoom);if("number"!=typeof ae)return[new gt(X,j[0].zoom,"stop zoom values must be numbers")];if(g&&g>ae)return[new gt(X,j[0].zoom,"stop zoom values must appear in ascending order")];ae!==g&&(g=ae,h=void 0,y={}),O=O.concat(X2({key:`${X}[0]`,value:j[0],valueSpec:{zoom:{}},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:h6,value:I}}))}else O=O.concat(I({key:`${X}[0]`,value:j[0],valueSpec:{},style:N.style,styleSpec:N.styleSpec},j));return k(Ia(j[1]))?O.concat([new gt(`${X}[1]`,j[1],"expressions are not allowed in function stops.")]):O.concat(_2({key:`${X}[1]`,value:j[1],valueSpec:a,style:N.style,styleSpec:N.styleSpec}))}function I(N,O){const j=_1(N.value),X=Jn(N.value),ae=null!==N.value?N.value:O;if(u){if(j!==u)return[new gt(N.key,ae,`${j} stop domain type must match previous stop domain type ${u}`)]}else u=j;if("number"!==j&&"string"!==j&&"boolean"!==j&&"number"!=typeof X&&"string"!=typeof X&&"boolean"!=typeof X)return[new gt(N.key,ae,"stop domain value must be a number, string, or boolean")];if("number"!==j&&"categorical"!==c){let pe=`number expected, ${j} found`;return nc(a)&&void 0===c&&(pe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gt(N.key,ae,pe)]}return"categorical"!==c||"number"!==j||"number"==typeof X&&isFinite(X)&&Math.floor(X)===X?"categorical"!==c&&"number"===j&&"number"==typeof X&&"number"==typeof h&&void 0!==h&&X<h?[new gt(N.key,ae,"stop domain values must appear in ascending order")]:(h=X,"categorical"===c&&X in y?[new gt(N.key,ae,"stop domain values must be unique")]:(y[X]=!0,[])):[new gt(N.key,ae,`integer expected, found ${String(X)}`)]}}function V3(o){const a=("property"===o.expressionContext?Wt:G)(Ia(o.value),o.valueSpec);if("error"===a.result)return a.value.map(u=>new gt(`${o.key}${u.key}`,o.value,u.message));const c=a.value.expression||a.value._styleExpression.expression;if("property"===o.expressionContext&&"text-font"===o.propertyKey&&!c.outputDefined())return[new gt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===o.expressionContext&&"layout"===o.propertyType&&!as(c))return[new gt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===o.expressionContext)return b5(c,o);if(o.expressionContext&&0===o.expressionContext.indexOf("cluster")){if(!os(c,["zoom","feature-state"]))return[new gt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===o.expressionContext&&!Zs(c))return[new gt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function b5(o,a){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const h of a.valueSpec.expression.parameters)c.delete(h);if(0===c.size)return[];const u=[];return o instanceof Fa&&c.has(o.name)?[new gt(a.key,a.value,`["${o.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(o.eachChild(h=>{u.push(...b5(h,a))}),u)}function $l(o){const a=o.key,c=o.value,u=o.valueSpec,h=[];return Array.isArray(u.values)?-1===u.values.indexOf(Jn(c))&&h.push(new gt(a,c,`expected one of [${u.values.join(", ")}], ${JSON.stringify(c)} found`)):-1===Object.keys(u.values).indexOf(Jn(c))&&h.push(new gt(a,c,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(c)} found`)),h}function p6(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case"has":return o.length>=2&&"$id"!==o[1]&&"$type"!==o[1];case"in":return o.length>=3&&("string"!=typeof o[1]||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const a of o.slice(1))if(!p6(a)&&"boolean"!=typeof a)return!1;return!0;default:return!0}}function ql(o,a="fill"){if(null==o)return{filter:()=>!0,needGeometry:!1,needFeature:!1};p6(o)||(o=D4(o));const c=o;let u=!0;try{u=function(z){if(!li(z))return z;let E=Ia(z);return kc(E),E=Hc(E),E}(c)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(c,null,2)}\n        `)}const h=Ge[`filter_${a}`],g=G(u,h);let y=null;if("error"===g.result)throw new Error(g.value.map(z=>`${z.key}: ${z.message}`).join(", "));y=(z,E,T)=>g.value.evaluate(z,E,{},T);let b=null,M=null;if(u!==c){const z=G(c,h);if("error"===z.result)throw new Error(z.value.map(E=>`${E.key}: ${E.message}`).join(", "));b=(E,T,I,N,O)=>z.value.evaluate(E,T,{},I,void 0,void 0,N,O),M=!Zs(z.value.expression)}return{filter:y,dynamicFilter:b||void 0,needGeometry:hs(u),needFeature:!!M}}function Hc(o){if(!Array.isArray(o))return o;const a=function(c){if(Wl.has(c[0]))for(let u=1;u<c.length;u++)if(li(c[u]))return!0;return c}(o);return!0===a?a:a.map(c=>Hc(c))}function kc(o){let a=!1;const c=[];if("case"===o[0]){for(let u=1;u<o.length-1;u+=2)a=a||li(o[u]),c.push(o[u+1]);c.push(o[o.length-1])}else if("match"===o[0]){a=a||li(o[1]);for(let u=2;u<o.length-1;u+=2)c.push(o[u+1]);c.push(o[o.length-1])}else if("step"===o[0]){a=a||li(o[1]);for(let u=1;u<o.length-1;u+=2)c.push(o[u+1])}a&&(o.length=0,o.push("any",...c));for(let u=1;u<o.length;u++)kc(o[u])}function li(o){if(!Array.isArray(o))return!1;if("pitch"===(a=o[0])||"distance-from-center"===a)return!0;var a;for(let c=1;c<o.length;c++)if(li(o[c]))return!0;return!1}const Wl=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function hd(o,a){return o<a?-1:o>a?1:0}function hs(o){if(!Array.isArray(o))return!1;if("within"===o[0])return!0;for(let a=1;a<o.length;a++)if(hs(o[a]))return!0;return!1}function D4(o){if(!o)return!0;const a=o[0];return o.length<=1?"any"!==a:"=="===a?wn(o[1],o[2],"=="):"!="===a?Ic(wn(o[1],o[2],"==")):"<"===a||">"===a||"<="===a||">="===a?wn(o[1],o[2],a):"any"===a?(c=o.slice(1),["any"].concat(c.map(D4))):"all"===a?["all"].concat(o.slice(1).map(D4)):"none"===a?["all"].concat(o.slice(1).map(D4).map(Ic)):"in"===a?L3(o[1],o.slice(2)):"!in"===a?Ic(L3(o[1],o.slice(2))):"has"===a?m6(o[1]):"!has"===a?Ic(m6(o[1])):"within"!==a||o;var c}function wn(o,a,c){switch(o){case"$type":return[`filter-type-${c}`,a];case"$id":return[`filter-id-${c}`,a];default:return[`filter-${c}`,o,a]}}function L3(o,a){if(0===a.length)return!1;switch(o){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(c=>typeof c!=typeof a[0])?["filter-in-large",o,["literal",a.sort(hd)]]:["filter-in-small",o,["literal",a]]}}function m6(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Ic(o){return["!",o]}function A4(o){return p6(Ia(o.value))?V3(da({},o,{expressionContext:"filter",valueSpec:o.styleSpec[`filter_${o.layerType||"fill"}`]})):Zl(o)}function Zl(o){const a=o.value,c=o.key;if("array"!==_1(a))return[new gt(c,a,`array expected, ${_1(a)} found`)];const u=o.styleSpec;let h,g=[];if(a.length<1)return[new gt(c,a,"filter array must have at least 1 element")];switch(g=g.concat($l({key:`${c}[0]`,value:a[0],valueSpec:u.filter_operator,style:o.style,styleSpec:o.styleSpec})),Jn(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&"$type"===Jn(a[1])&&g.push(new gt(c,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":3!==a.length&&g.push(new gt(c,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(h=_1(a[1]),"string"!==h&&g.push(new gt(`${c}[1]`,a[1],`string expected, ${h} found`)));for(let y=2;y<a.length;y++)h=_1(a[y]),"$type"===Jn(a[1])?g=g.concat($l({key:`${c}[${y}]`,value:a[y],valueSpec:u.geometry_type,style:o.style,styleSpec:o.styleSpec})):"string"!==h&&"number"!==h&&"boolean"!==h&&g.push(new gt(`${c}[${y}]`,a[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<a.length;y++)g=g.concat(Zl({key:`${c}[${y}]`,value:a[y],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":h=_1(a[1]),2!==a.length?g.push(new gt(c,a,`filter array for "${a[0]}" operator must have 2 elements`)):"string"!==h&&g.push(new gt(`${c}[1]`,a[1],`string expected, ${h} found`));break;case"within":h=_1(a[1]),2!==a.length?g.push(new gt(c,a,`filter array for "${a[0]}" operator must have 2 elements`)):"object"!==h&&g.push(new gt(`${c}[1]`,a[1],`object expected, ${h} found`))}return g}function E4(o,a){const c=o.key,u=o.style,h=o.styleSpec,g=o.value,y=o.objectKey,b=h[`${a}_${o.layerType}`];if(!b)return[];const M=y.match(/^(.*)-transition$/);if("paint"===a&&M&&b[M[1]]&&b[M[1]].transition)return _2({key:c,value:g,valueSpec:h.transition,style:u,styleSpec:h});const z=o.valueSpec||b[y];if(!z)return[new gt(c,g,`unknown property "${y}"`)];let E;if("string"===_1(g)&&nc(z)&&!z.tokens&&(E=/^{([^}]+)}$/.exec(g))){const I=`\`{ "type": "identity", "property": ${E?JSON.stringify(E[1]):'"_"'} }\``;return[new gt(c,g,`"${y}" does not support interpolation syntax\nUse an identity property function instead: ${I}.`)]}const T=[];return"symbol"===o.layerType&&("text-field"===y&&u&&!u.glyphs&&T.push(new gt(c,g,'use of "text-field" requires a style "glyphs" property')),"text-font"===y&&zo(Ia(g))&&"identity"===Jn(g.type)&&T.push(new gt(c,g,'"text-font" does not support identity functions'))),T.concat(_2({key:o.key,value:g,valueSpec:z,style:u,styleSpec:h,expressionContext:"property",propertyType:a,propertyKey:y}))}function V4(o){return E4(o,"paint")}function Yl(o){return E4(o,"layout")}function ur(o){let a=[];const c=o.value,u=o.key,h=o.style,g=o.styleSpec;c.type||c.ref||a.push(new gt(u,c,'either "type" or "ref" is required'));let y=Jn(c.type);const b=Jn(c.ref);if(c.id){const M=Jn(c.id);for(let z=0;z<o.arrayIndex;z++){const E=h.layers[z];Jn(E.id)===M&&a.push(new gt(u,c.id,`duplicate layer id "${c.id}", previously used at line ${E.id.__line__}`))}}if("ref"in c){let M;["type","source","source-layer","filter","layout"].forEach(z=>{z in c&&a.push(new gt(u,c[z],`"${z}" is prohibited for ref layers`))}),h.layers.forEach(z=>{Jn(z.id)===b&&(M=z)}),M?M.ref?a.push(new gt(u,c.ref,"ref cannot reference another ref layer")):y=Jn(M.type):"string"==typeof b&&a.push(new gt(u,c.ref,`ref layer "${b}" not found`))}else if("background"!==y&&"sky"!==y)if(c.source){const M=h.sources&&h.sources[c.source],z=M&&Jn(M.type);M?"vector"===z&&"raster"===y?a.push(new gt(u,c.source,`layer "${c.id}" requires a raster source`)):"raster"===z&&"raster"!==y?a.push(new gt(u,c.source,`layer "${c.id}" requires a vector source`)):"vector"!==z||c["source-layer"]?"raster-dem"===z&&"hillshade"!==y?a.push(new gt(u,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==y||!c.paint||!c.paint["line-gradient"]&&!c.paint["line-trim-offset"]||"geojson"===z&&M.lineMetrics||a.push(new gt(u,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new gt(u,c,`layer "${c.id}" must specify a "source-layer"`)):a.push(new gt(u,c.source,`source "${c.source}" not found`))}else a.push(new gt(u,c,'missing required property "source"'));return a=a.concat(X2({key:u,value:c,valueSpec:g.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>_2({key:`${u}.type`,value:c.type,valueSpec:g.layer.type,style:o.style,styleSpec:o.styleSpec,object:c,objectKey:"type"}),filter:M=>A4(da({layerType:y},M)),layout:M=>X2({layer:c,key:M.key,value:M.value,valueSpec:{},style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":z=>Yl(da({layerType:y},z))}}),paint:M=>X2({layer:c,key:M.key,value:M.value,valueSpec:{},style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":z=>V4(da({layerType:y},z))}})}})),a}function ic(o){const a=o.value,c=o.key,u=_1(a);return"string"!==u?[new gt(c,a,`string expected, ${u} found`)]:[]}const T3={promoteId:function({key:o,value:a}){if("string"===_1(a))return ic({key:o,value:a});{const c=[];for(const u in a)c.push(...ic({key:`${o}.${u}`,value:a[u]}));return c}}};function g2(o){const a=o.value,c=o.key,u=o.styleSpec,h=o.style;if(!a.type)return[new gt(c,a,'"type" is required')];const g=Jn(a.type);let y;switch(g){case"vector":case"raster":case"raster-dem":return y=X2({key:c,value:a,valueSpec:u[`source_${g.replace("-","_")}`],style:o.style,styleSpec:u,objectElementValidators:T3}),y;case"geojson":if(y=X2({key:c,value:a,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:T3}),a.cluster)for(const b in a.clusterProperties){const[M,z]=a.clusterProperties[b],E="string"==typeof M?[M,["accumulated"],["get",b]]:M;y.push(...V3({key:`${c}.${b}.map`,value:z,expressionContext:"cluster-map"})),y.push(...V3({key:`${c}.${b}.reduce`,value:E,expressionContext:"cluster-reduce"}))}return y;case"video":return X2({key:c,value:a,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return X2({key:c,value:a,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new gt(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $l({key:`${c}.type`,value:a.type,valueSpec:{values:g6(u)},style:h,styleSpec:u})}}function g6(o){return o.source.reduce((a,c)=>{const u=o[c];return"enum"===u.type.type&&(a=a.concat(Object.keys(u.type.values))),a},[])}function H3(o){const a=o.value,c=o.styleSpec,u=c.light,h=o.style;let g=[];const y=_1(a);if(void 0===a)return g;if("object"!==y)return g=g.concat([new gt("light",a,`object expected, ${y} found`)]),g;for(const b in a){const M=b.match(/^(.*)-transition$/);g=g.concat(M&&u[M[1]]&&u[M[1]].transition?_2({key:b,value:a[b],valueSpec:c.transition,style:h,styleSpec:c}):u[b]?_2({key:b,value:a[b],valueSpec:u[b],style:h,styleSpec:c}):[new gt(b,a[b],`unknown property "${b}"`)])}return g}function Ui(o){const a=o.value,c=o.key,u=o.style,h=o.styleSpec,g=h.terrain;let y=[];const b=_1(a);if(void 0===a)return y;if("object"!==b)return y=y.concat([new gt("terrain",a,`object expected, ${b} found`)]),y;for(const M in a){const z=M.match(/^(.*)-transition$/);y=y.concat(z&&g[z[1]]&&g[z[1]].transition?_2({key:M,value:a[M],valueSpec:h.transition,style:u,styleSpec:h}):g[M]?_2({key:M,value:a[M],valueSpec:g[M],style:u,styleSpec:h}):[new gt(M,a[M],`unknown property "${M}"`)])}if(a.source){const M=u.sources&&u.sources[a.source],z=M&&Jn(M.type);M?"raster-dem"!==z&&y.push(new gt(c,a.source,`terrain cannot be used with a source of type ${String(z)}, it only be used with a "raster-dem" source type`)):y.push(new gt(c,a.source,`source "${a.source}" not found`))}else y.push(new gt(c,a,'terrain is missing required property "source"'));return y}function _6(o){const a=o.value,c=o.style,u=o.styleSpec,h=u.fog;let g=[];const y=_1(a);if(void 0===a)return g;if("object"!==y)return g=g.concat([new gt("fog",a,`object expected, ${y} found`)]),g;for(const b in a){const M=b.match(/^(.*)-transition$/);g=g.concat(M&&h[M[1]]&&h[M[1]].transition?_2({key:b,value:a[b],valueSpec:u.transition,style:c,styleSpec:u}):h[b]?_2({key:b,value:a[b],valueSpec:h[b],style:c,styleSpec:u}):[new gt(b,a[b],`unknown property "${b}"`)])}return g}const k3={"*":()=>[],array:E3,boolean:function(o){const a=o.value,c=o.key,u=_1(a);return"boolean"!==u?[new gt(c,a,`boolean expected, ${u} found`)]:[]},number:h6,color:function(o){const a=o.key,c=o.value,u=_1(c);return"string"!==u?[new gt(a,c,`color expected, ${u} found`)]:null===x1(c)?[new gt(a,c,`color expected, "${c}" found`)]:[]},enum:$l,filter:A4,function:S4,layer:ur,object:X2,source:g2,light:H3,terrain:Ui,fog:_6,string:ic,formatted:function(o){return 0===ic(o).length?[]:V3(o)},resolvedImage:function(o){return 0===ic(o).length?[]:V3(o)},projection:function(o){const a=o.value,c=o.styleSpec,u=c.projection,h=o.style;let g=[];const y=_1(a);if("object"===y)for(const b in a)g=g.concat(_2({key:b,value:a[b],valueSpec:u[b],style:h,styleSpec:c}));else"string"!==y&&(g=g.concat([new gt("projection",a,`object or string expected, ${y} found`)]));return g}};function _2(o){const a=o.value,c=o.valueSpec,u=o.styleSpec;return c.expression&&zo(Jn(a))?S4(o):c.expression&&k(Ia(a))?V3(o):c.type&&k3[c.type]?k3[c.type](o):X2(da({},o,{valueSpec:c.type?u[c.type]:c}))}function dr(o){const a=o.value,c=o.key,u=ic(o);return u.length||(-1===a.indexOf("{fontstack}")&&u.push(new gt(c,a,'"glyphs" url must include a "{fontstack}" token')),-1===a.indexOf("{range}")&&u.push(new gt(c,a,'"glyphs" url must include a "{range}" token'))),u}function v6(o,a=Ge){return zi(_2({key:"",value:o,valueSpec:a.$root,styleSpec:a,style:o,objectElementValidators:{glyphs:dr,"*":()=>[]}}))}const L4=o=>zi(V4(o)),y6=o=>zi(Yl(o));function zi(o){return o.slice().sort((a,c)=>a.line&&c.line?a.line-c.line:0)}function Xl(o,a){let c=!1;if(a&&a.length)for(const u of a)o.fire(new ua(new Error(u.message))),c=!0;return c}var ps=s1;function s1(o,a,c){var u=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var h=new Int32Array(this.arrayBuffer);o=h[0],this.d=(a=h[1])+2*(c=h[2]);for(var g=0;g<this.d*this.d;g++){var y=h[3+g],b=h[3+g+1];u.push(y===b?null:h.subarray(y,b))}var M=h[3+u.length+1];this.keys=h.subarray(h[3+u.length],M),this.bboxes=h.subarray(M),this.insert=this._insertReadonly}else{this.d=a+2*c;for(var z=0;z<this.d*this.d;z++)u.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=o,this.padding=c,this.scale=a/o,this.uid=0;var E=c/a*o;this.min=-E,this.max=o+E}s1.prototype.insert=function(o,a,c,u,h){this._forEachCell(a,c,u,h,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(u),this.bboxes.push(h)},s1.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},s1.prototype._insertCell=function(o,a,c,u,h,g){this.cells[h].push(g)},s1.prototype.query=function(o,a,c,u,h){var g=this.min,y=this.max;if(o<=g&&a<=g&&y<=c&&y<=u&&!h)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(o,a,c,u,this._queryCell,b,{},h),b},s1.prototype._queryCell=function(o,a,c,u,h,g,y,b){var M=this.cells[h];if(null!==M)for(var z=this.keys,E=this.bboxes,T=0;T<M.length;T++){var I=M[T];if(void 0===y[I]){var N=4*I;(b?b(E[N+0],E[N+1],E[N+2],E[N+3]):o<=E[N+2]&&a<=E[N+3]&&c>=E[N+0]&&u>=E[N+1])?(y[I]=!0,g.push(z[I])):y[I]=!1}}},s1.prototype._forEachCell=function(o,a,c,u,h,g,y,b){for(var M=this._convertToCellCoord(o),z=this._convertToCellCoord(a),E=this._convertToCellCoord(c),T=this._convertToCellCoord(u),I=M;I<=E;I++)for(var N=z;N<=T;N++){var O=this.d*N+I;if((!b||b(this._convertFromCellCoord(I),this._convertFromCellCoord(N),this._convertFromCellCoord(I+1),this._convertFromCellCoord(N+1)))&&h.call(this,o,a,c,u,O,g,y,b))return}},s1.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},s1.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},s1.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,a=3+this.cells.length+1+1,c=0,u=0;u<this.cells.length;u++)c+=this.cells[u].length;var h=new Int32Array(a+c+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var g=a,y=0;y<o.length;y++){var b=o[y];h[3+y]=g,h.set(b,g),g+=b.length}return h[3+o.length]=g,h.set(this.keys,g),h[3+o.length+1]=g+=this.keys.length,h.set(this.bboxes,g),g+=this.bboxes.length,h.buffer};const I3={};function At(o,a,c={}){Object.defineProperty(o,"_classRegistryKey",{value:a,writeable:!1}),I3[a]={klass:o,omit:c.omit||[]}}At(Object,"Object"),ps.serialize=function(o,a){const c=o.toArrayBuffer();return a&&a.push(c),{buffer:c}},ps.deserialize=function(o){return new ps(o.buffer)},Object.defineProperty(ps,"name",{value:"Grid"}),At(ps,"Grid"),At(n2,"Color"),At(Error,"Error"),At(p1,"AJAXError"),At(Ci,"ResolvedImage"),At(Dn,"StylePropertyFunction"),At(H,"StyleExpression",{omit:["_evaluator"]}),At(Qe,"ZoomDependentExpression"),At(ge,"ZoomConstantExpression"),At(Fa,"CompoundExpression",{omit:["_evaluate"]});for(const o in Jr)I3[Jr[o]._classRegistryKey]||At(Jr[o],`Expression${o}`);function x6(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&"ArrayBuffer"===o.constructor.name)}function R3(o){return Ze.ImageBitmap&&o instanceof Ze.ImageBitmap}function P3(o,a){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(x6(o)||R3(o))return a&&a.push(o),o;if(ArrayBuffer.isView(o)){const c=o;return a&&a.push(c.buffer),c}if(o instanceof Ze.ImageData)return a&&a.push(o.data.buffer),o;if(Array.isArray(o)){const c=[];for(const u of o)c.push(P3(u,a));return c}if("object"==typeof o){const c=o.constructor,u=c._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const h=c.serialize?c.serialize(o,a):{};if(!c.serialize){for(const g in o)o.hasOwnProperty(g)&&(I3[u].omit.indexOf(g)>=0||(h[g]=P3(o[g],a)));o instanceof Error&&(h.message=o.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(h.$name=u),h}throw new Error("can't serialize object of type "+typeof o)}function Rc(o){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||x6(o)||R3(o)||ArrayBuffer.isView(o)||o instanceof Ze.ImageData)return o;if(Array.isArray(o))return o.map(Rc);if("object"==typeof o){const a=o.$name||"Object",{klass:c}=I3[a];if(!c)throw new Error(`can't deserialize unregistered class ${a}`);if(c.deserialize)return c.deserialize(o);const u=Object.create(c.prototype);for(const h of Object.keys(o))"$name"!==h&&(u[h]=Rc(o[h]));return u}throw new Error("can't deserialize object of type "+typeof o)}const F3=o=>o>=1536&&o<=1791,b6=o=>o>=1872&&o<=1919,pt=o=>o>=2208&&o<=2303,fn=o=>o>=11904&&o<=12031,A2=o=>o>=12032&&o<=12255,E2=o=>o>=12272&&o<=12287,v2=o=>o>=12288&&o<=12351,N3=o=>o>=12352&&o<=12447,$a=o=>o>=12448&&o<=12543,Vr=o=>o>=12544&&o<=12591,T4=o=>o>=12704&&o<=12735,H4=o=>o>=12736&&o<=12783,Kl=o=>o>=12784&&o<=12799,C5=o=>o>=12800&&o<=13055,Ql=o=>o>=13056&&o<=13311,Si=o=>o>=13312&&o<=19903,ga=o=>o>=19968&&o<=40959,Jl=o=>o>=40960&&o<=42127,rc=o=>o>=42128&&o<=42191,qa=o=>o>=44032&&o<=55215,C6=o=>o>=63744&&o<=64255,O3=o=>o>=64336&&o<=65023,B3=o=>o>=65040&&o<=65055,m=o=>o>=65072&&o<=65103,l=o=>o>=65104&&o<=65135,f=o=>o>=65136&&o<=65279,_=o=>o>=65280&&o<=65519;function x(o){for(const a of o)if(A(a.charCodeAt(0)))return!0;return!1}function w(o){for(const a of o)if(!D(a.charCodeAt(0)))return!1;return!0}function D(o){return!(F3(o)||b6(o)||pt(o)||O3(o)||f(o))}function A(o){return!(746!==o&&747!==o&&(o<4352||!(T4(o)||Vr(o)||m(o)&&!(o>=65097&&o<=65103)||C6(o)||Ql(o)||fn(o)||H4(o)||!(!v2(o)||o>=12296&&o<=12305||o>=12308&&o<=12319||12336===o)||Si(o)||ga(o)||C5(o)||(a=o,a>=12592&&a<=12687)||(a=>a>=43360&&a<=43391)(o)||(a=>a>=55216&&a<=55295)(o)||(a=>a>=4352&&a<=4607)(o)||qa(o)||N3(o)||E2(o)||(a=>a>=12688&&a<=12703)(o)||A2(o)||Kl(o)||$a(o)&&12540!==o||!(!_(o)||65288===o||65289===o||65293===o||o>=65306&&o<=65310||65339===o||65341===o||65343===o||o>=65371&&o<=65503||65507===o||o>=65512&&o<=65519)||!(!l(o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||(a=>a>=5120&&a<=5759)(o)||(a=>a>=6320&&a<=6399)(o)||B3(o)||(a=>a>=19904&&a<=19967)(o)||Jl(o)||rc(o))));var a}function L(o){return!(A(o)||(a=o,(c=a)>=128&&c<=255&&(167===a||169===a||174===a||177===a||188===a||189===a||190===a||215===a||247===a)||(c=>c>=8192&&c<=8303)(a)&&(8214===a||8224===a||8225===a||8240===a||8241===a||8251===a||8252===a||8258===a||8263===a||8264===a||8265===a||8273===a)||(c=>c>=8448&&c<=8527)(a)||(c=>c>=8528&&c<=8591)(a)||(c=>c>=8960&&c<=9215)(a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||9003===a||a>=9085&&a<=9114||a>=9150&&a<=9165||9167===a||a>=9169&&a<=9179||a>=9186&&a<=9215)||(c=>c>=9216&&c<=9279)(a)&&9251!==a||(c=>c>=9280&&c<=9311)(a)||(c=>c>=9312&&c<=9471)(a)||(c=>c>=9632&&c<=9727)(a)||(c=>c>=9728&&c<=9983)(a)&&!(a>=9754&&a<=9759)||(c=>c>=11008&&c<=11263)(a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||v2(a)||$a(a)||(c=>c>=57344&&c<=63743)(a)||m(a)||l(a)||_(a)||8734===a||8756===a||8757===a||a>=9984&&a<=10087||a>=10102&&a<=10131||65532===a||65533===a));var a,c}function P(o){return o>=1424&&o<=2303||O3(o)||f(o)}function R(o,a){return!(!a&&P(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||(c=o,c>=6016&&c<=6143));var c}function B(o){for(const a of o)if(P(a.charCodeAt(0)))return!0;return!1}const Y="deferred",Q="loading",te="loaded";let J=null,ee="unavailable",q=null;const oe=function(o){o&&"string"==typeof o&&o.indexOf("NetworkError")>-1&&(ee="error"),J&&J(o)};function se(){ce.fire(new yn("pluginStateChange",{pluginStatus:ee,pluginURL:q}))}const ce=new qr,ye=function(){return ee},ve=function(){if(ee!==Y||!q)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ee=Q,se(),q&&ho({url:q},o=>{o?oe(o):(ee=te,se())})},Ce={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ee===te||null!=Ce.applyArabicShaping,isLoading:()=>ee===Q,setState(o){ee=o.pluginStatus,q=o.pluginURL},isParsed:()=>null!=Ce.applyArabicShaping&&null!=Ce.processBidirectionalText&&null!=Ce.processStyledBidirectionalText,getPluginURL:()=>q};class Se{constructor(a,c){this.zoom=a,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.transition=c.transition,this.pitch=c.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(a){return function(c,u){for(const h of c)if(!R(h.charCodeAt(0),u))return!1;return!0}(a,Ce.isLoaded())}}class Ie{constructor(a,c){this.property=a,this.value=c,this.expression=function(u,h){if(zo(u))return new Dn(u,h);if(k(u)){const g=Wt(u,h);if("error"===g.result)throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=u;return"string"==typeof u&&"color"===h.type&&(g=n2.parse(u)),{kind:"constant",evaluate:()=>g}}}(void 0===c?a.specification.default:c,a.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(a,c,u){return this.property.possiblyEvaluate(this,a,c,u)}}class Pe{constructor(a){this.property=a,this.value=new Ie(a,void 0)}transitioned(a,c){return new Le(this.property,this.value,c,l1({},a.transition,this.transition),a.now)}untransitioned(){return new Le(this.property,this.value,null,{},0)}}class mt{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return s2(this._values[a].value.value)}setValue(a,c){this._values.hasOwnProperty(a)||(this._values[a]=new Pe(this._values[a].property)),this._values[a].value=new Ie(this._values[a].property,null===c?void 0:s2(c))}getTransition(a){return s2(this._values[a].transition)}setTransition(a,c){this._values.hasOwnProperty(a)||(this._values[a]=new Pe(this._values[a].property)),this._values[a].transition=s2(c)||void 0}serialize(){const a={};for(const c of Object.keys(this._values)){const u=this.getValue(c);void 0!==u&&(a[c]=u);const h=this.getTransition(c);void 0!==h&&(a[`${c}-transition`]=h)}return a}transitioned(a,c){const u=new it(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].transitioned(a,c._values[h]);return u}untransitioned(){const a=new it(this._properties);for(const c of Object.keys(this._values))a._values[c]=this._values[c].untransitioned();return a}}class Le{constructor(a,c,u,h,g){const y=h.delay||0,b=h.duration||0;g=g||0,this.property=a,this.value=c,this.begin=g+y,this.end=this.begin+b,a.specification.transition&&(h.delay||h.duration)&&(this.prior=u)}possiblyEvaluate(a,c,u){const h=a.now||0,g=this.value.possiblyEvaluate(a,c,u),y=this.prior;if(y){if(h>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(h<this.begin)return y.possiblyEvaluate(a,c,u);{const b=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(a,c,u),g,ca(b))}}return g}}class it{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,c,u){const h=new Fe(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(a,c,u);return h}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Be{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return s2(this._values[a].value)}setValue(a,c){this._values[a]=new Ie(this._values[a].property,null===c?void 0:s2(c))}serialize(){const a={};for(const c of Object.keys(this._values)){const u=this.getValue(c);void 0!==u&&(a[c]=u)}return a}possiblyEvaluate(a,c,u){const h=new Fe(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(a,c,u);return h}}class at{constructor(a,c,u){this.property=a,this.value=c,this.parameters=u}isConstant(){return"constant"===this.value.kind}constantOr(a){return"constant"===this.value.kind?this.value.value:a}evaluate(a,c,u,h){return this.property.evaluate(this.value,this.parameters,a,c,u,h)}}class Fe{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Ae{constructor(a){this.specification=a}possiblyEvaluate(a,c){return a.expression.evaluate(c)}interpolate(a,c,u){const h=pa[this.specification.type];return h?h(a,c,u):a}}class Ne{constructor(a,c){this.specification=a,this.overrides=c}possiblyEvaluate(a,c,u,h){return new at(this,"constant"===a.expression.kind||"camera"===a.expression.kind?{kind:"constant",value:a.expression.evaluate(c,null,{},u,h)}:a.expression,c)}interpolate(a,c,u){if("constant"!==a.value.kind||"constant"!==c.value.kind)return a;if(void 0===a.value.value||void 0===c.value.value)return new at(this,{kind:"constant",value:void 0},a.parameters);const h=pa[this.specification.type];return h?new at(this,{kind:"constant",value:h(a.value.value,c.value.value,u)},a.parameters):a}evaluate(a,c,u,h,g,y){return"constant"===a.kind?a.value:a.evaluate(c,u,h,g,y)}}class ot{constructor(a){this.specification=a}possiblyEvaluate(a,c,u,h){return!!a.expression.evaluate(c,null,{},u,h)}interpolate(){return!1}}class dt{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const c=new Se(0,{});for(const u in a){const h=a[u];h.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new Ie(h,void 0),y=this.defaultTransitionablePropertyValues[u]=new Pe(h);this.defaultTransitioningPropertyValues[u]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate(c)}}}function kt(o,a){return 256*(o=d1(Math.floor(o),0,255))+d1(Math.floor(a),0,255)}At(Ne,"DataDrivenProperty"),At(Ae,"DataConstantProperty"),At(ot,"ColorRampProperty");const A1={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Et{constructor(a,c){this._structArray=a,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Mt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,c){return a._trim(),c&&(a.isTransferred=!0,c.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const c=Object.create(this.prototype);return c.arrayBuffer=a.arrayBuffer,c.length=a.length,c.capacity=a.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Pt(o,a=1){let c=0,u=0;return{members:o.map(h=>{const g=A1[h.type].BYTES_PER_ELEMENT,y=c=N1(c,Math.max(a,g)),b=h.components||1;return u=Math.max(u,g),c+=g*b,{name:h.name,type:h.type,components:b,offset:y}}),size:N1(c,Math.max(u,a)),alignment:a}}function N1(o,a){return Math.ceil(o/a)*a}class Nt extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c){const u=this.length;return this.resize(u+1),this.emplace(u,a,c)}emplace(a,c,u){const h=2*a;return this.int16[h+0]=c,this.int16[h+1]=u,a}}Nt.prototype.bytesPerElement=4,At(Nt,"StructArrayLayout2i4");class hn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u){const h=this.length;return this.resize(h+1),this.emplace(h,a,c,u)}emplace(a,c,u,h){const g=3*a;return this.int16[g+0]=c,this.int16[g+1]=u,this.int16[g+2]=h,a}}hn.prototype.bytesPerElement=6,At(hn,"StructArrayLayout3i6");class _n extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=4*a;return this.int16[y+0]=c,this.int16[y+1]=u,this.int16[y+2]=h,this.int16[y+3]=g,a}}_n.prototype.bytesPerElement=8,At(_n,"StructArrayLayout4i8");class Mn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,b){const M=this.length;return this.resize(M+1),this.emplace(M,a,c,u,h,g,y,b)}emplace(a,c,u,h,g,y,b,M){const z=6*a,E=12*a,T=3*a;return this.int16[z+0]=c,this.int16[z+1]=u,this.uint8[E+4]=h,this.uint8[E+5]=g,this.uint8[E+6]=y,this.uint8[E+7]=b,this.float32[T+2]=M,a}}Mn.prototype.bytesPerElement=12,At(Mn,"StructArrayLayout2i4ub1f12");class kn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=4*a;return this.float32[y+0]=c,this.float32[y+1]=u,this.float32[y+2]=h,this.float32[y+3]=g,a}}kn.prototype.bytesPerElement=16,At(kn,"StructArrayLayout4f16");class a2 extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,a,c,u,h,g)}emplace(a,c,u,h,g,y){const b=6*a,M=3*a;return this.uint16[b+0]=c,this.uint16[b+1]=u,this.uint16[b+2]=h,this.uint16[b+3]=g,this.float32[M+2]=y,a}}a2.prototype.bytesPerElement=12,At(a2,"StructArrayLayout4ui1f12");class Di extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=4*a;return this.uint16[y+0]=c,this.uint16[y+1]=u,this.uint16[y+2]=h,this.uint16[y+3]=g,a}}Di.prototype.bytesPerElement=8,At(Di,"StructArrayLayout4ui8");class fr extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,c,u,h,g,y)}emplace(a,c,u,h,g,y,b){const M=6*a;return this.int16[M+0]=c,this.int16[M+1]=u,this.int16[M+2]=h,this.int16[M+3]=g,this.int16[M+4]=y,this.int16[M+5]=b,a}}fr.prototype.bytesPerElement=12,At(fr,"StructArrayLayout6i12");class ms extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,b,M,z,E,T,I){const N=this.length;return this.resize(N+1),this.emplace(N,a,c,u,h,g,y,b,M,z,E,T,I)}emplace(a,c,u,h,g,y,b,M,z,E,T,I,N){const O=12*a;return this.int16[O+0]=c,this.int16[O+1]=u,this.int16[O+2]=h,this.int16[O+3]=g,this.uint16[O+4]=y,this.uint16[O+5]=b,this.uint16[O+6]=M,this.uint16[O+7]=z,this.int16[O+8]=E,this.int16[O+9]=T,this.int16[O+10]=I,this.int16[O+11]=N,a}}ms.prototype.bytesPerElement=24,At(ms,"StructArrayLayout4i4ui4i24");class On extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,c,u,h,g,y)}emplace(a,c,u,h,g,y,b){const M=10*a,z=5*a;return this.int16[M+0]=c,this.int16[M+1]=u,this.int16[M+2]=h,this.float32[z+2]=g,this.float32[z+3]=y,this.float32[z+4]=b,a}}On.prototype.bytesPerElement=20,At(On,"StructArrayLayout3i3f20");class An extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const c=this.length;return this.resize(c+1),this.emplace(c,a)}emplace(a,c){return this.uint32[1*a+0]=c,a}}An.prototype.bytesPerElement=4,At(An,"StructArrayLayout1ul4");class cn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,b,M,z,E,T,I,N){const O=this.length;return this.resize(O+1),this.emplace(O,a,c,u,h,g,y,b,M,z,E,T,I,N)}emplace(a,c,u,h,g,y,b,M,z,E,T,I,N,O){const j=20*a,X=10*a;return this.int16[j+0]=c,this.int16[j+1]=u,this.int16[j+2]=h,this.int16[j+3]=g,this.int16[j+4]=y,this.float32[X+3]=b,this.float32[X+4]=M,this.float32[X+5]=z,this.float32[X+6]=E,this.int16[j+14]=T,this.uint32[X+8]=I,this.uint16[j+18]=N,this.uint16[j+19]=O,a}}cn.prototype.bytesPerElement=40,At(cn,"StructArrayLayout5i4f1i1ul2ui40");class zn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,b){const M=this.length;return this.resize(M+1),this.emplace(M,a,c,u,h,g,y,b)}emplace(a,c,u,h,g,y,b,M){const z=8*a;return this.int16[z+0]=c,this.int16[z+1]=u,this.int16[z+2]=h,this.int16[z+4]=g,this.int16[z+5]=y,this.int16[z+6]=b,this.int16[z+7]=M,a}}zn.prototype.bytesPerElement=16,At(zn,"StructArrayLayout3i2i2i16");class Ai extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,a,c,u,h,g)}emplace(a,c,u,h,g,y){const b=4*a,M=8*a;return this.float32[b+0]=c,this.float32[b+1]=u,this.float32[b+2]=h,this.int16[M+6]=g,this.int16[M+7]=y,a}}Ai.prototype.bytesPerElement=16,At(Ai,"StructArrayLayout2f1f2i16");class En extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=12*a,b=3*a;return this.uint8[y+0]=c,this.uint8[y+1]=u,this.float32[b+1]=h,this.float32[b+2]=g,a}}En.prototype.bytesPerElement=12,At(En,"StructArrayLayout2ub2f12");class K2 extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u){const h=this.length;return this.resize(h+1),this.emplace(h,a,c,u)}emplace(a,c,u,h){const g=3*a;return this.float32[g+0]=c,this.float32[g+1]=u,this.float32[g+2]=h,a}}K2.prototype.bytesPerElement=12,At(K2,"StructArrayLayout3f12");class ui extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u){const h=this.length;return this.resize(h+1),this.emplace(h,a,c,u)}emplace(a,c,u,h){const g=3*a;return this.uint16[g+0]=c,this.uint16[g+1]=u,this.uint16[g+2]=h,a}}ui.prototype.bytesPerElement=6,At(ui,"StructArrayLayout3ui6");class Wa extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,b,M,z,E,T,I,N,O,j,X,ae,pe,ne,fe,_e){const me=this.length;return this.resize(me+1),this.emplace(me,a,c,u,h,g,y,b,M,z,E,T,I,N,O,j,X,ae,pe,ne,fe,_e)}emplace(a,c,u,h,g,y,b,M,z,E,T,I,N,O,j,X,ae,pe,ne,fe,_e,me){const Ve=30*a,Te=15*a,We=60*a;return this.int16[Ve+0]=c,this.int16[Ve+1]=u,this.int16[Ve+2]=h,this.float32[Te+2]=g,this.float32[Te+3]=y,this.uint16[Ve+8]=b,this.uint16[Ve+9]=M,this.uint32[Te+5]=z,this.uint32[Te+6]=E,this.uint32[Te+7]=T,this.uint16[Ve+16]=I,this.uint16[Ve+17]=N,this.uint16[Ve+18]=O,this.float32[Te+10]=j,this.float32[Te+11]=X,this.uint8[We+48]=ae,this.uint8[We+49]=pe,this.uint8[We+50]=ne,this.uint32[Te+13]=fe,this.int16[Ve+28]=_e,this.uint8[We+58]=me,a}}Wa.prototype.bytesPerElement=60,At(Wa,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class gs extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,b,M,z,E,T,I,N,O,j,X,ae,pe,ne,fe,_e,me,Ve,Te,We,ct,ze,Xe,et,lt){const ft=this.length;return this.resize(ft+1),this.emplace(ft,a,c,u,h,g,y,b,M,z,E,T,I,N,O,j,X,ae,pe,ne,fe,_e,me,Ve,Te,We,ct,ze,Xe,et,lt)}emplace(a,c,u,h,g,y,b,M,z,E,T,I,N,O,j,X,ae,pe,ne,fe,_e,me,Ve,Te,We,ct,ze,Xe,et,lt,ft){const Oe=38*a,_t=19*a;return this.int16[Oe+0]=c,this.int16[Oe+1]=u,this.int16[Oe+2]=h,this.float32[_t+2]=g,this.float32[_t+3]=y,this.int16[Oe+8]=b,this.int16[Oe+9]=M,this.int16[Oe+10]=z,this.int16[Oe+11]=E,this.int16[Oe+12]=T,this.int16[Oe+13]=I,this.uint16[Oe+14]=N,this.uint16[Oe+15]=O,this.uint16[Oe+16]=j,this.uint16[Oe+17]=X,this.uint16[Oe+18]=ae,this.uint16[Oe+19]=pe,this.uint16[Oe+20]=ne,this.uint16[Oe+21]=fe,this.uint16[Oe+22]=_e,this.uint16[Oe+23]=me,this.uint16[Oe+24]=Ve,this.uint16[Oe+25]=Te,this.uint16[Oe+26]=We,this.uint16[Oe+27]=ct,this.uint16[Oe+28]=ze,this.uint32[_t+15]=Xe,this.float32[_t+16]=et,this.float32[_t+17]=lt,this.float32[_t+18]=ft,a}}gs.prototype.bytesPerElement=76,At(gs,"StructArrayLayout3i2f6i15ui1ul3f76");class Lr extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const c=this.length;return this.resize(c+1),this.emplace(c,a)}emplace(a,c){return this.float32[1*a+0]=c,a}}Lr.prototype.bytesPerElement=4,At(Lr,"StructArrayLayout1f4");class Tr extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,a,c,u,h,g)}emplace(a,c,u,h,g,y){const b=5*a;return this.float32[b+0]=c,this.float32[b+1]=u,this.float32[b+2]=h,this.float32[b+3]=g,this.float32[b+4]=y,a}}Tr.prototype.bytesPerElement=20,At(Tr,"StructArrayLayout5f20");class Za extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=6*a;return this.uint32[3*a+0]=c,this.uint16[y+2]=u,this.uint16[y+3]=h,this.uint16[y+4]=g,a}}Za.prototype.bytesPerElement=12,At(Za,"StructArrayLayout1ul3ui12");class So extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c){const u=this.length;return this.resize(u+1),this.emplace(u,a,c)}emplace(a,c,u){const h=2*a;return this.uint16[h+0]=c,this.uint16[h+1]=u,a}}So.prototype.bytesPerElement=4,At(So,"StructArrayLayout2ui4");class Do extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const c=this.length;return this.resize(c+1),this.emplace(c,a)}emplace(a,c){return this.uint16[1*a+0]=c,a}}Do.prototype.bytesPerElement=2,At(Do,"StructArrayLayout1ui2");class Pc extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c){const u=this.length;return this.resize(u+1),this.emplace(u,a,c)}emplace(a,c,u){const h=2*a;return this.float32[h+0]=c,this.float32[h+1]=u,a}}Pc.prototype.bytesPerElement=8,At(Pc,"StructArrayLayout2f8");class e0 extends Et{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}e0.prototype.size=40;class ac extends cn{get(a){return new e0(this,a)}}At(ac,"CollisionBoxArray");class pd extends Et{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(a){this._structArray.uint8[this._pos1+49]=a}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(a){this._structArray.uint8[this._pos1+50]=a}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(a){this._structArray.uint32[this._pos4+13]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(a){this._structArray.uint8[this._pos1+58]=a}}pd.prototype.size=60;class w5 extends Wa{get(a){return new pd(this,a)}}At(w5,"PlacedSymbolArray");class M5 extends Et{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(a){this._structArray.uint32[this._pos4+15]=a}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}M5.prototype.size=76;class U3 extends gs{get(a){return new M5(this,a)}}At(U3,"SymbolInstanceArray");class md extends Lr{getoffsetX(a){return this.float32[1*a+0]}}At(md,"GlyphOffsetArray");class Vt extends Nt{getx(a){return this.int16[2*a+0]}gety(a){return this.int16[2*a+1]}}At(Vt,"SymbolLineVertexArray");class w6 extends Et{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}w6.prototype.size=12;class gd extends Za{get(a){return new w6(this,a)}}At(gd,"FeatureIndexArray");class z5 extends So{geta_centroid_pos0(a){return this.uint16[2*a+0]}geta_centroid_pos1(a){return this.uint16[2*a+1]}}At(z5,"FillExtrusionCentroidArray");const Fc=Pt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),k4=Pt([{name:"a_dash",components:4,type:"Uint16"}]);var Ya={},I4={get exports(){return Ya},set exports(o){Ya=o}},M6={};({get exports(){return M6},set exports(o){M6=o}}).exports=function(o,a){var c,u,h,g,y,b,M,z;for(u=o.length-(c=3&o.length),h=a,y=3432918353,b=461845907,z=0;z<u;)M=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24,++z,h=27492+(65535&(g=5*(65535&(h=(h^=M=(65535&(M=(M=(65535&M)*y+(((M>>>16)*y&65535)<<16)&4294967295)<<15|M>>>17))*b+(((M>>>16)*b&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(M=0,c){case 3:M^=(255&o.charCodeAt(z+2))<<16;case 2:M^=(255&o.charCodeAt(z+1))<<8;case 1:h^=M=(65535&(M=(M=(65535&(M^=255&o.charCodeAt(z)))*y+(((M>>>16)*y&65535)<<16)&4294967295)<<15|M>>>17))*b+(((M>>>16)*b&65535)<<16)&4294967295}return h^=o.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var t0={};({get exports(){return t0},set exports(o){t0=o}}).exports=function(o,a){for(var c,u=o.length,h=a^u,g=0;u>=4;)c=1540483477*(65535&(c=255&o.charCodeAt(g)|(255&o.charCodeAt(++g))<<8|(255&o.charCodeAt(++g))<<16|(255&o.charCodeAt(++g))<<24))+((1540483477*(c>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),u-=4,++g;switch(u){case 3:h^=(255&o.charCodeAt(g+2))<<16;case 2:h^=(255&o.charCodeAt(g+1))<<8;case 1:h=1540483477*(65535&(h^=255&o.charCodeAt(g)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var j3=M6,Rb=t0;I4.exports=j3,Ya.murmur3=j3,Ya.murmur2=Rb;class z6{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,c,u,h){this.ids.push(vt(a)),this.positions.push(c,u,h)}getPositions(a){const c=vt(a);let u=0,h=this.ids.length-1;for(;u<h;){const y=u+h>>1;this.ids[y]>=c?h=y:u=y+1}const g=[];for(;this.ids[u]===c;)g.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return g}static serialize(a,c){const u=new Float64Array(a.ids),h=new Uint32Array(a.positions);return _d(u,h,0,u.length-1),c&&c.push(u.buffer,h.buffer),{ids:u,positions:h}}static deserialize(a){const c=new z6;return c.ids=a.ids,c.positions=a.positions,c.indexed=!0,c}}function vt(o){const a=+o;return!isNaN(a)&&Number.MIN_SAFE_INTEGER<=a&&a<=Number.MAX_SAFE_INTEGER?a:Ya(String(o))}function _d(o,a,c,u){for(;c<u;){const h=o[c+u>>1];let g=c-1,y=u+1;for(;;){do{g++}while(o[g]<h);do{y--}while(o[y]>h);if(g>=y)break;S5(o,g,y),S5(a,3*g,3*y),S5(a,3*g+1,3*y+1),S5(a,3*g+2,3*y+2)}y-c<u-y?(_d(o,a,c,y),c=y+1):(_d(o,a,y+1,u),u=y)}}function S5(o,a,c){const u=o[a];o[a]=o[c],o[c]=u}At(z6,"FeaturePositionMap");class Nc{constructor(a){this.gl=a.gl,this.initialized=!1}fetchUniformLocation(a,c){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(a,c),this.initialized=!0),!!this.location}}class D5 extends Nc{constructor(a){super(a),this.current=0}set(a,c,u){this.fetchUniformLocation(a,c)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class nm extends Nc{constructor(a){super(a),this.current=[0,0,0,0]}set(a,c,u){this.fetchUniformLocation(a,c)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class im extends Nc{constructor(a){super(a),this.current=n2.transparent}set(a,c,u){this.fetchUniformLocation(a,c)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const Pb=new Float32Array(16),n0=new Float32Array(9),Fb=new Float32Array(4);function vd(o){return[kt(255*o.r,255*o.g),kt(255*o.b,255*o.a)]}class y2{constructor(a,c,u){this.value=a,this.uniformNames=c.map(h=>`u_${h}`),this.type=u}setUniform(a,c,u,h,g){c.set(a,g,h.constantOr(this.value))}getBinding(a,c){return"color"===this.type?new im(a):new D5(a)}}class Oc{constructor(a,c){this.uniformNames=c.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(a){this.pixelRatio=a.pixelRatio||1,this.pattern=a.tl.concat(a.br)}setUniform(a,c,u,h,g){const y="u_pattern"===g||"u_dash"===g?this.pattern:"u_pixel_ratio"===g?this.pixelRatio:null;y&&c.set(a,g,y)}getBinding(a,c){return"u_pattern"===c||"u_dash"===c?new nm(a):new D5(a)}}class _a{constructor(a,c,u,h){this.expression=a,this.type=u,this.maxValue=0,this.paintVertexAttributes=c.map(g=>({name:`a_${g}`,type:"Float32",components:"color"===u?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(a,c,u,h,g,y){const b=this.paintVertexArray.length,M=this.expression.evaluate(new Se(0),c,{},g,h,y);this.paintVertexArray.resize(a),this._setPaintValue(b,a,M)}updatePaintArray(a,c,u,h,g){const y=this.expression.evaluate({zoom:0},u,h,void 0,g);this._setPaintValue(a,c,y)}_setPaintValue(a,c,u){if("color"===this.type){const h=vd(u);for(let g=a;g<c;g++)this.paintVertexArray.emplace(g,h[0],h[1])}else{for(let h=a;h<c;h++)this.paintVertexArray.emplace(h,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ao{constructor(a,c,u,h,g,y){this.expression=a,this.uniformNames=c.map(b=>`u_${b}_t`),this.type=u,this.useIntegerZoom=h,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=c.map(b=>({name:`a_${b}`,type:"Float32",components:"color"===u?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(a,c,u,h,g,y){const b=this.expression.evaluate(new Se(this.zoom),c,{},g,h,y),M=this.expression.evaluate(new Se(this.zoom+1),c,{},g,h,y),z=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(z,a,b,M)}updatePaintArray(a,c,u,h,g){const y=this.expression.evaluate({zoom:this.zoom},u,h,void 0,g),b=this.expression.evaluate({zoom:this.zoom+1},u,h,void 0,g);this._setPaintValue(a,c,y,b)}_setPaintValue(a,c,u,h){if("color"===this.type){const g=vd(u),y=vd(h);for(let b=a;b<c;b++)this.paintVertexArray.emplace(b,g[0],g[1],y[0],y[1])}else{for(let g=a;g<c;g++)this.paintVertexArray.emplace(g,u,h);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(h))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,c,u,h,g){const y=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=d1(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);c.set(a,g,b)}getBinding(a,c){return new D5(a)}}class di{constructor(a,c,u,h,g){this.expression=a,this.layerId=g,this.paintVertexAttributes=("array"===u?k4:Fc).members;for(let y=0;y<c.length;++y);this.paintVertexArray=new h}populatePaintArray(a,c,u){const h=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValues(h,a,c.patterns&&c.patterns[this.layerId],u)}updatePaintArray(a,c,u,h,g,y){this._setPaintValues(a,c,u.patterns&&u.patterns[this.layerId],y)}_setPaintValues(a,c,u,h){if(!h||!u)return;const g=h[u];if(!g)return;const{tl:y,br:b,pixelRatio:M}=g;for(let z=a;z<c;z++)this.paintVertexArray.emplace(z,y[0],y[1],b[0],b[1],M)}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ea{constructor(a,c,u=(()=>!0)){this.binders={},this._buffers=[];const h=[];for(const g in a.paint._values){if(!u(g))continue;const y=a.paint.get(g);if(!(y instanceof at&&nc(y.property.specification)))continue;const b=r0(g,a.type),M=y.value,z=y.property.specification.type,E=!!y.property.useIntegerZoom,T="line-dasharray"===g||g.endsWith("pattern"),I="line-dasharray"===g&&"constant"!==a.layout.get("line-cap").value.kind;if("constant"!==M.kind||I)if("source"===M.kind||I||T){const N=yd(g,z,"source");this.binders[g]=T?new di(M,b,z,N,a.id):new _a(M,b,z,N),h.push(`/a_${g}`)}else{const N=yd(g,z,"composite");this.binders[g]=new Ao(M,b,z,E,c,N),h.push(`/z_${g}`)}else this.binders[g]=T?new Oc(M.value,b):new y2(M.value,b,z),h.push(`/u_${g}`)}this.cacheKey=h.sort().join("")}getMaxValue(a){const c=this.binders[a];return c instanceof _a||c instanceof Ao?c.maxValue:0}populatePaintArrays(a,c,u,h,g,y){for(const b in this.binders){const M=this.binders[b];(M instanceof _a||M instanceof Ao||M instanceof di)&&M.populatePaintArray(a,c,u,h,g,y)}}setConstantPatternPositions(a){for(const c in this.binders){const u=this.binders[c];u instanceof Oc&&u.setConstantPatternPositions(a)}}updatePaintArrays(a,c,u,h,g,y){let b=!1;for(const M in a){const z=c.getPositions(M);for(const E of z){const T=u.feature(E.index);for(const I in this.binders){const N=this.binders[I];if((N instanceof _a||N instanceof Ao||N instanceof di)&&!0===N.expression.isStateDependent){const O=h.paint.get(I);N.expression=O.value,N.updatePaintArray(E.start,E.end,T,a[M],g,y),b=!0}}}}return b}defines(){const a=[];for(const c in this.binders){const u=this.binders[c];(u instanceof y2||u instanceof Oc)&&a.push(...u.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return a}getBinderAttributes(){const a=[];for(const c in this.binders){const u=this.binders[c];if(u instanceof _a||u instanceof Ao||u instanceof di)for(let h=0;h<u.paintVertexAttributes.length;h++)a.push(u.paintVertexAttributes[h].name)}return a}getBinderUniforms(){const a=[];for(const c in this.binders){const u=this.binders[c];if(u instanceof y2||u instanceof Oc||u instanceof Ao)for(const h of u.uniformNames)a.push(h)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a){const c=[];for(const u in this.binders){const h=this.binders[u];if(h instanceof y2||h instanceof Oc||h instanceof Ao)for(const g of h.uniformNames)c.push({name:g,property:u,binding:h.getBinding(a,g)})}return c}setUniforms(a,c,u,h,g){for(const{name:y,property:b,binding:M}of u)this.binders[b].setUniform(a,M,g,h.get(b),y)}updatePaintBuffers(){this._buffers=[];for(const a in this.binders){const c=this.binders[a];(c instanceof _a||c instanceof Ao||c instanceof di)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(a){for(const c in this.binders){const u=this.binders[c];(u instanceof _a||u instanceof Ao||u instanceof di)&&u.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const c=this.binders[a];(c instanceof _a||c instanceof Ao||c instanceof di)&&c.destroy()}}}class Bc{constructor(a,c,u=(()=>!0)){this.programConfigurations={};for(const h of a)this.programConfigurations[h.id]=new ea(h,c,u);this.needsUpload=!1,this._featureMap=new z6,this._bufferOffset=0}populatePaintArrays(a,c,u,h,g,y,b){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(a,c,h,g,y,b);void 0!==c.id&&this._featureMap.add(c.id,u,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,c,u,h,g){for(const y of u)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(a,this._featureMap,c,y,h,g)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}const S6={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function r0(o,a){return S6[o]||[o.replace(`${a}-`,"").replace(/-/g,"_")]}const rm={"line-pattern":{source:a2,composite:a2},"fill-pattern":{source:a2,composite:a2},"fill-extrusion-pattern":{source:a2,composite:a2},"line-dasharray":{source:Di,composite:Di}},Nb={color:{source:Pc,composite:kn},number:{source:Lr,composite:Pc}};function yd(o,a,c){const u=rm[o];return u&&u[c]||Nb[a][c]}At(y2,"ConstantBinder"),At(Oc,"PatternConstantBinder"),At(_a,"SourceExpressionBinder"),At(di,"PatternCompositeBinder"),At(Ao,"CompositeExpressionBinder"),At(ea,"ProgramConfiguration",{omit:["_buffers"]}),At(Bc,"ProgramConfigurationSet");const A5="-transition";class x2 extends qr{constructor(a,c){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==a.type&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,"background"!==a.type&&"sky"!==a.type&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),c.layout&&(this._unevaluatedLayout=new Be(c.layout)),c.paint)){this._transitionablePaint=new mt(c.paint);for(const u in a.paint)this.setPaintProperty(u,a.paint[u],{validate:!1});for(const u in a.layout)this.setLayoutProperty(u,a.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fe(c.paint)}}getLayoutProperty(a){return"visibility"===a?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,c,u={}){null!=c&&this._validate(y6,`layers.${this.id}.layout.${a}`,a,c,u)||("visibility"!==a?this._unevaluatedLayout.setValue(a,c):this.visibility=c)}getPaintProperty(a){return wr(a,A5)?this._transitionablePaint.getTransition(a.slice(0,-A5.length)):this._transitionablePaint.getValue(a)}setPaintProperty(a,c,u={}){if(null!=c&&this._validate(L4,`layers.${this.id}.paint.${a}`,a,c,u))return!1;if(wr(a,A5))return this._transitionablePaint.setTransition(a.slice(0,-A5.length),c||void 0),!1;{const h=this._transitionablePaint._values[a],g=h.value.isDataDriven(),y=h.value;this._transitionablePaint.setValue(a,c),this._handleSpecialPaintPropertyUpdate(a);const b=this._transitionablePaint._values[a].value,M=b.isDataDriven(),z=wr(a,"pattern")||"line-dasharray"===a;return M||g||z||this._handleOverridablePaintPropertyUpdate(a,y,b)}}_handleSpecialPaintPropertyUpdate(a){}getProgramIds(){return null}getProgramConfiguration(a){return null}_handleOverridablePaintPropertyUpdate(a,c,u){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||"none"===this.visibility}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,c){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,c)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),R1(a,(c,u)=>!(void 0===c||"layout"===u&&!Object.keys(c).length||"paint"===u&&!Object.keys(c).length))}_validate(a,c,u,h,g={}){return(!g||!1!==g.validate)&&Xl(this,a.call(v6,{key:c,layerType:this.type,objectKey:u,value:h,styleSpec:Ge,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const c=this.paint.get(a);if(c instanceof at&&nc(c.property.specification)&&("source"===c.value.kind||"composite"===c.value.kind)&&c.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ql(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const E5=Pt([{name:"a_pos",components:2,type:"Int16"}],4),R4=Pt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class V2{constructor(a=[]){this.segments=a}prepareSegment(a,c,u,h){let g=this.segments[this.segments.length-1];return a>V2.MAX_VERTEX_ARRAY_LENGTH&&en(`Max vertices per segment is ${V2.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!g||g.vertexLength+a>V2.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==h)&&(g={vertexOffset:c.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},void 0!==h&&(g.sortKey=h),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const a of this.segments)for(const c in a.vaos)a.vaos[c].destroy()}static simpleSegment(a,c,u,h){return new V2([{vertexOffset:a,primitiveOffset:c,vertexLength:u,primitiveLength:h,vaos:{},sortKey:0}])}}V2.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,At(V2,"SegmentVector");var Xt=8192;class Uc{constructor(a,c){a&&(c?this.setSouthWest(a).setNorthEast(c):4===a.length?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}setNorthEast(a){return this._ne=a instanceof W1?new W1(a.lng,a.lat):W1.convert(a),this}setSouthWest(a){return this._sw=a instanceof W1?new W1(a.lng,a.lat):W1.convert(a),this}extend(a){const c=this._sw,u=this._ne;let h,g;if(a instanceof W1)h=a,g=a;else{if(!(a instanceof Uc))return Array.isArray(a)?4===a.length||a.every(Array.isArray)?this.extend(Uc.convert(a)):this.extend(W1.convert(a)):"object"==typeof a&&null!==a&&a.hasOwnProperty("lat")&&(a.hasOwnProperty("lon")||a.hasOwnProperty("lng"))?this.extend(W1.convert(a)):this;if(h=a._sw,g=a._ne,!h||!g)return this}return c||u?(c.lng=Math.min(h.lng,c.lng),c.lat=Math.min(h.lat,c.lat),u.lng=Math.max(g.lng,u.lng),u.lat=Math.max(g.lat,u.lat)):(this._sw=new W1(h.lng,h.lat),this._ne=new W1(g.lng,g.lat)),this}getCenter(){return new W1((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new W1(this.getWest(),this.getNorth())}getSouthEast(){return new W1(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:c,lat:u}=W1.convert(a);let h=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h}static convert(a){return!a||a instanceof Uc?a:new Uc(a)}}var D6=1e-6,ta=typeof Float32Array<"u"?Float32Array:Array;function xd(){var o=new ta(9);return ta!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function bd(o,a,c){var u=a[0],h=a[1],g=a[2],y=a[3],b=a[4],M=a[5],z=a[6],E=a[7],T=a[8],I=c[0],N=c[1],O=c[2],j=c[3],X=c[4],ae=c[5],pe=c[6],ne=c[7],fe=c[8];return o[0]=I*u+N*y+O*z,o[1]=I*h+N*b+O*E,o[2]=I*g+N*M+O*T,o[3]=j*u+X*y+ae*z,o[4]=j*h+X*b+ae*E,o[5]=j*g+X*M+ae*T,o[6]=pe*u+ne*y+fe*z,o[7]=pe*h+ne*b+fe*E,o[8]=pe*g+ne*M+fe*T,o}function Eo(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function a0(o,a){var c=a[0],u=a[1],h=a[2],g=a[3],y=a[4],b=a[5],M=a[6],z=a[7],E=a[8],T=a[9],I=a[10],N=a[11],O=a[12],j=a[13],X=a[14],ae=a[15],pe=c*b-u*y,ne=c*M-h*y,fe=c*z-g*y,_e=u*M-h*b,me=u*z-g*b,Ve=h*z-g*M,Te=E*j-T*O,We=E*X-I*O,ct=E*ae-N*O,ze=T*X-I*j,Xe=T*ae-N*j,et=I*ae-N*X,lt=pe*et-ne*Xe+fe*ze+_e*ct-me*We+Ve*Te;return lt?(o[0]=(b*et-M*Xe+z*ze)*(lt=1/lt),o[1]=(h*Xe-u*et-g*ze)*lt,o[2]=(j*Ve-X*me+ae*_e)*lt,o[3]=(I*me-T*Ve-N*_e)*lt,o[4]=(M*ct-y*et-z*We)*lt,o[5]=(c*et-h*ct+g*We)*lt,o[6]=(X*fe-O*Ve-ae*ne)*lt,o[7]=(E*Ve-I*fe+N*ne)*lt,o[8]=(y*Xe-b*ct+z*Te)*lt,o[9]=(u*ct-c*Xe-g*Te)*lt,o[10]=(O*me-j*fe+ae*pe)*lt,o[11]=(T*fe-E*me-N*pe)*lt,o[12]=(b*We-y*ze-M*Te)*lt,o[13]=(c*ze-u*We+h*Te)*lt,o[14]=(j*ne-O*_e-X*pe)*lt,o[15]=(E*_e-T*ne+I*pe)*lt,o):null}function _s(o,a,c){var u=a[0],h=a[1],g=a[2],y=a[3],b=a[4],M=a[5],z=a[6],E=a[7],T=a[8],I=a[9],N=a[10],O=a[11],j=a[12],X=a[13],ae=a[14],pe=a[15],ne=c[0],fe=c[1],_e=c[2],me=c[3];return o[0]=ne*u+fe*b+_e*T+me*j,o[1]=ne*h+fe*M+_e*I+me*X,o[2]=ne*g+fe*z+_e*N+me*ae,o[3]=ne*y+fe*E+_e*O+me*pe,o[4]=(ne=c[4])*u+(fe=c[5])*b+(_e=c[6])*T+(me=c[7])*j,o[5]=ne*h+fe*M+_e*I+me*X,o[6]=ne*g+fe*z+_e*N+me*ae,o[7]=ne*y+fe*E+_e*O+me*pe,o[8]=(ne=c[8])*u+(fe=c[9])*b+(_e=c[10])*T+(me=c[11])*j,o[9]=ne*h+fe*M+_e*I+me*X,o[10]=ne*g+fe*z+_e*N+me*ae,o[11]=ne*y+fe*E+_e*O+me*pe,o[12]=(ne=c[12])*u+(fe=c[13])*b+(_e=c[14])*T+(me=c[15])*j,o[13]=ne*h+fe*M+_e*I+me*X,o[14]=ne*g+fe*z+_e*N+me*ae,o[15]=ne*y+fe*E+_e*O+me*pe,o}function jc(o,a,c){var u,h,g,y,b,M,z,E,T,I,N,O,j=c[0],X=c[1],ae=c[2];return a===o?(o[12]=a[0]*j+a[4]*X+a[8]*ae+a[12],o[13]=a[1]*j+a[5]*X+a[9]*ae+a[13],o[14]=a[2]*j+a[6]*X+a[10]*ae+a[14],o[15]=a[3]*j+a[7]*X+a[11]*ae+a[15]):(h=a[1],g=a[2],y=a[3],b=a[4],M=a[5],z=a[6],E=a[7],T=a[8],I=a[9],N=a[10],O=a[11],o[0]=u=a[0],o[1]=h,o[2]=g,o[3]=y,o[4]=b,o[5]=M,o[6]=z,o[7]=E,o[8]=T,o[9]=I,o[10]=N,o[11]=O,o[12]=u*j+b*X+T*ae+a[12],o[13]=h*j+M*X+I*ae+a[13],o[14]=g*j+z*X+N*ae+a[14],o[15]=y*j+E*X+O*ae+a[15]),o}function Hr(o,a,c){var u=c[0],h=c[1],g=c[2];return o[0]=a[0]*u,o[1]=a[1]*u,o[2]=a[2]*u,o[3]=a[3]*u,o[4]=a[4]*h,o[5]=a[5]*h,o[6]=a[6]*h,o[7]=a[7]*h,o[8]=a[8]*g,o[9]=a[9]*g,o[10]=a[10]*g,o[11]=a[11]*g,o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o}function A6(o,a,c){var u=Math.sin(c),h=Math.cos(c),g=a[4],y=a[5],b=a[6],M=a[7],z=a[8],E=a[9],T=a[10],I=a[11];return a!==o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[4]=g*h+z*u,o[5]=y*h+E*u,o[6]=b*h+T*u,o[7]=M*h+I*u,o[8]=z*h-g*u,o[9]=E*h-y*u,o[10]=T*h-b*u,o[11]=I*h-M*u,o}function Vo(o,a,c){var u=Math.sin(c),h=Math.cos(c),g=a[0],y=a[1],b=a[2],M=a[3],z=a[8],E=a[9],T=a[10],I=a[11];return a!==o&&(o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=g*h-z*u,o[1]=y*h-E*u,o[2]=b*h-T*u,o[3]=M*h-I*u,o[8]=g*u+z*h,o[9]=y*u+E*h,o[10]=b*u+T*h,o[11]=M*u+I*h,o}function Cd(o,a){return o[0]=a[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=a[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function V5(o,a,c){var u,h,g,y=c[0],b=c[1],M=c[2],z=Math.hypot(y,b,M);return z<D6?null:(y*=z=1/z,b*=z,M*=z,u=Math.sin(a),h=Math.cos(a),o[0]=y*y*(g=1-h)+h,o[1]=b*y*g+M*u,o[2]=M*y*g-b*u,o[3]=0,o[4]=y*b*g-M*u,o[5]=b*b*g+h,o[6]=M*b*g+y*u,o[7]=0,o[8]=y*M*g+b*u,o[9]=b*M*g-y*u,o[10]=M*M*g+h,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}Math.hypot||(Math.hypot=function(){for(var o=0,a=arguments.length;a--;)o+=arguments[a]*arguments[a];return Math.sqrt(o)});var o0=_s;function P4(){var o=new ta(3);return ta!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function L5(o){var a=new ta(3);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a}function s0(o){return Math.hypot(o[0],o[1],o[2])}function F4(o,a,c){var u=new ta(3);return u[0]=o,u[1]=a,u[2]=c,u}function na(o,a,c){return o[0]=a[0]+c[0],o[1]=a[1]+c[1],o[2]=a[2]+c[2],o}function G3(o,a,c){return o[0]=a[0]-c[0],o[1]=a[1]-c[1],o[2]=a[2]-c[2],o}function wd(o,a,c){return o[0]=a[0]*c[0],o[1]=a[1]*c[1],o[2]=a[2]*c[2],o}function E6(o,a,c){return o[0]=Math.min(a[0],c[0]),o[1]=Math.min(a[1],c[1]),o[2]=Math.min(a[2],c[2]),o}function N4(o,a,c){return o[0]=Math.max(a[0],c[0]),o[1]=Math.max(a[1],c[1]),o[2]=Math.max(a[2],c[2]),o}function va(o,a,c){return o[0]=a[0]*c,o[1]=a[1]*c,o[2]=a[2]*c,o}function V6(o,a,c,u){return o[0]=a[0]+c[0]*u,o[1]=a[1]+c[1]*u,o[2]=a[2]+c[2]*u,o}function hr(o,a){var c=a[0],u=a[1],h=a[2],g=c*c+u*u+h*h;return g>0&&(g=1/Math.sqrt(g)),o[0]=a[0]*g,o[1]=a[1]*g,o[2]=a[2]*g,o}function Xa(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]}function T5(o,a,c){var u=a[0],h=a[1],g=a[2],y=c[0],b=c[1],M=c[2];return o[0]=h*M-g*b,o[1]=g*y-u*M,o[2]=u*b-h*y,o}function Zn(o,a,c){var u=a[0],h=a[1],g=a[2],y=c[3]*u+c[7]*h+c[11]*g+c[15];return o[0]=(c[0]*u+c[4]*h+c[8]*g+c[12])/(y=y||1),o[1]=(c[1]*u+c[5]*h+c[9]*g+c[13])/y,o[2]=(c[2]*u+c[6]*h+c[10]*g+c[14])/y,o}function H5(o,a,c){var u=c[0],h=c[1],g=c[2],y=a[0],b=a[1],M=a[2],z=h*M-g*b,E=g*y-u*M,T=u*b-h*y,I=h*T-g*E,N=g*z-u*T,O=u*E-h*z,j=2*c[3];return E*=j,T*=j,N*=2,O*=2,o[0]=y+(z*=j)+(I*=2),o[1]=b+E+N,o[2]=M+T+O,o}var c0,Ka=G3,Ob=wd,Md=s0;function am(o,a,c){return o[0]=a[0]*c,o[1]=a[1]*c,o[2]=a[2]*c,o[3]=a[3]*c,o}function zd(o,a){var c=a[0],u=a[1],h=a[2],g=a[3],y=c*c+u*u+h*h+g*g;return y>0&&(y=1/Math.sqrt(y)),o[0]=c*y,o[1]=u*y,o[2]=h*y,o[3]=g*y,o}function $3(o,a,c){var u=a[0],h=a[1],g=a[2],y=a[3];return o[0]=c[0]*u+c[4]*h+c[8]*g+c[12]*y,o[1]=c[1]*u+c[5]*h+c[9]*g+c[13]*y,o[2]=c[2]*u+c[6]*h+c[10]*g+c[14]*y,o[3]=c[3]*u+c[7]*h+c[11]*g+c[15]*y,o}function L6(){var o=new ta(4);return ta!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function om(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o}function sm(o,a,c){c*=.5;var u=a[0],h=a[1],g=a[2],y=a[3],b=Math.sin(c),M=Math.cos(c);return o[0]=u*M+y*b,o[1]=h*M+g*b,o[2]=g*M-h*b,o[3]=y*M-u*b,o}function T6(o,a,c){c*=.5;var u=a[0],h=a[1],g=a[2],y=a[3],b=Math.sin(c),M=Math.cos(c);return o[0]=u*M-g*b,o[1]=h*M+y*b,o[2]=g*M+u*b,o[3]=y*M-h*b,o}P4(),c0=new ta(4),ta!=Float32Array&&(c0[0]=0,c0[1]=0,c0[2]=0,c0[3]=0);var Bb=zd;P4(),F4(1,0,0),F4(0,1,0),L6(),L6(),xd();const Ub=Pt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:cm}=Ub,lm=Pt([{name:"a_pos_3",components:3,type:"Int16"}]);var H6=Pt([{name:"a_pos",type:"Int16",components:2}]);class k5{constructor(a,c){this.pos=a,this.dir=c}intersectsPlane(a,c,u){const h=Xa(c,this.dir);if(Math.abs(h)<1e-6)return!1;const g=((a[0]-this.pos[0])*c[0]+(a[1]-this.pos[1])*c[1]+(a[2]-this.pos[2])*c[2])/h;return u[0]=this.pos[0]+this.dir[0]*g,u[1]=this.pos[1]+this.dir[1]*g,u[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(a,c,u){if(j=(N=this.pos)[0],X=N[1],ae=N[2],pe=(O=a)[0],ne=O[1],fe=O[2],Math.abs(j-pe)<=D6*Math.max(1,Math.abs(j),Math.abs(pe))&&Math.abs(X-ne)<=D6*Math.max(1,Math.abs(X),Math.abs(ne))&&Math.abs(ae-fe)<=D6*Math.max(1,Math.abs(ae),Math.abs(fe))||0===c)return u[0]=u[1]=u[2]=0,!1;var N,O,j,X,ae,pe,ne,fe;const[h,g,y]=this.dir,b=this.pos[0]-a[0],M=this.pos[1]-a[1],z=this.pos[2]-a[2],E=h*h+g*g+y*y,T=2*(b*h+M*g+z*y),I=T*T-4*E*(b*b+M*M+z*z-c*c);if(I<0){const N=Math.max(-T/2,0),O=b+h*N,j=M+g*N,X=z+y*N,ae=Math.hypot(O,j,X);return u[0]=O*c/ae,u[1]=j*c/ae,u[2]=X*c/ae,!1}{const N=(-T-Math.sqrt(I))/(2*E);if(N<0){const O=Math.hypot(b,M,z);return u[0]=b*c/O,u[1]=M*c/O,u[2]=z*c/O,!1}return u[0]=b+h*N,u[1]=M+g*N,u[2]=z+y*N,!0}}}class k6{constructor(a,c,u,h,g){this.TL=a,this.TR=c,this.BR=u,this.BL=h,this.horizon=g}static fromInvProjectionMatrix(a,c,u){const h=[-1,1,1],g=[1,1,1],y=[1,-1,1],b=[-1,-1,1],M=Zn(h,h,a),z=Zn(g,g,a),E=Zn(y,y,a),T=Zn(b,b,a);return new k6(M,z,E,T,c/u)}}class l0{constructor(a,c){this.points=a,this.planes=c}static fromInvProjectionMatrix(a,c,u,h){const g=Math.pow(2,u),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const z=$3([],M,a),E=1/z[3]/c*g;return(T=z)[0]=(I=z)[0]*(N=[E,E,h?1/z[3]:E,E])[0],T[1]=I[1]*N[1],T[2]=I[2]*N[2],T[3]=I[3]*N[3],T;var T,I,N}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const z=hr([],T5([],Ka([],y[M[0]],y[M[1]]),Ka([],y[M[2]],y[M[1]]))),E=-Xa(z,y[M[1]]);return z.concat(E)});return new l0(y,b)}}class ji{static fromPoints(a){const c=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const h of a)E6(c,c,h),N4(u,u,h);return new ji(c,u)}static applyTransform(a,c){const u=a.getCorners();for(let h=0;h<u.length;++h)Zn(u[h],u[h],c);return ji.fromPoints(u)}constructor(a,c){this.min=a,this.max=c,this.center=va([],na([],this.min,this.max),.5)}quadrant(a){const c=[a%2==0,a<2],u=L5(this.min),h=L5(this.max);for(let g=0;g<c.length;g++)u[g]=c[g]?this.min[g]:this.center[g],h[g]=c[g]?this.center[g]:this.max[g];return h[2]=this.max[2],new ji(u,h)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}distanceZ(a){return Math.max(Math.min(this.max[2],a[2]),this.min[2])-a[2]}getCorners(){const a=this.min,c=this.max;return[[a[0],a[1],a[2]],[c[0],a[1],a[2]],[c[0],c[1],a[2]],[a[0],c[1],a[2]],[a[0],a[1],c[2]],[c[0],a[1],c[2]],[c[0],c[1],c[2]],[a[0],c[1],c[2]]]}intersects(a){const c=this.getCorners();let u=!0;for(let h=0;h<a.planes.length;h++){const g=a.planes[h];let y=0;for(let b=0;b<c.length;b++)y+=Xa(g,c[b])+g[3]>=0;if(0===y)return 0;y!==c.length&&(u=!1)}if(u)return 2;for(let h=0;h<3;h++){let g=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(let b=0;b<a.points.length;b++){const M=a.points[b][h]-this.min[h];g=Math.min(g,M),y=Math.max(y,M)}if(y<0||g>this.max[h]-this.min[h])return 0}return 1}}const Lo=Xt/Math.PI/2,Ei=[64,32,16],Qa=-Lo,Ja=Lo,um=[new ji([Qa,Qa,Qa],[Ja,Ja,Ja]),new ji([Qa,Qa,Qa],[0,0,Ja]),new ji([0,Qa,Qa],[Ja,0,Ja]),new ji([Qa,0,Qa],[0,Ja,Ja]),new ji([0,0,Qa],[Ja,Ja,Ja])];function u0(o){return o*Lo/W3}function I6(o,a,c,u=!0){const h=va([],o._camera.position,o.worldSize),g=[a,c,1,1];$3(g,g,o.pixelMatrixInverse),am(g,g,1/g[3]);const y=hr([],Ka([],g,h)),b=o.globeMatrix,M=[b[12],b[13],b[14]],z=Ka([],M,h),E=s0(z),T=hr([],z),I=o.worldSize/(2*Math.PI),N=Xa(T,y),O=Math.asin(I/E);if(O<Math.acos(N)){if(!u)return null;const ct=[],ze=[];va(ct,y,E/N),hr(ze,Ka(ze,ct,z)),hr(y,na(y,z,va(y,ze,Math.tan(O)*E)))}const j=[];new k5(h,y).closestPointOnSphere(M,I,j);const X=hr([],Qn(b,0)),ae=hr([],Qn(b,1)),pe=hr([],Qn(b,2)),ne=Xa(X,j),fe=Xa(ae,j),_e=Xa(pe,j),me=o2(Math.asin(-fe/I));let Ve=o2(Math.atan2(ne,_e));Ve=o.center.lng+function(ct,ze){const Xe=(ze-ct+180)%360-180;return Xe<-180?Xe+360:Xe}(o.center.lng,Ve);const Te=ys(Ve),We=d1(eo(me),0,1);return new Wc(Te,We)}class dm{constructor(a,c,u){this.a=Ka([],a,u),this.b=Ka([],c,u),this.center=u;const h=hr([],this.a),g=hr([],this.b);this.angle=Math.acos(Xa(h,g))}}function I5(o,a){if(0===o.angle)return null;let c;return c=0===o.a[a]?1/o.angle*.5*Math.PI:1/o.angle*Math.atan(o.b[a]/o.a[a]/Math.sin(o.angle)-1/Math.tan(o.angle)),c<0||c>1?null:function(u,h,g,y){const b=Math.sin(g);return u*(Math.sin((1-y)*g)/b)+h*(Math.sin(y*g)/b)}(o.a[a],o.b[a],o.angle,d1(c,0,1))+o.center[a]}function vs(o){if(o.z<=1)return um[o.z+2*o.y+o.x];const a=R6(O4(o));return ji.fromPoints(a)}function $c(o,a,c){return va(o,o,1-c),V6(o,o,a,c)}function Sd(o,a){const c=q3(a.zoom);if(0===c)return vs(o);const u=O4(o),h=R6(u),g=ys(u.getWest())*a.worldSize,y=ys(u.getEast())*a.worldSize,b=eo(u.getNorth())*a.worldSize,M=eo(u.getSouth())*a.worldSize,z=[g,b,0],E=[y,b,0],T=[g,M,0],I=[y,M,0],N=a0([],a.globeMatrix);return Zn(z,z,N),Zn(E,E,N),Zn(T,T,N),Zn(I,I,N),h[0]=$c(h[0],T,c),h[1]=$c(h[1],I,c),h[2]=$c(h[2],E,c),h[3]=$c(h[3],z,c),ji.fromPoints(h)}function Dd(o,a,c){for(const u of o)Zn(u,u,a),va(u,u,c)}function O4({x:o,y:a,z:c}){const u=1/(1<<c),h=new W1(ra(o*u),b2((a+1)*u)),g=new W1(ra((o+1)*u),b2(a*u));return new Uc(h,g)}function R6(o){const a=I1(o.getNorth()),c=I1(o.getSouth()),u=Math.cos(a),h=Math.cos(c),g=Math.sin(a),y=Math.sin(c),b=o.getWest(),M=o.getEast();return[qc(h,y,b),qc(h,y,M),qc(u,g,M),qc(u,g,b)]}function qc(o,a,c,u=Lo){return c=I1(c),[o*Math.sin(c)*u,-a*u,o*Math.cos(c)*u]}function O2(o,a,c){return qc(Math.cos(I1(o)),Math.sin(I1(o)),a,c)}function oc(o,a,c,u){const h=1<<c.z,g=(o/Xt+c.x)/h;return O2(b2((a/Xt+c.y)/h),ra(g),u)}function d0({min:o,max:a}){return 16383/Math.max(a[0]-o[0],a[1]-o[1],a[2]-o[2])}const R5=new Float64Array(16);function f0(o){const a=d0(o),c=Cd(R5,[a,a,a]);return jc(c,c,((u=[])[0]=-(h=o.min)[0],u[1]=-h[1],u[2]=-h[2],u));var u,h}function P6(o){const a=(u=o.min,(c=R5)[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=u[0],c[13]=u[1],c[14]=u[2],c[15]=1,c);var c,u;const h=1/d0(o);return Hr(a,a,[h,h,h])}function Ad(o,a,c,u,h){const g=function(M){const z=Xt/(2*Math.PI);return M/(2*Math.PI)/z}(c),y=[o,a,-c/(2*Math.PI)],b=Eo(new Float64Array(16));return jc(b,b,y),Hr(b,b,[g,g,g]),A6(b,b,I1(-h)),Vo(b,b,I1(-u)),b}function q3(o){return ri(5,6,o)}function Ed(o,a){const c=O2(a.lat,a.lng);return y=(h=G3([],function(O){const j=O2(O._center.lat,O._center.lng);let X=T5([],F4(0,1,0),j);const ae=V5([],-O.angle,j);X=Zn(X,X,ae),V5(ae,-O._pitch,X);const pe=hr([],j);return va(pe,pe,u0(O.cameraToCenterDistance/O.pixelsPerMeter)),Zn(pe,pe,ae),na([],j,pe)}(o),c))[0],b=h[1],M=h[2],z=(g=c)[0],E=g[1],T=g[2],N=(I=Math.sqrt(y*y+b*b+M*M)*Math.sqrt(z*z+E*E+T*T))&&Xa(h,g)/I,Math.acos(Math.min(Math.max(N,-1),1));var h,g,y,b,M,z,E,T,I,N}function F6(o,a){return Ed(o,a)>Math.PI/2*1.01}const Vd=I1(85),fm=Math.cos(Vd),P5=Math.sin(Vd),W3=6371008.8,Ld=2*Math.PI*W3;class W1{constructor(a,c){if(isNaN(a)||isNaN(c))throw new Error(`Invalid LngLat object: (${a}, ${c})`);if(this.lng=+a,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new W1(xi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const c=Math.PI/180,u=this.lat*c,h=a.lat*c,g=Math.sin(u)*Math.sin(h)+Math.cos(u)*Math.cos(h)*Math.cos((a.lng-this.lng)*c);return W3*Math.acos(Math.min(g,1))}toBounds(a=0){const c=360*a/40075017,u=c/Math.cos(Math.PI/180*this.lat);return new Uc(new W1(this.lng-u,this.lat-c),new W1(this.lng+u,this.lat+c))}toEcef(a){const c=u0(a);return O2(this.lat,this.lng,Lo+c)}static convert(a){if(a instanceof W1)return a;if(Array.isArray(a)&&(2===a.length||3===a.length))return new W1(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&"object"==typeof a&&null!==a)return new W1(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function F5(o){return Ld*Math.cos(o*Math.PI/180)}function ys(o){return(180+o)/360}function eo(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function ya(o,a){return o/F5(a)}function ra(o){return 360*o-180}function b2(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function N6(o,a){return o*F5(b2(a))}const fi=85.051129;function Td(o){return 1/Math.cos(o*Math.PI/180)}class Wc{constructor(a,c,u=0){this.x=+a,this.y=+c,this.z=+u}static fromLngLat(a,c=0){const u=W1.convert(a);return new Wc(ys(u.lng),eo(u.lat),ya(c,u.lat))}toLngLat(){return new W1(ra(this.x),b2(this.y))}toAltitude(){return N6(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ld*Td(b2(this.y))}}function N5(o,a,c,u,h,g,y,b,M){const z=(a+u)/2,E=(c+h)/2,T=new ht(z,E);b(T),function(I,N,O,j,X,ae){const pe=O-X,ne=j-ae;return Math.abs((j-N)*pe-(O-I)*ne)/Math.hypot(pe,ne)}(T.x,T.y,g.x,g.y,y.x,y.y)>=M?(N5(o,a,c,z,E,g,T,b,M),N5(o,z,E,u,h,T,y,b,M)):o.push(y)}function Hd(o,a,c){let u=o[0],h=u.x,g=u.y;a(u);const y=[u];for(let b=1;b<o.length;b++){const M=o[b],{x:z,y:E}=M;a(M),N5(y,h,g,z,E,u,M,a,c),h=z,g=E,u=M}return y}function O5(o,a,c,u){if(u(a,c)){const h=a.add(c)._mult(.5);O5(o,a,h,u),O5(o,h,c,u)}else o.push(c)}function hm(o,a){let c=o[0];const u=[c];for(let h=1;h<o.length;h++){const g=o[h];O5(u,c,g,a),c=g}return u}const B5=Math.pow(2,14)-1,kd=-B5-1;function Id(o,a){const c=Math.round(o.x*a),u=Math.round(o.y*a);return o.x=d1(c,kd,B5),o.y=d1(u,kd,B5),(c<o.x||c>o.x+1||u<o.y||u>o.y+1)&&en("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o}function To(o,a,c){const u=o.loadGeometry(),h=o.extent,g=Xt/h;if(a&&c&&c.projection.isReprojectedInTileSpace){const y=1<<a.z,{scale:b,x:M,y:z,projection:E}=c,T=I=>{const N=ra((a.x+I.x/h)/y),O=b2((a.y+I.y/h)/y),j=E.project(N,O);I.x=(j.x*b-M)*h,I.y=(j.y*b-z)*h};for(let I=0;I<u.length;I++)if(1!==o.type)u[I]=Hd(u[I],T,1);else{const N=[];for(const O of u[I])O.x<0||O.x>=h||O.y<0||O.y>=h||(T(O),N.push(O));u[I]=N}}for(const y of u)for(const b of y)Id(b,g);return u}function Zc(o,a){return{type:o.type,id:o.id,properties:o.properties,geometry:a?To(o):[]}}function B4(o,a,c,u,h){o.emplaceBack(2*a+(u+1)/2,2*c+(h+1)/2)}function O6(o,a,c){o.emplaceBack(a.x,a.y,a.z,16384*c[0],16384*c[1],16384*c[2])}class U5{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.projection=a.projection,this.layoutVertexArray=new Nt,this.indexArray=new ui,this.segments=new V2,this.programConfigurations=new Bc(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(a,c,u,h){const g=this.layers[0],y=[];let b=null;"circle"===g.type&&(b=g.layout.get("circle-sort-key"));for(const{feature:z,id:E,index:T,sourceLayerIndex:I}of a){const N=this.layers[0]._featureFilter.needGeometry,O=Zc(z,N);if(!this.layers[0]._featureFilter.filter(new Se(this.zoom),O,u))continue;const j=b?b.evaluate(O,{},u):void 0,X={id:E,properties:z.properties,type:z.type,sourceLayerIndex:I,index:T,geometry:N?O.geometry:To(z,u,h),patterns:{},sortKey:j};y.push(X)}b&&y.sort((z,E)=>z.sortKey-E.sortKey);let M=null;"globe"===h.projection.name&&(this.globeExtVertexArray=new fr,M=h.projection);for(const z of y){const{geometry:E,index:T,sourceLayerIndex:I}=z,N=a[T].feature;this.addFeature(z,E,T,c.availableImages,u,M),c.featureIndex.insert(N,E,T,I,this.index)}}update(a,c,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,u,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,E5.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,R4.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(a,c,u,h,g,y){for(const b of c)for(const M of b){const z=M.x,E=M.y;if(z<0||z>=Xt||E<0||E>=Xt)continue;if(y){const N=y.projectTilePoint(z,E,g),O=y.upVector(g,z,E),j=this.globeExtVertexArray;O6(j,N,O),O6(j,N,O),O6(j,N,O),O6(j,N,O)}const T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),I=T.vertexLength;B4(this.layoutVertexArray,z,E,-1,-1),B4(this.layoutVertexArray,z,E,1,-1),B4(this.layoutVertexArray,z,E,1,1),B4(this.layoutVertexArray,z,E,-1,1),this.indexArray.emplaceBack(I,I+1,I+2),this.indexArray.emplaceBack(I,I+2,I+3),T.vertexLength+=4,T.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,u,{},h,g)}}function j5(o,a){for(let c=0;c<o.length;c++)if(Xc(a,o[c]))return!0;for(let c=0;c<a.length;c++)if(Xc(o,a[c]))return!0;return!!B6(o,a)}function Rd(o,a,c){return!!Xc(o,a)||!!Fd(a,o,c)}function Yc(o,a){if(1===o.length)return Nd(a,o[0]);for(let c=0;c<a.length;c++){const u=a[c];for(let h=0;h<u.length;h++)if(Xc(o,u[h]))return!0}for(let c=0;c<o.length;c++)if(Nd(a,o[c]))return!0;for(let c=0;c<a.length;c++)if(B6(o,a[c]))return!0;return!1}function Pd(o,a,c){if(o.length>1){if(B6(o,a))return!0;for(let u=0;u<a.length;u++)if(Fd(a[u],o,c))return!0}for(let u=0;u<o.length;u++)if(Fd(o[u],a,c))return!0;return!1}function B6(o,a){if(0===o.length||0===a.length)return!1;for(let c=0;c<o.length-1;c++){const u=o[c],h=o[c+1];for(let g=0;g<a.length-1;g++)if(pm(u,h,a[g],a[g+1]))return!0}return!1}function pm(o,a,c,u){return nr(o,c,u)!==nr(a,c,u)&&nr(o,a,c)!==nr(o,a,u)}function Fd(o,a,c){const u=c*c;if(1===a.length)return o.distSqr(a[0])<u;for(let h=1;h<a.length;h++)if(h0(o,a[h-1],a[h])<u)return!0;return!1}function h0(o,a,c){const u=a.distSqr(c);if(0===u)return o.distSqr(a);const h=((o.x-a.x)*(c.x-a.x)+(o.y-a.y)*(c.y-a.y))/u;return o.distSqr(h<0?a:h>1?c:c.sub(a)._mult(h)._add(a))}function Nd(o,a){let c,u,h,g=!1;for(let y=0;y<o.length;y++){c=o[y];for(let b=0,M=c.length-1;b<c.length;M=b++)u=c[b],h=c[M],u.y>a.y!=h.y>a.y&&a.x<(h.x-u.x)*(a.y-u.y)/(h.y-u.y)+u.x&&(g=!g)}return g}function Xc(o,a){let c=!1;for(let u=0,h=o.length-1;u<o.length;h=u++){const g=o[u],y=o[h];g.y>a.y!=y.y>a.y&&a.x<(y.x-g.x)*(a.y-g.y)/(y.y-g.y)+g.x&&(c=!c)}return c}function G5(o,a,c,u,h){for(const y of o)if(a<=y.x&&c<=y.y&&u>=y.x&&h>=y.y)return!0;const g=[new ht(a,c),new ht(a,h),new ht(u,h),new ht(u,c)];if(o.length>2)for(const y of g)if(Xc(o,y))return!0;for(let y=0;y<o.length-1;y++)if(Od(o[y],o[y+1],g))return!0;return!1}function Od(o,a,c){const u=c[0],h=c[2];if(o.x<u.x&&a.x<u.x||o.x>h.x&&a.x>h.x||o.y<u.y&&a.y<u.y||o.y>h.y&&a.y>h.y)return!1;const g=nr(o,a,c[0]);return g!==nr(o,a,c[1])||g!==nr(o,a,c[2])||g!==nr(o,a,c[3])}function Kc(o,a,c){const u=a.paint.get(o).value;return"constant"===u.kind?u.value:c.programConfigurations.get(a.id).getMaxValue(o)}function p0(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function m0(o,a,c,u,h){if(!a[0]&&!a[1])return o;const g=ht.convert(a)._mult(h);"viewport"===c&&g._rotate(-u);const y=[];for(let b=0;b<o.length;b++)y.push(o[b].sub(g));return y}function g0(o,a,c,u){const h=ht.convert(o)._mult(u);return"viewport"===a&&h._rotate(-c),h}At(U5,"CircleBucket",{omit:["layers"]});const Bd=new dt({"circle-sort-key":new Ne(Ge.layout_circle["circle-sort-key"])});var $5={paint:new dt({"circle-radius":new Ne(Ge.paint_circle["circle-radius"]),"circle-color":new Ne(Ge.paint_circle["circle-color"]),"circle-blur":new Ne(Ge.paint_circle["circle-blur"]),"circle-opacity":new Ne(Ge.paint_circle["circle-opacity"]),"circle-translate":new Ae(Ge.paint_circle["circle-translate"]),"circle-translate-anchor":new Ae(Ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ae(Ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ae(Ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ne(Ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ne(Ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ne(Ge.paint_circle["circle-stroke-opacity"])}),layout:Bd};function U6(o,a,c,u,h,g,y,b,M){if(g&&o.queryGeometry.isAboveHorizon)return!1;g&&(M*=o.pixelToTileUnitsFactor);const z=o.tileID.canonical,E=c.projection.upVectorScale(z,c.center.lat,c.worldSize).metersToTile;for(const T of a)for(const I of T){const N=I.add(b),O=h&&c.elevation?c.elevation.exaggeration()*h.getElevationAt(N.x,N.y,!0):0,j=c.projection.projectTilePoint(N.x,N.y,z);if(O>0){const ne=c.projection.upVector(z,N.x,N.y);j.x+=ne[0]*E*O,j.y+=ne[1]*E*O,j.z+=ne[2]*E*O}const X=g?N:q5(j.x,j.y,j.z,u),ae=g?o.tilespaceRays.map(ne=>Ud(ne,O)):o.queryGeometry.screenGeometry,pe=$3([],[j.x,j.y,j.z,1],u);if(!y&&g?M*=pe[3]/c.cameraToCenterDistance:y&&!g&&(M*=c.cameraToCenterDistance/pe[3]),g){const ne=b2((I.y/Xt+z.y)/(1<<z.z));M/=c.projection.pixelsPerMeter(ne,1)/ya(1,ne)}if(Rd(ae,X,M))return!0}return!1}function q5(o,a,c,u){const h=$3([],[o,a,c,1],u);return new ht(h[0]/h[3],h[1]/h[3])}const U4=F4(0,0,0),mm=F4(0,0,1);function Ud(o,a){const c=P4();return U4[2]=a,o.intersectsPlane(U4,mm,c),new ht(c[0],c[1])}class jd extends U5{}function Gd(o,{width:a,height:c},u,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==a*c*u)throw new RangeError("mismatched image size")}else h=new Uint8Array(a*c*u);return o.width=a,o.height=c,o.data=h,o}function $d(o,a,c){const{width:u,height:h}=a;u===o.width&&h===o.height||(j6(o,a,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,u),height:Math.min(o.height,h)},c),o.width=u,o.height=h,o.data=a.data)}function j6(o,a,c,u,h,g){if(0===h.width||0===h.height)return a;if(h.width>o.width||h.height>o.height||c.x>o.width-h.width||c.y>o.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>a.width||h.height>a.height||u.x>a.width-h.width||u.y>a.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const y=o.data,b=a.data;for(let M=0;M<h.height;M++){const z=((c.y+M)*o.width+c.x)*g,E=((u.y+M)*a.width+u.x)*g;for(let T=0;T<h.width*g;T++)b[E+T]=y[z+T]}return a}At(jd,"HeatmapBucket",{omit:["layers"]});class xs{constructor(a,c){Gd(this,a,1,c)}resize(a){$d(this,new xs(a),1)}clone(){return new xs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,c,u,h,g){j6(a,c,u,h,g,1)}}class Gi{constructor(a,c){Gd(this,a,4,c)}resize(a){$d(this,new Gi(a),4)}replace(a,c){c?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new Gi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,c,u,h,g){j6(a,c,u,h,g,4)}}At(xs,"AlphaImage"),At(Gi,"RGBAImage");var W5={paint:new dt({"heatmap-radius":new Ne(Ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ne(Ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ae(Ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ot(Ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ae(Ge.paint_heatmap["heatmap-opacity"])})};function Qc(o){const a={},c=o.resolution||256,u=o.clips?o.clips.length:1,h=o.image||new Gi({width:c,height:u}),g=(y,b,M)=>{a[o.evaluationKey]=M;const z=o.expression.evaluate(a);h.data[y+b+0]=Math.floor(255*z.r/z.a),h.data[y+b+1]=Math.floor(255*z.g/z.a),h.data[y+b+2]=Math.floor(255*z.b/z.a),h.data[y+b+3]=Math.floor(255*z.a)};if(o.clips)for(let y=0,b=0;y<u;++y,b+=4*c)for(let M=0,z=0;M<c;M++,z+=4){const E=M/(c-1),{start:T,end:I}=o.clips[y];g(b,z,T*(1-E)+I*E)}else for(let y=0,b=0;y<c;y++,b+=4)g(0,b,y/(c-1));return h}var gm={paint:new dt({"hillshade-illumination-direction":new Ae(Ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ae(Ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ae(Ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ae(Ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ae(Ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ae(Ge.paint_hillshade["hillshade-accent-color"])})};const _m=Pt([{name:"a_pos",components:2,type:"Int16"}],4),{members:jb}=_m;var j4={};function G4(o,a,c){c=c||2;var u,h,g,y,b,M,z,E=a&&a.length,T=E?a[0]*c:o.length,I=qd(o,0,T,c,!0),N=[];if(!I||I.next===I.prev)return N;if(E&&(I=function(j,X,ae,pe){var ne,fe,_e,me=[];for(ne=0,fe=X.length;ne<fe;ne++)(_e=qd(j,X[ne]*pe,ne<fe-1?X[ne+1]*pe:j.length,pe,!1))===_e.next&&(_e.steiner=!0),me.push(xm(_e));for(me.sort(Z3),ne=0;ne<me.length;ne++)ae=vm(me[ne],ae);return ae}(o,a,I,c)),o.length>80*c){u=g=o[0],h=y=o[1];for(var O=c;O<T;O+=c)(b=o[O])<u&&(u=b),(M=o[O+1])<h&&(h=M),b>g&&(g=b),M>y&&(y=M);z=0!==(z=Math.max(g-u,y-h))?32767/z:0}return e3(I,N,c,u,h,z,0),N}function qd(o,a,c,u,h){var g,y;if(h===Q5(o,a,c,u)>0)for(g=a;g<c;g+=u)y=X5(g,o[g],o[g+1],y);else for(g=c-u;g>=a;g-=u)y=X5(g,o[g],o[g+1],y);return y&&G6(y,y.next)&&(v0(y),y=y.next),y}function Jc(o,a){if(!o)return o;a||(a=o);var c,u=o;do{if(c=!1,u.steiner||!G6(u,u.next)&&0!==In(u.prev,u,u.next))u=u.next;else{if(v0(u),(u=a=u.prev)===u.next)break;c=!0}}while(c||u!==a);return a}function e3(o,a,c,u,h,g,y){if(o){!y&&g&&function(E,T,I,N){var O=E;do{0===O.z&&(O.z=Y5(O.x,O.y,T,I,N)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next}while(O!==E);O.prevZ.nextZ=null,O.prevZ=null,function(j){var X,ae,pe,ne,fe,_e,me,Ve,Te=1;do{for(ae=j,j=null,fe=null,_e=0;ae;){for(_e++,pe=ae,me=0,X=0;X<Te&&(me++,pe=pe.nextZ);X++);for(Ve=Te;me>0||Ve>0&&pe;)0!==me&&(0===Ve||!pe||ae.z<=pe.z)?(ne=ae,ae=ae.nextZ,me--):(ne=pe,pe=pe.nextZ,Ve--),fe?fe.nextZ=ne:j=ne,ne.prevZ=fe,fe=ne;ae=pe}fe.nextZ=null,Te*=2}while(_e>1)}(O)}(o,u,h,g);for(var b,M,z=o;o.prev!==o.next;)if(b=o.prev,M=o.next,g?Wd(o,u,h,g):Z5(o))a.push(b.i/c|0),a.push(o.i/c|0),a.push(M.i/c|0),v0(o),o=M.next,z=M.next;else if((o=M)===z){y?1===y?e3(o=Zd(Jc(o),a,c),a,c,u,h,g,2):2===y&&Yd(o,a,c,u,h,g):e3(Jc(o),a,c,u,h,g,1);break}}}function Z5(o){var a=o.prev,c=o,u=o.next;if(In(a,c,u)>=0)return!1;for(var h=a.x,g=c.x,y=u.x,b=a.y,M=c.y,z=u.y,E=h<g?h<y?h:y:g<y?g:y,T=b<M?b<z?b:z:M<z?M:z,I=h>g?h>y?h:y:g>y?g:y,N=b>M?b>z?b:z:M>z?M:z,O=u.next;O!==a;){if(O.x>=E&&O.x<=I&&O.y>=T&&O.y<=N&&$4(h,b,g,M,y,z,O.x,O.y)&&In(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function Wd(o,a,c,u){var h=o.prev,g=o,y=o.next;if(In(h,g,y)>=0)return!1;for(var b=h.x,M=g.x,z=y.x,E=h.y,T=g.y,I=y.y,N=b<M?b<z?b:z:M<z?M:z,O=E<T?E<I?E:I:T<I?T:I,j=b>M?b>z?b:z:M>z?M:z,X=E>T?E>I?E:I:T>I?T:I,ae=Y5(N,O,a,c,u),pe=Y5(j,X,a,c,u),ne=o.prevZ,fe=o.nextZ;ne&&ne.z>=ae&&fe&&fe.z<=pe;){if(ne.x>=N&&ne.x<=j&&ne.y>=O&&ne.y<=X&&ne!==h&&ne!==y&&$4(b,E,M,T,z,I,ne.x,ne.y)&&In(ne.prev,ne,ne.next)>=0||(ne=ne.prevZ,fe.x>=N&&fe.x<=j&&fe.y>=O&&fe.y<=X&&fe!==h&&fe!==y&&$4(b,E,M,T,z,I,fe.x,fe.y)&&In(fe.prev,fe,fe.next)>=0))return!1;fe=fe.nextZ}for(;ne&&ne.z>=ae;){if(ne.x>=N&&ne.x<=j&&ne.y>=O&&ne.y<=X&&ne!==h&&ne!==y&&$4(b,E,M,T,z,I,ne.x,ne.y)&&In(ne.prev,ne,ne.next)>=0)return!1;ne=ne.prevZ}for(;fe&&fe.z<=pe;){if(fe.x>=N&&fe.x<=j&&fe.y>=O&&fe.y<=X&&fe!==h&&fe!==y&&$4(b,E,M,T,z,I,fe.x,fe.y)&&In(fe.prev,fe,fe.next)>=0)return!1;fe=fe.nextZ}return!0}function Zd(o,a,c){var u=o;do{var h=u.prev,g=u.next.next;!G6(h,g)&&Xd(h,u,u.next,g)&&_0(h,g)&&_0(g,h)&&(a.push(h.i/c|0),a.push(u.i/c|0),a.push(g.i/c|0),v0(u),v0(u.next),u=o=g),u=u.next}while(u!==o);return Jc(u)}function Yd(o,a,c,u,h,g){var y=o;do{for(var b=y.next.next;b!==y.prev;){if(y.i!==b.i&&xa(y,b)){var M=Kd(y,b);return y=Jc(y,y.next),M=Jc(M,M.next),e3(y,a,c,u,h,g,0),void e3(M,a,c,u,h,g,0)}b=b.next}y=y.next}while(y!==o)}function Z3(o,a){return o.x-a.x}function vm(o,a){var c=function(h,g){var y,b=g,M=h.x,z=h.y,E=-1/0;do{if(z<=b.y&&z>=b.next.y&&b.next.y!==b.y){var T=b.x+(z-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(T<=M&&T>E&&(E=T,y=b.x<b.next.x?b:b.next,T===M))return y}b=b.next}while(b!==g);if(!y)return null;var I,N=y,O=y.x,j=y.y,X=1/0;b=y;do{M>=b.x&&b.x>=O&&M!==b.x&&$4(z<j?M:E,z,O,j,z<j?E:M,z,b.x,b.y)&&(I=Math.abs(z-b.y)/(M-b.x),_0(b,h)&&(I<X||I===X&&(b.x>y.x||b.x===y.x&&ym(y,b)))&&(y=b,X=I)),b=b.next}while(b!==N);return y}(o,a);if(!c)return a;var u=Kd(c,o);return Jc(u,u.next),Jc(c,c.next)}function ym(o,a){return In(o.prev,o,a.prev)<0&&In(a.next,o,o.next)<0}function Y5(o,a,c,u,h){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-c)*h|0)|o<<8))|o<<4))|o<<2))|o<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-u)*h|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function xm(o){var a=o,c=o;do{(a.x<c.x||a.x===c.x&&a.y<c.y)&&(c=a),a=a.next}while(a!==o);return c}function $4(o,a,c,u,h,g,y,b){return(h-y)*(a-b)>=(o-y)*(g-b)&&(o-y)*(u-b)>=(c-y)*(a-b)&&(c-y)*(g-b)>=(h-y)*(u-b)}function xa(o,a){return o.next.i!==a.i&&o.prev.i!==a.i&&!function(c,u){var h=c;do{if(h.i!==c.i&&h.next.i!==c.i&&h.i!==u.i&&h.next.i!==u.i&&Xd(h,h.next,c,u))return!0;h=h.next}while(h!==c);return!1}(o,a)&&(_0(o,a)&&_0(a,o)&&function(c,u){var h=c,g=!1,y=(c.x+u.x)/2,b=(c.y+u.y)/2;do{h.y>b!=h.next.y>b&&h.next.y!==h.y&&y<(h.next.x-h.x)*(b-h.y)/(h.next.y-h.y)+h.x&&(g=!g),h=h.next}while(h!==c);return g}(o,a)&&(In(o.prev,o,a.prev)||In(o,a.prev,a))||G6(o,a)&&In(o.prev,o,o.next)>0&&In(a.prev,a,a.next)>0)}function In(o,a,c){return(a.y-o.y)*(c.x-a.x)-(a.x-o.x)*(c.y-a.y)}function G6(o,a){return o.x===a.x&&o.y===a.y}function Xd(o,a,c,u){var h=q6(In(o,a,c)),g=q6(In(o,a,u)),y=q6(In(c,u,o)),b=q6(In(c,u,a));return h!==g&&y!==b||!(0!==h||!$6(o,c,a))||!(0!==g||!$6(o,u,a))||!(0!==y||!$6(c,o,u))||!(0!==b||!$6(c,a,u))}function $6(o,a,c){return a.x<=Math.max(o.x,c.x)&&a.x>=Math.min(o.x,c.x)&&a.y<=Math.max(o.y,c.y)&&a.y>=Math.min(o.y,c.y)}function q6(o){return o>0?1:o<0?-1:0}function _0(o,a){return In(o.prev,o,o.next)<0?In(o,a,o.next)>=0&&In(o,o.prev,a)>=0:In(o,a,o.prev)<0||In(o,o.next,a)<0}function Kd(o,a){var c=new K5(o.i,o.x,o.y),u=new K5(a.i,a.x,a.y),h=o.next,g=a.prev;return o.next=a,a.prev=o,c.next=h,h.prev=c,u.next=c,c.prev=u,g.next=u,u.prev=g,u}function X5(o,a,c,u){var h=new K5(o,a,c);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function v0(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function K5(o,a,c){this.i=o,this.x=a,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Q5(o,a,c,u){for(var h=0,g=a,y=c-u;g<c;g+=u)h+=(o[y]-o[g])*(o[g+1]+o[y+1]),y=g;return h}function bm(o,a,c,u,h){y0(o,a,c||0,u||o.length-1,h||x0)}function y0(o,a,c,u,h){for(;u>c;){if(u-c>600){var g=u-c+1,y=a-c+1,b=Math.log(g),M=.5*Math.exp(2*b/3),z=.5*Math.sqrt(b*M*(g-M)/g)*(y-g/2<0?-1:1);y0(o,a,Math.max(c,Math.floor(a-y*M/g+z)),Math.min(u,Math.floor(a+(g-y)*M/g+z)),h)}var E=o[a],T=c,I=u;for(ba(o,c,a),h(o[u],E)>0&&ba(o,c,u);T<I;){for(ba(o,T,I),T++,I--;h(o[T],E)<0;)T++;for(;h(o[I],E)>0;)I--}0===h(o[c],E)?ba(o,c,I):ba(o,++I,u),I<=a&&(c=I+1),a<=I&&(u=I-1)}}function ba(o,a,c){var u=o[a];o[a]=o[c],o[c]=u}function x0(o,a){return o<a?-1:o>a?1:0}function W6(o,a){const c=o.length;if(c<=1)return[o];const u=[];let h,g;for(let y=0;y<c;y++){const b=X1(o[y]);0!==b&&(o[y].area=Math.abs(b),void 0===g&&(g=b<0),g===b<0?(h&&u.push(h),h=[o[y]]):h.push(o[y]))}if(h&&u.push(h),a>1)for(let y=0;y<u.length;y++)u[y].length<=a||(bm(u[y],a,1,u[y].length-1,Qd),u[y]=u[y].slice(0,a));return u}function Qd(o,a){return a.area-o.area}function Z6(o,a,c){const u=c.patternDependencies;let h=!1;for(const g of a){const y=g.paint.get(`${o}-pattern`);y.isConstant()||(h=!0);const b=y.constantOr(null);b&&(h=!0,u[b]=!0)}return h}function Jd(o,a,c,u,h){const g=h.patternDependencies;for(const y of a){const b=y.paint.get(`${o}-pattern`).value;if("constant"!==b.kind){let M=b.evaluate({zoom:u},c,{},h.availableImages);M=M&&M.name?M.name:M,g[M]=!0,c.patterns[y.id]=M}}return c}({get exports(){return j4},set exports(o){j4=o}}).exports=G4,j4.default=G4,G4.deviation=function(o,a,c,u){var h=a&&a.length,g=Math.abs(Q5(o,0,h?a[0]*c:o.length,c));if(h)for(var y=0,b=a.length;y<b;y++)g-=Math.abs(Q5(o,a[y]*c,y<b-1?a[y+1]*c:o.length,c));var M=0;for(y=0;y<u.length;y+=3){var z=u[y]*c,E=u[y+1]*c,T=u[y+2]*c;M+=Math.abs((o[z]-o[T])*(o[E+1]-o[z+1])-(o[z]-o[E])*(o[T+1]-o[z+1]))}return 0===g&&0===M?0:Math.abs((M-g)/g)},G4.flatten=function(o){for(var a=o[0][0].length,c={vertices:[],holes:[],dimensions:a},u=0,h=0;h<o.length;h++){for(var g=0;g<o[h].length;g++)for(var y=0;y<a;y++)c.vertices.push(o[h][g][y]);h>0&&c.holes.push(u+=o[h-1].length)}return c};class J5{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Nt,this.indexArray=new ui,this.indexArray2=new So,this.programConfigurations=new Bc(a.layers,a.zoom),this.segments=new V2,this.segments2=new V2,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.projection=a.projection}populate(a,c,u,h){this.hasPattern=Z6("fill",this.layers,c);const g=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:b,id:M,index:z,sourceLayerIndex:E}of a){const T=this.layers[0]._featureFilter.needGeometry,I=Zc(b,T);if(!this.layers[0]._featureFilter.filter(new Se(this.zoom),I,u))continue;const N=g?g.evaluate(I,{},u,c.availableImages):void 0,O={id:M,properties:b.properties,type:b.type,sourceLayerIndex:E,index:z,geometry:T?I.geometry:To(b,u,h),patterns:{},sortKey:N};y.push(O)}g&&y.sort((b,M)=>b.sortKey-M.sortKey);for(const b of y){const{geometry:M,index:z,sourceLayerIndex:E}=b;if(this.hasPattern){const T=Jd("fill",this.layers,b,this.zoom,c);this.patternFeatures.push(T)}else this.addFeature(b,M,z,u,{},c.availableImages);c.featureIndex.insert(a[z].feature,M,z,E,this.index)}}update(a,c,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,u,h)}addFeatures(a,c,u,h,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,c,u,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,jb),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,c,u,h,g,y=[]){for(const b of W6(c,500)){let M=0;for(const O of b)M+=O.length;const z=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),E=z.vertexLength,T=[],I=[];for(const O of b){if(0===O.length)continue;O!==b[0]&&I.push(T.length/2);const j=this.segments2.prepareSegment(O.length,this.layoutVertexArray,this.indexArray2),X=j.vertexLength;this.layoutVertexArray.emplaceBack(O[0].x,O[0].y),this.indexArray2.emplaceBack(X+O.length-1,X),T.push(O[0].x),T.push(O[0].y);for(let ae=1;ae<O.length;ae++)this.layoutVertexArray.emplaceBack(O[ae].x,O[ae].y),this.indexArray2.emplaceBack(X+ae-1,X+ae),T.push(O[ae].x),T.push(O[ae].y);j.vertexLength+=O.length,j.primitiveLength+=O.length}const N=j4(T,I);for(let O=0;O<N.length;O+=3)this.indexArray.emplaceBack(E+N[O],E+N[O+1],E+N[O+2]);z.vertexLength+=M,z.primitiveLength+=N.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,u,g,y,h)}}At(J5,"FillBucket",{omit:["layers","patternFeatures"]});const Gb=new dt({"fill-sort-key":new Ne(Ge.layout_fill["fill-sort-key"])});var eu={paint:new dt({"fill-antialias":new Ae(Ge.paint_fill["fill-antialias"]),"fill-opacity":new Ne(Ge.paint_fill["fill-opacity"]),"fill-color":new Ne(Ge.paint_fill["fill-color"]),"fill-outline-color":new Ne(Ge.paint_fill["fill-outline-color"]),"fill-translate":new Ae(Ge.paint_fill["fill-translate"]),"fill-translate-anchor":new Ae(Ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ne(Ge.paint_fill["fill-pattern"])}),layout:Gb};const tu=Pt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),$b=Pt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),qb=Pt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:ef}=tu;var Y6={},Cm=ht,tf=q4;function q4(o,a,c,u,h){this.properties={},this.extent=c,this.type=0,this._pbf=o,this._geometry=-1,this._keys=u,this._values=h,o.readFields(nf,this,a)}function nf(o,a,c){1==o?a.id=c.readVarint():2==o?function(u,h){for(var g=u.readVarint()+u.pos;u.pos<g;){var y=h._keys[u.readVarint()],b=h._values[u.readVarint()];h.properties[y]=b}}(c,a):3==o?a.type=c.readVarint():4==o&&(a._geometry=c.pos)}function X6(o){for(var a,c,u=0,h=0,g=o.length,y=g-1;h<g;y=h++)u+=((c=o[y]).x-(a=o[h]).x)*(a.y+c.y);return u}q4.types=["Unknown","Point","LineString","Polygon"],q4.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var a,c=o.readVarint()+o.pos,u=1,h=0,g=0,y=0,b=[];o.pos<c;){if(h<=0){var M=o.readVarint();u=7&M,h=M>>3}if(h--,1===u||2===u)g+=o.readSVarint(),y+=o.readSVarint(),1===u&&(a&&b.push(a),a=[]),a.push(new Cm(g,y));else{if(7!==u)throw new Error("unknown command "+u);a&&a.push(a[0].clone())}}return a&&b.push(a),b},q4.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var a=o.readVarint()+o.pos,c=1,u=0,h=0,g=0,y=1/0,b=-1/0,M=1/0,z=-1/0;o.pos<a;){if(u<=0){var E=o.readVarint();c=7&E,u=E>>3}if(u--,1===c||2===c)(h+=o.readSVarint())<y&&(y=h),h>b&&(b=h),(g+=o.readSVarint())<M&&(M=g),g>z&&(z=g);else if(7!==c)throw new Error("unknown command "+c)}return[y,M,b,z]},q4.prototype.toGeoJSON=function(o,a,c){var u,h,g=this.extent*Math.pow(2,c),y=this.extent*o,b=this.extent*a,M=this.loadGeometry(),z=q4.types[this.type];function E(N){for(var O=0;O<N.length;O++){var j=N[O];N[O]=[360*(j.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(j.y+b)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var T=[];for(u=0;u<M.length;u++)T[u]=M[u][0];E(M=T);break;case 2:for(u=0;u<M.length;u++)E(M[u]);break;case 3:for(M=function(N){var O=N.length;if(O<=1)return[N];for(var j,X,ae=[],pe=0;pe<O;pe++){var ne=X6(N[pe]);0!==ne&&(void 0===X&&(X=ne<0),X===ne<0?(j&&ae.push(j),j=[N[pe]]):j.push(N[pe]))}return j&&ae.push(j),ae}(M),u=0;u<M.length;u++)for(h=0;h<M[u].length;h++)E(M[u][h])}1===M.length?M=M[0]:z="Multi"+z;var I={type:"Feature",geometry:{type:z,coordinates:M},properties:this.properties};return"id"in this&&(I.id=this.id),I};var rf=tf,K6=af;function af(o,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Yn,this,a),this.length=this._features.length}function Yn(o,a,c){15===o?a.version=c.readVarint():1===o?a.name=c.readString():5===o?a.extent=c.readVarint():2===o?a._features.push(c.pos):3===o?a._keys.push(c.readString()):4===o&&a._values.push(function(u){for(var h=null,g=u.readVarint()+u.pos;u.pos<g;){var y=u.readVarint()>>3;h=1===y?u.readString():2===y?u.readFloat():3===y?u.readDouble():4===y?u.readVarint64():5===y?u.readVarint():6===y?u.readSVarint():7===y?u.readBoolean():null}return h}(c))}af.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var a=this._pbf.readVarint()+this._pbf.pos;return new rf(this._pbf,a,this.extent,this._keys,this._values)};var sf=K6;function wm(o,a,c){if(3===o){var u=new sf(c,c.readVarint()+c.pos);u.length&&(a[u.name]=u)}}var Ho=Y6.VectorTile=function(o,a){this.layers=o.readFields(wm,{},a)},W4=Y6.VectorTileFeature=tf;function Q6(o,a,c,u){const h=[],g=0===u?(y,b,M,z,E,T)=>{y.push(new ht(T,M+(T-b)/(z-b)*(E-M)))}:(y,b,M,z,E,T)=>{y.push(new ht(b+(T-M)/(E-M)*(z-b),T))};for(const y of o){const b=[];for(const M of y){if(M.length<=2)continue;const z=[];for(let I=0;I<M.length-1;I++){const N=M[I].x,O=M[I].y,j=M[I+1].x,X=M[I+1].y,ae=0===u?N:O,pe=0===u?j:X;ae<a?pe>a&&g(z,N,O,j,X,a):ae>c?pe<c&&g(z,N,O,j,X,c):z.push(M[I]),pe<a&&ae>=a&&g(z,N,O,j,X,a),pe>c&&ae<=c&&g(z,N,O,j,X,c)}let E=M[M.length-1];const T=0===u?E.x:E.y;T>=a&&T<=c&&z.push(E),z.length&&(E=z[z.length-1],z[0].x===E.x&&z[0].y===E.y||z.push(z[0]),b.push(z))}b.length&&h.push(b)}return h}Y6.VectorTileLayer=K6;const Mm=W4.types,zm=Math.pow(2,13);function b0(o,a,c,u,h,g,y,b){o.emplaceBack((a<<1)+y,(c<<1)+g,(Math.floor(u*zm)<<1)+h,Math.round(b))}function Z4(o,a,c){o.emplaceBack(a.x,a.y,a.z,16384*c[0],16384*c[1],16384*c[2])}class Sm{constructor(){this.acc=new ht(0,0),this.polyCount=[]}startRing(a){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ht(a.x,a.y),this.max=new ht(a.x,a.y))}append(a,c){this.currentPolyCount.edges++,this.acc._add(a);const u=this.min,h=this.max;a.x<u.x?u.x=a.x:a.x>h.x&&(h.x=a.x),a.y<u.y?u.y=a.y:a.y>h.y&&(h.y=a.y),((0===a.x||a.x===Xt)&&a.x===c.x)!=((0===a.y||a.y===Xt)&&a.y===c.y)&&this.processBorderOverlap(a,c),c.x<0!=a.x<0&&this.addBorderIntersection(0,G1(c.y,a.y,(0-c.x)/(a.x-c.x))),c.x>Xt!=a.x>Xt&&this.addBorderIntersection(1,G1(c.y,a.y,(Xt-c.x)/(a.x-c.x))),c.y<0!=a.y<0&&this.addBorderIntersection(2,G1(c.x,a.x,(0-c.y)/(a.y-c.y))),c.y>Xt!=a.y>Xt&&this.addBorderIntersection(3,G1(c.x,a.x,(Xt-c.y)/(a.y-c.y)))}addBorderIntersection(a,c){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[a];c<u[0]&&(u[0]=c),c>u[1]&&(u[1]=c)}processBorderOverlap(a,c){if(a.x===c.x){if(a.y===c.y)return;const u=0===a.x?0:1;this.addBorderIntersection(u,c.y),this.addBorderIntersection(u,a.y)}else{const u=0===a.y?2:3;this.addBorderIntersection(u,c.x),this.addBorderIntersection(u,a.x)}}centroid(){const a=this.polyCount.reduce((c,u)=>c+u.edges,0);return 0!==a?this.acc.div(a)._round():new ht(0,0)}span(){return new ht(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((a,c)=>a+ +(c[0]!==Number.MAX_VALUE),0)}}class J6{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=a.projection,this.layoutVertexArray=new _n,this.centroidVertexArray=new z5,this.indexArray=new ui,this.programConfigurations=new Bc(a.layers,a.zoom),this.segments=new V2,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.enableTerrain=a.enableTerrain}populate(a,c,u,h){this.features=[],this.hasPattern=Z6("fill-extrusion",this.layers,c),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const y=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*y/(y*y+1)/Xt/(1<<g.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:y,index:b,sourceLayerIndex:M}of a){const z=this.layers[0]._featureFilter.needGeometry,E=Zc(g,z);if(!this.layers[0]._featureFilter.filter(new Se(this.zoom),E,u))continue;const T={id:y,sourceLayerIndex:M,index:b,geometry:z?E.geometry:To(g,u,h),properties:g.properties,type:g.type,patterns:{}},I=this.layoutVertexArray.length;this.hasPattern?this.features.push(Jd("fill-extrusion",this.layers,T,this.zoom,c)):this.addFeature(T,T.geometry,b,u,{},c.availableImages,h),c.featureIndex.insert(g,T.geometry,b,M,this.index,I)}this.sortBorders()}addFeatures(a,c,u,h,g){for(const y of this.features){const{geometry:b}=y;this.addFeature(y,b,y.index,c,u,h,g)}this.sortBorders()}update(a,c,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,u,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,ef),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=a.createVertexBuffer(this.layoutVertexExtArray,qb.members,!0))),this.programConfigurations.upload(a),this.uploaded=!0}uploadCentroid(a){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,$b.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,c,u,h,g,y,b){const M=[new ht(0,0),new ht(Xt,Xt)],z=b.projection,E="globe"===z.name,T=this.enableTerrain&&!E?new Sm:null,I="Polygon"===Mm[a.type];E&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new fr);const N=W6(c,500);for(let ae=N.length-1;ae>=0;ae--){const pe=N[ae];(0===pe.length||(O=pe[0]).every(ne=>ne.x<=0)||O.every(ne=>ne.x>=Xt)||O.every(ne=>ne.y<=0)||O.every(ne=>ne.y>=Xt))&&N.splice(ae,1)}var O;let j;if(E)j=au(N,M,h);else{j=[];for(const ae of N)j.push({polygon:ae,bounds:M})}const X=I?this.edgeRadius:0;for(const{polygon:ae,bounds:pe}of j){let ne=0,fe=0;for(const me of ae)I&&!me[0].equals(me[me.length-1])&&me.push(me[0]),fe+=I?me.length-1:me.length;const _e=this.segments.prepareSegment((I?5:4)*fe,this.layoutVertexArray,this.indexArray);if(I){const me=[],Ve=[];ne=_e.vertexLength;for(const We of ae){let ct,ze;We.length&&We!==ae[0]&&Ve.push(me.length/2),ct=We[1].sub(We[0])._perp()._unit();for(let Xe=1;Xe<We.length;Xe++){const et=We[Xe],lt=We[Xe===We.length-1?1:Xe+1];let{x:ft,y:Oe}=et;if(X){ze=lt.sub(et)._perp()._unit();const _t=ct.add(ze)._unit(),Ut=X*Math.min(4,1/(ct.x*_t.x+ct.y*_t.y));ft+=Ut*_t.x,Oe+=Ut*_t.y,ct=ze}b0(this.layoutVertexArray,ft,Oe,0,0,1,1,0),_e.vertexLength++,me.push(et.x,et.y),E&&Z4(this.layoutVertexExtArray,z.projectTilePoint(ft,Oe,h),z.upVector(h,ft,Oe))}}const Te=j4(me,Ve);for(let We=0;We<Te.length;We+=3)this.indexArray.emplaceBack(ne+Te[We],ne+Te[We+2],ne+Te[We+1]),_e.primitiveLength++}for(const me of ae){T&&me.length&&T.startRing(me[0]);let Ve,Te,We,ct=me.length>4&&ru(me[me.length-2],me[0],me[1]),ze=X?e8(me[me.length-2],me[0],me[1],X):0;Te=me[1].sub(me[0])._perp()._unit();let Xe=!0;for(let et=1,lt=0;et<me.length;et++){let ft=me[et-1],Oe=me[et];const _t=me[et===me.length-1?1:et+1];if(T&&I&&T.currentPolyCount.top++,iu(Oe,ft,pe)){X&&(Te=_t.sub(Oe)._perp()._unit(),Xe=!Xe);continue}T&&T.append(Oe,ft);const Ut=Oe.sub(ft)._perp(),Ct=Ut.x/(Math.abs(Ut.x)+Math.abs(Ut.y)),zt=Ut.y>0?1:0,bt=ft.dist(Oe);if(lt+bt>32768&&(lt=0),X){We=_t.sub(Oe)._perp()._unit();let E1=nu(ft,Oe,_t,Y4(Te,We),X);isNaN(E1)&&(E1=0);const Yt=Oe.sub(ft)._unit();ft=ft.add(Yt.mult(ze))._round(),Oe=Oe.add(Yt.mult(-E1))._round(),ze=E1,Te=We}const Zt=_e.vertexLength,O1=me.length>4&&ru(ft,Oe,_t);let F1=cf(lt,ct,Xe);if(b0(this.layoutVertexArray,ft.x,ft.y,Ct,zt,0,0,F1),b0(this.layoutVertexArray,ft.x,ft.y,Ct,zt,0,1,F1),lt+=bt,F1=cf(lt,O1,!Xe),ct=O1,b0(this.layoutVertexArray,Oe.x,Oe.y,Ct,zt,0,0,F1),b0(this.layoutVertexArray,Oe.x,Oe.y,Ct,zt,0,1,F1),_e.vertexLength+=4,this.indexArray.emplaceBack(Zt+0,Zt+1,Zt+2),this.indexArray.emplaceBack(Zt+1,Zt+3,Zt+2),_e.primitiveLength+=2,X){const E1=ne+(1===et?me.length-2:et-2),Yt=1===et?ne:E1+1;if(this.indexArray.emplaceBack(Zt+1,E1,Zt+3),this.indexArray.emplaceBack(E1,Yt,Zt+3),_e.primitiveLength+=2,void 0===Ve&&(Ve=Zt),!iu(_t,me[et],pe)){const xn=et===me.length-1?Ve:_e.vertexLength;this.indexArray.emplaceBack(Zt+2,Zt+3,xn),this.indexArray.emplaceBack(Zt+3,xn+1,xn),this.indexArray.emplaceBack(Zt+3,Yt,xn+1),_e.primitiveLength+=3}Xe=!Xe}if(E){const E1=this.layoutVertexExtArray,Yt=z.projectTilePoint(ft.x,ft.y,h),xn=z.projectTilePoint(Oe.x,Oe.y,h),c1=z.upVector(h,ft.x,ft.y),B1=z.upVector(h,Oe.x,Oe.y);Z4(E1,Yt,c1),Z4(E1,Yt,c1),Z4(E1,xn,B1),Z4(E1,xn,B1)}}I&&(ne+=me.length-1)}}if(T&&T.polyCount.length>0){if(T.borders){T.vertexArrayOffset=this.centroidVertexArray.length;const ae=T.borders,pe=this.featuresOnBorder.push(T)-1;for(let ne=0;ne<4;ne++)ae[ne][0]!==Number.MAX_VALUE&&this.borders[ne].push(pe)}this.encodeCentroid(T.borders?void 0:T.centroid(),T)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,u,g,y,h)}sortBorders(){for(let a=0;a<4;a++)this.borders[a].sort((c,u)=>this.featuresOnBorder[c].borders[a][0]-this.featuresOnBorder[u].borders[a][0])}encodeCentroid(a,c,u=!0){let h,g;if(a)if(0!==a.y){const b=c.span()._mult(this.tileToMeter);h=(Math.max(a.x,1)<<3)+Math.min(7,Math.round(b.x/10)),g=(Math.max(a.y,1)<<3)+Math.min(7,Math.round(b.y/10))}else h=Math.ceil(7*(a.x+450)),g=0;else h=0,g=+u;let y=u?this.centroidVertexArray.length:c.vertexArrayOffset;for(const b of c.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*b.edges+b.top);for(let M=0;M<b.top;M++)this.centroidVertexArray.emplace(y++,h,g);for(let M=0;M<2*b.edges;M++)this.centroidVertexArray.emplace(y++,0,g),this.centroidVertexArray.emplace(y++,h,g)}}}function Y4(o,a){const c=o.add(a)._unit();return o.x*c.x+o.y*c.y}function e8(o,a,c,u){const h=a.sub(o)._perp()._unit(),g=c.sub(a)._perp()._unit();return nu(o,a,c,Y4(h,g),u)}function nu(o,a,c,u,h){const g=Math.sqrt(1-u*u);return Math.min(o.dist(a)/3,a.dist(c)/3,h*g/u)}function iu(o,a,c){return o.x<c[0].x&&a.x<c[0].x||o.x>c[1].x&&a.x>c[1].x||o.y<c[0].y&&a.y<c[0].y||o.y>c[1].y&&a.y>c[1].y}function ru(o,a,c){if(o.x<0||o.x>=Xt||a.x<0||a.x>=Xt||c.x<0||c.x>=Xt)return!1;const u=c.sub(a),h=u.perp(),g=o.sub(a);return(u.x*g.x+u.y*g.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(g.x*g.x+g.y*g.y))>-.866&&h.x*g.x+h.y*g.y<0}function cf(o,a,c){const u=a?2|o:-3&o;return c?1|u:-2&u}function lf(){const o=Math.PI/32,a=Math.tan(o),c=W3;return c*Math.sqrt(1+2*a*a)-c}function au(o,a,c){const u=1<<c.z,h=ra(c.x/u),g=ra((c.x+1)/u),y=b2(c.y/u),b=b2((c.y+1)/u);return function(M,z,E,T,I=0,N){const O=[];if(!M.length||!E||!T)return O;const j=(me,Ve)=>{for(const Te of me)O.push({polygon:Te,bounds:Ve})},X=Math.ceil(Math.log2(E)),ae=Math.ceil(Math.log2(T)),pe=X-ae,ne=[];for(let me=0;me<Math.abs(pe);me++)ne.push(pe>0?0:1);for(let me=0;me<Math.min(X,ae);me++)ne.push(0),ne.push(1);let fe=M;if(fe=Q6(fe,z[0].y-I,z[1].y+I,1),fe=Q6(fe,z[0].x-I,z[1].x+I,0),!fe.length)return O;const _e=[];for(ne.length?_e.push({polygons:fe,bounds:z,depth:0}):j(fe,z);_e.length;){const me=_e.pop(),Ve=me.depth,Te=ne[Ve],We=me.bounds[0],ct=me.bounds[1],ze=0===Te?We.x:We.y,Xe=0===Te?ct.x:ct.y,et=N?N(Te,ze,Xe):.5*(ze+Xe),lt=Q6(me.polygons,ze-I,et+I,Te),ft=Q6(me.polygons,et-I,Xe+I,Te);if(lt.length){const Oe=[We,new ht(0===Te?et:ct.x,1===Te?et:ct.y)];ne.length>Ve+1?_e.push({polygons:lt,bounds:Oe,depth:Ve+1}):j(lt,Oe)}if(ft.length){const Oe=[new ht(0===Te?et:We.x,1===Te?et:We.y),ct];ne.length>Ve+1?_e.push({polygons:ft,bounds:Oe,depth:Ve+1}):j(ft,Oe)}}return O}(o,a,Math.ceil((g-h)/11.25),Math.ceil((y-b)/11.25),1,(M,z,E)=>{if(0===M)return.5*(z+E);{const T=b2((c.y+z/Xt)/u);return(eo(.5*(b2((c.y+E/Xt)/u)+T))*u-c.y)*Xt}})}At(J6,"FillExtrusionBucket",{omit:["layers","features"]}),At(Sm,"PartMetadata");const uf=new dt({"fill-extrusion-edge-radius":new Ae(Ge["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ou={paint:new dt({"fill-extrusion-opacity":new Ae(Ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ne(Ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ae(Ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ae(Ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ne(Ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ne(Ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ne(Ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ae(Ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ae(Ge["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ae(Ge["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:uf};function Dm(o,a,c){var u=2*Math.PI*6378137/256/Math.pow(2,c);return[o*u-2*Math.PI*6378137/2,a*u-2*Math.PI*6378137/2]}class X4{constructor(a,c,u){this.z=a,this.x=c,this.y=u,this.key=K4(0,a,a,c,u)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,c){const u=(y=this.y,b=this.z,M=Dm(256*(g=this.x),256*(y=Math.pow(2,b)-y-1),b),z=Dm(256*(g+1),256*(y+1),b),M[0]+","+M[1]+","+z[0]+","+z[1]),h=function(g,y,b){let M,z="";for(let E=g;E>0;E--)M=1<<E-1,z+=(y&M?1:0)+(b&M?2:0);return z}(this.z,this.x,this.y);var g,y,b,M,z;return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===c?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class df{constructor(a,c){this.wrap=a,this.canonical=c,this.key=K4(a,c.z,c.z,c.x,c.y)}}class Vi{constructor(a,c,u,h,g){this.overscaledZ=a,this.wrap=c,this.canonical=new X4(u,+h,+g),this.key=0===c&&a===u?this.canonical.key:K4(c,a,u,h,g)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){const c=this.canonical.z-a;return a>this.canonical.z?new Vi(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Vi(a,this.wrap,a,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(a,c=!0){if(this.overscaledZ===a&&c)return this.key;if(a>this.canonical.z)return K4(this.wrap*+c,a,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-a;return K4(this.wrap*+c,a,a,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(a){if(a.wrap!==this.wrap)return!1;const c=this.canonical.z-a.canonical.z;return 0===a.overscaledZ||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>c&&a.canonical.y===this.canonical.y>>c}children(a){if(this.overscaledZ>=a)return[new Vi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,u=2*this.canonical.x,h=2*this.canonical.y;return[new Vi(c,this.wrap,c,u,h),new Vi(c,this.wrap,c,u+1,h),new Vi(c,this.wrap,c,u,h+1),new Vi(c,this.wrap,c,u+1,h+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Vi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Vi(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new df(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function K4(o,a,c,u,h){const g=1<<Math.min(c,22);let y=g*(h%g)+u%g;return o&&c<22&&(y+=g*g*((o<0?-2*o-1:2*o)%(1<<2*(22-c)))),16*(32*y+c)+(a-c)}At(X4,"CanonicalTileID"),At(Vi,"OverscaledTileID",{omit:["projMatrix"]});class Y3 extends ht{constructor(a,c,u){super(a,c),this.z=u}}function ko(o,a){return o.x*a.x+o.y*a.y}function ff(o,a){if(1===o.length){let c=0;const u=a[c++];let h;for(;!h||u.equals(h);)if(h=a[c++],!h)return 1/0;for(;c<a.length;c++){const g=a[c],y=o[0],b=h.sub(u),M=g.sub(u),z=y.sub(u),E=ko(b,b),T=ko(b,M),I=ko(M,M),N=ko(z,b),O=ko(z,M),j=E*I-T*T,X=(I*N-T*O)/j,ae=(E*O-T*N)/j,pe=u.z*(1-X-ae)+h.z*X+g.z*ae;if(isFinite(pe))return pe}return 1/0}{let c=1/0;for(const u of a)c=Math.min(c,u.z);return c}}function t8(o,a,c,u,h,g,y,b){const M=y*h.getElevationAt(o,a,!0,!0),z=0!==g[0],E=z?0===g[1]?y*(g[0]/7-450):y*function(T,I,N){const O=Math.floor(I[0]/8),j=Math.floor(I[1]/8),X=10*(I[0]-8*O),ae=10*(I[1]-8*j),pe=T.getElevationAt(O,j,!0,!0),ne=T.getMeterToDEM(N),fe=Math.floor(.5*(X*ne-1)),_e=Math.floor(.5*(ae*ne-1)),me=T.tileCoordToPixel(O,j),Ve=2*fe+1,Te=2*_e+1,We=(Ut=Ve,Ct=Te,[(ft=T).getElevationAtPixel(Oe=me.x-fe,_t=me.y-_e,!0),ft.getElevationAtPixel(Oe+Ct,_t,!0),ft.getElevationAtPixel(Oe,_t+Ct,!0),ft.getElevationAtPixel(Oe+Ut,_t+Ct,!0)]),ct=Math.abs(We[0]-We[1]),ze=Math.abs(We[2]-We[3]),Xe=Math.abs(We[0]-We[2])+Math.abs(We[1]-We[3]),et=Math.min(.25,.5*ne*(ct+ze)/Ve),lt=Math.min(.25,.5*ne*Xe/Te);var ft,Oe,_t,Ut,Ct;return pe+Math.max(et*X,lt*ae)}(h,g,b):M;return{base:M+(0===c)?-1:c,top:z?Math.max(E+u,M+c+2):M+u}}const n8=Pt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Am}=n8,su=Pt([{name:"a_packed",components:4,type:"Float32"}]),{members:i8}=su,bs=W4.types,hf=Math.cos(Math.PI/180*37.5);class Q4{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.projection=a.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new Mn,this.layoutVertexArray2=new kn,this.indexArray=new ui,this.programConfigurations=new Bc(a.layers,a.zoom),this.segments=new V2,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(a,c,u,h){this.hasPattern=Z6("line",this.layers,c);const g=this.layers[0].layout.get("line-sort-key"),y=[];for(const{feature:E,id:T,index:I,sourceLayerIndex:N}of a){const O=this.layers[0]._featureFilter.needGeometry,j=Zc(E,O);if(!this.layers[0]._featureFilter.filter(new Se(this.zoom),j,u))continue;const X=g?g.evaluate(j,{},u):void 0,ae={id:T,properties:E.properties,type:E.type,sourceLayerIndex:N,index:I,geometry:O?j.geometry:To(E,u,h),patterns:{},sortKey:X};y.push(ae)}g&&y.sort((E,T)=>E.sortKey-T.sortKey);const{lineAtlas:b,featureIndex:M}=c,z=this.addConstantDashes(b);for(const E of y){const{geometry:T,index:I,sourceLayerIndex:N}=E;if(z&&this.addFeatureDashes(E,b),this.hasPattern){const O=Jd("line",this.layers,E,this.zoom,c);this.patternFeatures.push(O)}else this.addFeature(E,T,I,u,b.positions,c.availableImages);M.insert(a[I].feature,T,I,N,this.index)}}addConstantDashes(a){let c=!1;for(const u of this.layers){const h=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if("constant"!==h.kind||"constant"!==g.kind)c=!0;else{const y=g.value,b=h.value;if(!b)continue;a.addDash(b,y)}}return c}addFeatureDashes(a,c){const u=this.zoom;for(const h of this.layers){const g=h.paint.get("line-dasharray").value,y=h.layout.get("line-cap").value;if("constant"===g.kind&&"constant"===y.kind)continue;let b,M;if("constant"===g.kind){if(b=g.value,!b)continue}else b=g.evaluate({zoom:u},a);M="constant"===y.kind?y.value:y.evaluate({zoom:u},a),c.addDash(b,M),a.patterns[h.id]=c.getKey(b,M)}}update(a,c,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,u,h)}addFeatures(a,c,u,h,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,c,u,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,i8)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Am),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,c,u,h,g,y){const b=this.layers[0].layout,M=b.get("line-join").evaluate(a,{}),z=b.get("line-cap").evaluate(a,{}),E=b.get("line-miter-limit"),T=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const I of c)this.addLine(I,a,M,z,E,T);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,u,g,y,h)}addLine(a,c,u,h,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ae=0;ae<a.length-1;ae++)this.totalDistance+=a[ae].dist(a[ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b="Polygon"===bs[c.type];let M=a.length;for(;M>=2&&a[M-1].equals(a[M-2]);)M--;let z=0;for(;z<M-1&&a[z].equals(a[z+1]);)z++;if(M<(b?3:2))return;"bevel"===u&&(g=1.05);const E=this.overscaling<=16?122880/(512*this.overscaling):0,T=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let I,N,O,j,X;this.e1=this.e2=-1,b&&(I=a[M-2],X=a[z].sub(I)._unit()._perp());for(let ae=z;ae<M;ae++){if(O=ae===M-1?b?a[z+1]:void 0:a[ae+1],O&&a[ae].equals(O))continue;X&&(j=X),I&&(N=I),I=a[ae],X=O?O.sub(I)._unit()._perp():j,j=j||X;let pe=j.add(X);0===pe.x&&0===pe.y||pe._unit();const ne=j.x*X.x+j.y*X.y,fe=pe.x*X.x+pe.y*X.y,_e=0!==fe?1/fe:1/0,me=2*Math.sqrt(2-2*fe),Ve=fe<hf&&N&&O,Te=j.x*X.y-j.y*X.x>0;if(Ve&&ae>z){const ze=I.dist(N);if(ze>2*E){const Xe=I.sub(I.sub(N)._mult(E/ze)._round());this.updateDistance(N,Xe),this.addCurrentVertex(Xe,j,0,0,T),N=Xe}}const We=N&&O;let ct=We?u:b?"butt":h;if(We&&"round"===ct&&(_e<y?ct="miter":_e<=2&&(ct="fakeround")),"miter"===ct&&_e>g&&(ct="bevel"),"bevel"===ct&&(_e>2&&(ct="flipbevel"),_e<g&&(ct="miter")),N&&this.updateDistance(N,I),"miter"===ct)pe._mult(_e),this.addCurrentVertex(I,pe,0,0,T);else if("flipbevel"===ct){if(_e>100)pe=X.mult(-1);else{const ze=_e*j.add(X).mag()/j.sub(X).mag();pe._perp()._mult(ze*(Te?-1:1))}this.addCurrentVertex(I,pe,0,0,T),this.addCurrentVertex(I,pe.mult(-1),0,0,T)}else if("bevel"===ct||"fakeround"===ct){const ze=-Math.sqrt(_e*_e-1),Xe=Te?ze:0,et=Te?0:ze;if(N&&this.addCurrentVertex(I,j,Xe,et,T),"fakeround"===ct){const lt=Math.round(180*me/Math.PI/20);for(let ft=1;ft<lt;ft++){let Oe=ft/lt;if(.5!==Oe){const Ut=Oe-.5;Oe+=Oe*Ut*(Oe-1)*((1.0904+ne*(ne*(3.55645-1.43519*ne)-3.2452))*Ut*Ut+(.848013+ne*(.215638*ne-1.06021)))}const _t=X.sub(j)._mult(Oe)._add(j)._unit()._mult(Te?-1:1);this.addHalfVertex(I,_t.x,_t.y,!1,Te,0,T)}}O&&this.addCurrentVertex(I,X,-Xe,-et,T)}else if("butt"===ct)this.addCurrentVertex(I,pe,0,0,T);else if("square"===ct){const ze=N?1:-1;N||this.addCurrentVertex(I,pe,ze,ze,T),this.addCurrentVertex(I,pe,0,0,T),N&&this.addCurrentVertex(I,pe,ze,ze,T)}else"round"===ct&&(N&&(this.addCurrentVertex(I,j,0,0,T),this.addCurrentVertex(I,j,1,1,T,!0)),O&&(this.addCurrentVertex(I,X,-1,-1,T,!0),this.addCurrentVertex(I,X,0,0,T)));if(Ve&&ae<M-1){const ze=I.dist(O);if(ze>2*E){const Xe=I.add(O.sub(I)._mult(E/ze)._round());this.updateDistance(I,Xe),this.addCurrentVertex(Xe,X,0,0,T),I=Xe}}}}addCurrentVertex(a,c,u,h,g,y=!1){const b=c.y*h-c.x,M=-c.y-c.x*h;this.addHalfVertex(a,c.x+c.y*u,c.y-c.x*u,y,!1,u,g),this.addHalfVertex(a,b,M,y,!0,-h,g)}addHalfVertex({x:a,y:c},u,h,g,y,b,M){this.layoutVertexArray.emplaceBack((a<<1)+(g?1:0),(c<<1)+(y?1:0),Math.round(63*u)+128,Math.round(63*h)+128,1+(0===b?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const z=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),M.primitiveLength++),y?this.e2=z:this.e1=z}updateScaledDistance(){if(this.lineClips){const a=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=a*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(a,c){this.distance+=a.dist(c),this.updateScaledDistance()}}At(Q4,"LineBucket",{omit:["layers","patternFeatures"]});const Em=new dt({"line-cap":new Ne(Ge.layout_line["line-cap"]),"line-join":new Ne(Ge.layout_line["line-join"]),"line-miter-limit":new Ae(Ge.layout_line["line-miter-limit"]),"line-round-limit":new Ae(Ge.layout_line["line-round-limit"]),"line-sort-key":new Ne(Ge.layout_line["line-sort-key"])});var pf={paint:new dt({"line-opacity":new Ne(Ge.paint_line["line-opacity"]),"line-color":new Ne(Ge.paint_line["line-color"]),"line-translate":new Ae(Ge.paint_line["line-translate"]),"line-translate-anchor":new Ae(Ge.paint_line["line-translate-anchor"]),"line-width":new Ne(Ge.paint_line["line-width"]),"line-gap-width":new Ne(Ge.paint_line["line-gap-width"]),"line-offset":new Ne(Ge.paint_line["line-offset"]),"line-blur":new Ne(Ge.paint_line["line-blur"]),"line-dasharray":new Ne(Ge.paint_line["line-dasharray"]),"line-pattern":new Ne(Ge.paint_line["line-pattern"]),"line-gradient":new ot(Ge.paint_line["line-gradient"]),"line-trim-offset":new Ae(Ge.paint_line["line-trim-offset"])}),layout:Em};const cu=new class extends Ne{possiblyEvaluate(o,a){return a=new Se(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,transition:a.transition}),super.possiblyEvaluate(o,a)}evaluate(o,a,c,u){return a=l1({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(o,a,c,u)}}(pf.paint.properties["line-width"].specification);function X3(o,a){return a>0?a+2*o:o}cu.useIntegerZoom=!0;const Vm=Pt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Lm=Pt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Tm=Pt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Pt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const lu=Pt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Hm=Pt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Pt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const uu=Pt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),km=Pt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Pt([{name:"triangle",components:3,type:"Uint16"}]),Pt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Pt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Pt([{type:"Float32",name:"offsetX"}]),Pt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var hi=24;const sc=128;function du(o,a){const{expression:c}=a;if("constant"===c.kind)return{kind:"constant",layoutSize:c.evaluate(new Se(o+1))};if("source"===c.kind)return{kind:"source"};{const{zoomStops:u,interpolationType:h}=c;let g=0;for(;g<u.length&&u[g]<=o;)g++;g=Math.max(0,g-1);let y=g;for(;y<u.length&&u[y]<o+1;)y++;y=Math.min(u.length-1,y);const b=u[g],M=u[y];return"composite"===c.kind?{kind:"composite",minZoom:b,maxZoom:M,interpolationType:h}:{kind:"camera",minZoom:b,maxZoom:M,minSize:c.evaluate(new Se(b)),maxSize:c.evaluate(new Se(M)),interpolationType:h}}}function Cs(o,{uSize:a,uSizeT:c},{lowerSize:u,upperSize:h}){return"source"===o.kind?u/sc:"composite"===o.kind?G1(u/sc,h/sc,c):a}function J4(o,a){let c=0,u=0;if("constant"===o.kind)u=o.layoutSize;else if("source"!==o.kind){const{interpolationType:h,minZoom:g,maxZoom:y}=o,b=h?d1(n1.interpolationFactor(h,a,g,y),0,1):0;"camera"===o.kind?u=G1(o.minSize,o.maxSize,b):c=b}return{uSizeT:c,uSize:u}}var el=Object.freeze({__proto__:null,getSizeData:du,evaluateSizeForFeature:Cs,evaluateSizeForZoom:J4,SIZE_PACK_FACTOR:sc});function Ot(o,a,c){return o.sections.forEach(u=>{u.text=function(h,g,y){const b=g.layout.get("text-transform").evaluate(y,{});return"uppercase"===b?h=h.toLocaleUpperCase():"lowercase"===b&&(h=h.toLocaleLowerCase()),Ce.applyArabicShaping&&(h=Ce.applyArabicShaping(h)),h}(u.text,a,c)}),o}const C0={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function w0(o){return"\ufe36"===o||"\ufe48"===o||"\ufe38"===o||"\ufe44"===o||"\ufe42"===o||"\ufe3e"===o||"\ufe3c"===o||"\ufe3a"===o||"\ufe18"===o||"\ufe40"===o||"\ufe10"===o||"\ufe13"===o||"\ufe14"===o||"\uff40"===o||"\uffe3"===o||"\ufe11"===o||"\ufe12"===o}function to(o){return"\ufe35"===o||"\ufe47"===o||"\ufe37"===o||"\ufe43"===o||"\ufe41"===o||"\ufe3d"===o||"\ufe3b"===o||"\ufe39"===o||"\ufe17"===o||"\ufe3f"===o}var M0=Pn,mf=function(o,a,c,u,h){var g,y,b=8*h-u-1,M=(1<<b)-1,z=M>>1,E=-7,T=c?h-1:0,I=c?-1:1,N=o[a+T];for(T+=I,g=N&(1<<-E)-1,N>>=-E,E+=b;E>0;g=256*g+o[a+T],T+=I,E-=8);for(y=g&(1<<-E)-1,g>>=-E,E+=u;E>0;y=256*y+o[a+T],T+=I,E-=8);if(0===g)g=1-z;else{if(g===M)return y?NaN:1/0*(N?-1:1);y+=Math.pow(2,u),g-=z}return(N?-1:1)*y*Math.pow(2,g-u)},cc=function(o,a,c,u,h,g){var y,b,M,z=8*g-h-1,E=(1<<z)-1,T=E>>1,I=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,N=u?0:g-1,O=u?1:-1,j=a<0||0===a&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(b=isNaN(a)?1:0,y=E):(y=Math.floor(Math.log(a)/Math.LN2),a*(M=Math.pow(2,-y))<1&&(y--,M*=2),(a+=y+T>=1?I/M:I*Math.pow(2,1-T))*M>=2&&(y++,M/=2),y+T>=E?(b=0,y=E):y+T>=1?(b=(a*M-1)*Math.pow(2,h),y+=T):(b=a*Math.pow(2,T-1)*Math.pow(2,h),y=0));h>=8;o[c+N]=255&b,N+=O,b/=256,h-=8);for(y=y<<h|b,z+=h;z>0;o[c+N]=255&y,N+=O,y/=256,z-=8);o[c+N-O]|=128*j};function Pn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Pn.Varint=0,Pn.Fixed64=1,Pn.Bytes=2,Pn.Fixed32=5;var z0=4294967296,r8=1/z0,gf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Io(o){return o.type===Pn.Bytes?o.readVarint()+o.pos:o.pos+1}function _f(o,a,c){var u=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));c.realloc(u);for(var h=c.pos-1;h>=o;h--)c.buf[h+u]=c.buf[h]}function Im(o,a){for(var c=0;c<o.length;c++)a.writeVarint(o[c])}function Rm(o,a){for(var c=0;c<o.length;c++)a.writeSVarint(o[c])}function Pm(o,a){for(var c=0;c<o.length;c++)a.writeFloat(o[c])}function vf(o,a){for(var c=0;c<o.length;c++)a.writeDouble(o[c])}function Fm(o,a){for(var c=0;c<o.length;c++)a.writeBoolean(o[c])}function Nm(o,a){for(var c=0;c<o.length;c++)a.writeFixed32(o[c])}function tl(o,a){for(var c=0;c<o.length;c++)a.writeSFixed32(o[c])}function lc(o,a){for(var c=0;c<o.length;c++)a.writeFixed64(o[c])}function Om(o,a){for(var c=0;c<o.length;c++)a.writeSFixed64(o[c])}function a8(o,a){return(o[a]|o[a+1]<<8|o[a+2]<<16)+16777216*o[a+3]}function S0(o,a,c){o[c]=a,o[c+1]=a>>>8,o[c+2]=a>>>16,o[c+3]=a>>>24}function Bm(o,a){return(o[a]|o[a+1]<<8|o[a+2]<<16)+(o[a+3]<<24)}function yf(o,a,c){a.glyphs=[],1===o&&c.readMessage(Wb,a)}function Wb(o,a,c){if(3===o){const{id:u,bitmap:h,width:g,height:y,left:b,top:M,advance:z}=c.readMessage(xf,{});a.glyphs.push({id:u,bitmap:new xs({width:g+6,height:y+6},h),metrics:{width:g,height:y,left:b,top:M,advance:z}})}else 4===o?a.ascender=c.readSVarint():5===o&&(a.descender=c.readSVarint())}function xf(o,a,c){1===o?a.id=c.readVarint():2===o?a.bitmap=c.readBytes():3===o?a.width=c.readVarint():4===o?a.height=c.readVarint():5===o?a.left=c.readSVarint():6===o?a.top=c.readSVarint():7===o&&(a.advance=c.readVarint())}function o8(o){let a=0,c=0;for(const y of o)a+=y.w*y.h,c=Math.max(c,y.w);o.sort((y,b)=>b.h-y.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),c),h:1/0}];let h=0,g=0;for(const y of o)for(let b=u.length-1;b>=0;b--){const M=u[b];if(!(y.w>M.w||y.h>M.h)){if(y.x=M.x,y.y=M.y,g=Math.max(g,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===M.w&&y.h===M.h){const z=u.pop();b<u.length&&(u[b]=z)}else y.h===M.h?(M.x+=y.w,M.w-=y.w):y.w===M.w?(M.y+=y.h,M.h-=y.h):(u.push({x:M.x+y.w,y:M.y,w:M.w-y.w,h:y.h}),M.y+=y.h,M.h-=y.h);break}}return{w:h,h:g,fill:a/(h*g)||0}}Pn.prototype={destroy:function(){this.buf=null},readFields:function(o,a,c){for(c=c||this.length;this.pos<c;){var u=this.readVarint(),h=u>>3,g=this.pos;this.type=7&u,o(h,a,this),this.pos===g&&this.skip(u)}return a},readMessage:function(o,a){return this.readFields(o,a,this.readVarint()+this.pos)},readFixed32:function(){var o=a8(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Bm(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=a8(this.buf,this.pos)+a8(this.buf,this.pos+4)*z0;return this.pos+=8,o},readSFixed64:function(){var o=a8(this.buf,this.pos)+Bm(this.buf,this.pos+4)*z0;return this.pos+=8,o},readFloat:function(){var o=mf(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=mf(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var a,c,u=this.buf;return a=127&(c=u[this.pos++]),c<128?a:(a|=(127&(c=u[this.pos++]))<<7,c<128?a:(a|=(127&(c=u[this.pos++]))<<14,c<128?a:(a|=(127&(c=u[this.pos++]))<<21,c<128?a:function(h,g,y){var b,M,z=y.buf;if(b=(112&(M=z[y.pos++]))>>4,M<128||(b|=(127&(M=z[y.pos++]))<<3,M<128)||(b|=(127&(M=z[y.pos++]))<<10,M<128)||(b|=(127&(M=z[y.pos++]))<<17,M<128)||(b|=(127&(M=z[y.pos++]))<<24,M<128)||(b|=(1&(M=z[y.pos++]))<<31,M<128))return function Ro(o,a,c){return c?4294967296*a+(o>>>0):4294967296*(a>>>0)+(o>>>0)}(h,b,g);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(c=u[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,a=this.pos;return this.pos=o,o-a>=12&&gf?gf.decode(this.buf.subarray(a,o)):function(c,u,h){for(var g="",y=u;y<h;){var b,M,z,E=c[y],T=null,I=E>239?4:E>223?3:E>191?2:1;if(y+I>h)break;1===I?E<128&&(T=E):2===I?128==(192&(b=c[y+1]))&&(T=(31&E)<<6|63&b)<=127&&(T=null):3===I?(M=c[y+2],128==(192&(b=c[y+1]))&&128==(192&M)&&((T=(15&E)<<12|(63&b)<<6|63&M)<=2047||T>=55296&&T<=57343)&&(T=null)):4===I&&(M=c[y+2],z=c[y+3],128==(192&(b=c[y+1]))&&128==(192&M)&&128==(192&z)&&((T=(15&E)<<18|(63&b)<<12|(63&M)<<6|63&z)<=65535||T>=1114112)&&(T=null)),null===T?(T=65533,I=1):T>65535&&(T-=65536,g+=String.fromCharCode(T>>>10&1023|55296),T=56320|1023&T),g+=String.fromCharCode(T),y+=I}return g}(this.buf,a,o)},readBytes:function(){var o=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,o);return this.pos=o,a},readPackedVarint:function(o,a){if(this.type!==Pn.Bytes)return o.push(this.readVarint(a));var c=Io(this);for(o=o||[];this.pos<c;)o.push(this.readVarint(a));return o},readPackedSVarint:function(o){if(this.type!==Pn.Bytes)return o.push(this.readSVarint());var a=Io(this);for(o=o||[];this.pos<a;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Pn.Bytes)return o.push(this.readBoolean());var a=Io(this);for(o=o||[];this.pos<a;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Pn.Bytes)return o.push(this.readFloat());var a=Io(this);for(o=o||[];this.pos<a;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Pn.Bytes)return o.push(this.readDouble());var a=Io(this);for(o=o||[];this.pos<a;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Pn.Bytes)return o.push(this.readFixed32());var a=Io(this);for(o=o||[];this.pos<a;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Pn.Bytes)return o.push(this.readSFixed32());var a=Io(this);for(o=o||[];this.pos<a;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Pn.Bytes)return o.push(this.readFixed64());var a=Io(this);for(o=o||[];this.pos<a;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Pn.Bytes)return o.push(this.readSFixed64());var a=Io(this);for(o=o||[];this.pos<a;)o.push(this.readSFixed64());return o},skip:function(o){var a=7&o;if(a===Pn.Varint)for(;this.buf[this.pos++]>127;);else if(a===Pn.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Pn.Fixed32)this.pos+=4;else{if(a!==Pn.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(o,a){this.writeVarint(o<<3|a)},realloc:function(o){for(var a=this.length||16;a<this.pos+o;)a*=2;if(a!==this.length){var c=new Uint8Array(a);c.set(this.buf),this.buf=c,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),S0(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),S0(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),S0(this.buf,-1&o,this.pos),S0(this.buf,Math.floor(o*r8),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),S0(this.buf,-1&o,this.pos),S0(this.buf,Math.floor(o*r8),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(a,c){var u,h,g,b;if(a>=0?(u=a%4294967296|0,h=a/4294967296|0):(h=~(-a/4294967296),4294967295^(u=~(-a%4294967296))?u=u+1|0:(u=0,h=h+1|0)),a>=0x10000000000000000||a<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),g=u,(b=c).buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,b.buf[b.pos]=127&(g>>>=7),function(g,y){var b=(7&g)<<4;y.buf[y.pos++]|=b|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))}(h,c)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var a=this.pos;this.pos=function(u,h,g){for(var y,b,M=0;M<h.length;M++){if((y=h.charCodeAt(M))>55295&&y<57344){if(!b){y>56319||M+1===h.length?(u[g++]=239,u[g++]=191,u[g++]=189):b=y;continue}if(y<56320){u[g++]=239,u[g++]=191,u[g++]=189,b=y;continue}y=b-55296<<10|y-56320|65536,b=null}else b&&(u[g++]=239,u[g++]=191,u[g++]=189,b=null);y<128?u[g++]=y:(y<2048?u[g++]=y>>6|192:(y<65536?u[g++]=y>>12|224:(u[g++]=y>>18|240,u[g++]=y>>12&63|128),u[g++]=y>>6&63|128),u[g++]=63&y|128)}return g}(this.buf,o,this.pos);var c=this.pos-a;c>=128&&_f(a,c,this),this.pos=a-1,this.writeVarint(c),this.pos+=c},writeFloat:function(o){this.realloc(4),cc(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),cc(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var a=o.length;this.writeVarint(a),this.realloc(a);for(var c=0;c<a;c++)this.buf[this.pos++]=o[c]},writeRawMessage:function(o,a){this.pos++;var c=this.pos;o(a,this);var u=this.pos-c;u>=128&&_f(c,u,this),this.pos=c-1,this.writeVarint(u),this.pos+=u},writeMessage:function(o,a,c){this.writeTag(o,Pn.Bytes),this.writeRawMessage(a,c)},writePackedVarint:function(o,a){a.length&&this.writeMessage(o,Im,a)},writePackedSVarint:function(o,a){a.length&&this.writeMessage(o,Rm,a)},writePackedBoolean:function(o,a){a.length&&this.writeMessage(o,Fm,a)},writePackedFloat:function(o,a){a.length&&this.writeMessage(o,Pm,a)},writePackedDouble:function(o,a){a.length&&this.writeMessage(o,vf,a)},writePackedFixed32:function(o,a){a.length&&this.writeMessage(o,Nm,a)},writePackedSFixed32:function(o,a){a.length&&this.writeMessage(o,tl,a)},writePackedFixed64:function(o,a){a.length&&this.writeMessage(o,lc,a)},writePackedSFixed64:function(o,a){a.length&&this.writeMessage(o,Om,a)},writeBytesField:function(o,a){this.writeTag(o,Pn.Bytes),this.writeBytes(a)},writeFixed32Field:function(o,a){this.writeTag(o,Pn.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(o,a){this.writeTag(o,Pn.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(o,a){this.writeTag(o,Pn.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(o,a){this.writeTag(o,Pn.Fixed64),this.writeSFixed64(a)},writeVarintField:function(o,a){this.writeTag(o,Pn.Varint),this.writeVarint(a)},writeSVarintField:function(o,a){this.writeTag(o,Pn.Varint),this.writeSVarint(a)},writeStringField:function(o,a){this.writeTag(o,Pn.Bytes),this.writeString(a)},writeFloatField:function(o,a){this.writeTag(o,Pn.Fixed32),this.writeFloat(a)},writeDoubleField:function(o,a){this.writeTag(o,Pn.Fixed64),this.writeDouble(a)},writeBooleanField:function(o,a){this.writeVarintField(o,Boolean(a))}};class fu{constructor(a,{pixelRatio:c,version:u,stretchX:h,stretchY:g,content:y}){this.paddedRect=a,this.pixelRatio=c,this.stretchX=h,this.stretchY=g,this.content=y,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class hu{constructor(a,c){const u={},h={};this.haveRenderCallbacks=[];const g=[];this.addImages(a,u,g),this.addImages(c,h,g);const{w:y,h:b}=o8(g),M=new Gi({width:y||1,height:b||1});for(const z in a){const E=a[z],T=u[z].paddedRect;Gi.copy(E.data,M,{x:0,y:0},{x:T.x+1,y:T.y+1},E.data)}for(const z in c){const E=c[z],T=h[z].paddedRect,I=T.x+1,N=T.y+1,O=E.data.width,j=E.data.height;Gi.copy(E.data,M,{x:0,y:0},{x:I,y:N},E.data),Gi.copy(E.data,M,{x:0,y:j-1},{x:I,y:N-1},{width:O,height:1}),Gi.copy(E.data,M,{x:0,y:0},{x:I,y:N+j},{width:O,height:1}),Gi.copy(E.data,M,{x:O-1,y:0},{x:I-1,y:N},{width:1,height:j}),Gi.copy(E.data,M,{x:0,y:0},{x:I+O,y:N},{width:1,height:j})}this.image=M,this.iconPositions=u,this.patternPositions=h}addImages(a,c,u){for(const h in a){const g=a[h],y={x:0,y:0,w:g.data.width+2,h:g.data.height+2};u.push(y),c[h]=new fu(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(a,c){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>a.hasImage(u)),a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in a.updatedImages)this.patchUpdatedImage(this.iconPositions[u],a.getImage(u),c),this.patchUpdatedImage(this.patternPositions[u],a.getImage(u),c)}patchUpdatedImage(a,c,u){if(!a||!c||a.version===c.version)return;a.version=c.version;const[h,g]=a.tl;u.update(c.data,void 0,{x:h,y:g})}}At(fu,"ImagePosition"),At(hu,"ImageAtlas");const Ca={horizontal:1,vertical:2,horizontalOnly:3};class D0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,c){const u=new D0;return u.scale=a||1,u.fontStack=c,u}static forImage(a){const c=new D0;return c.imageName=a,c}}class pr{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,c){const u=new pr;for(let h=0;h<a.sections.length;h++){const g=a.sections[h];g.image?u.addImageSection(g):u.addTextSection(g,c)}return u}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSections(){return this.sections}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(a){this.text=function(c,u){let h="";for(let g=0;g<c.length;g++){const y=c.charCodeAt(g+1)||null,b=c.charCodeAt(g-1)||null;h+=!u&&(y&&L(y)&&!C0[c[g+1]]||b&&L(b)&&!C0[c[g-1]])||!C0[c[g]]?c[g]:C0[c[g]]}return h}(this.text,a)}trim(){let a=0;for(let u=0;u<this.text.length&&A0[this.text.charCodeAt(u)];u++)a++;let c=this.text.length;for(let u=this.text.length-1;u>=0&&u>=a&&A0[this.text.charCodeAt(u)];u--)c--;this.text=this.text.substring(a,c),this.sectionIndex=this.sectionIndex.slice(a,c)}substring(a,c){const u=new pr;return u.text=this.text.substring(a,c),u.sectionIndex=this.sectionIndex.slice(a,c),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,c)=>Math.max(a,this.sections[c].scale),0)}addTextSection(a,c){this.text+=a.text,this.sections.push(D0.forText(a.scale,a.fontStack||c));const u=this.sections.length-1;for(let h=0;h<a.text.length;++h)this.sectionIndex.push(u)}addImageSection(a){const c=a.image?a.image.name:"";if(0===c.length)return void en("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(D0.forImage(c)),this.sectionIndex.push(this.sections.length-1)):en("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function pu(o,a,c,u,h,g,y,b,M,z,E,T,I,N,O){const j=pr.fromFeature(o,h);T===Ca.vertical&&j.verticalizePunctuation(I);let X=[];const ae=function(me,Ve,Te,We,ct,ze){if(!me)return[];const Xe=[],et=function(_t,Ut,Ct,zt,bt,Zt){let O1=0;for(let F1=0;F1<_t.length();F1++){const E1=_t.getSection(F1);O1+=bf(_t.getCharCode(F1),E1,zt,bt,Ut,Zt)}return O1/Math.max(1,Math.ceil(O1/Ct))}(me,Ve,Te,We,ct,ze),lt=me.text.indexOf("\u200b")>=0;let ft=0;for(let _t=0;_t<me.length();_t++){const Ut=me.getSection(_t),Ct=me.getCharCode(_t);if(A0[Ct]||(ft+=bf(Ct,Ut,We,ct,Ve,ze)),_t<me.length()-1){const zt=!((Oe=Ct)<11904||!(T4(Oe)||Vr(Oe)||m(Oe)||C6(Oe)||Ql(Oe)||fn(Oe)||H4(Oe)||v2(Oe)||Si(Oe)||ga(Oe)||C5(Oe)||_(Oe)||N3(Oe)||E2(Oe)||A2(Oe)||Kl(Oe)||$a(Oe)||B3(Oe)||rc(Oe)||Jl(Oe)));(Um[Ct]||zt||Ut.imageName)&&Xe.push(mu(_t+1,ft,et,Xe,jm(Ct,me.getCharCode(_t+1),zt&&lt),!1))}}var Oe;return wf(mu(me.length(),ft,et,Xe,0,!0))}(j,z,g,a,u,N),{processBidirectionalText:pe,processStyledBidirectionalText:ne}=Ce;if(pe&&1===j.sections.length){const me=pe(j.toString(),ae);for(const Ve of me){const Te=new pr;Te.text=Ve,Te.sections=j.sections;for(let We=0;We<Ve.length;We++)Te.sectionIndex.push(0);X.push(Te)}}else if(ne){const me=ne(j.text,j.sectionIndex,ae);for(const Ve of me){const Te=new pr;Te.text=Ve[0],Te.sectionIndex=Ve[1],Te.sections=j.sections,X.push(Te)}}else X=function(me,Ve){const Te=[],We=me.text;let ct=0;for(const ze of Ve)Te.push(me.substring(ct,ze)),ct=ze;return ct<We.length&&Te.push(me.substring(ct,We.length)),Te}(j,ae);const fe=[],_e={positionedLines:fe,text:j.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:T,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(me,Ve,Te,We,ct,ze,Xe,et,lt,ft,Oe,_t){let Ut=0,Ct=0,zt=0;const bt="right"===et?1:"left"===et?0:.5;let Zt=!1;for(const c1 of ct){const B1=c1.getSections();for(const Vn of B1){if(Vn.imageName)continue;const Bn=Ve[Vn.fontStack];if(Bn&&(Zt=void 0!==Bn.ascender&&void 0!==Bn.descender,!Zt))break}if(!Zt)break}let O1=0;for(const c1 of ct){c1.trim();const B1=c1.getMaxScale(),Vn=(B1-1)*hi,Bn={positionedGlyphs:[],lineOffset:0};me.positionedLines[O1]=Bn;const xt=Bn.positionedGlyphs;let Un=0;if(!c1.length()){Ct+=ze,++O1;continue}let vn=0,Ye=0;for(let Sn=0;Sn<c1.length();Sn++){const de=c1.getSection(Sn),he=c1.getSectionIndex(Sn),nt=c1.getCharCode(Sn);let Xn=de.scale,Rn=null,q1=null,Ln=null,u2=hi,C2=0;const Q2=!(lt===Ca.horizontal||!Oe&&!A(nt)||Oe&&(A0[nt]||(F1=nt,F3(F1)||b6(F1)||pt(F1)||O3(F1)||f(F1))));if(de.imageName){const Li=We[de.imageName];if(!Li)continue;Ln=de.imageName,me.iconsInText=me.iconsInText||!0,q1=Li.paddedRect;const jt=Li.displaySize;Xn=Xn*hi/_t,Rn={width:jt[0],height:jt[1],left:1,top:-3,advance:Q2?jt[1]:jt[0],localGlyph:!1},C2=Zt?-Rn.height*Xn:B1*hi-17-jt[1]*Xn,u2=Rn.advance;const No=(Q2?jt[0]:jt[1])*Xn-hi*B1;No>0&&No>Un&&(Un=No)}else{const Li=Te[de.fontStack];if(!Li)continue;Li[nt]&&(q1=Li[nt]);const jt=Ve[de.fontStack];if(!jt)continue;const No=jt.glyphs[nt];if(!No)continue;if(Rn=No.metrics,u2=8203!==nt?hi:0,Zt){const ll=void 0!==jt.ascender?Math.abs(jt.ascender):0,ul=void 0!==jt.descender?Math.abs(jt.descender):0,dl=(ll+ul)*Xn;vn<dl&&(vn=dl,Ye=(ll-ul)/2*Xn),C2=-ll*Xn}else C2=(B1-Xn)*hi-17}Q2?(me.verticalizable=!0,xt.push({glyph:nt,imageName:Ln,x:Ut,y:Ct+C2,vertical:Q2,scale:Xn,localGlyph:Rn.localGlyph,fontStack:de.fontStack,sectionIndex:he,metrics:Rn,rect:q1}),Ut+=u2*Xn+ft):(xt.push({glyph:nt,imageName:Ln,x:Ut,y:Ct+C2,vertical:Q2,scale:Xn,localGlyph:Rn.localGlyph,fontStack:de.fontStack,sectionIndex:he,metrics:Rn,rect:q1}),Ut+=Rn.advance*Xn+ft)}0!==xt.length&&(zt=Math.max(Ut-ft,zt),Zt?Mf(xt,bt,Un,Ye,ze*B1/2):Mf(xt,bt,Un,0,ze/2)),Ut=0;const B2=ze*B1+Un;Bn.lineOffset=Math.max(Un,Vn),Ct+=B2,++O1}var F1;const E1=Ct,{horizontalAlign:Yt,verticalAlign:xn}=gu(Xe);(function(c1,B1,Vn,Bn,xt,Un){const vn=(B1-Vn)*xt,Ye=-Un*Bn;for(const B2 of c1)for(const Sn of B2.positionedGlyphs)Sn.x+=vn,Sn.y+=Ye})(me.positionedLines,bt,Yt,xn,zt,E1),me.top+=-xn*E1,me.bottom=me.top+E1,me.left+=-Yt*zt,me.right=me.left+zt,me.hasBaseline=Zt}(_e,a,c,u,X,y,b,M,T,z,I,O),!function(me){for(const Ve of me)if(0!==Ve.positionedGlyphs.length)return!1;return!0}(fe)&&_e}const A0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Um={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function bf(o,a,c,u,h,g){if(a.imageName){const y=u[a.imageName];return y?y.displaySize[0]*a.scale*hi/g+h:0}{const y=c[a.fontStack],b=y&&y.glyphs[o];return b?b.metrics.advance*a.scale+h:0}}function Cf(o,a,c,u){const h=Math.pow(o-a,2);return u?o<a?h/2:2*h:h+Math.abs(c)*c}function jm(o,a,c){let u=0;return 10===o&&(u-=1e4),c&&(u+=150),40!==o&&65288!==o||(u+=50),41!==a&&65289!==a||(u+=50),u}function mu(o,a,c,u,h,g){let y=null,b=Cf(a,c,h,g);for(const M of u){const z=Cf(a-M.x,c,h,g)+M.badness;z<=b&&(y=M,b=z)}return{index:o,x:a,priorBreak:y,badness:b}}function wf(o){return o?wf(o.priorBreak).concat(o.index):[]}function gu(o){let a=.5,c=.5;switch(o){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:a,verticalAlign:c}}function Mf(o,a,c,u,h){if(!(a||c||u||h))return;const g=o.length-1,y=o[g],b=(y.x+y.metrics.advance*y.scale)*a;for(let M=0;M<=g;M++)o[M].x-=b,o[M].y+=c+u+h}function $1(o,a,c){const{horizontalAlign:u,verticalAlign:h}=gu(c),g=a[0]-o.displaySize[0]*u,y=a[1]-o.displaySize[1]*h;return{image:o,top:y,bottom:y+o.displaySize[1],left:g,right:g+o.displaySize[0]}}function qe(o,a,c,u,h,g){const y=o.image;let b;if(y.content){const X=y.content,ae=y.pixelRatio||1;b=[X[0]/ae,X[1]/ae,y.displaySize[0]-X[2]/ae,y.displaySize[1]-X[3]/ae]}const M=a.left*g,z=a.right*g;let E,T,I,N;"width"===c||"both"===c?(N=h[0]+M-u[3],T=h[0]+z+u[1]):(N=h[0]+(M+z-y.displaySize[0])/2,T=N+y.displaySize[0]);const O=a.top*g,j=a.bottom*g;return"height"===c||"both"===c?(E=h[1]+O-u[0],I=h[1]+j+u[2]):(E=h[1]+(O+j-y.displaySize[1])/2,I=E+y.displaySize[1]),{image:y,top:E,right:T,bottom:I,left:N,collisionPadding:b}}class ws extends ht{constructor(a,c,u,h,g){super(a,c),this.angle=h,this.z=u,void 0!==g&&(this.segment=g)}clone(){return new ws(this.x,this.y,this.z,this.angle,this.segment)}}function _u(o,a,c,u,h){if(void 0===a.segment)return!0;let g=a,y=a.segment+1,b=0;for(;b>-c/2;){if(y--,y<0)return!1;b-=o[y].dist(g),g=o[y]}b+=o[y].dist(o[y+1]),y++;const M=[];let z=0;for(;b<c/2;){const E=o[y],T=o[y+1];if(!T)return!1;let I=o[y-1].angleTo(E)-E.angleTo(T);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:b,angleDelta:I}),z+=I;b-M[0].distance>u;)z-=M.shift().angleDelta;if(z>h)return!1;y++,b+=E.dist(T)}return!0}function zf(o){let a=0;for(let c=0;c<o.length-1;c++)a+=o[c].dist(o[c+1]);return a}function Sf(o,a,c){return o?.6*a*c:0}function vu(o,a){return Math.max(o?o.right-o.left:0,a?a.right-a.left:0)}function Gm(o,a,c,u,h,g){const y=Sf(c,h,g),b=vu(c,u)*g;let M=0;const z=zf(o)/2;for(let E=0;E<o.length-1;E++){const T=o[E],I=o[E+1],N=T.dist(I);if(M+N>z){const O=(z-M)/N,j=G1(T.x,I.x,O),X=G1(T.y,I.y,O),ae=new ws(j,X,0,I.angleTo(T),E);return!y||_u(o,ae,b,y,a)?ae:void 0}M+=N}}function Df(o,a,c,u,h,g,y,b,M){const z=Sf(u,g,y),E=vu(u,h),T=E*y,I=0===o[0].x||o[0].x===M||0===o[0].y||o[0].y===M;return a-T<a/4&&(a=T+a/4),Af(o,I?a/2*b%a:(E/2+2*g)*y*b%a,a,z,c,T,I,!1,M)}function Af(o,a,c,u,h,g,y,b,M){const z=g/2,E=zf(o);let T=0,I=a-c,N=[];for(let O=0;O<o.length-1;O++){const j=o[O],X=o[O+1],ae=j.dist(X),pe=X.angleTo(j);for(;I+c<T+ae;){I+=c;const ne=(I-T)/ae,fe=G1(j.x,X.x,ne),_e=G1(j.y,X.y,ne);if(fe>=0&&fe<M&&_e>=0&&_e<M&&I-z>=0&&I+z<=E){const me=new ws(fe,_e,0,pe,O);me._round(),u&&!_u(o,me,g,u,h)||N.push(me)}}T+=ae}return b||N.length||y||(N=Af(o,T/2,c,u,h,g,y,!0,M)),N}function Ef(o,a,c,u,h){const g=[];for(let y=0;y<o.length;y++){const b=o[y];let M;for(let z=0;z<b.length-1;z++){let E=b[z],T=b[z+1];E.x<a&&T.x<a||(E.x<a?E=new ht(a,E.y+(a-E.x)/(T.x-E.x)*(T.y-E.y))._round():T.x<a&&(T=new ht(a,E.y+(a-E.x)/(T.x-E.x)*(T.y-E.y))._round()),E.y<c&&T.y<c||(E.y<c?E=new ht(E.x+(c-E.y)/(T.y-E.y)*(T.x-E.x),c)._round():T.y<c&&(T=new ht(E.x+(c-E.y)/(T.y-E.y)*(T.x-E.x),c)._round()),E.x>=u&&T.x>=u||(E.x>=u?E=new ht(u,E.y+(u-E.x)/(T.x-E.x)*(T.y-E.y))._round():T.x>=u&&(T=new ht(u,E.y+(u-E.x)/(T.x-E.x)*(T.y-E.y))._round()),E.y>=h&&T.y>=h||(E.y>=h?E=new ht(E.x+(h-E.y)/(T.y-E.y)*(T.x-E.x),h)._round():T.y>=h&&(T=new ht(E.x+(h-E.y)/(T.y-E.y)*(T.x-E.x),h)._round()),M&&E.equals(M[M.length-1])||(M=[E],g.push(M)),M.push(T)))))}}return g}At(ws,"Anchor");const s8=1e20;function yu(o,a,c,u,h,g,y,b,M){for(let z=a;z<a+u;z++)xu(o,c*g+z,g,h,y,b,M);for(let z=c;z<c+h;z++)xu(o,z*g+a,1,u,y,b,M)}function xu(o,a,c,u,h,g,y){g[0]=0,y[0]=-s8,y[1]=s8,h[0]=o[a];for(let b=1,M=0,z=0;b<u;b++){h[b]=o[a+b*c];const E=b*b;do{const T=g[M];z=(h[b]-h[T]+E-T*T)/(b-T)/2}while(z<=y[M]&&--M>-1);M++,g[M]=b,y[M]=z,y[M+1]=s8}for(let b=0,M=0;b<u;b++){for(;y[M+1]<b;)M++;const z=g[M],E=b-z;o[a+b*c]=h[z]+E*E}}const kr={none:0,ideographs:1,all:2};class nl{constructor(a,c,u){this.requestManager=a,this.localGlyphMode=c,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(a){this.url=a}getGlyphs(a,c){const u=[];for(const h in a)for(const g of a[h])u.push({stack:h,id:g});Cr(u,({stack:h,id:g},y)=>{let b=this.entries[h];b||(b=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let M=b.glyphs[g];if(void 0!==M)return void y(null,{stack:h,id:g,glyph:M});if(M=this._tinySDF(b,h,g),M)return b.glyphs[g]=M,void y(null,{stack:h,id:g,glyph:M});const z=Math.floor(g/256);if(256*z>65535)return void y(new Error("glyphs > 65535 not supported"));if(b.ranges[z])return void y(null,{stack:h,id:g,glyph:M});let E=b.requests[z];E||(E=b.requests[z]=[],nl.loadGlyphRange(h,z,this.url,this.requestManager,(T,I)=>{if(I){b.ascender=I.ascender,b.descender=I.descender;for(const N in I.glyphs)this._doesCharSupportLocalGlyph(+N)||(b.glyphs[+N]=I.glyphs[+N]);b.ranges[z]=!0}for(const N of E)N(T,I);delete b.requests[z]})),E.push((T,I)=>{T?y(T):I&&y(null,{stack:h,id:g,glyph:I.glyphs[g]||null})})},(h,g)=>{if(h)c(h);else if(g){const y={};for(const{stack:b,id:M,glyph:z}of g)void 0===y[b]&&(y[b]={}),void 0===y[b].glyphs&&(y[b].glyphs={}),y[b].glyphs[M]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics},y[b].ascender=this.entries[b].ascender,y[b].descender=this.entries[b].descender;c(null,y)}})}_doesCharSupportLocalGlyph(a){return this.localGlyphMode!==kr.none&&(this.localGlyphMode===kr.all?!!this.localFontFamily:!!this.localFontFamily&&(ga(a)||qa(a)||N3(a)||$a(a)||v2(a)))}_tinySDF(a,c,u){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(u))return;let g=a.tinySDF;if(!g){let j="400";/bold/i.test(c)?j="900":/medium/i.test(c)?j="500":/light/i.test(c)&&(j="200"),g=a.tinySDF=new nl.TinySDF({fontFamily:h,fontWeight:j,fontSize:48,buffer:6,radius:16}),g.fontWeight=j}if(this.localGlyphs[g.fontWeight][u])return this.localGlyphs[g.fontWeight][u];const y=String.fromCharCode(u),{data:b,width:M,height:z,glyphWidth:E,glyphHeight:T,glyphLeft:I,glyphTop:N,glyphAdvance:O}=g.draw(y);return this.localGlyphs[g.fontWeight][u]={id:u,bitmap:new xs({width:M,height:z},b),metrics:{width:E/2,height:T/2,left:I/2,top:N/2-27,advance:O/2,localGlyph:!0}}}}function c8(o,a,c,u){const h=[],g=o.image,y=g.pixelRatio,b=g.paddedRect.w-2,M=g.paddedRect.h-2,z=o.right-o.left,E=o.bottom-o.top,T=g.stretchX||[[0,b]],I=g.stretchY||[[0,M]],N=(ze,Xe)=>ze+Xe[1]-Xe[0],O=T.reduce(N,0),j=I.reduce(N,0),X=b-O,ae=M-j;let pe=0,ne=O,fe=0,_e=j,me=0,Ve=X,Te=0,We=ae;if(g.content&&u){const ze=g.content;pe=il(T,0,ze[0]),fe=il(I,0,ze[1]),ne=il(T,ze[0],ze[2]),_e=il(I,ze[1],ze[3]),me=ze[0]-pe,Te=ze[1]-fe,Ve=ze[2]-ze[0]-ne,We=ze[3]-ze[1]-_e}const ct=(ze,Xe,et,lt)=>{const ft=bu(ze.stretch-pe,ne,z,o.left),Oe=Cu(ze.fixed-me,Ve,ze.stretch,O),_t=bu(Xe.stretch-fe,_e,E,o.top),Ut=Cu(Xe.fixed-Te,We,Xe.stretch,j),Ct=bu(et.stretch-pe,ne,z,o.left),zt=Cu(et.fixed-me,Ve,et.stretch,O),bt=bu(lt.stretch-fe,_e,E,o.top),Zt=Cu(lt.fixed-Te,We,lt.stretch,j),O1=new ht(ft,_t),F1=new ht(Ct,_t),E1=new ht(Ct,bt),Yt=new ht(ft,bt),xn=new ht(Oe/y,Ut/y),c1=new ht(zt/y,Zt/y),B1=a*Math.PI/180;if(B1){const xt=Math.sin(B1),Un=Math.cos(B1),vn=[Un,-xt,xt,Un];O1._matMult(vn),F1._matMult(vn),Yt._matMult(vn),E1._matMult(vn)}const Vn=ze.stretch+ze.fixed,Bn=Xe.stretch+Xe.fixed;return{tl:O1,tr:F1,bl:Yt,br:E1,tex:{x:g.paddedRect.x+1+Vn,y:g.paddedRect.y+1+Bn,w:et.stretch+et.fixed-Vn,h:lt.stretch+lt.fixed-Bn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xn,pixelOffsetBR:c1,minFontScaleX:Ve/y/z,minFontScaleY:We/y/E,isSDF:c}};if(u&&(g.stretchX||g.stretchY)){const ze=Vf(T,X,O),Xe=Vf(I,ae,j);for(let et=0;et<ze.length-1;et++){const lt=ze[et],ft=ze[et+1];for(let Oe=0;Oe<Xe.length-1;Oe++)h.push(ct(lt,Xe[Oe],ft,Xe[Oe+1]))}}else h.push(ct({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:M+1}));return h}function il(o,a,c){let u=0;for(const h of o)u+=Math.max(a,Math.min(c,h[1]))-Math.max(a,Math.min(c,h[0]));return u}function Vf(o,a,c){const u=[{fixed:-1,stretch:0}];for(const[h,g]of o){const y=u[u.length-1];u.push({fixed:h-y.stretch,stretch:y.stretch}),u.push({fixed:h-y.stretch,stretch:y.stretch+(g-h)})}return u.push({fixed:a+1,stretch:c}),u}function bu(o,a,c,u){return o/a*c+u}function Cu(o,a,c,u){return o-a*c/u}function Zb(o,a,c,u){const h=a+o.positionedLines[u].lineOffset;return 0===u?c+h/2:c+(h+(a+o.positionedLines[u-1].lineOffset))/2}nl.loadGlyphRange=function(o,a,c,u,h){const g=256*a,y=g+255,b=u.transformRequest(u.normalizeGlyphsURL(c).replace("{fontstack}",o).replace("{range}",`${g}-${y}`),Bs.Glyphs);ho(b,(M,z)=>{if(M)h(M);else if(z){const E={},T=new M0(z).readFields(yf,{});for(const I of T.glyphs)E[I.id]=I;h(null,{glyphs:E,ascender:T.ascender,descender:T.descender})}})},nl.TinySDF=class{constructor({fontSize:o=24,buffer:a=3,radius:c=8,cutoff:u=.25,fontFamily:h="sans-serif",fontWeight:g="normal",fontStyle:y="normal"}={}){this.buffer=a,this.cutoff=u,this.radius=c;const b=this.size=o+4*a,M=this._createCanvas(b),z=this.ctx=M.getContext("2d",{willReadFrequently:!0});z.font=`${y} ${g} ${o}px ${h}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(o){const a=document.createElement("canvas");return a.width=a.height=o,a}draw(o){const{width:a,actualBoundingBoxAscent:c,actualBoundingBoxDescent:u,actualBoundingBoxLeft:h,actualBoundingBoxRight:g}=this.ctx.measureText(o),y=Math.ceil(c),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-h))),M=Math.min(this.size-this.buffer,y+Math.ceil(u)),z=b+2*this.buffer,E=M+2*this.buffer,T=Math.max(z*E,0),I=new Uint8ClampedArray(T),N={data:I,width:z,height:E,glyphWidth:b,glyphHeight:M,glyphTop:y,glyphLeft:0,glyphAdvance:a};if(0===b||0===M)return N;const{ctx:O,buffer:j,gridInner:X,gridOuter:ae}=this;O.clearRect(j,j,b,M),O.fillText(o,j,j+y);const pe=O.getImageData(j,j,b,M);ae.fill(s8,0,T),X.fill(0,0,T);for(let ne=0;ne<M;ne++)for(let fe=0;fe<b;fe++){const _e=pe.data[4*(ne*b+fe)+3]/255;if(0===_e)continue;const me=(ne+j)*z+fe+j;if(1===_e)ae[me]=0,X[me]=s8;else{const Ve=.5-_e;ae[me]=Ve>0?Ve*Ve:0,X[me]=Ve<0?Ve*Ve:0}}yu(ae,0,0,z,E,z,this.f,this.v,this.z),yu(X,j,j,b,M,z,this.f,this.v,this.z);for(let ne=0;ne<T;ne++){const fe=Math.sqrt(ae[ne])-Math.sqrt(X[ne]);I[ne]=Math.round(255-255*(fe/this.radius+this.cutoff))}return N}};class $m{constructor(a=[],c=Lf){if(this.data=a,this.length=this.data.length,this.compare=c,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const a=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:c,compare:u}=this,h=c[a];for(;a>0;){const g=a-1>>1,y=c[g];if(u(h,y)>=0)break;c[a]=y,a=g}c[a]=h}_down(a){const{data:c,compare:u}=this,h=this.length>>1,g=c[a];for(;a<h;){let y=1+(a<<1),b=c[y];const M=y+1;if(M<this.length&&u(c[M],b)<0&&(y=M,b=c[M]),u(b,g)>=0)break;c[a]=b,a=y}c[a]=g}}function Lf(o,a){return o<a?-1:o>a?1:0}function Yb(o,a=1,c=!1){let u=1/0,h=1/0,g=-1/0,y=-1/0;const b=o[0];for(let N=0;N<b.length;N++){const O=b[N];(!N||O.x<u)&&(u=O.x),(!N||O.y<h)&&(h=O.y),(!N||O.x>g)&&(g=O.x),(!N||O.y>y)&&(y=O.y)}const M=Math.min(g-u,y-h);let z=M/2;const E=new $m([],qm);if(0===M)return new ht(u,h);for(let N=u;N<g;N+=M)for(let O=h;O<y;O+=M)E.push(new Po(N+z,O+z,z,o));let T=function(N){let O=0,j=0,X=0;const ae=N[0];for(let pe=0,ne=ae.length,fe=ne-1;pe<ne;fe=pe++){const _e=ae[pe],me=ae[fe],Ve=_e.x*me.y-me.x*_e.y;j+=(_e.x+me.x)*Ve,X+=(_e.y+me.y)*Ve,O+=3*Ve}return new Po(j/O,X/O,0,N)}(o),I=E.length;for(;E.length;){const N=E.pop();(N.d>T.d||!T.d)&&(T=N,c&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,I)),N.max-T.d<=a||(z=N.h/2,E.push(new Po(N.p.x-z,N.p.y-z,z,o)),E.push(new Po(N.p.x+z,N.p.y-z,z,o)),E.push(new Po(N.p.x-z,N.p.y+z,z,o)),E.push(new Po(N.p.x+z,N.p.y+z,z,o)),I+=4)}return c&&(console.log(`num probes: ${I}`),console.log(`best distance: ${T.d}`)),T.p}function qm(o,a){return a.max-o.max}class Po{constructor(a,c,u,h){this.p=new ht(a,c),this.h=u,this.d=function(g,y){let b=!1,M=1/0;for(let z=0;z<y.length;z++){const E=y[z];for(let T=0,I=E.length,N=I-1;T<I;N=T++){const O=E[T],j=E[N];O.y>g.y!=j.y>g.y&&g.x<(j.x-O.x)*(g.y-O.y)/(j.y-O.y)+O.x&&(b=!b),M=Math.min(M,h0(g,O,j))}}return(b?1:-1)*Math.sqrt(M)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const wu=Number.POSITIVE_INFINITY,Tf=Math.sqrt(2);function E0(o,[a,c]){let u=0,h=0;if(c===wu){a<0&&(a=0);const g=a/Tf;switch(o){case"top-right":case"top-left":h=g-7;break;case"bottom-right":case"bottom-left":h=7-g;break;case"bottom":h=7-a;break;case"top":h=a-7}switch(o){case"top-right":case"bottom-right":u=-g;break;case"top-left":case"bottom-left":u=g;break;case"left":u=a;break;case"right":u=-a}}else{switch(a=Math.abs(a),c=Math.abs(c),o){case"top-right":case"top-left":case"top":h=c-7;break;case"bottom-right":case"bottom-left":case"bottom":h=7-c}switch(o){case"top-right":case"bottom-right":case"right":u=-a;break;case"top-left":case"bottom-left":case"left":u=a}}return[u,h]}function Wm(o,a,c,u,h,g,y,b,M,z){o.createArrays(),o.tilePixelRatio=Xt/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const E=o.layers[0].layout,T=o.layers[0]._unevaluatedLayout._values,I={};if("composite"===o.textSizeData.kind){const{minZoom:j,maxZoom:X}=o.textSizeData;I.compositeTextSizes=[T["text-size"].possiblyEvaluate(new Se(j),b),T["text-size"].possiblyEvaluate(new Se(X),b)]}if("composite"===o.iconSizeData.kind){const{minZoom:j,maxZoom:X}=o.iconSizeData;I.compositeIconSizes=[T["icon-size"].possiblyEvaluate(new Se(j),b),T["icon-size"].possiblyEvaluate(new Se(X),b)]}I.layoutTextSize=T["text-size"].possiblyEvaluate(new Se(M+1),b),I.layoutIconSize=T["icon-size"].possiblyEvaluate(new Se(M+1),b),I.textMaxSize=T["text-size"].possiblyEvaluate(new Se(18),b);const N="map"===E.get("text-rotation-alignment")&&"point"!==E.get("symbol-placement"),O=E.get("text-size");for(const j of o.features){const X=E.get("text-font").evaluate(j,{},b).join(","),ae=O.evaluate(j,{},b),pe=I.layoutTextSize.evaluate(j,{},b),ne=(I.layoutIconSize.evaluate(j,{},b),{horizontal:{},vertical:void 0}),fe=j.text;let _e,me=[0,0];if(fe){const We=fe.toString(),ct=E.get("text-letter-spacing").evaluate(j,{},b)*hi,ze=E.get("text-line-height").evaluate(j,{},b)*hi,Xe=w(We)?ct:0,et=E.get("text-anchor").evaluate(j,{},b),lt=E.get("text-variable-anchor");if(!lt){const Ct=E.get("text-radial-offset").evaluate(j,{},b);me=Ct?E0(et,[Ct*hi,wu]):E.get("text-offset").evaluate(j,{},b).map(zt=>zt*hi)}let ft=N?"center":E.get("text-justify").evaluate(j,{},b);const Oe="point"===E.get("symbol-placement"),_t=Oe?E.get("text-max-width").evaluate(j,{},b)*hi:1/0,Ut=Ct=>{o.allowVerticalPlacement&&x(We)&&(ne.vertical=pu(fe,a,c,h,X,_t,ze,et,Ct,Xe,me,Ca.vertical,!0,pe,ae))};if(!N&&lt){const Ct="auto"===ft?lt.map(bt=>l8(bt)):[ft];let zt=!1;for(let bt=0;bt<Ct.length;bt++){const Zt=Ct[bt];if(!ne.horizontal[Zt])if(zt)ne.horizontal[Zt]=ne.horizontal[0];else{const O1=pu(fe,a,c,h,X,_t,ze,"center",Zt,Xe,me,Ca.horizontal,!1,pe,ae);O1&&(ne.horizontal[Zt]=O1,zt=1===O1.positionedLines.length)}}Ut("left")}else{if("auto"===ft&&(ft=l8(et)),Oe||E.get("text-writing-mode").indexOf("horizontal")>=0||!x(We)){const Ct=pu(fe,a,c,h,X,_t,ze,et,ft,Xe,me,Ca.horizontal,!1,pe,ae);Ct&&(ne.horizontal[ft]=Ct)}Ut(Oe?"left":ft)}}let Ve=!1;if(j.icon&&j.icon.name){const We=u[j.icon.name];We&&(_e=$1(h[j.icon.name],E.get("icon-offset").evaluate(j,{},b),E.get("icon-anchor").evaluate(j,{},b)),Ve=We.sdf,void 0===o.sdfIcons?o.sdfIcons=We.sdf:o.sdfIcons!==We.sdf&&en("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(We.pixelRatio!==o.pixelRatio||0!==E.get("icon-rotate").constantOr(1))&&(o.iconsNeedLinear=!0))}const Te=kf(ne.horizontal)||ne.vertical;o.iconsInText||(o.iconsInText=!!Te&&Te.iconsInText),(Te||_e)&&Zm(o,j,ne,_e,u,I,pe,0,me,Ve,y,b,z)}g&&o.generateCollisionDebugBuffers(M,o.collisionBoxArray)}function l8(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zm(o,a,c,u,h,g,y,b,M,z,E,T,I){let N=g.textMaxSize.evaluate(a,{},T);void 0===N&&(N=y);const O=o.layers[0].layout,j=O.get("icon-offset").evaluate(a,{},T),X=kf(c.horizontal)||c.vertical,ae="globe"===I.name,pe=y/24,ne=o.tilePixelRatio*N/24,fe=(Xe=o.overscaling,o.zoom>18&&Xe>2&&(Xe>>=1),Math.max(Xt/(512*Xe),1)*O.get("symbol-spacing")),_e=O.get("text-padding")*o.tilePixelRatio,me=O.get("icon-padding")*o.tilePixelRatio,Ve=I1(O.get("text-max-angle")),Te="map"===O.get("text-rotation-alignment")&&"point"!==O.get("symbol-placement"),We="map"===O.get("icon-rotation-alignment")&&"point"!==O.get("symbol-placement"),ct=O.get("symbol-placement"),ze=fe/2;var Xe;const et=O.get("icon-text-fit");let lt;u&&"none"!==et&&(o.allowVerticalPlacement&&c.vertical&&(lt=qe(u,c.vertical,et,O.get("icon-text-fit-padding"),j,pe)),X&&(u=qe(u,X,et,O.get("icon-text-fit-padding"),j,pe)));const ft=(Oe,_t,Ut)=>{if(_t.x<0||_t.x>=Xt||_t.y<0||_t.y>=Xt)return;let Ct=null;if(ae){const{x:zt,y:bt,z:Zt}=I.projectTilePoint(_t.x,_t.y,Ut);Ct={anchor:new ws(zt,bt,Zt,0,void 0),up:I.upVector(Ut,_t.x,_t.y)}}!function(zt,bt,Zt,O1,F1,E1,Yt,xn,c1,B1,Vn,Bn,xt,Un,vn,Ye,B2,Sn,de,he,nt,Xn,Rn,q1,Ln){const u2=zt.addToLineVertexArray(bt,O1);let C2,Q2,Li,jt,No,ll,ul,dl=0,Pu=0,w1=0,eh=0,mr=-1,jn=-1;const $i={};let S8=Ya("");const s3=Zt?Zt.anchor:bt;let D8=0,A8=0;if(void 0===c1._unevaluatedLayout.getValue("text-radial-offset")?[D8,A8]=c1.layout.get("text-offset").evaluate(nt,{},Ln).map(Rr=>Rr*hi):(D8=c1.layout.get("text-radial-offset").evaluate(nt,{},Ln)*hi,A8=wu),zt.allowVerticalPlacement&&F1.vertical){const Rr=F1.vertical;if(vn)ll=d8(Rr),xn&&(ul=d8(xn));else{const Pr=c1.layout.get("text-rotate").evaluate(nt,{},Ln)+90;Li=u8(B1,s3,bt,Vn,Bn,xt,Rr,Un,Pr,Ye),xn&&(jt=u8(B1,s3,bt,Vn,Bn,xt,xn,Sn,Pr))}}if(E1){const Rr=c1.layout.get("icon-rotate").evaluate(nt,{},Ln),Pr="none"!==c1.layout.get("icon-text-fit"),c3=c8(E1,Rr,Rn,Pr),As=xn?c8(xn,Rr,Rn,Pr):void 0;Q2=u8(B1,s3,bt,Vn,Bn,xt,E1,Sn,Rr),dl=4*c3.length;const nh=zt.iconSizeData;let e4=null;"source"===nh.kind?(e4=[sc*c1.layout.get("icon-size").evaluate(nt,{},Ln)],e4[0]>t3&&en(`${zt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===nh.kind&&(e4=[sc*Xn.compositeIconSizes[0].evaluate(nt,{},Ln),sc*Xn.compositeIconSizes[1].evaluate(nt,{},Ln)],(e4[0]>t3||e4[1]>t3)&&en(`${zt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),zt.addSymbols(zt.icon,c3,e4,he,de,nt,!1,Zt,bt,u2.lineStartIndex,u2.lineLength,-1,q1,Ln),mr=zt.icon.placedSymbolArray.length-1,As&&(Pu=4*As.length,zt.addSymbols(zt.icon,As,e4,he,de,nt,Ca.vertical,Zt,bt,u2.lineStartIndex,u2.lineLength,-1,q1,Ln),jn=zt.icon.placedSymbolArray.length-1)}for(const Rr in F1.horizontal){const Pr=F1.horizontal[Rr];C2||(S8=Ya(Pr.text),vn?No=d8(Pr):C2=u8(B1,s3,bt,Vn,Bn,xt,Pr,Un,c1.layout.get("text-rotate").evaluate(nt,{},Ln),Ye));const c3=1===Pr.positionedLines.length;if(w1+=Hf(zt,Zt,bt,Pr,Yt,c1,vn,nt,Ye,u2,F1.vertical?Ca.horizontal:Ca.horizontalOnly,c3?Object.keys(F1.horizontal):[Rr],$i,mr,Xn,q1,Ln),c3)break}F1.vertical&&(eh+=Hf(zt,Zt,bt,F1.vertical,Yt,c1,vn,nt,Ye,u2,Ca.vertical,["vertical"],$i,jn,Xn,q1,Ln));let dc=-1;const E8=(Rr,Pr)=>Rr?Math.max(Rr,Pr):Pr;dc=E8(No,dc),dc=E8(ll,dc),dc=E8(ul,dc);const th=dc>-1?1:0;zt.glyphOffsetArray.length>=i3.MAX_GLYPHS&&en("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==nt.sortKey&&zt.addToSortKeyRanges(zt.symbolInstances.length,nt.sortKey),zt.symbolInstances.emplaceBack(s3.x,s3.y,s3.z,bt.x,bt.y,$i.right>=0?$i.right:-1,$i.center>=0?$i.center:-1,$i.left>=0?$i.left:-1,$i.vertical>=0?$i.vertical:-1,mr,jn,S8,void 0!==C2?C2:zt.collisionBoxArray.length,void 0!==C2?C2+1:zt.collisionBoxArray.length,void 0!==Li?Li:zt.collisionBoxArray.length,void 0!==Li?Li+1:zt.collisionBoxArray.length,void 0!==Q2?Q2:zt.collisionBoxArray.length,void 0!==Q2?Q2+1:zt.collisionBoxArray.length,jt||zt.collisionBoxArray.length,jt?jt+1:zt.collisionBoxArray.length,Vn,w1,eh,dl,Pu,th,0,D8,A8,dc)}(o,_t,Ct,Oe,c,u,h,lt,o.layers[0],o.collisionBoxArray,a.index,a.sourceLayerIndex,o.index,_e,Te,M,0,me,We,j,a,g,z,E,T)};if("line"===ct)for(const Oe of Ef(a.geometry,0,0,Xt,Xt)){const _t=Df(Oe,fe,Ve,c.vertical||X,u,24,ne,o.overscaling,Xt);for(const Ut of _t)X&&Ym(o,X.text,ze,Ut)||ft(Oe,Ut,T)}else if("line-center"===ct){for(const Oe of a.geometry)if(Oe.length>1){const _t=Gm(Oe,Ve,c.vertical||X,u,24,ne);_t&&ft(Oe,_t,T)}}else if("Polygon"===a.type)for(const Oe of W6(a.geometry,0)){const _t=Yb(Oe,16);ft(Oe[0],new ws(_t.x,_t.y,0,0,void 0),T)}else if("LineString"===a.type)for(const Oe of a.geometry)ft(Oe,new ws(Oe[0].x,Oe[0].y,0,0,void 0),T);else if("Point"===a.type)for(const Oe of a.geometry)for(const _t of Oe)ft([_t],new ws(_t.x,_t.y,0,0,void 0),T)}const t3=32640;function Hf(o,a,c,u,h,g,y,b,M,z,E,T,I,N,O,j,X){const ae=function(fe,_e,me,Ve,Te,We,ct,ze){const Xe=[];if(0===_e.positionedLines.length)return Xe;const et=Ve.layout.get("text-rotate").evaluate(We,{})*Math.PI/180,lt=function(Ct){const zt=Ct[0],bt=Ct[1],Zt=zt*bt;return Zt>0?[zt,-bt]:Zt<0?[-zt,bt]:0===zt?[bt,zt]:[bt,-zt]}(me);let ft=Math.abs(_e.top-_e.bottom);for(const Ct of _e.positionedLines)ft-=Ct.lineOffset;const Oe=_e.positionedLines.length,_t=ft/Oe;let Ut=_e.top-me[1];for(let Ct=0;Ct<Oe;++Ct){const zt=_e.positionedLines[Ct];Ut=Zb(_e,_t,Ut,Ct);for(const bt of zt.positionedGlyphs){if(!bt.rect)continue;const Zt=bt.rect||{};let O1=4,F1=!0,E1=1,Yt=0;if(bt.imageName){const q1=ct[bt.imageName];if(!q1)continue;if(q1.sdf){en("SDF images are not supported in formatted text and will be ignored.");continue}F1=!1,E1=q1.pixelRatio,O1=1/E1}const xn=(Te||ze)&&bt.vertical,c1=bt.metrics.advance*bt.scale/2,B1=bt.metrics,Vn=bt.rect;if(null===Vn)continue;ze&&_e.verticalizable&&(Yt=bt.imageName?c1-bt.metrics.width*bt.scale/2:0);const Bn=Te?[bt.x+c1,bt.y]:[0,0];let xt=[0,0],Un=[0,0],vn=!1;Te||(xn?(Un=[bt.x+c1+lt[0],bt.y+lt[1]-Yt],vn=!0):xt=[bt.x+c1+me[0],bt.y+me[1]-Yt]);const Ye=Vn.w*bt.scale/(E1*(bt.localGlyph?2:1)),B2=Vn.h*bt.scale/(E1*(bt.localGlyph?2:1));let Sn,de,he,nt;if(xn){const q1=bt.y-Ut,Ln=new ht(-c1,c1-q1),u2=-Math.PI/2,C2=new ht(...Un);Sn=new ht(-c1+xt[0],xt[1]),Sn._rotateAround(u2,Ln)._add(C2),Sn.x+=-q1+c1,Sn.y-=(B1.left-O1)*bt.scale;const Q2=bt.imageName?B1.advance*bt.scale:hi*bt.scale,Li=String.fromCharCode(bt.glyph);w0(Li)?Sn.x+=(1-O1)*bt.scale:to(Li)?Sn.x+=Q2-B1.height*bt.scale+(-O1-1)*bt.scale:Sn.x+=bt.imageName||B1.width+2*O1===Vn.w&&B1.height+2*O1===Vn.h?(Q2-B2)/2:(Q2-(B1.height+2*O1)*bt.scale)/2,de=new ht(Sn.x,Sn.y-Ye),he=new ht(Sn.x+B2,Sn.y),nt=new ht(Sn.x+B2,Sn.y-Ye)}else{const q1=(B1.left-O1)*bt.scale-c1+xt[0],Ln=(-B1.top-O1)*bt.scale+xt[1],u2=q1+Ye,C2=Ln+B2;Sn=new ht(q1,Ln),de=new ht(u2,Ln),he=new ht(q1,C2),nt=new ht(u2,C2)}if(et){let q1;q1=Te?new ht(0,0):vn?new ht(lt[0],lt[1]):new ht(me[0],me[1]),Sn._rotateAround(et,q1),de._rotateAround(et,q1),he._rotateAround(et,q1),nt._rotateAround(et,q1)}const Xn=new ht(0,0),Rn=new ht(0,0);Xe.push({tl:Sn,tr:de,bl:he,br:nt,tex:Zt,writingMode:_e.writingMode,glyphOffset:Bn,sectionIndex:bt.sectionIndex,isSDF:F1,pixelOffsetTL:Xn,pixelOffsetBR:Rn,minFontScaleX:0,minFontScaleY:0})}}return Xe}(0,u,M,g,y,b,h,o.allowVerticalPlacement),pe=o.textSizeData;let ne=null;"source"===pe.kind?(ne=[sc*g.layout.get("text-size").evaluate(b,{},X)],ne[0]>t3&&en(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===pe.kind&&(ne=[sc*O.compositeTextSizes[0].evaluate(b,{},X),sc*O.compositeTextSizes[1].evaluate(b,{},X)],(ne[0]>t3||ne[1]>t3)&&en(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,ae,ne,M,y,b,E,a,c,z.lineStartIndex,z.lineLength,N,j,X);for(const fe of T)I[fe]=o.text.placedSymbolArray.length-1;return 4*ae.length}function kf(o){for(const a in o)return o[a];return null}function u8(o,a,c,u,h,g,y,b,M,z){let E=y.top,T=y.bottom,I=y.left,N=y.right;const O=y.collisionPadding;if(O&&(I-=O[0],E-=O[1],N+=O[2],T+=O[3]),M){const j=new ht(I,E),X=new ht(N,E),ae=new ht(I,T),pe=new ht(N,T),ne=I1(M);let fe=new ht(0,0);z&&(fe=new ht(z[0],z[1])),j._rotateAround(ne,fe),X._rotateAround(ne,fe),ae._rotateAround(ne,fe),pe._rotateAround(ne,fe),I=Math.min(j.x,X.x,ae.x,pe.x),N=Math.max(j.x,X.x,ae.x,pe.x),E=Math.min(j.y,X.y,ae.y,pe.y),T=Math.max(j.y,X.y,ae.y,pe.y)}return o.emplaceBack(a.x,a.y,a.z,c.x,c.y,I,E,N,T,b,u,h,g),o.length-1}function d8(o){o.collisionPadding&&(o.top-=o.collisionPadding[1],o.bottom+=o.collisionPadding[3]);const a=o.bottom-o.top;return a>0?Math.max(10,a):null}function Ym(o,a,c,u){const h=o.compareText;if(a in h){const g=h[a];for(let y=g.length-1;y>=0;y--)if(u.dist(g[y])<c)return!0}else h[a]=[];return h[a].push(u),!1}function Mu(o,a){const c=o.fovAboveCenter,u=o.elevation?o.elevation.getMinElevationBelowMSL()*a:0,h=(o._camera.position[2]*o.worldSize-u)/Math.cos(o._pitch),g=Math.sin(c)*h/Math.sin(Math.max(Math.PI/2-o._pitch-c,.01)),y=Math.sin(o._pitch)*g+h;return Math.min(1.01*y,h*(1/o._horizonShift))}function n3(o,a){if(!a.isReprojectedInTileSpace)return{scale:1<<o.z,x:o.x,y:o.y,x2:o.x+1,y2:o.y+1,projection:a};const c=Math.pow(2,-o.z),u=o.x*c,h=(o.x+1)*c,g=o.y*c,y=(o.y+1)*c,b=ra(u),M=ra(h),z=b2(g),E=b2(y),T=a.project(b,z),I=a.project(M,z),N=a.project(M,E),O=a.project(b,E);let j=Math.min(T.x,I.x,N.x,O.x),X=Math.min(T.y,I.y,N.y,O.y),ae=Math.max(T.x,I.x,N.x,O.x),pe=Math.max(T.y,I.y,N.y,O.y);const ne=c/16;function fe(me,Ve,Te,We,ct,ze){const Xe=(Te+ct)/2,et=(We+ze)/2,lt=a.project(ra(Xe),b2(et)),ft=Math.max(0,j-lt.x,X-lt.y,lt.x-ae,lt.y-pe);j=Math.min(j,lt.x),ae=Math.max(ae,lt.x),X=Math.min(X,lt.y),pe=Math.max(pe,lt.y),ft>ne&&(fe(me,lt,Te,We,Xe,et),fe(lt,Ve,Xe,et,ct,ze))}fe(T,I,u,g,h,g),fe(I,N,h,g,h,y),fe(N,O,h,y,u,y),fe(O,T,u,y,u,g),j-=ne,X-=ne,ae+=ne,pe+=ne;const _e=1/Math.max(ae-j,pe-X);return{scale:_e,x:j*_e,y:X*_e,x2:ae*_e,y2:pe*_e,projection:a}}const zu=Eo(new Float32Array(16));class K3{constructor(a){this.spec=a,this.name=a.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(a,c){return{x:0,y:0,z:0}}unproject(a,c){return new W1(0,0)}projectTilePoint(a,c,u){return{x:a,y:c,z:0}}locationPoint(a,c,u=!0){return a._coordinatePoint(a.locationCoordinate(c),u)}pixelsPerMeter(a,c){return ya(1,a)*c}pixelSpaceConversion(a,c,u){return 1}farthestPixelDistance(a){return Mu(a,a.pixelsPerMeter)}pointCoordinate(a,c,u,h){const g=a.horizonLineFromTop(!1),y=new ht(c,Math.max(g,u));return a.rayIntersectionCoordinate(a.pointRayIntersection(y,h))}pointCoordinate3D(a,c,u){const h=new ht(c,u);if(a.elevation)return a.elevation.pointCoordinate(h);{const g=this.pointCoordinate(a,h.x,h.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(a,c){if(a.elevation)return!this.pointCoordinate3D(a,c.x,c.y);const u=a.horizonLineFromTop();return c.y<u}createInversionMatrix(a,c){return zu}createTileMatrix(a,c,u){let h,g,y;const b=u.canonical,M=Eo(new Float64Array(16));if(this.isReprojectedInTileSpace){const z=n3(b,this);h=1,g=z.x+u.wrap*z.scale,y=z.y,Hr(M,M,[h/z.scale,h/z.scale,a.pixelsPerMeter/c])}else h=c/a.zoomScale(b.z),g=(b.x+Math.pow(2,b.z)*u.wrap)*h,y=b.y*h;return jc(M,M,[g,y,0]),Hr(M,M,[h/Xt,h/Xt,1]),M}upVector(a,c,u){return[0,0,1]}upVectorScale(a,c,u){return{metersToTile:1}}}class Su extends K3{constructor(a){super(a),this.range=[4,7],this.center=a.center||[-96,37.5];const[c,u]=this.parallels=a.parallels||[29.5,45.5],h=Math.sin(I1(c));this.n=(h+Math.sin(I1(u)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(a,c){const{n:u,c:h,r0:g}=this,y=I1(a-this.center[0]),b=I1(c),M=Math.sqrt(h-2*u*Math.sin(b))/u;return{x:M*Math.sin(y*u),y:M*Math.cos(y*u)-g,z:0}}unproject(a,c){const{n:u,c:h,r0:g}=this,y=g+c;let b=Math.atan2(a,Math.abs(y))*Math.sign(y);y*u<0&&(b-=Math.PI*Math.sign(a)*Math.sign(y));const M=I1(this.center[0])*u;b=xi(b,-Math.PI-M,Math.PI-M);const z=d1(o2(b/u)+this.center[0],-180,180),E=Math.asin(d1((h-(a*a+y*y)*u*u)/(2*u),-1,1)),T=d1(o2(E),-fi,fi);return new W1(z,T)}}const V0=1.340264,f8=-.081106,W=893e-6,Ms=.003796,h8=Math.sqrt(3)/2;class If extends K3{project(a,c){c=c/180*Math.PI,a=a/180*Math.PI;const u=Math.asin(h8*Math.sin(c)),h=u*u,g=h*h*h;return{x:.5*(a*Math.cos(u)/(h8*(V0+3*f8*h+g*(7*W+9*Ms*h)))/Math.PI+.5),y:1-.5*(u*(V0+f8*h+g*(W+Ms*h))/Math.PI+1),z:0}}unproject(a,c){a=(2*a-.5)*Math.PI;let u=c=(2*(1-c)-1)*Math.PI,h=u*u,g=h*h*h;for(let E,T,I,N=0;N<12&&(T=u*(V0+f8*h+g*(W+Ms*h))-c,I=V0+3*f8*h+g*(7*W+9*Ms*h),E=T/I,u=d1(u-E,-Math.PI/3,Math.PI/3),h=u*u,g=h*h*h,!(Math.abs(E)<1e-12));++N);const y=h8*a*(V0+3*f8*h+g*(7*W+9*Ms*h))/Math.cos(u),b=Math.asin(Math.sin(u)/h8),M=d1(180*y/Math.PI,-180,180),z=d1(180*b/Math.PI,-fi,fi);return new W1(M,z)}}class Xm extends K3{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0}project(a,c){return{x:.5+a/360,y:.5-c/360,z:0}}unproject(a,c){const u=360*(a-.5),h=d1(360*(.5-c),-fi,fi);return new W1(u,h)}}const rl=Math.PI/2;function Q3(o){return Math.tan((rl+o)/2)}class al extends K3{constructor(a){super(a),this.center=a.center||[0,30];const[c,u]=this.parallels=a.parallels||[30,30];let h=I1(c),g=I1(u);this.southernCenter=h+g<0,this.southernCenter&&(h=-h,g=-g);const y=Math.cos(h),b=Q3(h);this.n=h===g?Math.sin(h):Math.log(y/Math.cos(g))/Math.log(Q3(g)/b),this.f=y*Math.pow(Q3(h),this.n)/this.n}project(a,c){c=I1(c),this.southernCenter&&(c=-c),a=I1(a-this.center[0]);const u=1e-6,{n:h,f:g}=this;g>0?c<-rl+u&&(c=-rl+u):c>rl-u&&(c=rl-u);const y=g/Math.pow(Q3(c),h);let b=y*Math.sin(h*a),M=g-y*Math.cos(h*a);return b=.5*(b/Math.PI+.5),M=.5*(M/Math.PI+.5),{x:b,y:this.southernCenter?M:1-M,z:0}}unproject(a,c){a=(2*a-.5)*Math.PI,this.southernCenter&&(c=1-c),c=(2*(1-c)-.5)*Math.PI;const{n:u,f:h}=this,g=h-c,y=Math.sign(g),b=Math.sign(u)*Math.sqrt(a*a+g*g);let M=Math.atan2(a,Math.abs(g))*y;g*u<0&&(M-=Math.PI*Math.sign(a)*y);const z=d1(o2(M/u)+this.center[0],-180,180),E=d1(o2(2*Math.atan(Math.pow(h/b,1/u))-rl),-fi,fi);return new W1(z,this.southernCenter?-E:E)}}class p8 extends K3{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(a,c){return{x:ys(a),y:eo(c),z:0}}unproject(a,c){const u=ra(a),h=b2(c);return new W1(u,h)}}const ol=I1(fi);class Du extends K3{project(a,c){const u=(c=I1(c))*c,h=u*u;return{x:.5*((a=I1(a))*(.8707-.131979*u+h*(h*(.003971*u-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(c*(1.007226+u*(.015085+h*(.028874*u-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(a,c){a=(2*a-.5)*Math.PI;let u=c=(2*(1-c)-1)*Math.PI,h=25,g=0,y=u*u;do{y=u*u;const z=y*y;g=(u*(1.007226+y*(.015085+z*(.028874*y-.044475-.005916*z)))-c)/(1.007226+y*(.045255+z*(.259866*y-.311325-.005916*11*z))),u=d1(u-g,-ol,ol)}while(Math.abs(g)>1e-6&&--h>0);y=u*u;const b=d1(o2(a/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),M=o2(u);return new W1(b,M)}}const L0=I1(fi);class Rf extends K3{project(a,c){c=I1(c),a=I1(a);const u=Math.cos(c),h=2/Math.PI,g=Math.acos(u*Math.cos(a/2)),y=Math.sin(g)/g,b=.5*(a*h+2*u*Math.sin(a/2)/y)||0,M=.5*(c+Math.sin(c)/y)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(M/Math.PI+1),z:0}}unproject(a,c){let u=a=(2*a-.5)*Math.PI,h=c=(2*(1-c)-1)*Math.PI,g=25;const y=1e-6;let b=0,M=0;do{const z=Math.cos(h),E=Math.sin(h),T=2*E*z,I=E*E,N=z*z,O=Math.cos(u/2),j=Math.sin(u/2),X=2*O*j,ae=j*j,pe=1-N*O*O,ne=pe?1/pe:0,fe=pe?Math.acos(z*O)*Math.sqrt(1/pe):0,_e=.5*(2*fe*z*j+2*u/Math.PI)-a,me=.5*(fe*E+h)-c,Ve=.5*ne*(N*ae+fe*z*O*I)+1/Math.PI,Te=ne*(X*T/4-fe*E*j),We=.125*ne*(T*j-fe*E*N*X),ct=.5*ne*(I*O+fe*ae*z)+.5,ze=Te*We-ct*Ve;b=(me*Te-_e*ct)/ze,M=(_e*We-me*Ve)/ze,u=d1(u-b,-Math.PI,Math.PI),h=d1(h-M,-L0,L0)}while((Math.abs(b)>y||Math.abs(M)>y)&&--g>0);return new W1(o2(u),o2(h))}}class m8 extends K3{constructor(a){super(a),this.center=a.center||[0,0],this.parallels=a.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(I1(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(a,c){const{scale:u,cosPhi:h}=this;return{x:I1(a)*h*u+.5,y:-Math.sin(I1(c))/h*u+.5,z:0}}unproject(a,c){const{scale:u,cosPhi:h}=this,g=-(c-.5)/u,y=d1(o2((a-.5)/u)/h,-180,180),b=Math.asin(d1(g*h,-1,1)),M=d1(o2(b),-fi,fi);return new W1(y,M)}}class Au extends p8{constructor(a){super(a),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(a,c,u){const h=oc(a,c,u);return Zn(h,h,f0(vs(u))),{x:h[0],y:h[1],z:h[2]}}locationPoint(a,c){const u=O2(c.lat,c.lng),h=hr([],u),g=a.elevation?a.elevation.getAtPointOrZero(a.locationCoordinate(c),a._centerAltitude):a._centerAltitude;V6(u,u,h,ya(1,0)*Xt*g);const y=Eo(new Float64Array(16));return _s(y,a.pixelMatrix,a.globeMatrix),Zn(u,u,y),new ht(u[0],u[1])}pixelsPerMeter(a,c){return ya(1,0)*c}pixelSpaceConversion(a,c,u){const h=ya(1,a)*c,g=G1(ya(1,45)*c,h,u);return this.pixelsPerMeter(a,c)/g}createTileMatrix(a,c,u){const h=P6(vs(u.canonical));return _s(new Float64Array(16),a.globeMatrix,h)}createInversionMatrix(a,c){const{center:u}=a,h=f0(vs(c));return Vo(h,h,I1(u.lng)),A6(h,h,I1(u.lat)),Hr(h,h,[a._pixelsPerMercatorPixel,a._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(a,c,u,h){return I6(a,c,u,!0)||new Wc(0,0)}pointCoordinate3D(a,c,u){const h=this.pointCoordinate(a,c,u,0);return[h.x,h.y,h.z]}isPointAboveHorizon(a,c){return!I6(a,c.x,c.y,!1)}farthestPixelDistance(a){const c=function(h,g){const y=h.cameraToCenterDistance,b=h._centerAltitude*g,M=h._camera,z=h._camera.forward(),E=na([],va([],z,-y),[0,0,b]),T=h.worldSize/(2*Math.PI),I=[0,0,-T],N=h.width/h.height,O=Math.tan(h.fovAboveCenter),j=va([],M.up(),O),X=va([],M.right(),O*N),ae=hr([],na([],na([],z,j),X)),pe=[];let ne;if(new k5(E,ae).closestPointOnSphere(I,T,pe)){const fe=na([],pe,I),_e=Ka([],fe,E);ne=Math.cos(h.fovAboveCenter)*s0(_e)}else{const fe=Ka([],E,I),_e=Ka([],I,E);hr(_e,_e);const me=s0(fe)-T;ne=Math.sqrt(me*(me+2*T));const Ve=Math.acos(ne/(T+me))-Math.acos(Xa(z,_e));ne*=Math.cos(Ve)}return 1.01*ne}(a,this.pixelsPerMeter(a.center.lat,a.worldSize)),u=q3(a.zoom);if(u>0){const h=Mu(a,ya(1,a.center.lat)*a.worldSize),g=a.worldSize/(2*Math.PI),y=Math.max(a.width,a.height)/a.worldSize*Math.PI;return G1(c,h+g*(1-Math.cos(y)),Math.pow(u,10))}return c}upVector(a,c,u){return oc(c,u,a,1)}upVectorScale(a){return{metersToTile:u0(d0(vs(a)))}}}function g8(o){const a=o.parallels,c=!!a&&Math.abs(a[0]+a[1])<.01;switch(o.name){case"mercator":return new p8(o);case"equirectangular":return new Xm(o);case"naturalEarth":return new Du(o);case"equalEarth":return new If(o);case"winkelTripel":return new Rf(o);case"albers":return c?new m8(o):new Su(o);case"lambertConformalConic":return c?new m8(o):new al(o);case"globe":return new Au(o)}throw new Error(`Invalid projection name: ${o.name}`)}const Pf=W4.types,Eu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _8(o,a,c,u,h,g,y,b,M,z,E,T,I){const N=b?Math.min(t3,Math.round(b[0])):0,O=b?Math.min(t3,Math.round(b[1])):0;o.emplaceBack(a,c,Math.round(32*u),Math.round(32*h),g,y,(N<<1)+(M?1:0),O,16*z,16*E,256*T,256*I)}function v8(o,a,c,u,h,g,y){o.emplaceBack(a,c,u,h,g,y)}function T0(o,a,c,u,h){o.emplaceBack(a,c,u,h),o.emplaceBack(a,c,u,h),o.emplaceBack(a,c,u,h),o.emplaceBack(a,c,u,h)}function Km(o){for(const a of o.sections)if(B(a.text))return!0;return!1}class y8{constructor(a){this.layoutVertexArray=new ms,this.indexArray=new ui,this.programConfigurations=a,this.segments=new V2,this.dynamicLayoutVertexArray=new kn,this.opacityVertexArray=new An,this.placedSymbolArray=new w5,this.globeExtVertexArray=new On}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(a,c,u,h){this.isEmpty()||(u&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Vm.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Tm.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,Eu,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,Lm.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||h)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}At(y8,"SymbolBuffers");class x8{constructor(a,c,u){this.layoutVertexArray=new a,this.layoutAttributes=c,this.indexArray=new u,this.segments=new V2,this.collisionVertexArray=new En,this.collisionVertexArrayExt=new K2}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,lu.members,!0),this.collisionVertexBufferExt=a.createVertexBuffer(this.collisionVertexArrayExt,Hm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}At(x8,"CollisionBuffers");class i3{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(y=>y.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Eo([]),this.placementViewportMatrix=Eo([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=du(this.zoom,c["text-size"]),this.iconSizeData=du(this.zoom,c["icon-size"]);const u=this.layers[0].layout,h=u.get("symbol-sort-key"),g=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==g&&void 0!==h.constantOr(1),this.sortFeaturesByY=("viewport-y"===g||"auto"===g&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(y=>Ca[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=a.sourceID,this.projection=a.projection}createArrays(){this.text=new y8(new Bc(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new y8(new Bc(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new md,this.lineVertexArray=new Vt,this.symbolInstances=new U3}calculateGlyphDependencies(a,c,u,h,g){for(let y=0;y<a.length;y++)if(c[a.charCodeAt(y)]=!0,h&&g){const b=C0[a.charAt(y)];b&&(c[b.charCodeAt(0)]=!0)}}populate(a,c,u,h){const g=this.layers[0],y=g.layout,b="globe"===this.projection.name,M=y.get("text-font"),z=y.get("text-field"),E=y.get("icon-image"),T=("constant"!==z.value.kind||z.value.value instanceof c2&&!z.value.value.isEmpty()||z.value.value.toString().length>0)&&("constant"!==M.value.kind||M.value.value.length>0),I="constant"!==E.value.kind||!!E.value.value||Object.keys(E.parameters).length>0,N=y.get("symbol-sort-key");if(this.features=[],!T&&!I)return;const O=c.iconDependencies,j=c.glyphDependencies,X=c.availableImages,ae=new Se(this.zoom);for(const{feature:pe,id:ne,index:fe,sourceLayerIndex:_e}of a){const me=g._featureFilter.needGeometry,Ve=Zc(pe,me);if(!g._featureFilter.filter(ae,Ve,u))continue;if(me||(Ve.geometry=To(pe,u,h)),b&&1!==pe.type&&u.z<=5){const ze=Ve.geometry,Xe=.98078528056,et=(lt,ft)=>Xa(oc(lt.x,lt.y,u,1),oc(ft.x,ft.y,u,1))<Xe;for(let lt=0;lt<ze.length;lt++)ze[lt]=hm(ze[lt],et)}let Te,We;if(T){const ze=g.getValueAndResolveTokens("text-field",Ve,u,X),Xe=c2.factory(ze);Km(Xe)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ye()||this.hasRTLText&&Ce.isParsed())&&(Te=Ot(Xe,g,Ve))}if(I){const ze=g.getValueAndResolveTokens("icon-image",Ve,u,X);We=ze instanceof Ci?ze:Ci.fromString(ze)}if(!Te&&!We)continue;const ct=this.sortFeaturesByKey?N.evaluate(Ve,{},u):void 0;if(this.features.push({id:ne,text:Te,icon:We,index:fe,sourceLayerIndex:_e,geometry:Ve.geometry,properties:pe.properties,type:Pf[pe.type],sortKey:ct}),We&&(O[We.name]=!0),Te){const ze=M.evaluate(Ve,{},u).join(","),Xe="map"===y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ca.vertical)>=0;for(const et of Te.sections)if(et.image)O[et.image.name]=!0;else{const lt=x(Te.toString()),ft=et.fontStack||ze,Oe=j[ft]=j[ft]||{};this.calculateGlyphDependencies(et.text,Oe,Xe,this.allowVerticalPlacement,lt)}}}"line"===y.get("symbol-placement")&&(this.features=function(pe){const ne={},fe={},_e=[];let me=0;function Ve(ze){_e.push(pe[ze]),me++}function Te(ze,Xe,et){const lt=fe[ze];return delete fe[ze],fe[Xe]=lt,_e[lt].geometry[0].pop(),_e[lt].geometry[0]=_e[lt].geometry[0].concat(et[0]),lt}function We(ze,Xe,et){const lt=ne[Xe];return delete ne[Xe],ne[ze]=lt,_e[lt].geometry[0].shift(),_e[lt].geometry[0]=et[0].concat(_e[lt].geometry[0]),lt}function ct(ze,Xe,et){const lt=et?Xe[0][Xe[0].length-1]:Xe[0][0];return`${ze}:${lt.x}:${lt.y}`}for(let ze=0;ze<pe.length;ze++){const Xe=pe[ze],et=Xe.geometry,lt=Xe.text?Xe.text.toString():null;if(!lt){Ve(ze);continue}const ft=ct(lt,et),Oe=ct(lt,et,!0);if(ft in fe&&Oe in ne&&fe[ft]!==ne[Oe]){const _t=We(ft,Oe,et),Ut=Te(ft,Oe,_e[_t].geometry);delete ne[ft],delete fe[Oe],fe[ct(lt,_e[Ut].geometry,!0)]=Ut,_e[_t].geometry=null}else ft in fe?Te(ft,Oe,et):Oe in ne?We(ft,Oe,et):(Ve(ze),ne[ft]=me-1,fe[Oe]=me-1)}return _e.filter(ze=>ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pe,ne)=>pe.sortKey-ne.sortKey)}update(a,c,u,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,c,this.layers,u,h),this.icon.programConfigurations.updatePaintArrays(a,c,this.layers,u,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=g8(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,c){const u=this.lineVertexArray.length;if(void 0!==a.segment)for(const{x:h,y:g}of c)this.lineVertexArray.emplaceBack(h,g);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(a,c,u,h,g,y,b,M,z,E,T,I,N,O){const j=a.indexArray,X=a.layoutVertexArray,ae=a.globeExtVertexArray,pe=a.segments.prepareSegment(4*c.length,X,j,this.canOverlap?y.sortKey:void 0),ne=this.glyphOffsetArray.length,fe=pe.vertexLength,_e=this.allowVerticalPlacement&&b===Ca.vertical?Math.PI/2:0,me=y.text&&y.text.sections;for(let Te=0;Te<c.length;Te++){const{tl:We,tr:ct,bl:ze,br:Xe,tex:et,pixelOffsetTL:lt,pixelOffsetBR:ft,minFontScaleX:Oe,minFontScaleY:_t,glyphOffset:Ut,isSDF:Ct,sectionIndex:zt}=c[Te],bt=pe.vertexLength,Zt=Ut[1];if(_8(X,z.x,z.y,We.x,Zt+We.y,et.x,et.y,u,Ct,lt.x,lt.y,Oe,_t),_8(X,z.x,z.y,ct.x,Zt+ct.y,et.x+et.w,et.y,u,Ct,ft.x,lt.y,Oe,_t),_8(X,z.x,z.y,ze.x,Zt+ze.y,et.x,et.y+et.h,u,Ct,lt.x,ft.y,Oe,_t),_8(X,z.x,z.y,Xe.x,Zt+Xe.y,et.x+et.w,et.y+et.h,u,Ct,ft.x,ft.y,Oe,_t),M){const{x:O1,y:F1,z:E1}=M.anchor,[Yt,xn,c1]=M.up;v8(ae,O1,F1,E1,Yt,xn,c1),v8(ae,O1,F1,E1,Yt,xn,c1),v8(ae,O1,F1,E1,Yt,xn,c1),v8(ae,O1,F1,E1,Yt,xn,c1),T0(a.dynamicLayoutVertexArray,O1,F1,E1,_e)}else T0(a.dynamicLayoutVertexArray,z.x,z.y,z.z,_e);j.emplaceBack(bt,bt+1,bt+2),j.emplaceBack(bt+1,bt+2,bt+3),pe.vertexLength+=4,pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ut[0]),Te!==c.length-1&&zt===c[Te+1].sectionIndex||a.programConfigurations.populatePaintArrays(X.length,y,y.index,{},N,O,me&&me[zt])}const Ve=M?M.anchor:z;a.placedSymbolArray.emplaceBack(Ve.x,Ve.y,Ve.z,z.x,z.y,ne,this.glyphOffsetArray.length-ne,fe,E,T,z.segment,u?u[0]:0,u?u[1]:0,h[0],h[1],b,0,!1,0,I,0)}_commitLayoutVertex(a,c,u,h,g,y,b){a.emplaceBack(c,u,h,g,y,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(a,c,u,h,g,y,b){const M=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),z=M.vertexLength,E=b.tileAnchorX,T=b.tileAnchorY;for(let N=0;N<4;N++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(c,-a.padding,-a.padding),u.collisionVertexArrayExt.emplaceBack(c,a.padding,-a.padding),u.collisionVertexArrayExt.emplaceBack(c,a.padding,a.padding),u.collisionVertexArrayExt.emplaceBack(c,-a.padding,a.padding),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,E,T,new ht(a.x1,a.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,E,T,new ht(a.x2,a.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,E,T,new ht(a.x2,a.y2)),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,E,T,new ht(a.x1,a.y2)),M.vertexLength+=4;const I=u.indexArray;I.emplaceBack(z,z+1),I.emplaceBack(z+1,z+2),I.emplaceBack(z+2,z+3),I.emplaceBack(z+3,z),M.primitiveLength+=4}_addTextDebugCollisionBoxes(a,c,u,h,g,y){for(let b=h;b<g;b++){const M=u.get(b),z=this.getSymbolInstanceTextSize(a,y,c,b);this._addCollisionDebugVertices(M,z,this.textCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(a,c,u,h,g,y){for(let b=h;b<g;b++){const M=u.get(b),z=this.getSymbolInstanceIconSize(a,c,y.placedIconSymbolIndex);this._addCollisionDebugVertices(M,z,this.iconCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,y)}}generateCollisionDebugBuffers(a,c){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new x8(zn,uu.members,So),this.iconCollisionBox=new x8(zn,uu.members,So);const u=J4(this.iconSizeData,a),h=J4(this.textSizeData,a);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(h,a,c,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(h,a,c,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(u,a,c,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(u,a,c,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(a,c,u,h){const g=this.text.placedSymbolArray.get(c.rightJustifiedTextSymbolIndex>=0?c.rightJustifiedTextSymbolIndex:c.centerJustifiedTextSymbolIndex>=0?c.centerJustifiedTextSymbolIndex:c.leftJustifiedTextSymbolIndex>=0?c.leftJustifiedTextSymbolIndex:c.verticalPlacedTextSymbolIndex>=0?c.verticalPlacedTextSymbolIndex:h),y=Cs(this.textSizeData,a,g)/hi;return this.tilePixelRatio*y}getSymbolInstanceIconSize(a,c,u){const h=this.icon.placedSymbolArray.get(u),g=Cs(this.iconSizeData,a,h);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(a,c,u){a.emplaceBack(c,-u,-u),a.emplaceBack(c,u,-u),a.emplaceBack(c,u,u),a.emplaceBack(c,-u,u)}_updateTextDebugCollisionBoxes(a,c,u,h,g,y){for(let b=h;b<g;b++){const M=u.get(b),z=this.getSymbolInstanceTextSize(a,y,c,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,z,M.padding)}}_updateIconDebugCollisionBoxes(a,c,u,h,g,y){for(let b=h;b<g;b++){const M=u.get(b),z=this.getSymbolInstanceIconSize(a,c,y);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,z,M.padding)}}updateCollisionDebugBuffers(a,c){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=J4(this.iconSizeData,a),h=J4(this.textSizeData,a);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(h,a,c,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(h,a,c,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(u,a,c,y.iconBoxStartIndex,y.iconBoxEndIndex,y.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,a,c,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(a,c,u,h,g,y,b,M,z){const E={};if(c<u){const{x1:T,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:pe,tileAnchorX:ne,tileAnchorY:fe,featureIndex:_e}=a.get(c);E.textBox={x1:T,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:pe,tileAnchorX:ne,tileAnchorY:fe},E.textFeatureIndex=_e}if(h<g){const{x1:T,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:pe,tileAnchorX:ne,tileAnchorY:fe,featureIndex:_e}=a.get(h);E.verticalTextBox={x1:T,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:pe,tileAnchorX:ne,tileAnchorY:fe},E.verticalTextFeatureIndex=_e}if(y<b){const{x1:T,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:pe,tileAnchorX:ne,tileAnchorY:fe,featureIndex:_e}=a.get(y);E.iconBox={x1:T,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:pe,tileAnchorX:ne,tileAnchorY:fe},E.iconFeatureIndex=_e}if(M<z){const{x1:T,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:pe,tileAnchorX:ne,tileAnchorY:fe,featureIndex:_e}=a.get(M);E.verticalIconBox={x1:T,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:pe,tileAnchorX:ne,tileAnchorY:fe},E.verticalIconFeatureIndex=_e}return E}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const u=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,c){const u=a.placedSymbolArray.get(c),h=u.vertexStartIndex+4*u.numGlyphs;for(let g=u.vertexStartIndex;g<h;g+=4)a.indexArray.emplaceBack(g,g+1,g+2),a.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const c=Math.sin(a),u=Math.cos(a),h=[],g=[],y=[];for(let b=0;b<this.symbolInstances.length;++b){y.push(b);const M=this.symbolInstances.get(b);h.push(0|Math.round(c*M.tileAnchorX+u*M.tileAnchorY)),g.push(M.featureIndex)}return y.sort((b,M)=>h[b]-h[M]||g[M]-g[b]),y}addToSortKeyRanges(a,c){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===c?u.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const u=this.symbolInstances.get(c);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:M,verticalPlacedIconSymbolIndex:z}=u;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),g>=0&&g!==h&&this.addIndicesForPlacedSymbol(this.text,g),y>=0&&y!==g&&y!==h&&this.addIndicesForPlacedSymbol(this.text,y),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),M>=0&&this.addIndicesForPlacedSymbol(this.icon,M),z>=0&&this.addIndicesForPlacedSymbol(this.icon,z)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}At(i3,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),i3.MAX_GLYPHS=65535,i3.addDynamicAttributes=T0;const Qm=new dt({"symbol-placement":new Ae(Ge.layout_symbol["symbol-placement"]),"symbol-spacing":new Ae(Ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ae(Ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ne(Ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ae(Ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ae(Ge.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ae(Ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ae(Ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ae(Ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ne(Ge.layout_symbol["icon-size"]),"icon-text-fit":new Ae(Ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ae(Ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ne(Ge.layout_symbol["icon-image"]),"icon-rotate":new Ne(Ge.layout_symbol["icon-rotate"]),"icon-padding":new Ae(Ge.layout_symbol["icon-padding"]),"icon-keep-upright":new Ae(Ge.layout_symbol["icon-keep-upright"]),"icon-offset":new Ne(Ge.layout_symbol["icon-offset"]),"icon-anchor":new Ne(Ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ae(Ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ae(Ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ae(Ge.layout_symbol["text-rotation-alignment"]),"text-field":new Ne(Ge.layout_symbol["text-field"]),"text-font":new Ne(Ge.layout_symbol["text-font"]),"text-size":new Ne(Ge.layout_symbol["text-size"]),"text-max-width":new Ne(Ge.layout_symbol["text-max-width"]),"text-line-height":new Ne(Ge.layout_symbol["text-line-height"]),"text-letter-spacing":new Ne(Ge.layout_symbol["text-letter-spacing"]),"text-justify":new Ne(Ge.layout_symbol["text-justify"]),"text-radial-offset":new Ne(Ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ae(Ge.layout_symbol["text-variable-anchor"]),"text-anchor":new Ne(Ge.layout_symbol["text-anchor"]),"text-max-angle":new Ae(Ge.layout_symbol["text-max-angle"]),"text-writing-mode":new Ae(Ge.layout_symbol["text-writing-mode"]),"text-rotate":new Ne(Ge.layout_symbol["text-rotate"]),"text-padding":new Ae(Ge.layout_symbol["text-padding"]),"text-keep-upright":new Ae(Ge.layout_symbol["text-keep-upright"]),"text-transform":new Ne(Ge.layout_symbol["text-transform"]),"text-offset":new Ne(Ge.layout_symbol["text-offset"]),"text-allow-overlap":new Ae(Ge.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ae(Ge.layout_symbol["text-ignore-placement"]),"text-optional":new Ae(Ge.layout_symbol["text-optional"])});var Ir={paint:new dt({"icon-opacity":new Ne(Ge.paint_symbol["icon-opacity"]),"icon-color":new Ne(Ge.paint_symbol["icon-color"]),"icon-halo-color":new Ne(Ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ne(Ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ne(Ge.paint_symbol["icon-halo-blur"]),"icon-translate":new Ae(Ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ae(Ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ne(Ge.paint_symbol["text-opacity"]),"text-color":new Ne(Ge.paint_symbol["text-color"],{runtimeType:ar,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Ne(Ge.paint_symbol["text-halo-color"]),"text-halo-width":new Ne(Ge.paint_symbol["text-halo-width"]),"text-halo-blur":new Ne(Ge.paint_symbol["text-halo-blur"]),"text-translate":new Ae(Ge.paint_symbol["text-translate"]),"text-translate-anchor":new Ae(Ge.paint_symbol["text-translate-anchor"])}),layout:Qm};class Ff{constructor(a){this.type=a.property.overrides?a.property.overrides.runtimeType:W2,this.defaultValue=a}evaluate(a){if(a.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(a.formattedSection))return c.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}At(Ff,"FormatSectionOverride",{omit:["defaultValue"]});class b8 extends x2{constructor(a){super(a,Ir)}recalculate(a,c){super.recalculate(a,c),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const h=[];for(const g of u)h.indexOf(g)<0&&h.push(g);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(a,c,u,h){const g=this.layout.get(a).evaluate(c,{},u,h),y=this._unevaluatedLayout._values[a];return y.isDataDriven()||k(y.value)||!g?g:(b=c.properties,g.replace(/{([^{}]+)}/g,(z,E)=>E in b?String(b[E]):""));var b}createBucket(a){return new i3(a)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const a of Ir.paint.overridableProperties){if(!b8.hasPaintOverride(this.layout,a))continue;const c=this.paint.get(a),u=new Ff(c),h=new H(u,c.property.specification);let g=null;g="constant"===c.value.kind||"source"===c.value.kind?new ge("source",h):new Qe("composite",h,c.value.zoomStops,c.value._interpolationType),this.paint._values[a]=new at(c.property,g,c.parameters)}}_handleOverridablePaintPropertyUpdate(a,c,u){return!(!this.layout||c.isDataDriven()||u.isDataDriven())&&b8.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,c){const u=a.get("text-field"),h=Ir.paint.properties[c];let g=!1;const y=b=>{for(const M of b)if(h.overrides&&h.overrides.hasOverride(M))return void(g=!0)};if("constant"===u.value.kind&&u.value.value instanceof c2)y(u.value.value.sections);else if("source"===u.value.kind){const b=z=>{g||(z instanceof es&&m2(z.value)===nn?y(z.value.sections):z instanceof Sc?y(z.sections):z.eachChild(b))},M=u.value;M._styleExpression&&b(M._styleExpression.expression)}return g}getProgramConfiguration(a){return new ea(this,a)}}var Xb={paint:new dt({"background-color":new Ae(Ge.paint_background["background-color"]),"background-pattern":new Ae(Ge.paint_background["background-pattern"]),"background-opacity":new Ae(Ge.paint_background["background-opacity"])})},Vu={paint:new dt({"raster-opacity":new Ae(Ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ae(Ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ae(Ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ae(Ge.paint_raster["raster-brightness-max"]),"raster-saturation":new Ae(Ge.paint_raster["raster-saturation"]),"raster-contrast":new Ae(Ge.paint_raster["raster-contrast"]),"raster-resampling":new Ae(Ge.paint_raster["raster-resampling"]),"raster-fade-duration":new Ae(Ge.paint_raster["raster-fade-duration"])})};class Nf extends x2{constructor(a){super(a,{}),this.implementation=a}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)}onRemove(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)}}var Jm={paint:new dt({"sky-type":new Ae(Ge.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ae(Ge.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ae(Ge.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ae(Ge.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ae(Ge.paint_sky["sky-gradient-radius"]),"sky-gradient":new ot(Ge.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ae(Ge.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ae(Ge.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ae(Ge.paint_sky["sky-opacity"])})};function Lu(o,a,c){const u=[0,0,1],h=om([]);return T6(h,h,c?-I1(o)+Math.PI:I1(o)),sm(h,h,-I1(a)),H5(u,u,h),hr(u,u)}const eg={circle:class extends x2{constructor(o){super(o,$5)}createBucket(o){return new U5(o)}queryRadius(o){const a=o;return Kc("circle-radius",this,a)+Kc("circle-stroke-width",this,a)+p0(this.paint.get("circle-translate"))}queryIntersectsFeature(o,a,c,u,h,g,y,b){const M=g0(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),z=this.paint.get("circle-radius").evaluate(a,c)+this.paint.get("circle-stroke-width").evaluate(a,c);return U6(o,u,g,y,b,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),M,z)}getProgramIds(){return["circle"]}getProgramConfiguration(o){return new ea(this,o)}},heatmap:class extends x2{createBucket(o){return new jd(o)}constructor(o){super(o,W5),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Qc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(o){return Kc("heatmap-radius",this,o)}queryIntersectsFeature(o,a,c,u,h,g,y,b){const M=this.paint.get("heatmap-radius").evaluate(a,c);return U6(o,u,g,y,b,!0,!0,new ht(0,0),M)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(o){return new ea(this,o)}},hillshade:class extends x2{constructor(o){super(o,gm)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends x2{constructor(o){super(o,eu)}getProgramIds(){const o=this.paint.get("fill-pattern"),a=o&&o.constantOr(1),c=[a?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&c.push(a&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),c}getProgramConfiguration(o){return new ea(this,o)}recalculate(o,a){super.recalculate(o,a);const c=this.paint._values["fill-outline-color"];"constant"===c.value.kind&&void 0===c.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new J5(o)}queryRadius(){return p0(this.paint.get("fill-translate"))}queryIntersectsFeature(o,a,c,u,h,g){return!o.queryGeometry.isAboveHorizon&&Yc(m0(o.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends x2{constructor(o){super(o,ou)}createBucket(o){return new J6(o)}queryRadius(){return p0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(o){return new ea(this,o)}queryIntersectsFeature(o,a,c,u,h,g,y,b,M){const z=g0(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),E=this.paint.get("fill-extrusion-height").evaluate(a,c),T=this.paint.get("fill-extrusion-base").evaluate(a,c),I=[0,0],N=b&&g.elevation,O=g.elevation?g.elevation.exaggeration():1,j=o.tile.getBucket(this);if(N&&j instanceof J6){const fe=j.centroidVertexArray,_e=M+1;_e<fe.length&&(I[0]=fe.geta_centroid_pos0(_e),I[1]=fe.geta_centroid_pos1(_e))}if(0===I[0]&&1===I[1])return!1;"globe"===g.projection.name&&(u=au([u],[new ht(0,0),new ht(Xt,Xt)],o.tileID.canonical).map(fe=>fe.polygon).flat());const X=N?b:null,[ae,pe]=(_e=u,me=T,Ve=E,Te=z,We=y,ct=X,ze=I,Xe=O,et=g.center.lat,"globe"===(fe=g).projection.name?function(ft,Oe,_t,Ut,Ct,zt,bt,Zt,O1,F1,E1){const Yt=[],xn=[],c1=ft.projection.upVectorScale(E1,ft.center.lat,ft.worldSize).metersToTile,B1=[0,0,0,1],Vn=[0,0,0,1],Bn=(Un,vn,Ye,B2)=>{Un[0]=vn,Un[1]=Ye,Un[2]=B2,Un[3]=1},xt=lf();_t>0&&(_t+=xt),Ut+=xt;for(const Un of Oe){const vn=[],Ye=[];for(const B2 of Un){const Sn=B2.x+Ct.x,de=B2.y+Ct.y,he=ft.projection.projectTilePoint(Sn,de,E1),nt=ft.projection.upVector(E1,B2.x,B2.y);let Xn=_t,Rn=Ut;if(bt){const q1=t8(Sn,de,_t,Ut,bt,Zt,O1,F1);Xn+=q1.base,Rn+=q1.top}0!==_t?Bn(B1,he.x+nt[0]*c1*Xn,he.y+nt[1]*c1*Xn,he.z+nt[2]*c1*Xn):Bn(B1,he.x,he.y,he.z),Bn(Vn,he.x+nt[0]*c1*Rn,he.y+nt[1]*c1*Rn,he.z+nt[2]*c1*Rn),Zn(B1,B1,zt),Zn(Vn,Vn,zt),vn.push(new Y3(B1[0],B1[1],B1[2])),Ye.push(new Y3(Vn[0],Vn[1],Vn[2]))}Yt.push(vn),xn.push(Ye)}return[Yt,xn]}(fe,_e,me,Ve,Te,We,ct,ze,Xe,et,o.tileID.canonical):ct?function(ft,Oe,_t,Ut,Ct,zt,bt,Zt,O1){const F1=[],E1=[],Yt=[0,0,0,1];for(const xn of ft){const c1=[],B1=[];for(const Vn of xn){const Bn=Vn.x+Ut.x,xt=Vn.y+Ut.y,Un=t8(Bn,xt,Oe,_t,zt,bt,Zt,O1);Yt[0]=Bn,Yt[1]=xt,Yt[2]=Un.base,Yt[3]=1,$3(Yt,Yt,Ct),Yt[3]=Math.max(Yt[3],1e-5);const vn=new Y3(Yt[0]/Yt[3],Yt[1]/Yt[3],Yt[2]/Yt[3]);Yt[0]=Bn,Yt[1]=xt,Yt[2]=Un.top,Yt[3]=1,$3(Yt,Yt,Ct),Yt[3]=Math.max(Yt[3],1e-5);const Ye=new Y3(Yt[0]/Yt[3],Yt[1]/Yt[3],Yt[2]/Yt[3]);c1.push(vn),B1.push(Ye)}F1.push(c1),E1.push(B1)}return[F1,E1]}(_e,me,Ve,Te,We,ct,ze,Xe,et):function(ft,Oe,_t,Ut,Ct){const zt=[],bt=[],Zt=Ct[8]*Oe,O1=Ct[9]*Oe,F1=Ct[10]*Oe,E1=Ct[11]*Oe,Yt=Ct[8]*_t,xn=Ct[9]*_t,c1=Ct[10]*_t,B1=Ct[11]*_t;for(const Vn of ft){const Bn=[],xt=[];for(const Un of Vn){const vn=Un.x+Ut.x,Ye=Un.y+Ut.y,B2=Ct[0]*vn+Ct[4]*Ye+Ct[12],Sn=Ct[1]*vn+Ct[5]*Ye+Ct[13],de=Ct[2]*vn+Ct[6]*Ye+Ct[14],he=Ct[3]*vn+Ct[7]*Ye+Ct[15],nt=B2+Zt,Xn=Sn+O1,Rn=de+F1,q1=Math.max(he+E1,1e-5),Ln=B2+Yt,u2=Sn+xn,C2=de+c1,Q2=Math.max(he+B1,1e-5);Bn.push(new Y3(nt/q1,Xn/q1,Rn/q1)),xt.push(new Y3(Ln/Q2,u2/Q2,C2/Q2))}zt.push(Bn),bt.push(xt)}return[zt,bt]}(_e,me,Ve,Te,We)),ne=o.queryGeometry;var fe,_e,me,Ve,Te,We,ct,ze,Xe,et;return function(fe,_e,me){let Ve=1/0;Yc(me,_e)&&(Ve=ff(me,_e[0]));for(let Te=0;Te<_e.length;Te++){const We=_e[Te],ct=fe[Te];for(let ze=0;ze<We.length-1;ze++){const Xe=We[ze],et=[Xe,We[ze+1],ct[ze+1],ct[ze],Xe];j5(me,et)&&(Ve=Math.min(Ve,ff(me,et)))}}return Ve!==1/0&&Ve}(ae,pe,ne.isPointQuery()?ne.screenBounds:ne.screenGeometry)}},line:class extends x2{constructor(o){super(o,pf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){if("line-gradient"===o){const a=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=a._styleExpression&&a._styleExpression.expression instanceof cs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(o,a){super.recalculate(o,a),this.paint._values["line-floorwidth"]=cu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Q4(o)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(o){return new ea(this,o)}queryRadius(o){const a=o,c=X3(Kc("line-width",this,a),Kc("line-gap-width",this,a)),u=Kc("line-offset",this,a);return c/2+Math.abs(u)+p0(this.paint.get("line-translate"))}queryIntersectsFeature(o,a,c,u,h,g){if(o.queryGeometry.isAboveHorizon)return!1;const y=m0(o.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),b=o.pixelToTileUnitsFactor/2*X3(this.paint.get("line-width").evaluate(a,c),this.paint.get("line-gap-width").evaluate(a,c)),M=this.paint.get("line-offset").evaluate(a,c);return M&&(u=function(z,E){const T=[],I=new ht(0,0);for(let N=0;N<z.length;N++){const O=z[N],j=[];for(let X=0;X<O.length;X++){const pe=O[X],ne=O[X+1],fe=0===X?I:pe.sub(O[X-1])._unit()._perp(),_e=X===O.length-1?I:ne.sub(pe)._unit()._perp(),me=fe._add(_e)._unit();me._mult(1/(me.x*_e.x+me.y*_e.y)),j.push(me._mult(E)._add(pe))}T.push(j)}return T}(u,M*o.pixelToTileUnitsFactor)),function(z,E,T){for(let I=0;I<E.length;I++){const N=E[I];if(z.length>=3)for(let O=0;O<N.length;O++)if(Xc(z,N[O]))return!0;if(Pd(z,N,T))return!0}return!1}(y,u,b)}isTileClipped(){return!0}},symbol:b8,background:class extends x2{constructor(o){super(o,Xb)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends x2{constructor(o){super(o,Vu)}getProgramIds(){return["raster"]}},sky:class extends x2{constructor(o){super(o,Jm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"sky-gradient"===o?this._updateColorRamp():"sky-atmosphere-sun"!==o&&"sky-atmosphere-halo-color"!==o&&"sky-atmosphere-color"!==o&&"sky-atmosphere-sun-intensity"!==o||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Qc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(o){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const a=o.style.light.properties.get("position");return this._lightPosition.azimuthal!==a.azimuthal||this._lightPosition.polar!==a.polar}return!1}getCenter(o,a){if("atmosphere"===this.paint.get("sky-type")){const u=this.paint.get("sky-atmosphere-sun"),h=!u,g=o.style.light,y=g.properties.get("position");return h&&"viewport"===g.properties.get("anchor")&&en("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?Lu(y.azimuthal,90-y.polar,a):Lu(u[0],90-u[1],a)}const c=this.paint.get("sky-gradient-center");return Lu(c[0],90-c[1],a)}is3D(){return!1}isSky(){return!0}markSkyboxValid(o){this._skyboxInvalidated=!1,this._lightPosition=o.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const o=this.paint.get("sky-type");return"atmosphere"===o?["skyboxCapture","skybox"]:"gradient"===o?["skyboxGradient"]:null}}};class sl{constructor(a,c,u,h){this.context=a,this.format=u,this.texture=a.gl.createTexture(),this.update(c,h)}update(a,c,u){const{width:h,height:g}=a,{context:y}=this,{gl:b}=y,{HTMLImageElement:M,HTMLCanvasElement:z,HTMLVideoElement:E,ImageData:T,ImageBitmap:I}=Ze;if(b.bindTexture(b.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!c||!1!==c.premultiply)),u||this.size&&this.size[0]===h&&this.size[1]===g){const{x:N,y:O}=u||{x:0,y:0};a instanceof M||a instanceof z||a instanceof E||a instanceof T||I&&a instanceof I?b.texSubImage2D(b.TEXTURE_2D,0,N,O,b.RGBA,b.UNSIGNED_BYTE,a):b.texSubImage2D(b.TEXTURE_2D,0,N,O,h,g,b.RGBA,b.UNSIGNED_BYTE,a.data)}else this.size=[h,g],a instanceof M||a instanceof z||a instanceof E||a instanceof T||I&&a instanceof I?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,a):b.texImage2D(b.TEXTURE_2D,0,this.format,h,g,0,this.format,b.UNSIGNED_BYTE,a.data);this.useMipmap=Boolean(c&&c.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(a,c){const{context:u}=this,{gl:h}=u;h.bindTexture(h.TEXTURE_2D,this.texture),a!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,a),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?a===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:a),this.filter=a),c!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,c),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class tg{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class ng{constructor(){this.tasks={},this.taskQueue=[],tr(["process"],this),this.invoker=new tg(this.process),this.nextId=0}add(a,c){const u=this.nextId++,h=function({type:g,isSymbolTile:y,zoom:b}){return b=b||0,"message"===g?0:"maybePrepare"!==g||y?"parseTile"!==g||y?"parseTile"===g&&y?300-b:"maybePrepare"===g&&y?400-b:500:200-b:100-b}(c);if(0===h){Mr();try{a()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:a,metadata:c,priority:h,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Mr();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const a=this.pick();if(null===a)return;const c=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),!c)return;c.fn()}finally{}}pick(){let a=null,c=1/0;for(let h=0;h<this.taskQueue.length;h++){const g=this.tasks[this.taskQueue[h]];g.priority<c&&(c=g.priority,a=h)}if(null===a)return null;const u=this.taskQueue[a];return this.taskQueue.splice(a,1),u}remove(){this.invoker.remove()}}class C8{constructor(a){this._stringToNumber={},this._numberToString=[];for(let c=0;c<a.length;c++){const u=a[c];this._stringToNumber[u]=c,this._numberToString[c]=u}}encode(a){return this._stringToNumber[a]}decode(a){return this._numberToString[a]}}const ig=["tile","layer","source","sourceLayer","state"];class Of{constructor(a,c,u,h,g){this.type="Feature",this._vectorTileFeature=a,this._z=c,this._x=u,this._y=h,this.properties=a.properties,this.id=g}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(a.id=this.id);for(const c of ig)void 0!==this[c]&&(a[c]=this[c]);return a}}const no=32,zs=33,r3=new Uint16Array(8184);for(let o=0;o<2046;o++){let a=o+2,c=0,u=0,h=0,g=0,y=0,b=0;for(1&a?h=g=y=no:c=u=b=no;(a>>=1)>1;){const z=c+h>>1,E=u+g>>1;1&a?(h=c,g=u,c=y,u=b):(c=h,u=g,h=y,g=b),y=z,b=E}const M=4*o;r3[M+0]=c,r3[M+1]=u,r3[M+2]=h,r3[M+3]=g}const pi=new Uint16Array(2178),Ss=new Uint8Array(1089),w8=new Uint16Array(1089);function Bf(o){return 0===o?-.03125:32===o?.03125:0}var Tu=Pt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Uf={type:2,extent:Xt,loadGeometry:()=>[[new ht(0,0),new ht(8193,0),new ht(8193,8193),new ht(0,8193),new ht(0,0)]]};class Hu{constructor(a,c,u,h,g){this.tileID=a,this.uid=Ea(),this.uses=0,this.tileSize=c,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(a){const c=a+this.timeAdded;c<K1.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=n3(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,c,u){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(h,g){const y={};if(!g)return y;for(const b of h){const M=b.layerIds.map(z=>g.getLayer(z)).filter(Boolean);if(0!==M.length){b.layers=M,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(z=>M.filter(E=>E.id===z)[0]));for(const z of M)y[z.id]=b}}return y}(a.buckets,c.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const g=this.buckets[h];if(g instanceof i3){if(this.hasSymbolBuckets=!0,!u)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const g=this.buckets[h];if(g instanceof i3&&g.hasRTLText){this.hasRTLText=!0,Ce.isLoading()||Ce.isLoaded()||"deferred"!==ye()||ve();break}}this.queryPadding=0;for(const h in this.buckets){const g=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(h).queryRadius(g))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas)}else this.collisionBoxArray=new ac}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(a){return this.buckets[a.id]}upload(a){for(const u in this.buckets){const h=this.buckets[u];h.uploadPending()&&h.upload(a)}const c=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new sl(a,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new sl(a,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new sl(a,this.lineAtlas.image,c.ALPHA),this.lineAtlas.uploaded=!0)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,c,u,h,g,y,b,M){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:b,transform:y,params:g,tileTransform:this.tileTransform},a,c,u):{}}querySourceFeatures(a,c){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const h=u.loadVTLayers(),g=c?c.sourceLayer:"",y=h._geojsonTileLayer||h[g];if(!y)return;const b=ql(c&&c.filter),{z:M,x:z,y:E}=this.tileID.canonical,T={z:M,x:z,y:E};for(let I=0;I<y.length;I++){const N=y.feature(I);if(b.needGeometry){const X=Zc(N,!0);if(!b.filter(new Se(this.tileID.overscaledZ),X,this.tileID.canonical))continue}else if(!b.filter(new Se(this.tileID.overscaledZ),N))continue;const O=u.getId(N,g),j=new Of(N,M,z,E,O);j.tile=T,a.push(j)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const c=this.expirationTime;if(a.cacheControl){const u=j1(a.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const u=Date.now();let h=!1;if(this.expirationTime>u)h=!1;else if(c)if(this.expirationTime<c)h=!0;else{const g=this.expirationTime-c;g?this.expirationTime=u+Math.max(g,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(a,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(a).length||!c)return;const u=this.latestFeatureIndex.loadVTLayers(),h=c.style.listImages();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const y=this.buckets[g],b=y.layers[0].sourceLayer||"_geojsonTileLayer",M=u[b],z=a[b];if(!M||!z||0===Object.keys(z).length)continue;if(y.update(z,M,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),y instanceof Q4||y instanceof J5){const T=c.style._getSourceCache(y.layers[0].source);c._terrain&&c._terrain.enabled&&T&&y.programConfigurations.needsUpload&&c._terrain._clearRenderCacheForTile(T.id,this.tileID)}const E=c&&c.style&&c.style.getLayer(g);E&&(this.queryPadding=Math.max(this.queryPadding,E.queryRadius(y)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<K1.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=K1.now()+a}setTexture(a,c){const u=c.context,h=u.gl;this.texture=this.texture||c.getTileTexture(a.width),this.texture?this.texture.update(a,{useMipmap:!0}):(this.texture=new sl(u,a,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE))}setDependencies(a,c){const u={};for(const h of c)u[h]=!0;this.dependencies[a]=u}hasDependency(a,c){for(const u of a){const h=this.dependencies[u];if(h)for(const g of c)if(h[g])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,c){if(!c||"mercator"===c.name||this._tileDebugBuffer)return;const u=To(Uf,this.tileID.canonical,this.tileTransform)[0],h=new Nt,g=new Do;for(let y=0;y<u.length;y++){const{x:b,y:M}=u[y];h.emplaceBack(b,M),g.emplaceBack(y)}g.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(g),this._tileDebugBuffer=a.createVertexBuffer(h,H6.members),this._tileDebugSegments=V2.simpleSegment(0,0,h.length,g.length)}_makeTileBoundsBuffers(a,c){if(this._tileBoundsBuffer||!c||"mercator"===c.name)return;const u=To(Uf,this.tileID.canonical,this.tileTransform)[0];let h,g;if(this.isRaster){const y=function(b,M){const z=n3(b,M),E=Math.pow(2,b.z);for(let X=0;X<zs;X++)for(let ae=0;ae<zs;ae++){const pe=ra((b.x+(ae+Bf(ae))/no)/E),ne=b2((b.y+(X+Bf(X))/no)/E),fe=M.project(pe,ne),_e=X*zs+ae;pi[2*_e+0]=Math.round((fe.x*z.scale-z.x)*Xt),pi[2*_e+1]=Math.round((fe.y*z.scale-z.y)*Xt)}Ss.fill(0),w8.fill(0);for(let X=2045;X>=0;X--){const ae=4*X,pe=r3[ae+0],ne=r3[ae+1],fe=r3[ae+2],_e=r3[ae+3],me=pe+fe>>1,Ve=ne+_e>>1,Te=me+Ve-ne,We=Ve+pe-me,ct=ne*zs+pe,ze=_e*zs+fe,Xe=Ve*zs+me,et=Math.hypot((pi[2*ct+0]+pi[2*ze+0])/2-pi[2*Xe+0],(pi[2*ct+1]+pi[2*ze+1])/2-pi[2*Xe+1])>=16;Ss[Xe]=Ss[Xe]||(et?1:0),X<1022&&(Ss[Xe]=Ss[Xe]||Ss[(ne+We>>1)*zs+(pe+Te>>1)]||Ss[(_e+We>>1)*zs+(fe+Te>>1)])}const T=new _n,I=new ui;let N=0;function O(X,ae){const pe=ae*zs+X;return 0===w8[pe]&&(T.emplaceBack(pi[2*pe+0],pi[2*pe+1],X*Xt/no,ae*Xt/no),w8[pe]=++N),w8[pe]-1}function j(X,ae,pe,ne,fe,_e){const me=X+pe>>1,Ve=ae+ne>>1;if(Math.abs(X-fe)+Math.abs(ae-_e)>1&&Ss[Ve*zs+me])j(fe,_e,X,ae,me,Ve),j(pe,ne,fe,_e,me,Ve);else{const Te=O(X,ae),We=O(pe,ne),ct=O(fe,_e);I.emplaceBack(Te,We,ct)}}return j(0,0,no,no,no,0),j(no,no,0,0,0,no),{vertices:T,indices:I}}(this.tileID.canonical,c);h=y.vertices,g=y.indices}else{h=new _n,g=new ui;for(const{x:b,y:M}of u)h.emplaceBack(b,M,0,0);const y=j4(h.int16,void 0,4);for(let b=0;b<y.length;b+=3)g.emplaceBack(y[b],y[b+1],y[b+2])}this._tileBoundsBuffer=a.createVertexBuffer(h,Tu.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(g),this._tileBoundsSegments=V2.simpleSegment(0,0,h.length,g.length)}_makeGlobeTileDebugBuffers(a,c){const u=c.projection;if(!u||"globe"!==u.name||c.freezeTileCoverage)return;const h=this.tileID.canonical,g=f0(Sd(h,c)),y=q3(c.zoom);let b;y>0&&(b=a0(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,h,c,g,b,y),this._makeGlobeTileDebugTextBuffer(a,h,c,g,b,y)}_globePoint(a,c,u,h,g,y,b){let M=oc(a,c,u);if(y){const z=1<<u.z,E=ys(h.center.lng),T=eo(h.center.lat),I=(u.x+.5)/z-E;let N=0;I>.5?N=-1:I<-.5&&(N=1);let O=(a/Xt+u.x)/z+N,j=(c/Xt+u.y)/z;O=(O-E)*h._pixelsPerMercatorPixel+E,j=(j-T)*h._pixelsPerMercatorPixel+T;const X=[O*h.worldSize,j*h.worldSize,0];Zn(X,X,y),M=$c(M,X,b)}return Zn(M,M,g)}_makeGlobeTileDebugBorderBuffer(a,c,u,h,g,y){const b=new Nt,M=new Do,z=new hn,E=(I,N,O,j,X)=>{const ae=(O-I)/(X-1),pe=(j-N)/(X-1),ne=b.length;for(let fe=0;fe<X;fe++){const _e=I+fe*ae,me=N+fe*pe;b.emplaceBack(_e,me);const Ve=this._globePoint(_e,me,c,u,h,g,y);z.emplaceBack(Ve[0],Ve[1],Ve[2]),M.emplaceBack(ne+fe)}},T=Xt;E(0,0,T,0,16),E(T,0,T,T,16),E(T,T,0,T,16),E(0,T,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(M),this._tileDebugBuffer=a.createVertexBuffer(b,H6.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(z,lm.members),this._tileDebugSegments=V2.simpleSegment(0,0,b.length,M.length)}_makeGlobeTileDebugTextBuffer(a,c,u,h,g,y){const b=new Nt,M=new ui,z=new hn,E=25;M.reserve(32),b.reserve(E),z.reserve(E);const T=(I,N)=>E*I+N;for(let I=0;I<E;I++){const N=2048*I;for(let O=0;O<E;O++){const j=2048*O;b.emplaceBack(j,N);const X=this._globePoint(j,N,c,u,h,g,y);z.emplaceBack(X[0],X[1],X[2])}}for(let I=0;I<4;I++)for(let N=0;N<4;N++){const O=T(I,N),j=T(I,N+1),X=T(I+1,N),ae=T(I+1,N+1);M.emplaceBack(O,j,X),M.emplaceBack(X,j,ae)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(M),this._tileDebugTextBuffer=a.createVertexBuffer(b,H6.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(z,lm.members),this._tileDebugTextSegments=V2.simpleSegment(0,0,E,32)}}class rg{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,c,u){const h=String(c);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][h]=this.stateChanges[a][h]||{},l1(this.stateChanges[a][h],u),null===this.deletedStates[a]){this.deletedStates[a]={};for(const g in this.state[a])g!==h&&(this.deletedStates[a][g]=null)}else if(this.deletedStates[a]&&null===this.deletedStates[a][h]){this.deletedStates[a][h]={};for(const g in this.state[a][h])u[g]||(this.deletedStates[a][h][g]=null)}else for(const g in u)this.deletedStates[a]&&this.deletedStates[a][h]&&null===this.deletedStates[a][h][g]&&delete this.deletedStates[a][h][g]}removeFeatureState(a,c,u){if(null===this.deletedStates[a])return;const h=String(c);if(this.deletedStates[a]=this.deletedStates[a]||{},u&&void 0!==c)null!==this.deletedStates[a][h]&&(this.deletedStates[a][h]=this.deletedStates[a][h]||{},this.deletedStates[a][h][u]=null);else if(void 0!==c)if(this.stateChanges[a]&&this.stateChanges[a][h])for(u in this.deletedStates[a][h]={},this.stateChanges[a][h])this.deletedStates[a][h][u]=null;else this.deletedStates[a][h]=null;else this.deletedStates[a]=null}getState(a,c){const u=String(c),h=l1({},(this.state[a]||{})[u],(this.stateChanges[a]||{})[u]);if(null===this.deletedStates[a])return{};if(this.deletedStates[a]){const g=this.deletedStates[a][c];if(null===g)return{};for(const y in g)delete h[y]}return h}initializeTileState(a,c){a.setFeatureState(this.state,c)}coalesceChanges(a,c){const u={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const g={};for(const y in this.stateChanges[h])this.state[h][y]||(this.state[h][y]={}),l1(this.state[h][y],this.stateChanges[h][y]),g[y]=this.state[h][y];u[h]=g}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const g={};if(null===this.deletedStates[h])for(const y in this.state[h])g[y]={},this.state[h][y]={};else for(const y in this.deletedStates[h]){if(null===this.deletedStates[h][y])this.state[h][y]={};else if(this.state[h][y])for(const b of Object.keys(this.deletedStates[h][y]))delete this.state[h][y][b];g[y]=this.state[h][y]}u[h]=u[h]||{},l1(u[h],g)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(u).length)for(const h in a)a[h].setFeatureState(u,c)}}class M8{constructor(a){this.size=a,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(a,c){const u=this.toIdx(a,c);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(a,c){return this.leaves[this.toIdx(a,c)]}toIdx(a,c){return c*this.size+a}}function jf(o,a,c,u){let h=0,g=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(u[y])<1e-15){if(c[y]<o[y]||c[y]>a[y])return null}else{const b=1/u[y];let M=(o[y]-c[y])*b,z=(a[y]-c[y])*b;if(M>z){const E=M;M=z,z=E}if(M>h&&(h=M),z<g&&(g=z),h>g)return null}return h}function Gf(o,a,c,u,h,g,y,b,M,z,E){const T=u-o,I=h-a,N=g-c,O=y-o,j=b-a,X=M-c,ae=E[1]*X-E[2]*j,pe=E[2]*O-E[0]*X,ne=E[0]*j-E[1]*O,fe=T*ae+I*pe+N*ne;if(Math.abs(fe)<1e-15)return null;const _e=1/fe,me=z[0]-o,Ve=z[1]-a,Te=z[2]-c,We=(me*ae+Ve*pe+Te*ne)*_e;if(We<0||We>1)return null;const ct=Ve*N-Te*I,ze=Te*T-me*N,Xe=me*I-Ve*T,et=(E[0]*ct+E[1]*ze+E[2]*Xe)*_e;return et<0||We+et>1?null:(O*ct+j*ze+X*Xe)*_e}function H0(o,a,c){return(o-a)/(c-a)}function k0(o,a,c,u,h,g,y,b,M){const z=1<<c,E=g-u,T=y-h,I=(o+1)/z*E+u,N=(a+0)/z*T+h,O=(a+1)/z*T+h;b[0]=(o+0)/z*E+u,b[1]=N,M[0]=I,M[1]=O}class I0{constructor(a){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=a,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const c=function(g){const y=Math.ceil(Math.log2(g.dim/8)),b=[];let M=Math.ceil(Math.pow(2,y));const z=1/M,E=(N,O,j,X,ae)=>{const pe=X?1:0,ne=(N+1)*j-pe,fe=O*j,_e=(O+1)*j-pe;ae[0]=N*j,ae[1]=fe,ae[2]=ne,ae[3]=_e};let T=new M8(M);const I=[];for(let N=0;N<M*M;N++){E(N%M,Math.floor(N/M),z,!1,I);const O=Ds(I[0],I[1],g),j=Ds(I[2],I[1],g),X=Ds(I[2],I[3],g),ae=Ds(I[0],I[3],g);T.minimums.push(Math.min(O,j,X,ae)),T.maximums.push(Math.max(O,j,X,ae)),T.leaves.push(1)}for(b.push(T),M/=2;M>=1;M/=2){const N=b[b.length-1];T=new M8(M);for(let O=0;O<M*M;O++){E(O%M,Math.floor(O/M),2,!0,I);const j=N.getElevation(I[0],I[1]),X=N.getElevation(I[2],I[1]),ae=N.getElevation(I[2],I[3]),pe=N.getElevation(I[0],I[3]),ne=N.isLeaf(I[0],I[1]),fe=N.isLeaf(I[2],I[1]),_e=N.isLeaf(I[2],I[3]),me=N.isLeaf(I[0],I[3]),Ve=Math.min(j.min,X.min,ae.min,pe.min),Te=Math.max(j.max,X.max,ae.max,pe.max),We=ne&&fe&&_e&&me;T.maximums.push(Te),T.minimums.push(Ve),T.leaves.push(Te-Ve<=5&&We?1:0)}b.push(T)}return b}(this.dem),u=c.length-1,h=c[u];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(c,0,0,u,0)}raycastRoot(a,c,u,h,g,y,b=1){return jf([a,c,-100],[u,h,this.maximums[0]*b],g,y)}raycast(a,c,u,h,g,y,b=1){if(!this.nodeCount)return null;const M=this.raycastRoot(a,c,u,h,g,y,b);if(null==M)return null;const z=[],E=[],T=[],I=[],N=[{idx:0,t:M,nodex:0,nodey:0,depth:0}];for(;N.length>0;){const{idx:O,t:j,nodex:X,nodey:ae,depth:pe}=N.pop();if(this.leaves[O]){k0(X,ae,pe,a,c,u,h,T,I);const fe=1<<pe,_e=(X+0)/fe,me=(X+1)/fe,Ve=(ae+0)/fe,Te=(ae+1)/fe,We=Ds(_e,Ve,this.dem)*b,ct=Ds(me,Ve,this.dem)*b,ze=Ds(me,Te,this.dem)*b,Xe=Ds(_e,Te,this.dem)*b,et=Gf(T[0],T[1],We,I[0],T[1],ct,I[0],I[1],ze,g,y),lt=Gf(I[0],I[1],ze,T[0],I[1],Xe,T[0],T[1],We,g,y),ft=Math.min(null!==et?et:Number.MAX_VALUE,null!==lt?lt:Number.MAX_VALUE);if(ft!==Number.MAX_VALUE)return ft;{const Oe=V6([],g,y,j);if(ag(We,ct,Xe,ze,H0(Oe[0],T[0],I[0]),H0(Oe[1],T[1],I[1]))>=Oe[2])return j}continue}let ne=0;for(let fe=0;fe<this._siblingOffset.length;fe++){k0((X<<1)+this._siblingOffset[fe][0],(ae<<1)+this._siblingOffset[fe][1],pe+1,a,c,u,h,T,I),T[2]=-100,I[2]=this.maximums[this.childOffsets[O]+fe]*b;const _e=jf(T,I,g,y);if(null!=_e){const me=_e;z[fe]=me;let Ve=!1;for(let Te=0;Te<ne&&!Ve;Te++)me>=z[E[Te]]&&(E.splice(Te,0,fe),Ve=!0);Ve||(E[ne]=fe),ne++}}for(let fe=0;fe<ne;fe++){const _e=E[fe];N.push({idx:this.childOffsets[O]+_e,t:z[_e],nodex:(X<<1)+this._siblingOffset[_e][0],nodey:(ae<<1)+this._siblingOffset[_e][1],depth:pe+1})}}return null}_addNode(a,c,u){return this.minimums.push(a),this.maximums.push(c),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(a,c,u,h,g){if(1===a[h].isLeaf(c,u))return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const y=h-1,b=a[y];let M=0,z=0;for(let E=0;E<this._siblingOffset.length;E++){const T=2*c+this._siblingOffset[E][0],I=2*u+this._siblingOffset[E][1],N=b.getElevation(T,I),O=b.isLeaf(T,I),j=this._addNode(N.min,N.max,O);O&&(M|=1<<E),z||(z=j)}for(let E=0;E<this._siblingOffset.length;E++)M&1<<E||this._construct(a,2*c+this._siblingOffset[E][0],2*u+this._siblingOffset[E][1],y,z+E)}}function ag(o,a,c,u,h,g){return G1(G1(o,c,g),G1(a,u,g),h)}function Ds(o,a,c){const u=c.dim,h=d1(o*u-.5,0,u-1),g=d1(a*u-.5,0,u-1),y=Math.floor(h),b=Math.floor(g),M=Math.min(y+1,u-1),z=Math.min(b+1,u-1);return ag(c.get(y,b),c.get(M,b),c.get(y,z),c.get(M,z),h-y,g-b)}const og={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function $f(o,a,c){return(256*o*256+256*a+c)/10-1e4}function qf(o,a,c){return 256*o+a+c/256-32768}class R0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(a,c,u,h=!1,g=!1){if(this.uid=a,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(u&&"mapbox"!==u&&"terrarium"!==u)return en(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=c.height;const y=this.dim=c.height-2,b=new Uint32Array(c.data.buffer);if(this.pixels=new Uint8Array(c.data.buffer),this.encoding=u||"mapbox",this.borderReady=h,!h){for(let M=0;M<y;M++)b[this._idx(-1,M)]=b[this._idx(0,M)],b[this._idx(y,M)]=b[this._idx(y-1,M)],b[this._idx(M,-1)]=b[this._idx(M,0)],b[this._idx(M,y)]=b[this._idx(M,y-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(y,-1)]=b[this._idx(y-1,0)],b[this._idx(-1,y)]=b[this._idx(0,y-1)],b[this._idx(y,y)]=b[this._idx(y-1,y-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new I0(this)}get(a,c,u=!1){u&&(a=d1(a,-1,this.dim),c=d1(c,-1,this.dim));const h=4*this._idx(a,c);return("terrarium"===this.encoding?qf:$f)(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}static getUnpackVector(a){return og[a]}get unpackVector(){return og[this.encoding]}_idx(a,c){if(a<-1||a>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(a+1)}static pack(a,c){const u=[0,0,0,0],h=R0.getUnpackVector(c);let g=Math.floor((a+h[3])/h[2]);return u[2]=g%256,g=Math.floor(g/256),u[1]=g%256,g=Math.floor(g/256),u[0]=g,u}getPixels(){return new Gi({width:this.stride,height:this.stride},this.pixels)}backfillBorder(a,c,u){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let h=c*this.dim,g=c*this.dim+this.dim,y=u*this.dim,b=u*this.dim+this.dim;switch(c){case-1:h=g-1;break;case 1:g=h+1}switch(u){case-1:y=b-1;break;case 1:b=y+1}const M=-c*this.dim,z=-u*this.dim;for(let E=y;E<b;E++)for(let T=h;T<g;T++){const I=4*this._idx(T,E),N=4*this._idx(T+M,E+z);this.pixels[I+0]=a.pixels[N+0],this.pixels[I+1]=a.pixels[N+1],this.pixels[I+2]=a.pixels[N+2],this.pixels[I+3]=a.pixels[N+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}At(R0,"DEMData"),At(I0,"DemMinMaxQuadTree",{omit:["dem"]});class Wf{constructor(a,c){this.max=a,this.onRemove=c,this.reset()}reset(){for(const a in this.data)for(const c of this.data[a])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(a,c,u){const h=a.wrapped().key;void 0===this.data[h]&&(this.data[h]=[]);const g={value:c,timeout:void 0};if(void 0!==u&&(g.timeout=setTimeout(()=>{this.remove(a,g)},u)),this.data[h].push(g),this.order.push(h),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const c=this.data[a].shift();return c.timeout&&clearTimeout(c.timeout),0===this.data[a].length&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),c.value}getByKey(a){const c=this.data[a];return c?c[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,c){if(!this.has(a))return this;const u=a.wrapped().key,h=void 0===c?0:this.data[u].indexOf(c),g=this.data[u][h];return this.data[u].splice(h,1),g.timeout&&clearTimeout(g.timeout),0===this.data[u].length&&delete this.data[u],this.onRemove(g.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(a){const c=[];for(const u in this.data)for(const h of this.data[u])a(h.value)||c.push(h);for(const u of c)this.remove(u.value.tileID,u)}}class a3{constructor(a,c,u){this.func=a,this.mask=c,this.range=u}}a3.ReadOnly=!1,a3.ReadWrite=!0,a3.disabled=new a3(519,a3.ReadOnly,[0,1]);class cl{constructor(a,c,u,h,g,y){this.test=a,this.ref=c,this.mask=u,this.fail=h,this.depthFail=g,this.pass=y}}cl.disabled=new cl({func:519,mask:0},0,0,7680,7680,7680);class wa{constructor(a,c,u){this.blendFunction=a,this.blendColor=c,this.mask=u}}wa.Replace=[1,0],wa.disabled=new wa(wa.Replace,n2.transparent,[!1,!1,!1,!1]),wa.unblended=new wa(wa.Replace,n2.transparent,[!0,!0,!0,!0]),wa.alphaBlended=new wa([1,771],n2.transparent,[!0,!0,!0,!0]);class io{constructor(a,c,u){this.enable=a,this.mode=c,this.frontFace=u}}io.disabled=new io(!1,1029,2305),io.backCCW=new io(!0,1029,2305),io.backCW=new io(!0,1029,2304),io.frontCW=new io(!0,1028,2304),io.frontCCW=new io(!0,1028,2305);class o3 extends qr{constructor(a,c,u){super(),this.id=a,this._onlySymbols=u,c.on("data",h=>{"source"===h.dataType&&"metadata"===h.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===h.dataType&&"content"===h.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new Wf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new rg,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(a){this.map=a,this._minTileCacheSize=void 0===this._minTileCacheSize&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const c=this._tiles[a];if("loaded"!==c.state&&"errored"!==c.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,c){return a.isSymbolTile=this._onlySymbols,this._source.loadTile(a,c)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a,()=>{})}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const u=this._tiles[c];u.upload(a),u.prepare(this.map.style.imageManager)}}getIds(){return Ni(this._tiles).map(a=>a.tileID).sort(Zf).map(a=>a.key)}getRenderableIds(a){const c=[];for(const u in this._tiles)this._isIdRenderable(+u,a)&&c.push(this._tiles[u]);return a?c.sort((u,h)=>{const g=u.tileID,y=h.tileID,b=new ht(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),M=new ht(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-y.overscaledZ||M.y-b.y||M.x-b.x}).map(u=>u.tileID.key):c.map(u=>u.tileID).sort(Zf).map(u=>u.key)}hasRenderableParent(a){const c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)"errored"!==this._tiles[a].state&&this._reloadTile(+a,"reloading")}}_reloadTile(a,c){const u=this._tiles[a];u&&("loading"!==u.state&&(u.state=c),this._loadTile(u,this._tileLoaded.bind(this,u,a,c)))}_tileLoaded(a,c,u,h){if(h)if(a.state="errored",404!==h.status)this._source.fire(new ua(h,{tile:a}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else a.timeAdded=K1.now(),"expired"===u&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),"raster-dem"===this._source.type&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new yn("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const c=this.getRenderableIds();for(let h=0;h<c.length;h++){const g=c[h];if(a.neighboringTiles&&a.neighboringTiles[g]){const y=this.getTileByID(g);u(a,y),u(y,a)}}function u(h,g){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let y=g.tileID.canonical.x-h.tileID.canonical.x;const b=g.tileID.canonical.y-h.tileID.canonical.y,M=Math.pow(2,h.tileID.canonical.z),z=g.tileID.key;0===y&&0===b||Math.abs(b)>1||(Math.abs(y)>1&&(1===Math.abs(y+M)?y+=M:1===Math.abs(y-M)&&(y-=M)),g.dem&&h.dem&&(h.dem.backfillBorder(g.dem,y,b),h.neighboringTiles&&h.neighboringTiles[z]&&(h.neighboringTiles[z].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,c,u,h){for(const g in this._tiles){let y=this._tiles[g];if(h[g]||!y.hasData()||y.tileID.overscaledZ<=c||y.tileID.overscaledZ>u)continue;let b=y.tileID;for(;y&&y.tileID.overscaledZ>c+1;){const z=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[z.key],y&&y.hasData()&&(b=z)}let M=b;for(;M.overscaledZ>c;)if(M=M.scaledTo(M.overscaledZ-1),a[M.key]){h[b.key]=b;break}}}findLoadedParent(a,c){if(a.key in this._loadedParentTiles){const u=this._loadedParentTiles[a.key];return u&&u.tileID.overscaledZ>=c?u:null}for(let u=a.overscaledZ-1;u>=c;u--){const h=a.scaledTo(u),g=this._getLoadedTile(h);if(g)return g}}_getLoadedTile(a){const c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,c){c=c||this._source.tileSize;const u=Math.ceil(a.width/c)+1,h=Math.ceil(a.height/c)+1,g=Math.floor(u*h*5),y="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,g):g,b="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(a){const c=Math.round((a-(void 0===this._prevLng?a:this._prevLng))/360);if(this._prevLng=a,c){const u={};for(const h in this._tiles){const g=this._tiles[h];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+c),u[g.tileID.key]=g}this._tiles=u;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(a,c,u){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let h;this.updateCacheSize(a,c),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(b=>new Vi(b.canonical.z,b.wrap,b.canonical.z,b.canonical.x,b.canonical.y)):(h=a.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(b=>this._source.hasTile(b)))):h=[];const g=this._updateRetainedTiles(h);if(Yf(this._source.type)&&0!==h.length){const b={},M={},z=Object.keys(g);for(const T of z){const I=g[T],N=this._tiles[T];if(!N||N.fadeEndTime&&N.fadeEndTime<=K1.now())continue;const O=this.findLoadedParent(I,Math.max(I.overscaledZ-o3.maxOverzooming,this._source.minzoom));O&&(this._addTile(O.tileID),b[O.tileID.key]=O.tileID),M[T]=I}const E=h[h.length-1].overscaledZ;for(const T in this._tiles){const I=this._tiles[T];if(g[T]||!I.hasData())continue;let N=I.tileID;for(;N.overscaledZ>E;){N=N.scaledTo(N.overscaledZ-1);const O=this._tiles[N.key];if(O&&O.hasData()&&M[N.key]){g[T]=I.tileID;break}}}for(const T in b)g[T]||(this._coveredTiles[T]=!0,g[T]=b[T])}for(const b in g)this._tiles[b].clearFadeHold();const y=function(b,M){const z=[];for(const E in b)E in M||z.push(E);return z}(this._tiles,g);for(const b of y){const M=this._tiles[b];M.hasSymbolBuckets&&!M.holdingForFade()?M.setHoldDuration(this.map._fadeDuration):M.hasSymbolBuckets&&!M.symbolFadeFinished()||this._removeTile(+b)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const c={};if(0===a.length)return c;const u={},h=a.reduce((z,E)=>Math.min(z,E.overscaledZ),1/0),g=a[0].overscaledZ,y=Math.max(g-o3.maxOverzooming,this._source.minzoom),b=Math.max(g+o3.maxUnderzooming,this._source.minzoom),M={};for(const z of a){const E=this._addTile(z);c[z.key]=z,E.hasData()||h<this._source.maxzoom&&(M[z.key]=z)}this._retainLoadedChildren(M,h,b,c);for(const z of a){let E=this._tiles[z.key];if(E.hasData())continue;if(z.canonical.z>=this._source.maxzoom){const I=z.children(this._source.maxzoom)[0],N=this.getTile(I);if(N&&N.hasData()){c[I.key]=I;continue}}else{const I=z.children(this._source.maxzoom);if(c[I[0].key]&&c[I[1].key]&&c[I[2].key]&&c[I[3].key])continue}let T=E.wasRequested();for(let I=z.overscaledZ-1;I>=y;--I){const N=z.scaledTo(I);if(u[N.key]||(u[N.key]=!0,E=this.getTile(N),!E&&T&&(E=this._addTile(N)),E&&(c[N.key]=N,T=E.wasRequested(),E.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const c=[];let u,h=this._tiles[a].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){u=this._loadedParentTiles[h.key];break}c.push(h.key);const g=h.scaledTo(h.overscaledZ-1);if(u=this._getLoadedTile(g),u)break;h=g}for(const g of c)this._loadedParentTiles[g]=u}}_addTile(a){let c=this._tiles[a.key];if(c)return c;c=this._cache.getAndRemove(a),c&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));const u=Boolean(c);if(!u){const h=this.map?this.map.painter:null;c=new Hu(a,this._source.tileSize*a.overscaleFactor(),this.transform.tileZoom,h,this._isRaster),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))}return c?(c.uses++,this._tiles[a.key]=c,u||this._source.fire(new yn("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null}_setTileReloadTimer(a,c){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const u=c.getExpiryTimeout();u&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},u))}_removeTile(a){const c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&"reloading"!==c.state?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,c,u){const h=[],g=this.transform;if(!g)return h;const y="globe"===g.projection.name,b=ys(g.center.lng);for(const M in this._tiles){const z=this._tiles[M];if(u&&z.clearQueryDebugViz(),z.holdingForFade())continue;let E;if(y){const T=z.tileID.canonical;if(0===T.z){const I=[Math.abs(d1(b,...uc(T,-1))-b),Math.abs(d1(b,...uc(T,1))-b)];E=[0,2*I.indexOf(Math.min(...I))-1]}else{const I=[Math.abs(d1(b,...uc(T,-1))-b),Math.abs(d1(b,...uc(T,0))-b),Math.abs(d1(b,...uc(T,1))-b)];E=[I.indexOf(Math.min(...I))-1]}}else E=[0];for(const T of E){const I=a.containsTile(z,g,c,T);I&&h.push(I)}}return h}getVisibleCoordinates(a){const c=this.getRenderableIds(a).map(u=>this._tiles[u].tileID);for(const u of c)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Yf(this._source.type))for(const a in this._tiles){const c=this._tiles[a];if(void 0!==c.fadeEndTime&&c.fadeEndTime>=K1.now())return!0}return!1}setFeatureState(a,c,u){this._state.updateState(a=a||"_geojsonTileLayer",c,u)}removeFeatureState(a,c,u){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,u)}getFeatureState(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)}setDependencies(a,c,u){const h=this._tiles[a];h&&h.setDependencies(c,u)}reloadTilesForDependencies(a,c){for(const u in this._tiles)this._tiles[u].hasDependency(a,c)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(a,c))}_preloadTiles(a,c){const u=new Map,h=Array.isArray(a)?a:[a],g=this.map.painter.terrain,y=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const b of h){const M=b.coveringTiles({tileSize:y,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const z of M)u.set(z.key,z);this.usedForTerrain&&b.updateElevation(!1)}Cr(Array.from(u.values()),(b,M)=>{const z=new Hu(b,this._source.tileSize*b.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(z,E=>{"raster-dem"===this._source.type&&z.dem&&this._backfillDEM(z),M(E,z)})},c)}}function Zf(o,a){const c=Math.abs(2*o.wrap)-+(o.wrap<0),u=Math.abs(2*a.wrap)-+(a.wrap<0);return o.overscaledZ-a.overscaledZ||u-c||a.canonical.y-o.canonical.y||a.canonical.x-o.canonical.x}function Yf(o){return"raster"===o||"image"===o||"video"===o||"custom"===o}function uc(o,a){const c=1<<o.z;return[o.x/c+a,(o.x+1)/c+a]}o3.maxOverzooming=10,o3.maxUnderzooming=3;class z8{constructor(a,c,u){this._demTile=a,this._dem=this._demTile.dem,this._scale=c,this._offset=u}static create(a,c,u){const h=u||a.findDEMTileFor(c);if(!h||!h.dem)return;const g=h.dem,y=h.tileID,b=1<<c.canonical.z-y.canonical.z;return new z8(h,h.tileSize/Xt/b,[(c.canonical.x/b-y.canonical.x)*g.dim,(c.canonical.y/b-y.canonical.y)*g.dim])}tileCoordToPixel(a,c){const u=c*this._scale+this._offset[1],h=Math.floor(a*this._scale+this._offset[0]),g=Math.floor(u);return new ht(h,g)}getElevationAt(a,c,u,h){const g=a*this._scale+this._offset[0],y=c*this._scale+this._offset[1],b=Math.floor(g),M=Math.floor(y),z=this._dem;return h=!!h,u?G1(G1(z.get(b,M,h),z.get(b,M+1,h),y-M),G1(z.get(b+1,M,h),z.get(b+1,M+1,h),y-M),g-b):z.get(b,M,h)}getElevationAtPixel(a,c,u){return this._dem.get(a,c,!!u)}getMeterToDEM(a){return(1<<this._demTile.tileID.canonical.z)*ya(1,a)*this._dem.stride}}class sg{constructor(a,c){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new ps(Xt,16,0),this.featureIndexArray=new gd,this.promoteId=c}insert(a,c,u,h,g,y=0){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,h,g,y);const M=this.grid;for(let z=0;z<c.length;z++){const E=c[z],T=[1/0,1/0,-1/0,-1/0];for(let I=0;I<E.length;I++){const N=E[I];T[0]=Math.min(T[0],N.x),T[1]=Math.min(T[1],N.y),T[2]=Math.max(T[2],N.x),T[3]=Math.max(T[3],N.y)}T[0]<Xt&&T[1]<Xt&&T[2]>=0&&T[3]>=0&&M.insert(b,T[0],T[1],T[2],T[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ho(new M0(this.rawTileData)).layers,this.sourceLayerCoder=new C8(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const a in this.vtLayers)this.vtFeatures[a]=[]}return this.vtLayers}query(a,c,u,h){this.loadVTLayers();const g=a.params||{},y=ql(g.filter),b=a.tileResult,M=a.transform,z=b.bufferedTilespaceBounds,E=this.grid.query(z.min.x,z.min.y,z.max.x,z.max.y,(O,j,X,ae)=>G5(b.bufferedTilespaceGeometry,O,j,X,ae));E.sort(cg);let T=null;M.elevation&&E.length>0&&(T=z8.create(M.elevation,this.tileID));const I={};let N;for(let O=0;O<E.length;O++){const j=E[O];if(j===N)continue;N=j;const X=this.featureIndexArray.get(j);let ae=null;this.loadMatchingFeature(I,X,y,g.layers,g.availableImages,c,u,h,(pe,ne,fe,_e=0)=>(ae||(ae=To(pe,this.tileID.canonical,a.tileTransform)),ne.queryIntersectsFeature(b,pe,fe,ae,this.z,a.transform,a.pixelPosMatrix,T,_e)))}return I}loadMatchingFeature(a,c,u,h,g,y,b,M,z){const{featureIndex:E,bucketIndex:T,sourceLayerIndex:I,layoutVertexArrayOffset:N}=c,O=this.bucketLayerIDs[T];if(h&&!function(pe,ne){for(let fe=0;fe<pe.length;fe++)if(ne.indexOf(pe[fe])>=0)return!0;return!1}(h,O))return;const j=this.sourceLayerCoder.decode(I),X=this.vtLayers[j].feature(E);if(u.needGeometry){const pe=Zc(X,!0);if(!u.filter(new Se(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!u.filter(new Se(this.tileID.overscaledZ),X))return;const ae=this.getId(X,j);for(let pe=0;pe<O.length;pe++){const ne=O[pe];if(h&&h.indexOf(ne)<0)continue;const fe=y[ne];if(!fe)continue;let _e={};void 0!==ae&&M&&(_e=M.getState(fe.sourceLayer||"_geojsonTileLayer",ae));const me=l1({},b[ne]);me.paint=Xf(me.paint,fe.paint,X,_e,g),me.layout=Xf(me.layout,fe.layout,X,_e,g);const Ve=!z||z(X,fe,_e,N);if(!Ve)continue;const Te=new Of(X,this.z,this.x,this.y,ae);Te.layer=me;let We=a[ne];void 0===We&&(We=a[ne]=[]),We.push({featureIndex:E,feature:Te,intersectionZ:Ve})}}lookupSymbolFeatures(a,c,u,h,g,y,b,M){const z={};this.loadVTLayers();const E=ql(g);for(const T of a)this.loadMatchingFeature(z,{bucketIndex:u,sourceLayerIndex:h,featureIndex:T,layoutVertexArrayOffset:0},E,y,b,M,c);return z}loadFeature(a){const{featureIndex:c,sourceLayerIndex:u}=a;this.loadVTLayers();const h=this.sourceLayerCoder.decode(u),g=this.vtFeatures[h];if(g[c])return g[c];const y=this.vtLayers[h].feature(c);return g[c]=y,y}hasLayer(a){for(const c of this.bucketLayerIDs)for(const u of c)if(a===u)return!0;return!1}getId(a,c){let u=a.id;if(this.promoteId){const h="string"==typeof this.promoteId?this.promoteId:this.promoteId[c];null!=h&&(u=a.properties[h]),"boolean"==typeof u&&(u=Number(u))}return u}}function Xf(o,a,c,u,h){return rn(o,(g,y)=>{const b=a instanceof Fe?a.get(y):null;return b&&b.evaluate?b.evaluate(c,u,h):b})}function cg(o,a){return a-o}At(sg,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Kf{constructor(a,c){this.width=a,this.height=c,this.nextRow=0,this.image=new xs({width:a,height:c}),this.positions={},this.uploaded=!1}getDash(a,c){const u=this.getKey(a,c);return this.positions[u]}trim(){const a=this.width,c=this.height=er(this.nextRow);this.image.resize({width:a,height:c})}getKey(a,c){return a.join(",")+c}getDashRanges(a,c,u){const h=[];let g=a.length%2==1?-a[a.length-1]*u:0,y=a[0]*u,b=!0;h.push({left:g,right:y,isDash:b,zeroLength:0===a[0]});let M=a[0];for(let z=1;z<a.length;z++){b=!b;const E=a[z];g=M*u,M+=E,y=M*u,h.push({left:g,right:y,isDash:b,zeroLength:0===E})}return h}addRoundDash(a,c,u){const h=c/2;for(let g=-u;g<=u;g++){const y=this.width*(this.nextRow+u+g);let b=0,M=a[b];for(let z=0;z<this.width;z++){z/M.right>1&&(M=a[++b]);const E=Math.abs(z-M.left),T=Math.abs(z-M.right),I=Math.min(E,T);let N;const O=g/u*(h+1);if(M.isDash){const j=h-Math.abs(O);N=Math.sqrt(I*I+j*j)}else N=h-Math.sqrt(I*I+O*O);this.image.data[y+z]=Math.max(0,Math.min(255,N+128))}}}addRegularDash(a,c){for(let M=a.length-1;M>=0;--M){const z=a[M],E=a[M+1];z.zeroLength?a.splice(M,1):E&&E.isDash===z.isDash&&(E.left=z.left,a.splice(M,1))}const u=a[0],h=a[a.length-1];u.isDash===h.isDash&&(u.left=h.left-this.width,h.right=u.right+this.width);const g=this.width*this.nextRow;let y=0,b=a[y];for(let M=0;M<this.width;M++){M/b.right>1&&(b=a[++y]);const z=Math.abs(M-b.left),E=Math.abs(M-b.right),T=Math.min(z,E);this.image.data[g+M]=Math.max(0,Math.min(255,(b.isDash?T:-T)+c+128))}}addDash(a,c){const u=this.getKey(a,c);if(this.positions[u])return this.positions[u];const h="round"===c,g=h?7:0,y=2*g+1;if(this.nextRow+y>this.height)return en("LineAtlas out of space"),null;0===a.length&&a.push(1);let b=0;for(let E=0;E<a.length;E++)a[E]<0&&(en("Negative value is found in line dasharray, replacing values with 0"),a[E]=0),b+=a[E];if(0!==b){const E=this.width/b,T=this.getDashRanges(a,this.width,E);h?this.addRoundDash(T,E,g):this.addRegularDash(T,"square"===c?.5*E:0)}const M=this.nextRow+g;this.nextRow+=y;const z={tl:[M,g],br:[b,0]};return this.positions[u]=z,z}}At(Kf,"LineAtlas");class Qf{constructor(a){const c={},u=[];for(const b in a){const M=a[b],z=c[b]={};for(const E in M.glyphs){const T=M.glyphs[+E];if(!T||0===T.bitmap.width||0===T.bitmap.height)continue;const I=T.metrics.localGlyph?2:1,N={x:0,y:0,w:T.bitmap.width+2*I,h:T.bitmap.height+2*I};u.push(N),z[E]=N}}const{w:h,h:g}=o8(u),y=new xs({width:h||1,height:g||1});for(const b in a){const M=a[b];for(const z in M.glyphs){const E=M.glyphs[+z];if(!E||0===E.bitmap.width||0===E.bitmap.height)continue;const T=c[b][z],I=E.metrics.localGlyph?2:1;xs.copy(E.bitmap,y,{x:0,y:0},{x:T.x+I,y:T.y+I},E.bitmap)}}this.image=y,this.positions=c}}At(Qf,"GlyphAtlas");class lg{constructor(a){this.tileID=new Vi(a.tileID.overscaledZ,a.tileID.wrap,a.tileID.canonical.z,a.tileID.canonical.x,a.tileID.canonical.y),this.tileZoom=a.tileZoom,this.uid=a.uid,this.zoom=a.zoom,this.canonical=a.tileID.canonical,this.pixelRatio=a.pixelRatio,this.tileSize=a.tileSize,this.source=a.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=a.showCollisionBoxes,this.collectResourceTiming=!!a.collectResourceTiming,this.returnDependencies=!!a.returnDependencies,this.promoteId=a.promoteId,this.enableTerrain=!!a.enableTerrain,this.isSymbolTile=a.isSymbolTile,this.tileTransform=n3(a.tileID.canonical,a.projection),this.projection=a.projection}parse(a,c,u,h,g){this.status="parsing",this.data=a,this.collisionBoxArray=new ac;const y=new C8(Object.keys(a.layers).sort()),b=new sg(this.tileID,this.promoteId);b.bucketLayerIDs=[];const M={},z=new Kf(256,256),E={featureIndex:b,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:z,availableImages:u},T=c.familiesBySource[this.source];for(const _e in T){const me=a.layers[_e];if(!me)continue;let Ve=!1,Te=!1;for(const ze of T[_e])"symbol"===ze[0].type?Ve=!0:Te=!0;if(!0===this.isSymbolTile&&!Ve||!1===this.isSymbolTile&&!Te)continue;1===me.version&&en(`Vector tile source "${this.source}" layer "${_e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const We=y.encode(_e),ct=[];for(let ze=0;ze<me.length;ze++){const Xe=me.feature(ze),et=b.getId(Xe,_e);ct.push({feature:Xe,id:et,index:ze,sourceLayerIndex:We})}for(const ze of T[_e]){const Xe=ze[0];void 0!==this.isSymbolTile&&"symbol"===Xe.type!==this.isSymbolTile||Xe.minzoom&&this.zoom<Math.floor(Xe.minzoom)||Xe.maxzoom&&this.zoom>=Xe.maxzoom||"none"!==Xe.visibility&&(Iu(ze,this.zoom,u),(M[Xe.id]=Xe.createBucket({index:b.bucketLayerIDs.length,layers:ze,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:We,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(ct,E,this.tileID.canonical,this.tileTransform),b.bucketLayerIDs.push(ze.map(et=>et.id)))}}let I,N,O,j;z.trim();const X={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ae=rn(E.glyphDependencies,_e=>Object.keys(_e).map(Number));Object.keys(ae).length?h.send("getGlyphs",{uid:this.uid,stacks:ae},(_e,me)=>{I||(I=_e,N=me,fe.call(this))},void 0,!1,X):N={};const pe=Object.keys(E.iconDependencies);pe.length?h.send("getImages",{icons:pe,source:this.source,tileID:this.tileID,type:"icons"},(_e,me)=>{I||(I=_e,O=me,fe.call(this))},void 0,!1,X):O={};const ne=Object.keys(E.patternDependencies);function fe(){if(I)return g(I);if(N&&O&&j){const _e=new Qf(N),me=new hu(O,j);for(const Ve in M){const Te=M[Ve];Te instanceof i3?(Iu(Te.layers,this.zoom,u),Wm(Te,N,_e.positions,O,me.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):Te.hasPattern&&(Te instanceof Q4||Te instanceof J5||Te instanceof J6)&&(Iu(Te.layers,this.zoom,u),Te.addFeatures(E,this.tileID.canonical,me.patternPositions,u,this.tileTransform))}this.status="done",g(null,{buckets:Ni(M).filter(Ve=>!Ve.isEmpty()),featureIndex:b,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:_e.image,lineAtlas:z,imageAtlas:me,glyphMap:this.returnDependencies?N:null,iconMap:this.returnDependencies?O:null,glyphPositions:this.returnDependencies?_e.positions:null})}}ne.length?h.send("getImages",{icons:ne,source:this.source,tileID:this.tileID,type:"patterns"},(_e,me)=>{I||(I=_e,j=me,fe.call(this))},void 0,!1,X):j={},fe.call(this)}}function Iu(o,a,c){const u=new Se(a);for(const h of o)h.recalculate(u,c)}class Jf{constructor(a){this.entries={},this.scheduler=a}request(a,c,u,h){const g=this.entries[a]=this.entries[a]||{callbacks:[]};if(g.result){const[y,b]=g.result;return this.scheduler?this.scheduler.add(()=>{h(y,b)},c):h(y,b),()=>{}}return g.callbacks.push(h),g.cancel||(g.cancel=u((y,b)=>{g.result=[y,b];for(const M of g.callbacks)this.scheduler?this.scheduler.add(()=>{M(y,b)},c):M(y,b);setTimeout(()=>delete this.entries[a],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(y=>y!==h),g.callbacks.length||(g.cancel(),delete this.entries[a]))}}}function Ru(o,a,c){const u=JSON.stringify(o.request);return o.data&&(this.deduped.entries[u]={result:[null,o.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom},h=>{const g=ho(o.request,(y,b,M,z)=>{y?h(y):b&&h(null,{vectorTile:c?void 0:new Ho(new M0(b)),rawData:b,cacheControl:M,expires:z})});return()=>{g.cancel(),h()}},a)}p.ARRAY_TYPE=ta,p.AUTH_ERR_MSG=Zo,p.Aabb=ji,p.Actor=class{constructor(o,a,c){this.target=o,this.parent=a,this.mapId=c,this.callbacks={},this.cancelCallbacks={},tr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Mr()?o:Ze,this.scheduler=new ng}send(o,a,c,u,h=!1,g){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(c.metadata=g,this.callbacks[y]=c);const b=ai(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:o,hasCallback:!!c,targetMapId:u,mustQueue:h,sourceMapId:this.mapId,data:P3(a,b)},b),{cancel:()=>{c&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(o){const a=o.data,c=a.id;if(c&&(!a.targetMapId||this.mapId===a.targetMapId))if("<cancel>"===a.type){const u=this.cancelCallbacks[c];delete this.cancelCallbacks[c],u&&u.cancel()}else if(a.mustQueue||Mr()){const u=this.callbacks[c];this.cancelCallbacks[c]=this.scheduler.add(()=>this.processTask(c,a),u&&u.metadata||{type:"message"})}else this.processTask(c,a)}processTask(o,a){if("<response>"===a.type){const c=this.callbacks[o];delete this.callbacks[o],c&&(a.error?c(Rc(a.error)):c(null,Rc(a.data)))}else{const c=ai(this.globalScope)?void 0:[],u=a.hasCallback?(g,y)=>{delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:g?P3(g):null,data:P3(y,c)},c)}:g=>{},h=Rc(a.data);if(this.parent[a.type])this.parent[a.type](a.sourceMapId,h,u);else if(this.parent.getWorkerSource){const g=a.type.split(".");this.parent.getWorkerSource(a.sourceMapId,g[0],h.source)[g[1]](h,u)}else u(new Error(`Could not find function ${a.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},p.CanonicalTileID=X4,p.Color=n2,p.ColorMode=wa,p.CullFaceMode=io,p.DEMData=R0,p.DataConstantProperty=Ae,p.DedupedRequest=Jf,p.DepthMode=a3,p.EXTENT=Xt,p.Elevation=class{isDataAvailableAtPoint(o){const a=this._source();if(this.isUsingMockSource()||!a||o.y<0||o.y>1)return!1;const c=a.getSource().maxzoom,u=1<<c,h=Math.floor(o.x),g=Math.floor((o.x-h)*u),y=Math.floor(o.y*u),b=this.findDEMTileFor(new Vi(c,h,c,g,y));return!(!b||!b.dem)}getAtPointOrZero(o,a=0){return this.getAtPoint(o,a)||0}getAtPoint(o,a,c=!0){if(this.isUsingMockSource())return null;null==a&&(a=null);const u=this._source();if(!u||o.y<0||o.y>1)return a;const h=u.getSource().maxzoom,g=1<<h,y=Math.floor(o.x),b=o.x-y,M=new Vi(h,y,h,Math.floor(b*g),Math.floor(o.y*g)),z=this.findDEMTileFor(M);if(!z||!z.dem)return a;const E=z.dem,T=1<<z.tileID.canonical.z,I=(b*T-z.tileID.canonical.x)*E.dim,N=(o.y*T-z.tileID.canonical.y)*E.dim,O=Math.floor(I),j=Math.floor(N);return(c?this.exaggeration():1)*G1(G1(E.get(O,j),E.get(O,j+1),N-j),G1(E.get(O+1,j),E.get(O+1,j+1),N-j),I-O)}getAtTileOffset(o,a,c){const u=1<<o.canonical.z;return this.getAtPointOrZero(new Wc(o.wrap+(o.canonical.x+a/Xt)/u,(o.canonical.y+c/Xt)/u))}getAtTileOffsetFunc(o,a,c,u){return h=>{const g=this.getAtTileOffset(o,h.x,h.y),y=u.upVector(o.canonical,h.x,h.y);return va(y,y,g*u.upVectorScale(o.canonical,a,c).metersToTile),y}}getForTilePoints(o,a,c,u){if(this.isUsingMockSource())return!1;const h=z8.create(this,o,u);return!!h&&(a.forEach(g=>{g[2]=this.exaggeration()*h.getElevationAt(g[0],g[1],c)}),!0)}getMinMaxForTile(o){if(this.isUsingMockSource())return null;const a=this.findDEMTileFor(o);if(!a||!a.dem)return null;const c=a.dem.tree,u=a.tileID,h=1<<o.canonical.z-u.canonical.z;let g=o.canonical.x/h-u.canonical.x,y=o.canonical.y/h-u.canonical.y,b=0;for(let M=0;M<o.canonical.z-u.canonical.z&&!c.leaves[b];M++){g*=2,y*=2;const z=2*Math.floor(y)+Math.floor(g);b=c.childOffsets[b]+z,g%=1,y%=1}return{min:this.exaggeration()*c.minimums[b],max:this.exaggeration()*c.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(o,a,c){throw new Error("Pure virtual method called.")}pointCoordinate(o){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(o){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},p.ErrorEvent=ua,p.EvaluationParameters=Se,p.Event=yn,p.Evented=qr,p.FillExtrusionBucket=J6,p.Frustum=l0,p.FrustumCorners=k6,p.GLOBE_RADIUS=Lo,p.GLOBE_SCALE_MATCH_LATITUDE=45,p.GLOBE_ZOOM_THRESHOLD_MAX=6,p.GLOBE_ZOOM_THRESHOLD_MIN=5,p.GlobeSharedBuffers=class{constructor(o){this._createGrid(o),this._createPoles(o)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const o of this._poleSegments)o.destroy();for(const o of this._gridSegments)o.withSkirts.destroy(),o.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const o of this._wireframeSegments)o.destroy()}}_fillGridMeshWithLods(o,a){const c=new Nt,u=new ui,h=[],g=o+1+2,y=a[0]+1,b=a[0]+1+(1+a.length),M=(z,E,T)=>{let I=z===g-1?z-2:0===z?z:z-1;return I+=T?24575:0,[I,E]};for(let z=0;z<g;++z)c.emplaceBack(...M(z,0,!0));for(let z=0;z<y;++z)for(let E=0;E<g;++E)c.emplaceBack(...M(E,z,(0===E||E===g-1)&&!0));for(let z=0;z<a.length;++z){const E=a[z];for(let T=0;T<g;++T)c.emplaceBack(...M(T,E,!0))}for(let z=0;z<a.length;++z){const E=u.length,T=a[z]+1+2,I=new ui;for(let j=0;j<T-1;j++){const X=j===T-2,ae=X?g*(b-a.length+z-j):g;for(let pe=0;pe<g-1;pe++){const ne=j*g+pe;0===j||X||0===pe||pe===g-2?(I.emplaceBack(ne+1,ne,ne+ae),I.emplaceBack(ne+ae,ne+ae+1,ne+1)):(u.emplaceBack(ne+1,ne,ne+ae),u.emplaceBack(ne+ae,ne+ae+1,ne+1))}}const N=V2.simpleSegment(0,E,c.length,u.length-E);for(let j=0;j<I.uint16.length;j+=3)u.emplaceBack(I.uint16[j],I.uint16[j+1],I.uint16[j+2]);const O=V2.simpleSegment(0,E,c.length,u.length-E);h.push({withoutSkirts:N,withSkirts:O})}return{vertices:c,indices:u,segments:h}}_createGrid(o){const a=this._fillGridMeshWithLods(64,Ei);this._gridSegments=a.segments,this._gridBuffer=o.createVertexBuffer(a.vertices,H6.members),this._gridIndexBuffer=o.createIndexBuffer(a.indices,!0)}_createPoles(o){const a=new ui;for(let h=0;h<=64;h++)a.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=o.createIndexBuffer(a,!0);const c=new Tr,u=new Tr;this._poleSegments=[];for(let h=0,g=0;h<5;h++){const y=360/(1<<h);c.emplaceBack(0,-Lo,0,.5,0),u.emplaceBack(0,-Lo,0,.5,1);for(let b=0;b<=64;b++){const M=b/64,z=G1(0,y,M),[E,T,I]=qc(fm,P5,z,Lo);c.emplaceBack(E,T,I,M,0),u.emplaceBack(E,T,I,M,1)}this._poleSegments.push(V2.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=o.createVertexBuffer(c,cm,!1),this._poleSouthVertexBuffer=o.createVertexBuffer(u,cm,!1)}getGridBuffers(o,a){return[this._gridBuffer,this._gridIndexBuffer,a?this._gridSegments[o].withSkirts:this._gridSegments[o].withoutSkirts]}getPoleBuffers(o){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[o]]}getWirefameBuffers(o,a){if(!this._wireframeSegments){const c=new So,u=64,h=u+1+2,g=1;this._wireframeSegments=[];for(let y=0,b=0;y<Ei.length;y++){const M=Ei[y];for(let E=g;E<M+g;E++)for(let T=g;T<u+g;T++){const I=E*h+T;c.emplaceBack(I,I+1),c.emplaceBack(I,I+h),c.emplaceBack(I,I+h+1)}const z=M*u*3;this._wireframeSegments.push(V2.simpleSegment(0,b,(M+1)*h,z)),b+=z}this._wireframeIndexBuffer=o.createIndexBuffer(c)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[a]]}},p.GlyphManager=nl,p.ImagePosition=fu,p.LivePerformanceUtils=tt,p.LngLat=W1,p.LngLatBounds=Uc,p.LocalGlyphMode=kr,p.MAX_MERCATOR_LATITUDE=fi,p.MercatorCoordinate=Wc,p.ONE_EM=hi,p.OverscaledTileID=Vi,p.PerformanceMarkers=ke,p.Properties=dt,p.RGBAImage=Gi,p.Ray=k5,p.RequestManager=class{constructor(o,a,c){this._transformRequestFn=o,this._customAccessToken=a,this._silenceAuthErrors=!!c,this._createSkuToken()}_createSkuToken(){const o=function(){let a="";for(let c=0;c<10;c++)a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Fi,a].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,a){return this._transformRequestFn&&this._transformRequestFn(o,a)||{url:o}}normalizeStyleURL(o,a){if(!$r(o))return o;const c=bi(o);return c.path=`/styles/v1${c.path}`,this._makeAPIURL(c,this._customAccessToken||a)}normalizeGlyphsURL(o,a){if(!$r(o))return o;const c=bi(o);return c.path=`/fonts/v1${c.path}`,this._makeAPIURL(c,this._customAccessToken||a)}normalizeSourceURL(o,a,c,u){if(!$r(o))return o;const h=bi(o);return h.path=`/v4/${h.authority}.json`,h.params.push("secure"),c&&h.params.push(`language=${c}`),u&&h.params.push(`worldview=${u}`),this._makeAPIURL(h,this._customAccessToken||a)}normalizeSpriteURL(o,a,c,u){const h=bi(o);return $r(o)?(h.path=`/styles/v1${h.path}/sprite${a}${c}`,this._makeAPIURL(h,this._customAccessToken||u)):(h.path+=`${a}${c}`,Ha(h))}normalizeTileURL(o,a,c){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!$r(o))return o;const u=bi(o);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${a||c&&"raster"!==u.authority&&512===c?"@2x":""}${m1.supported?".webp":"$1"}`),"raster"===u.authority?u.path=`/${a1.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${a1.TILE_URL_VERSION}${u.path}`);const h=this._customAccessToken||function(g){for(const y of g){const b=y.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(u.params)||a1.ACCESS_TOKEN;return a1.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,h)}canonicalizeTileURL(o,a){const c=bi(o);if(!c.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!c.path.match(/\.[\w]+$/))return o;let u="mapbox://";c.path.match(/^\/raster\/v1\//)?u+=`raster/${c.path.replace(`/${a1.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${c.path.replace(`/${a1.TILE_URL_VERSION}/`,"")}`;let h=c.params;return a&&(h=h.filter(g=>!g.match(/^access_token=/))),h.length&&(u+=`?${h.join("&")}`),u}canonicalizeTileset(o,a){const c=!!a&&$r(a),u=[];for(const h of o.tiles||[])Yo(h)?u.push(this.canonicalizeTileURL(h,c)):u.push(h);return u}_makeAPIURL(o,a){const c="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=bi(a1.API_URL);if(o.protocol=u.protocol,o.authority=u.authority,"http"===o.protocol){const h=o.params.indexOf("secure");h>=0&&o.params.splice(h,1)}if("/"!==u.path&&(o.path=`${u.path}${o.path}`),!a1.REQUIRE_ACCESS_TOKEN)return Ha(o);if(a=a||a1.ACCESS_TOKEN,!this._silenceAuthErrors){if(!a)throw new Error(`An API access token is required to use Mapbox GL. ${c}`);if("s"===a[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${c}`)}return o.params=o.params.filter(h=>-1===h.indexOf("access_token")),o.params.push(`access_token=${a||""}`),Ha(o)}},p.ResourceType=Bs,p.SegmentVector=V2,p.SourceCache=o3,p.StencilMode=cl,p.StructArrayLayout1ui2=Do,p.StructArrayLayout2f1f2i16=Ai,p.StructArrayLayout2i4=Nt,p.StructArrayLayout2ui4=So,p.StructArrayLayout3f12=K2,p.StructArrayLayout3ui6=ui,p.StructArrayLayout4i8=_n,p.StructArrayLayout5f20=Tr,p.Texture=sl,p.Tile=Hu,p.Transitionable=mt,p.Uniform1f=D5,p.Uniform1i=class extends Nc{constructor(o){super(o),this.current=0}set(o,a,c){this.fetchUniformLocation(o,a)&&this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},p.Uniform2f=class extends Nc{constructor(o){super(o),this.current=[0,0]}set(o,a,c){this.fetchUniformLocation(o,a)&&(c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1])))}},p.Uniform3f=class extends Nc{constructor(o){super(o),this.current=[0,0,0]}set(o,a,c){this.fetchUniformLocation(o,a)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2])))}},p.Uniform4f=nm,p.UniformColor=im,p.UniformMatrix2f=class extends Nc{constructor(o){super(o),this.current=Fb}set(o,a,c){if(this.fetchUniformLocation(o,a))for(let u=0;u<4;u++)if(c[u]!==this.current[u]){this.current=c,this.gl.uniformMatrix2fv(this.location,!1,c);break}}},p.UniformMatrix3f=class extends Nc{constructor(o){super(o),this.current=n0}set(o,a,c){if(this.fetchUniformLocation(o,a))for(let u=0;u<9;u++)if(c[u]!==this.current[u]){this.current=c,this.gl.uniformMatrix3fv(this.location,!1,c);break}}},p.UniformMatrix4f=class extends Nc{constructor(o){super(o),this.current=Pb}set(o,a,c){if(this.fetchUniformLocation(o,a)){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let u=1;u<16;u++)if(c[u]!==this.current[u]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}}},p.UnwrappedTileID=df,p.ValidationError=gt,p.VectorTileFeature=W4,p.VectorTileWorkerSource=class extends qr{constructor(o,a,c,u,h){super(),this.actor=o,this.layerIndex=a,this.availableImages=c,this.loadVectorData=h||Ru,this.loading={},this.loaded={},this.deduped=new Jf(o.scheduler),this.isSpriteLoaded=u,this.scheduler=o.scheduler}loadTile(o,a){const c=o.uid,u=o&&o.request,h=u&&u.collectResourceTiming,g=this.loading[c]=new lg(o);g.abort=this.loadVectorData(o,(y,b)=>{const M=!this.loading[c];if(delete this.loading[c],M||y||!b)return g.status="done",M||(this.loaded[c]=g),a(y);const z=b.rawData,E={};b.expires&&(E.expires=b.expires),b.cacheControl&&(E.cacheControl=b.cacheControl),g.vectorTile=b.vectorTile||new Ho(new M0(z));const T=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(I,N)=>{if(I||!N)return a(I);const O={};if(h){const j=Lt(u);j.length>0&&(O.resourceTiming=JSON.parse(JSON.stringify(j)))}a(null,l1({rawTileData:z.slice(0)},N,E,O))})};this.isSpriteLoaded?T():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(T,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom}):T()}),this.loaded=this.loaded||{},this.loaded[c]=g})}reloadTile(o,a){const c=this.loaded,u=o.uid,h=this;if(c&&c[u]){const g=c[u];g.showCollisionBoxes=o.showCollisionBoxes,g.enableTerrain=!!o.enableTerrain,g.projection=o.projection,g.tileTransform=n3(o.tileID.canonical,o.projection);const y=(b,M)=>{const z=g.reloadCallback;z&&(delete g.reloadCallback,g.parse(g.vectorTile,h.layerIndex,this.availableImages,h.actor,z)),a(b,M)};"parsing"===g.status?g.reloadCallback=y:"done"===g.status&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,y):y())}}abortTile(o,a){const c=o.uid,u=this.loading[c];u&&(u.abort&&u.abort(),delete this.loading[c]),a()}removeTile(o,a){const c=this.loaded,u=o.uid;c&&c[u]&&delete c[u],a()}},p.WritingMode=Ca,p.ZoomDependentExpression=Qe,p.add=na,p.addDynamicAttributes=T0,p.adjoint=function(o,a){var c=a[0],u=a[1],h=a[2],g=a[3],y=a[4],b=a[5],M=a[6],z=a[7],E=a[8];return o[0]=y*E-b*z,o[1]=h*z-u*E,o[2]=u*b-h*y,o[3]=b*M-g*E,o[4]=c*E-h*M,o[5]=h*g-c*b,o[6]=g*z-y*M,o[7]=u*M-c*z,o[8]=c*y-u*g,o},p.asyncAll=Cr,p.bezier=Aa,p.bindAll=tr,p.boundsAttributes=Tu,p.bufferConvexPolygon=function(o,a){const c=[];for(let u=0;u<o.length;u++){const h=xi(u-1,-1,o.length-1),g=xi(u+1,-1,o.length-1),y=o[u],b=o[g],M=o[h].sub(y).unit(),z=b.sub(y).unit(),E=z.angleWithSep(M.x,M.y),T=M.add(z).unit().mult(-1*a/Math.sin(E/2));c.push(y.add(T))}return c},p.cacheEntryPossiblyAdded=function(o){Os++,Os>fo&&(o.getActor().send("enforceCacheSizeLimit",T2),Os=0)},p.calculateGlobeLabelMatrix=function(o,a){const{x:c,y:u}=o.point,h=Ad(c,u,o.worldSize/o._pixelsPerMercatorPixel,0,0);return _s(h,h,P6(vs(a)))},p.calculateGlobeMatrix=function(o){const{x:a,y:c}=o.point,{lng:u,lat:h}=o._center;return Ad(a,c,o.worldSize,u,h)},p.calculateGlobeMercatorMatrix=function(o){const a=o.pixelsPerMeter,c=a/ya(1,o.center.lat),u=Eo(new Float64Array(16));return jc(u,u,[o.point.x,o.point.y,0]),Hr(u,u,[c,c,a]),Float32Array.from(u)},p.circumferenceAtLatitude=F5,p.clamp=d1,p.clearTileCache=function(o){if(!Ns())return;const a=Ze.caches.delete(d2);o&&a.catch(o).then(()=>o())},p.clipLine=Ef,p.clone=function(o){var a=new ta(16);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],a[9]=o[9],a[10]=o[10],a[11]=o[11],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15],a},p.clone$1=s2,p.collisionCircleLayout=km,p.config=a1,p.conjugate=function(o,a){return o[0]=-a[0],o[1]=-a[1],o[2]=-a[2],o[3]=a[3],o},p.create=function(){var o=new ta(16);return ta!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},p.create$1=xd,p.createExpression=G,p.createLayout=Pt,p.createStyleLayer=function(o){return"custom"===o.type?new Nf(o):new eg[o.type](o)},p.cross=T5,p.degToRad=I1,p.distance=function(o,a){return Math.hypot(a[0]-o[0],a[1]-o[1],a[2]-o[2])},p.div=function(o,a,c){return o[0]=a[0]/c[0],o[1]=a[1]/c[1],o[2]=a[2]/c[2],o},p.dot=Xa,p.earthRadius=W3,p.ease=ii,p.easeCubicInOut=ca,p.ecefToLatLng=function([o,a,c]){const u=Math.hypot(o,a,c),h=Math.atan2(o,c),g=.5*Math.PI-Math.acos(-a/u);return new W1(o2(h),o2(g))},p.emitValidationErrors=Xl,p.endsWith=wr,p.enforceCacheSizeLimit=function(o){Gr(),zr&&zr.then(a=>{a.keys().then(c=>{for(let u=0;u<c.length-o;u++)a.delete(c[u])})})},p.evaluateSizeForFeature=Cs,p.evaluateSizeForZoom=J4,p.evaluateVariableOffset=E0,p.evented=ce,p.exactEquals=function(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]&&o[3]===a[3]},p.exactEquals$1=function(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]},p.exported=K1,p.exported$1=m1,p.extend=l1,p.extend$1=da,p.fillExtrusionHeightLift=lf,p.filterObject=R1,p.fromMat4=function(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[4],o[4]=a[5],o[5]=a[6],o[6]=a[8],o[7]=a[9],o[8]=a[10],o},p.fromQuat=function(o,a){var c=a[0],u=a[1],h=a[2],g=a[3],y=c+c,b=u+u,M=h+h,z=c*y,E=u*y,T=u*b,I=h*y,N=h*b,O=h*M,j=g*y,X=g*b,ae=g*M;return o[0]=1-T-O,o[1]=E+ae,o[2]=I-X,o[3]=0,o[4]=E-ae,o[5]=1-z-O,o[6]=N+j,o[7]=0,o[8]=I+X,o[9]=N-j,o[10]=1-z-T,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},p.fromRotation=function(o,a){var c=Math.sin(a),u=Math.cos(a);return o[0]=u,o[1]=c,o[2]=0,o[3]=-c,o[4]=u,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},p.fromScaling=Cd,p.furthestTileCorner=function(o){const a=Math.round((o+45+360)%360/90)%4;return Ur[a]},p.getAABBPointSquareDist=function(o,a,c){let u=0;for(let h=0;h<2;++h){const g=c?c[h]:0;o[h]>g&&(u+=(o[h]-g)*(o[h]-g)),a[h]<g&&(u+=(g-a[h])*(g-a[h]))}return u},p.getAnchorAlignment=gu,p.getAnchorJustification=l8,p.getBounds=function(o){let a=1/0,c=1/0,u=-1/0,h=-1/0;for(const g of o)a=Math.min(a,g.x),c=Math.min(c,g.y),u=Math.max(u,g.x),h=Math.max(h,g.y);return{min:new ht(a,c),max:new ht(u,h)}},p.getColumn=Qn,p.getGridMatrix=function(o,a,c,u){const h=a.getNorth(),g=a.getSouth(),y=a.getWest(),b=a.getEast(),M=1<<o.z,z=b-y,E=h-g,T=z/64,I=-E/Ei[c],N=[0,T,0,I,0,0,h,y,0];if(o.z>0){const O=180/u;bd(N,N,[O/z+1,0,0,0,O/E+1,0,-.5*O/T,.5*O/I,1])}return N[2]=M,N[5]=o.x,N[8]=o.y,N},p.getImage=wc,p.getJSON=function(o,a){return La(l1(o,{type:"json"}),a)},p.getLatitudinalLod=function(o){const a=fi-5;o=d1(o,-a,a)/a*90;const c=Math.pow(Math.abs(Math.sin(I1(o))),3);return Math.round(c*(Ei.length-1))},p.getMapSessionAPI=De,p.getPerformanceMeasurement=Lt,p.getProjection=g8,p.getRTLTextPluginStatus=ye,p.getReferrer=Sr,p.getTilePoint=function(o,{x:a,y:c},u=0){return new ht(((a-u)*o.scale-o.x)*Xt,(c*o.scale-o.y)*Xt)},p.getTileVec3=function(o,a,c=0){return F4(((a.x-c)*o.scale-o.x)*Xt,(a.y*o.scale-o.y)*Xt,N6(a.z,a.y))},p.getVideo=function(o,a){const c=Ze.document.createElement("video");c.muted=!0,c.onloadstart=function(){a(null,c)};for(let u=0;u<o.length;u++){const h=Ze.document.createElement("source");Us(o[u])||(c.crossOrigin="Anonymous"),h.src=o[u],c.appendChild(h)}return{cancel:()=>{}}},p.globeCenterToScreenPoint=function(o){const a=[0,0,0],c=Eo(new Float64Array(16));return _s(c,o.pixelMatrix,o.globeMatrix),Zn(a,a,c),new ht(a[0],a[1])},p.globeDenormalizeECEF=P6,p.globeECEFOrigin=function(o,a){const c=[0,0,0];return Zn(c,c,f0(vs(a.canonical))),Zn(c,c,o),c},p.globeMetersToEcef=u0,p.globeNormalizeECEF=f0,p.globePixelsToTileUnits=function(o,a){return Xt/(512*Math.pow(2,o))*d0(vs(a))},p.globePoleMatrixForTile=function(o,a,c){const u=Eo(new Float64Array(16)),h=(a/(1<<o)-.5)*Math.PI*2;return Vo(u,c.globeMatrix,h),Float32Array.from(u)},p.globeTileBounds=vs,p.globeTiltAtLngLat=Ed,p.globeToMercatorTransition=q3,p.globeUseCustomAntiAliasing=function(o,a,c){const u=q3(c.zoom),h=o.style.map._antialias,g=!!a.extStandardDerivatives,y=a.extStandardDerivativesForceOff||o.terrain&&o.terrain.exaggeration()>0;return 0===u&&!h&&!y&&g},p.identity=Eo,p.identity$1=om,p.invert=a0,p.isFullscreen=function(){return!!Ze.document.fullscreenElement||!!Ze.document.webkitFullscreenElement},p.isLngLatBehindGlobe=F6,p.isMapAuthenticated=function(o){return we.has(o)},p.isMapboxURL=$r,p.isSafariWithAntialiasingBug=function(o){const a=o.navigator?o.navigator.userAgent:null;return!!ai(o)&&a&&(a.match("Version/15.4")||a.match("Version/15.5")||a.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},p.latFromMercatorY=b2,p.latLngToECEF=O2,p.len=Md,p.length=s0,p.length$1=function(o){return Math.hypot(o[0],o[1],o[2],o[3])},p.lngFromMercatorX=ra,p.loadVectorTile=Ru,p.makeRequest=La,p.mapValue=function(o,a,c,u,h){return d1((o-a)/(c-a)*(h-u)+u,u,h)},p.mercatorScale=Td,p.mercatorXfromLng=ys,p.mercatorYfromLat=eo,p.mercatorZfromAltitude=ya,p.mul=o0,p.mul$1=Ob,p.multiply=_s,p.multiply$1=bd,p.multiply$2=wd,p.nextPowerOfTwo=er,p.normalize=hr,p.normalize$1=Bb,p.normalize$2=zd,p.number=G1,p.ortho=function(o,a,c,u,h,g,y){var b=1/(a-c),M=1/(u-h),z=1/(g-y);return o[0]=-2*b,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*z,o[11]=0,o[12]=(a+c)*b,o[13]=(h+u)*M,o[14]=(y+g)*z,o[15]=1,o},p.pbf=M0,p.perspective=function(o,a,c,u,h){var g,y=1/Math.tan(a/2);return o[0]=y/c,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=y,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!=h&&h!==1/0?(o[10]=(h+u)*(g=1/(u-h)),o[14]=2*h*u*g):(o[10]=-1,o[14]=-2*u),o},p.pick=function(o,a){const c={};for(let u=0;u<a.length;u++){const h=a[u];h in o&&(c[h]=o[h])}return c},p.plugin=Ce,p.pointGeometry=ht,p.polesInViewport=function(o){const a=Eo(new Float64Array(16));_s(a,o.pixelMatrix,o.globeMatrix);const c=[0,Qa,0],u=[0,Ja,0];return Zn(c,c,a),Zn(u,u,a),[c[0]>0&&c[0]<=o.width&&c[1]>0&&c[1]<=o.height&&!F6(o,new W1(o.center.lat,90)),u[0]>0&&u[0]<=o.width&&u[1]>0&&u[1]<=o.height&&!F6(o,new W1(o.center.lat,-90))]},p.polygonContainsPoint=Xc,p.polygonIntersectsBox=G5,p.polygonIntersectsPolygon=j5,p.polygonizeBounds=function(o,a,c=0,u=!0){const h=new ht(c,c),g=o.sub(h),y=a.add(h),b=[g,new ht(y.x,g.y),y,new ht(g.x,y.y)];return u&&b.push(g.clone()),b},p.posAttributes=H6,p.postMapLoadEvent=ie,p.postPerformanceEvent=be,p.postTurnstileEvent=U,p.potpack=o8,p.prevPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},p.radToDeg=o2,p.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],p.registerForPluginStateChange=function(o){return o({pluginStatus:ee,pluginURL:q}),ce.on("pluginStateChange",o),o},p.removeAuthState=function(o){we.delete(o)},p.renderColorRamp=Qc,p.resample=Hd,p.rotateX=A6,p.rotateX$1=sm,p.rotateY=Vo,p.rotateY$1=T6,p.rotateZ=function(o,a,c){var u=Math.sin(c),h=Math.cos(c),g=a[0],y=a[1],b=a[2],M=a[3],z=a[4],E=a[5],T=a[6],I=a[7];return a!==o&&(o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=g*h+z*u,o[1]=y*h+E*u,o[2]=b*h+T*u,o[3]=M*h+I*u,o[4]=z*h-g*u,o[5]=E*h-y*u,o[6]=T*h-b*u,o[7]=I*h-M*u,o},p.rotateZ$1=function(o,a,c){c*=.5;var u=a[0],h=a[1],g=a[2],y=a[3],b=Math.sin(c),M=Math.cos(c);return o[0]=u*M+h*b,o[1]=h*M-u*b,o[2]=g*M+y*b,o[3]=y*M-g*b,o},p.scale=Hr,p.scale$1=am,p.scale$2=va,p.scaleAndAdd=V6,p.set=function(o,a,c,u){return o[0]=a,o[1]=c,o[2]=u,o},p.setCacheLimits=function(o,a){T2=o,fo=a},p.setColumn=function(o,a,c){o[4*a+0]=c[0],o[4*a+1]=c[1],o[4*a+2]=c[2],o[4*a+3]=c[3]},p.setRTLTextPlugin=function(o,a,c=!1){if(ee===Y||ee===Q||ee===te)throw new Error("setRTLTextPlugin cannot be called multiple times.");q=K1.resolveURL(o),ee=Y,J=a,se(),c||ve()},p.smoothstep=ri,p.spec=Ge,p.squaredLength=function(o){var a=o[0],c=o[1],u=o[2];return a*a+c*c+u*u},p.storeAuthState=function(o,a){a?we.add(o):we.delete(o)},p.sub=Ka,p.subtract=G3,p.symbolSize=el,p.tileAABB=function(o,a,c,u,h,g,y,b,M){if("globe"===M.name)return function ia(o,a,c){const u=a/o.worldSize,h=o.globeMatrix;if(c.z<=1){const Te=vs(c).getCorners();return Dd(Te,h,u),ji.fromPoints(Te)}const g=O4(c),y=R6(g);Dd(y,h,u);const b=Number.MAX_VALUE,M=[-b,-b,-b],z=[b,b,b];if(g.contains(o.center)){for(const ct of y)E6(z,z,ct),N4(M,M,ct);M[2]=0;const Te=o.point,We=[Te.x*u,Te.y*u,0];return E6(z,z,We),N4(M,M,We),new ji(z,M)}const E=[h[12]*u,h[13]*u,h[14]*u],T=g.getCenter(),I=d1(o.center.lat,-fi,fi),N=d1(T.lat,-fi,fi),O=ys(o.center.lng),j=eo(I);let X=O-ys(T.lng);const ae=j-eo(N);X>.5?X-=1:X<-.5&&(X+=1);let pe=0;Math.abs(X)>Math.abs(ae)?pe=X>=0?1:3:(pe=ae>=0?0:2,V6(E,E,[h[4]*u,h[5]*u,h[6]*u],-Math.sin(I1(ae>=0?g.getSouth():g.getNorth()))*Lo));const ne=y[pe],fe=y[(pe+1)%4],_e=new dm(ne,fe,E),me=[I5(_e,0)||ne[0],I5(_e,1)||ne[1],I5(_e,2)||ne[2]],Ve=q3(o.zoom);if(Ve>0){const Te=function({x:ct,y:ze,z:Xe},et,lt,ft,Oe){const _t=1/(1<<Xe);let Ut=ct*_t,Ct=Ut+_t,zt=ze*_t,bt=zt+_t,Zt=0;const O1=(Ut+Ct)/2-ft;return O1>.5?Zt=-1:O1<-.5&&(Zt=1),Ut=((Ut+Zt)*et-(ft*=et))*lt+ft,Ct=((Ct+Zt)*et-ft)*lt+ft,zt=(zt*et-(Oe*=et))*lt+Oe,bt=(bt*et-Oe)*lt+Oe,[[Ut,bt,0],[Ct,bt,0],[Ct,zt,0],[Ut,zt,0]]}(c,a,o._pixelsPerMercatorPixel,O,j);for(let ct=0;ct<y.length;ct++)$c(y[ct],Te[ct],Ve);const We=na([],Te[pe],Te[(pe+1)%4]);va(We,We,.5),$c(me,We,Ve)}for(const Te of y)E6(z,z,Te),N4(M,M,Te);return z[2]=Math.min(ne[2],fe[2]),E6(z,z,me),N4(M,M,me),new ji(z,M)}(o,a,new X4(c,u,h));const z=n3({z:c,x:u,y:h},M);return new ji([(g+z.x/z.scale)*a,a*(z.y/z.scale),y],[(g+z.x2/z.scale)*a,a*(z.y2/z.scale),b])},p.tileCornersToBounds=O4,p.tileTransform=n3,p.transformMat3=function(o,a,c){var u=a[0],h=a[1],g=a[2];return o[0]=u*c[0]+h*c[3]+g*c[6],o[1]=u*c[1]+h*c[4]+g*c[7],o[2]=u*c[2]+h*c[5]+g*c[8],o},p.transformMat4=Zn,p.transformMat4$1=$3,p.transformQuat=H5,p.transitionTileAABBinECEF=Sd,p.translate=jc,p.transpose=function(o,a){if(o===a){var c=a[1],u=a[2],h=a[5];o[1]=a[3],o[2]=a[6],o[3]=c,o[5]=a[7],o[6]=u,o[7]=h}else o[0]=a[0],o[1]=a[3],o[2]=a[6],o[3]=a[1],o[4]=a[4],o[5]=a[7],o[6]=a[2],o[7]=a[5],o[8]=a[8];return o},p.triggerPluginCompletionEvent=oe,p.uniqueId=Ea,p.updateGlobeVertexNormal=function(o,a,c,u,h){const g=5*a+2;o.float32[g+0]=c,o.float32[g+1]=u,o.float32[g+2]=h},p.validateCustomStyleLayer=function(o){const a=[],c=o.id;return void 0===c&&a.push({message:`layers.${c}: missing required property "id"`}),void 0===o.render&&a.push({message:`layers.${c}: missing required method "render"`}),o.renderingMode&&"2d"!==o.renderingMode&&"3d"!==o.renderingMode&&a.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),a},p.validateFilter=o=>zi(A4(o)),p.validateFog=o=>zi(_6(o)),p.validateLayer=o=>zi(ur(o)),p.validateLight=o=>zi(H3(o)),p.validateSource=o=>zi(g2(o)),p.validateStyle=v6,p.validateTerrain=o=>zi(Ui(o)),p.values=Ni,p.vectorTile=Y6,p.version=Qi,p.warnOnce=en,p.window=Ze,p.wrap=xi}),Ke(0,function(p){function Ze(re){if("number"==typeof re||"boolean"==typeof re||"string"==typeof re||null==re)return JSON.stringify(re);if(Array.isArray(re)){let $="[";for(const ie of re)$+=`${Ze(ie)},`;return`${$}]`}let U="{";for(const $ of Object.keys(re).sort())U+=`${$}:${Ze(re[$])},`;return`${U}}`}function Qi(re){let U="";for(const $ of p.refProperties)U+=`/${Ze(re[$])}`;return U}class Gn{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,$){for(const ue of U)this._layerConfigs[ue.id]=ue,(this._layers[ue.id]=p.createStyleLayer(ue)).compileFilter(),this.keyCache[ue.id]&&delete this.keyCache[ue.id];for(const ue of $)delete this.keyCache[ue],delete this._layerConfigs[ue],delete this._layers[ue];this.familiesBySource={};const ie=function(ue,be){const Ee={};for(let we=0;we<ue.length;we++){const ke=be&&be[ue[we].id]||Qi(ue[we]);be&&(be[ue[we].id]=ke);let tt=Ee[ke];tt||(tt=Ee[ke]=[]),tt.push(ue[we])}const De=[];for(const we in Ee)De.push(Ee[we]);return De}(p.values(this._layerConfigs),this.keyCache);for(const ue of ie){const be=ue.map(wt=>this._layers[wt.id]),Ee=be[0];if("none"===Ee.visibility)continue;const De=Ee.source||"";let we=this.familiesBySource[De];we||(we=this.familiesBySource[De]={});const ke=Ee.sourceLayer||"_geojsonTileLayer";let tt=we[ke];tt||(tt=we[ke]=[]),tt.push(be)}}}class a1{loadTile(U,$){const{uid:ie,encoding:ue,rawImageData:be,padding:Ee,buildQuadTree:De}=U,we=p.window.ImageBitmap&&be instanceof p.window.ImageBitmap?this.getImageData(be,Ee):be;$(null,new p.DEMData(ie,we,ue,Ee<1,De))}getImageData(U,$){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);const ie=this.offscreenCanvasContext.getImageData(-$,-$,U.width+2*$,U.height+2*$);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ie}}var m1=function re(U,$){var ie,ue=U&&U.type;if("FeatureCollection"===ue)for(ie=0;ie<U.features.length;ie++)re(U.features[ie],$);else if("GeometryCollection"===ue)for(ie=0;ie<U.geometries.length;ie++)re(U.geometries[ie],$);else if("Feature"===ue)re(U.geometry,$);else if("Polygon"===ue)h2(U.coordinates,$);else if("MultiPolygon"===ue)for(ie=0;ie<U.coordinates.length;ie++)h2(U.coordinates[ie],$);return U};function h2(re,U){if(0!==re.length){$2(re[0],U);for(var $=1;$<re.length;$++)$2(re[$],!U)}}function $2(re,U){for(var $=0,ie=0,ue=0,be=re.length,Ee=be-1;ue<be;Ee=ue++){var De=(re[ue][0]-re[Ee][0])*(re[Ee][1]+re[ue][1]),we=$+De;ie+=Math.abs($)>=Math.abs(De)?$-we+De:De-we+$,$=we}$+ie>=0!=!!U&&re.reverse()}const yi=p.VectorTileFeature.prototype.toGeoJSON;class lo{constructor(U){this._feature=U,this.extent=p.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))}loadGeometry(){if(1===this._feature.type){const U=[];for(const $ of this._feature.geometry)U.push([new p.pointGeometry($[0],$[1])]);return U}{const U=[];for(const $ of this._feature.geometry){const ie=[];for(const ue of $)ie.push(new p.pointGeometry(ue[0],ue[1]));U.push(ie)}return U}}toGeoJSON(U,$,ie){return yi.call(this,U,$,ie)}}class sa{constructor(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.EXTENT,this.length=U.length,this._features=U}feature(U){return new lo(this._features[U])}}var Fi={},qn={get exports(){return Fi},set exports(re){Fi=re}},q2=p.pointGeometry,ht=p.vectorTile.VectorTileFeature,U1=br;function br(re,U){this.options=U||{},this.features=re,this.length=re.length}function uo(re,U){this.id="number"==typeof re.id?re.id:void 0,this.type=re.type,this.rawGeometry=1===re.type?[re.geometry]:re.geometry,this.properties=re.tags,this.extent=U||4096}br.prototype.feature=function(re){return new uo(this.features[re],this.options.extent)},uo.prototype.loadGeometry=function(){var re=this.rawGeometry;this.geometry=[];for(var U=0;U<re.length;U++){for(var $=re[U],ie=[],ue=0;ue<$.length;ue++)ie.push(new q2($[ue][0],$[ue][1]));this.geometry.push(ie)}return this.geometry},uo.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var re=this.geometry,U=1/0,$=-1/0,ie=1/0,ue=-1/0,be=0;be<re.length;be++)for(var Ee=re[be],De=0;De<Ee.length;De++){var we=Ee[De];U=Math.min(U,we.x),$=Math.max($,we.x),ie=Math.min(ie,we.y),ue=Math.max(ue,we.y)}return[U,ie,$,ue]},uo.prototype.toGeoJSON=ht.prototype.toGeoJSON;var I1=p.pbf,o2=U1;function Ur(re){var U=new I1;return function($,ie){for(var ue in $.layers)ie.writeMessage(3,ca,$.layers[ue])}(re,U),U.finish()}function ca(re,U){var $;U.writeVarintField(15,re.version||1),U.writeStringField(1,re.name||""),U.writeVarintField(5,re.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<re.length;$++)ie.feature=re.feature($),U.writeMessage(2,Aa,ie);var ue=ie.keys;for($=0;$<ue.length;$++)U.writeStringField(3,ue[$]);var be=ie.values;for($=0;$<be.length;$++)U.writeMessage(4,Cr,be[$])}function Aa(re,U){var $=re.feature;void 0!==$.id&&U.writeVarintField(1,$.id),U.writeMessage(2,ii,re),U.writeVarintField(3,$.type),U.writeMessage(4,xi,$)}function ii(re,U){var $=re.feature,ie=re.keys,ue=re.values,be=re.keycache,Ee=re.valuecache;for(var De in $.properties){var we=$.properties[De],ke=be[De];if(null!==we){void 0===ke&&(ie.push(De),be[De]=ke=ie.length-1),U.writeVarint(ke);var tt=typeof we;"string"!==tt&&"boolean"!==tt&&"number"!==tt&&(we=JSON.stringify(we));var wt=tt+":"+we,Je=Ee[wt];void 0===Je&&(ue.push(we),Ee[wt]=Je=ue.length-1),U.writeVarint(Je)}}}function d1(re,U){return(U<<3)+(7&re)}function ri(re){return re<<1^re>>31}function xi(re,U){for(var $=re.loadGeometry(),ie=re.type,ue=0,be=0,Ee=$.length,De=0;De<Ee;De++){var we=$[De],ke=1;1===ie&&(ke=we.length),U.writeVarint(d1(1,ke));for(var tt=3===ie?we.length-1:we.length,wt=0;wt<tt;wt++){1===wt&&1!==ie&&U.writeVarint(d1(2,tt-1));var Je=we[wt].x-ue,Lt=we[wt].y-be;U.writeVarint(ri(Je)),U.writeVarint(ri(Lt)),ue+=Je,be+=Lt}3===ie&&U.writeVarint(d1(7,1))}}function Cr(re,U){var $=typeof re;"string"===$?U.writeStringField(1,re):"boolean"===$?U.writeBooleanField(7,re):"number"===$&&(re%1!=0?U.writeDoubleField(3,re):re<0?U.writeSVarintField(6,re):U.writeVarintField(5,re))}function Ni(re,U,$,ie,ue,be){if(ue-ie<=$)return;const Ee=ie+ue>>1;l1(re,U,Ee,ie,ue,be%2),Ni(re,U,$,ie,Ee-1,be+1),Ni(re,U,$,Ee+1,ue,be+1)}function l1(re,U,$,ie,ue,be){for(;ue>ie;){if(ue-ie>600){const ke=ue-ie+1,tt=$-ie+1,wt=Math.log(ke),Je=.5*Math.exp(2*wt/3),Lt=.5*Math.sqrt(wt*Je*(ke-Je)/ke)*(tt-ke/2<0?-1:1);l1(re,U,$,Math.max(ie,Math.floor($-tt*Je/ke+Lt)),Math.min(ue,Math.floor($+(ke-tt)*Je/ke+Lt)),be)}const Ee=U[2*$+be];let De=ie,we=ue;for(Ji(re,U,ie,$),U[2*ue+be]>Ee&&Ji(re,U,ie,ue);De<we;){for(Ji(re,U,De,we),De++,we--;U[2*De+be]<Ee;)De++;for(;U[2*we+be]>Ee;)we--}U[2*ie+be]===Ee?Ji(re,U,ie,we):(we++,Ji(re,U,we,ue)),we<=$&&(ie=we+1),$<=we&&(ue=we-1)}}function Ji(re,U,$,ie){Ea(re,$,ie),Ea(U,2*$,2*ie),Ea(U,2*$+1,2*ie+1)}function Ea(re,U,$){const ie=re[U];re[U]=re[$],re[$]=ie}function jr(re,U,$,ie){const ue=re-$,be=U-ie;return ue*ue+be*be}qn.exports=Ur,Fi.fromVectorTileJs=Ur,Fi.fromGeojsonVt=function(re,U){U=U||{};var $={};for(var ie in re)$[ie]=new o2(re[ie].features,U),$[ie].name=ie,$[ie].version=U.version,$[ie].extent=U.extent;return Ur({layers:$})},Fi.GeoJSONWrapper=o2;const er=re=>re[0],Qt=re=>re[1];class tr{constructor(U,$=er,ie=Qt,ue=64,be=Float64Array){this.nodeSize=ue,this.points=U;const Ee=U.length<65536?Uint16Array:Uint32Array,De=this.ids=new Ee(U.length),we=this.coords=new be(2*U.length);for(let ke=0;ke<U.length;ke++)De[ke]=ke,we[2*ke]=$(U[ke]),we[2*ke+1]=ie(U[ke]);Ni(De,we,ue,0,De.length-1,0)}range(U,$,ie,ue){return function(be,Ee,De,we,ke,tt,wt){const Je=[0,be.length-1,0],Lt=[];let Dt,It;for(;Je.length;){const Tt=Je.pop(),y1=Je.pop(),K1=Je.pop();if(y1-K1<=wt){for(let yn=K1;yn<=y1;yn++)Dt=Ee[2*yn],It=Ee[2*yn+1],Dt>=De&&Dt<=ke&&It>=we&&It<=tt&&Lt.push(be[yn]);continue}const qt=Math.floor((K1+y1)/2);Dt=Ee[2*qt],It=Ee[2*qt+1],Dt>=De&&Dt<=ke&&It>=we&&It<=tt&&Lt.push(be[qt]);const tn=(Tt+1)%2;(0===Tt?De<=Dt:we<=It)&&(Je.push(K1),Je.push(qt-1),Je.push(tn)),(0===Tt?ke>=Dt:tt>=It)&&(Je.push(qt+1),Je.push(y1),Je.push(tn))}return Lt}(this.ids,this.coords,U,$,ie,ue,this.nodeSize)}within(U,$,ie){return function(ue,be,Ee,De,we,ke){const tt=[0,ue.length-1,0],wt=[],Je=we*we;for(;tt.length;){const Lt=tt.pop(),Dt=tt.pop(),It=tt.pop();if(Dt-It<=ke){for(let tn=It;tn<=Dt;tn++)jr(be[2*tn],be[2*tn+1],Ee,De)<=Je&&wt.push(ue[tn]);continue}const Tt=Math.floor((It+Dt)/2),y1=be[2*Tt],K1=be[2*Tt+1];jr(y1,K1,Ee,De)<=Je&&wt.push(ue[Tt]);const qt=(Lt+1)%2;(0===Lt?Ee-we<=y1:De-we<=K1)&&(tt.push(It),tt.push(Tt-1),tt.push(qt)),(0===Lt?Ee+we>=y1:De+we>=K1)&&(tt.push(Tt+1),tt.push(Dt),tt.push(qt))}return wt}(this.ids,this.coords,U,$,ie,this.nodeSize)}}const wr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},rn=Math.fround||(R1=new Float32Array(1),re=>(R1[0]=+re,R1[0]));var R1;class s2{constructor(U){this.options=ai(Object.create(wr),U),this.trees=new Array(this.options.maxZoom+1)}load(U){const{log:$,minZoom:ie,maxZoom:ue,nodeSize:be}=this.options;$&&console.time("total time");const Ee=`prepare ${U.length} points`;$&&console.time(Ee),this.points=U;let De=[];for(let we=0;we<U.length;we++)U[we].geometry&&De.push(en(U[we],we));this.trees[ue+1]=new tr(De,la,Qn,be,Float32Array),$&&console.timeEnd(Ee);for(let we=ue;we>=ie;we--){const ke=+Date.now();De=this._cluster(De,we),this.trees[we]=new tr(De,la,Qn,be,Float32Array),$&&console.log("z%d: %d clusters in %dms",we,De.length,+Date.now()-ke)}return $&&console.timeEnd("total time"),this}getClusters(U,$){let ie=((U[0]+180)%360+360)%360-180;const ue=Math.max(-90,Math.min(90,U[1]));let be=180===U[2]?180:((U[2]+180)%360+360)%360-180;const Ee=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)ie=-180,be=180;else if(ie>be){const tt=this.getClusters([ie,ue,180,Ee],$),wt=this.getClusters([-180,ue,be,Ee],$);return tt.concat(wt)}const De=this.trees[this._limitZoom($)],we=De.range(Mr(ie),j1(Ee),Mr(be),j1(ue)),ke=[];for(const tt of we){const wt=De.points[tt];ke.push(wt.numPoints?nr(wt):this.points[wt.index])}return ke}getChildren(U){const $=this._getOriginId(U),ie=this._getOriginZoom(U),ue="No cluster with the specified id.",be=this.trees[ie];if(!be)throw new Error(ue);const Ee=be.points[$];if(!Ee)throw new Error(ue);const De=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),we=be.within(Ee.x,Ee.y,De),ke=[];for(const tt of we){const wt=be.points[tt];wt.parentId===U&&ke.push(wt.numPoints?nr(wt):this.points[wt.index])}if(0===ke.length)throw new Error(ue);return ke}getLeaves(U,$,ie){const ue=[];return this._appendLeaves(ue,U,$=$||10,ie=ie||0,0),ue}getTile(U,$,ie){const ue=this.trees[this._limitZoom(U)],be=Math.pow(2,U),{extent:Ee,radius:De}=this.options,we=De/Ee,ke=(ie-we)/be,tt=(ie+1+we)/be,wt={features:[]};return this._addTileFeatures(ue.range(($-we)/be,ke,($+1+we)/be,tt),ue.points,$,ie,be,wt),0===$&&this._addTileFeatures(ue.range(1-we/be,ke,1,tt),ue.points,be,ie,be,wt),$===be-1&&this._addTileFeatures(ue.range(0,ke,we/be,tt),ue.points,-1,ie,be,wt),wt.features.length?wt:null}getClusterExpansionZoom(U){let $=this._getOriginZoom(U)-1;for(;$<=this.options.maxZoom;){const ie=this.getChildren(U);if($++,1!==ie.length)break;U=ie[0].properties.cluster_id}return $}_appendLeaves(U,$,ie,ue,be){const Ee=this.getChildren($);for(const De of Ee){const we=De.properties;if(we&&we.cluster?be+we.point_count<=ue?be+=we.point_count:be=this._appendLeaves(U,we.cluster_id,ie,ue,be):be<ue?be++:U.push(De),U.length===ie)break}return be}_addTileFeatures(U,$,ie,ue,be,Ee){for(const De of U){const we=$[De],ke=we.numPoints;let tt,wt,Je;if(ke)tt=X1(we),wt=we.x,Je=we.y;else{const It=this.points[we.index];tt=It.properties,wt=Mr(It.geometry.coordinates[0]),Je=j1(It.geometry.coordinates[1])}const Lt={type:1,geometry:[[Math.round(this.options.extent*(wt*be-ie)),Math.round(this.options.extent*(Je*be-ue))]],tags:tt};let Dt;ke?Dt=we.id:this.options.generateId?Dt=we.index:this.points[we.index].id&&(Dt=this.points[we.index].id),void 0!==Dt&&(Lt.id=Dt),Ee.features.push(Lt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,$){const ie=[],{radius:ue,extent:be,reduce:Ee,minPoints:De}=this.options,we=ue/(be*Math.pow(2,$));for(let ke=0;ke<U.length;ke++){const tt=U[ke];if(tt.zoom<=$)continue;tt.zoom=$;const wt=this.trees[$+1],Je=wt.within(tt.x,tt.y,we),Lt=tt.numPoints||1;let Dt=Lt;for(const It of Je){const Tt=wt.points[It];Tt.zoom>$&&(Dt+=Tt.numPoints||1)}if(Dt>Lt&&Dt>=De){let It=tt.x*Lt,Tt=tt.y*Lt,y1=Ee&&Lt>1?this._map(tt,!0):null;const K1=(ke<<5)+($+1)+this.points.length;for(const qt of Je){const tn=wt.points[qt];if(tn.zoom<=$)continue;tn.zoom=$;const yn=tn.numPoints||1;It+=tn.x*yn,Tt+=tn.y*yn,tn.parentId=K1,Ee&&(y1||(y1=this._map(tt,!0)),Ee(y1,this._map(tn)))}tt.parentId=K1,ie.push(h1(It/Dt,Tt/Dt,K1,Dt,y1))}else if(ie.push(tt),Dt>1)for(const It of Je){const Tt=wt.points[It];Tt.zoom<=$||(Tt.zoom=$,ie.push(Tt))}}return ie}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,$){if(U.numPoints)return $?ai({},U.properties):U.properties;const ie=this.points[U.index].properties,ue=this.options.map(ie);return $&&ue===ie?ai({},ue):ue}}function h1(re,U,$,ie,ue){return{x:rn(re),y:rn(U),zoom:1/0,id:$,parentId:-1,numPoints:ie,properties:ue}}function en(re,U){const[$,ie]=re.geometry.coordinates;return{x:rn(Mr($)),y:rn(j1(ie)),zoom:1/0,index:U,parentId:-1}}function nr(re){return{type:"Feature",id:re.id,properties:X1(re),geometry:{type:"Point",coordinates:[(U=re.x,360*(U-.5)),Oi(re.y)]}};var U}function X1(re){const U=re.numPoints,$=U>=1e4?`${Math.round(U/1e3)}k`:U>=1e3?Math.round(U/100)/10+"k":U;return ai(ai({},re.properties),{cluster:!0,cluster_id:re.id,point_count:U,point_count_abbreviated:$})}function Mr(re){return re/360+.5}function j1(re){const U=Math.sin(re*Math.PI/180),$=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return $<0?0:$>1?1:$}function Oi(re){const U=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function ai(re,U){for(const $ in U)re[$]=U[$];return re}function la(re){return re.x}function Qn(re){return re.y}function d2(re,U,$,ie){for(var ue,be=ie,Ee=$-U>>1,De=$-U,we=re[U],ke=re[U+1],tt=re[$],wt=re[$+1],Je=U+3;Je<$;Je+=3){var Lt=zr(re[Je],re[Je+1],we,ke,tt,wt);if(Lt>be)ue=Je,be=Lt;else if(Lt===be){var Dt=Math.abs(Je-Ee);Dt<De&&(ue=Je,De=Dt)}}be>ie&&(ue-U>3&&d2(re,U,ue,ie),re[ue+2]=be,$-ue>3&&d2(re,ue,$,ie))}function zr(re,U,$,ie,ue,be){var Ee=ue-$,De=be-ie;if(0!==Ee||0!==De){var we=((re-$)*Ee+(U-ie)*De)/(Ee*Ee+De*De);we>1?($=ue,ie=be):we>0&&($+=Ee*we,ie+=De*we)}return(Ee=re-$)*Ee+(De=U-ie)*De}function Bi(re,U,$,ie){var ue={id:void 0===re?null:re,type:U,geometry:$,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(be){var Ee=be.geometry,De=be.type;if("Point"===De||"MultiPoint"===De||"LineString"===De)T2(be,Ee);else if("Polygon"===De||"MultiLineString"===De)for(var we=0;we<Ee.length;we++)T2(be,Ee[we]);else if("MultiPolygon"===De)for(we=0;we<Ee.length;we++)for(var ke=0;ke<Ee[we].length;ke++)T2(be,Ee[we][ke])}(ue),ue}function T2(re,U){for(var $=0;$<U.length;$+=3)re.minX=Math.min(re.minX,U[$]),re.minY=Math.min(re.minY,U[$+1]),re.maxX=Math.max(re.maxX,U[$]),re.maxY=Math.max(re.maxY,U[$+1])}function fo(re,U,$,ie){if(U.geometry){var ue=U.geometry.coordinates,be=U.geometry.type,Ee=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2),De=[],we=U.id;if($.promoteId?we=U.properties[$.promoteId]:$.generateId&&(we=ie||0),"Point"===be)Ns(ue,De);else if("MultiPoint"===be)for(var ke=0;ke<ue.length;ke++)Ns(ue[ke],De);else if("LineString"===be)Gr(ue,De,Ee,!1);else if("MultiLineString"===be){if($.lineMetrics){for(ke=0;ke<ue.length;ke++)Gr(ue[ke],De=[],Ee,!1),re.push(Bi(we,"LineString",De,U.properties));return}Va(ue,De,Ee,!1)}else if("Polygon"===be)Va(ue,De,Ee,!0);else{if("MultiPolygon"!==be){if("GeometryCollection"===be){for(ke=0;ke<U.geometry.geometries.length;ke++)fo(re,{id:we,geometry:U.geometry.geometries[ke],properties:U.properties},$,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ke=0;ke<ue.length;ke++){var tt=[];Va(ue[ke],tt,Ee,!0),De.push(tt)}}re.push(Bi(we,be,De,U.properties))}}function Ns(re,U){U.push(Os(re[0])),U.push(Bs(re[1])),U.push(0)}function Gr(re,U,$,ie){for(var ue,be,Ee=0,De=0;De<re.length;De++){var we=Os(re[De][0]),ke=Bs(re[De][1]);U.push(we),U.push(ke),U.push(0),De>0&&(Ee+=ie?(ue*ke-we*be)/2:Math.sqrt(Math.pow(we-ue,2)+Math.pow(ke-be,2))),ue=we,be=ke}var tt=U.length-3;U[2]=1,d2(U,0,tt,$),U[tt+2]=1,U.size=Math.abs(Ee),U.start=0,U.end=U.size}function Va(re,U,$,ie){for(var ue=0;ue<re.length;ue++){var be=[];Gr(re[ue],be,$,ie),U.push(be)}}function Os(re){return re/360+.5}function Bs(re){var U=Math.sin(re*Math.PI/180),$=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return $<0?0:$>1?1:$}function p1(re,U,$,ie,ue,be,Ee,De){if(ie/=U,be>=($/=U)&&Ee<ie)return re;if(Ee<$||be>=ie)return null;for(var we=[],ke=0;ke<re.length;ke++){var tt=re[ke],wt=tt.geometry,Je=tt.type,Lt=0===ue?tt.minX:tt.minY,Dt=0===ue?tt.maxX:tt.maxY;if(Lt>=$&&Dt<ie)we.push(tt);else if(!(Dt<$||Lt>=ie)){var It=[];if("Point"===Je||"MultiPoint"===Je)Sr(wt,It,$,ie,ue);else if("LineString"===Je)La(wt,It,$,ie,ue,!1,De.lineMetrics);else if("MultiLineString"===Je)Us(wt,It,$,ie,ue,!1);else if("Polygon"===Je)Us(wt,It,$,ie,ue,!0);else if("MultiPolygon"===Je)for(var Tt=0;Tt<wt.length;Tt++){var y1=[];Us(wt[Tt],y1,$,ie,ue,!0),y1.length&&It.push(y1)}if(It.length){if(De.lineMetrics&&"LineString"===Je){for(Tt=0;Tt<It.length;Tt++)we.push(Bi(tt.id,Je,It[Tt],tt.tags));continue}"LineString"!==Je&&"MultiLineString"!==Je||(1===It.length?(Je="LineString",It=It[0]):Je="MultiLineString"),"Point"!==Je&&"MultiPoint"!==Je||(Je=3===It.length?"Point":"MultiPoint"),we.push(Bi(tt.id,Je,It,tt.tags))}}}return we.length?we:null}function Sr(re,U,$,ie,ue){for(var be=0;be<re.length;be+=3){var Ee=re[be+ue];Ee>=$&&Ee<=ie&&(U.push(re[be]),U.push(re[be+1]),U.push(re[be+2]))}}function La(re,U,$,ie,ue,be,Ee){for(var De,we,ke=ho(re),tt=0===ue?ir:Wo,wt=re.start,Je=0;Je<re.length-3;Je+=3){var Lt=re[Je],Dt=re[Je+1],It=re[Je+2],Tt=re[Je+3],y1=re[Je+4],K1=0===ue?Lt:Dt,qt=0===ue?Tt:y1,tn=!1;Ee&&(De=Math.sqrt(Math.pow(Lt-Tt,2)+Math.pow(Dt-y1,2))),K1<$?qt>$&&(we=tt(ke,Lt,Dt,Tt,y1,$),Ee&&(ke.start=wt+De*we)):K1>ie?qt<ie&&(we=tt(ke,Lt,Dt,Tt,y1,ie),Ee&&(ke.start=wt+De*we)):js(ke,Lt,Dt,It),qt<$&&K1>=$&&(we=tt(ke,Lt,Dt,Tt,y1,$),tn=!0),qt>ie&&K1<=ie&&(we=tt(ke,Lt,Dt,Tt,y1,ie),tn=!0),!be&&tn&&(Ee&&(ke.end=wt+De*we),U.push(ke),ke=ho(re)),Ee&&(wt+=De)}var yn=re.length-3;Lt=re[yn],Dt=re[yn+1],It=re[yn+2],(K1=0===ue?Lt:Dt)>=$&&K1<=ie&&js(ke,Lt,Dt,It),yn=ke.length-3,be&&yn>=3&&(ke[yn]!==ke[0]||ke[yn+1]!==ke[1])&&js(ke,ke[0],ke[1],ke[2]),ke.length&&U.push(ke)}function ho(re){var U=[];return U.size=re.size,U.start=re.start,U.end=re.end,U}function Us(re,U,$,ie,ue,be){for(var Ee=0;Ee<re.length;Ee++)La(re[Ee],U,$,ie,ue,be,!1)}function js(re,U,$,ie){re.push(U),re.push($),re.push(ie)}function ir(re,U,$,ie,ue,be){var Ee=(be-U)/(ie-U);return re.push(be),re.push($+(ue-$)*Ee),re.push(1),Ee}function Wo(re,U,$,ie,ue,be){var Ee=(be-$)/(ue-$);return re.push(U+(ie-U)*Ee),re.push(be),re.push(1),Ee}function wc(re,U){for(var $=[],ie=0;ie<re.length;ie++){var ue,be=re[ie],Ee=be.type;if("Point"===Ee||"MultiPoint"===Ee||"LineString"===Ee)ue=Zo(be.geometry,U);else if("MultiLineString"===Ee||"Polygon"===Ee){ue=[];for(var De=0;De<be.geometry.length;De++)ue.push(Zo(be.geometry[De],U))}else if("MultiPolygon"===Ee)for(ue=[],De=0;De<be.geometry.length;De++){for(var we=[],ke=0;ke<be.geometry[De].length;ke++)we.push(Zo(be.geometry[De][ke],U));ue.push(we)}$.push(Bi(be.id,Ee,ue,be.tags))}return $}function Zo(re,U){var $=[];$.size=re.size,void 0!==re.start&&($.start=re.start,$.end=re.end);for(var ie=0;ie<re.length;ie+=3)$.push(re[ie]+U,re[ie+1],re[ie+2]);return $}function $r(re,U){if(re.transformed)return re;var $,ie,ue,be=1<<re.z,Ee=re.x,De=re.y;for($=0;$<re.features.length;$++){var we=re.features[$],ke=we.geometry,tt=we.type;if(we.geometry=[],1===tt)for(ie=0;ie<ke.length;ie+=2)we.geometry.push(Yo(ke[ie],ke[ie+1],U,be,Ee,De));else for(ie=0;ie<ke.length;ie++){var wt=[];for(ue=0;ue<ke[ie].length;ue+=2)wt.push(Yo(ke[ie][ue],ke[ie][ue+1],U,be,Ee,De));we.geometry.push(wt)}}return re.transformed=!0,re}function Yo(re,U,$,ie,ue,be){return[Math.round($*(re*ie-ue)),Math.round($*(U*ie-be))]}function Ta(re,U,$,ie,ue){for(var be=U===ue.maxZoom?0:ue.tolerance/((1<<U)*ue.extent),Ee={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:$,y:ie,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},De=0;De<re.length;De++){Ee.numFeatures++,Gs(Ee,re[De],be,ue);var we=re[De].minX,ke=re[De].minY,tt=re[De].maxX,wt=re[De].maxY;we<Ee.minX&&(Ee.minX=we),ke<Ee.minY&&(Ee.minY=ke),tt>Ee.maxX&&(Ee.maxX=tt),wt>Ee.maxY&&(Ee.maxY=wt)}return Ee}function Gs(re,U,$,ie){var ue=U.geometry,be=U.type,Ee=[];if("Point"===be||"MultiPoint"===be)for(var De=0;De<ue.length;De+=3)Ee.push(ue[De]),Ee.push(ue[De+1]),re.numPoints++,re.numSimplified++;else if("LineString"===be)po(Ee,ue,re,$,!1,!1);else if("MultiLineString"===be||"Polygon"===be)for(De=0;De<ue.length;De++)po(Ee,ue[De],re,$,"Polygon"===be,0===De);else if("MultiPolygon"===be)for(var we=0;we<ue.length;we++){var ke=ue[we];for(De=0;De<ke.length;De++)po(Ee,ke[De],re,$,!0,0===De)}if(Ee.length){var tt=U.tags||null;if("LineString"===be&&ie.lineMetrics){for(var wt in tt={},U.tags)tt[wt]=U.tags[wt];tt.mapbox_clip_start=ue.start/ue.size,tt.mapbox_clip_end=ue.end/ue.size}var Je={geometry:Ee,type:"Polygon"===be||"MultiPolygon"===be?3:"LineString"===be||"MultiLineString"===be?2:1,tags:tt};null!==U.id&&(Je.id=U.id),re.features.push(Je)}}function po(re,U,$,ie,ue,be){var Ee=ie*ie;if(ie>0&&U.size<(ue?Ee:ie))$.numPoints+=U.length/3;else{for(var De=[],we=0;we<U.length;we+=3)(0===ie||U[we+2]>Ee)&&($.numSimplified++,De.push(U[we]),De.push(U[we+1])),$.numPoints++;ue&&function(ke,tt){for(var wt=0,Je=0,Lt=ke.length,Dt=Lt-2;Je<Lt;Dt=Je,Je+=2)wt+=(ke[Je]-ke[Dt])*(ke[Je+1]+ke[Dt+1]);if(wt>0===tt)for(Je=0,Lt=ke.length;Je<Lt/2;Je+=2){var It=ke[Je],Tt=ke[Je+1];ke[Je]=ke[Lt-2-Je],ke[Je+1]=ke[Lt-1-Je],ke[Lt-2-Je]=It,ke[Lt-1-Je]=Tt}}(De,be),re.push(De)}}function rr(re,U){var $=(U=this.options=function(ue,be){for(var Ee in be)ue[Ee]=be[Ee];return ue}(Object.create(this.options),U)).debug;if($&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");var ue,be,Ee,De,we,ke,ie=function(ue,be){var Ee=[];if("FeatureCollection"===ue.type)for(var De=0;De<ue.features.length;De++)fo(Ee,ue.features[De],be,De);else fo(Ee,"Feature"===ue.type?ue:{geometry:ue},be);return Ee}(re,U);this.tiles={},this.tileCoords=[],$&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=ue=ie,we=p1(ue,1,-1-(Ee=(be=U).buffer/be.extent),Ee,0,-1,2,be),ke=p1(ue,1,1-Ee,2+Ee,0,-1,2,be),(we||ke)&&(De=p1(ue,1,-Ee,1+Ee,0,-1,2,be)||[],we&&(De=wc(we,1).concat(De)),ke&&(De=De.concat(wc(ke,-1)))),(ie=De).length&&this.splitTile(ie,0,0,0),$&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function bi(re,U,$){return 32*((1<<re)*$+U)+re}function Ha(re,U){const $=re.tileID.canonical;if(!this._geoJSONIndex)return U(null,null);const ie=this._geoJSONIndex.getTile($.z,$.x,$.y);if(!ie)return U(null,null);const ue=new sa(ie.features);let be=Fi(ue);0===be.byteOffset&&be.byteLength===be.buffer.byteLength||(be=new Uint8Array(be)),U(null,{vectorTile:ue,rawData:be.buffer})}rr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},rr.prototype.splitTile=function(re,U,$,ie,ue,be,Ee){for(var De=[re,U,$,ie],we=this.options,ke=we.debug;De.length;){ie=De.pop(),$=De.pop(),U=De.pop(),re=De.pop();var tt=1<<U,wt=bi(U,$,ie),Je=this.tiles[wt];if(!Je&&(ke>1&&console.time("creation"),Je=this.tiles[wt]=Ta(re,U,$,ie,we),this.tileCoords.push({z:U,x:$,y:ie}),ke)){ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,$,ie,Je.numFeatures,Je.numPoints,Je.numSimplified),console.timeEnd("creation"));var Lt="z"+U;this.stats[Lt]=(this.stats[Lt]||0)+1,this.total++}if(Je.source=re,ue){if(U===we.maxZoom||U===ue)continue;var Dt=1<<ue-U;if($!==Math.floor(be/Dt)||ie!==Math.floor(Ee/Dt))continue}else if(U===we.indexMaxZoom||Je.numPoints<=we.indexMaxPoints)continue;if(Je.source=null,0!==re.length){ke>1&&console.time("clipping");var It,Tt,y1,K1,qt,tn,yn=.5*we.buffer/we.extent,ua=.5-yn,qr=.5+yn,Ge=1+yn;It=Tt=y1=K1=null,qt=p1(re,tt,$-yn,$+qr,0,Je.minX,Je.maxX,we),tn=p1(re,tt,$+ua,$+Ge,0,Je.minX,Je.maxX,we),re=null,qt&&(It=p1(qt,tt,ie-yn,ie+qr,1,Je.minY,Je.maxY,we),Tt=p1(qt,tt,ie+ua,ie+Ge,1,Je.minY,Je.maxY,we),qt=null),tn&&(y1=p1(tn,tt,ie-yn,ie+qr,1,Je.minY,Je.maxY,we),K1=p1(tn,tt,ie+ua,ie+Ge,1,Je.minY,Je.maxY,we),tn=null),ke>1&&console.timeEnd("clipping"),De.push(It||[],U+1,2*$,2*ie),De.push(Tt||[],U+1,2*$,2*ie+1),De.push(y1||[],U+1,2*$+1,2*ie),De.push(K1||[],U+1,2*$+1,2*ie+1)}}},rr.prototype.getTile=function(re,U,$){var ie=this.options,ue=ie.extent,be=ie.debug;if(re<0||re>24)return null;var Ee=1<<re,De=bi(re,U=(U%Ee+Ee)%Ee,$);if(this.tiles[De])return $r(this.tiles[De],ue);be>1&&console.log("drilling down to z%d-%d-%d",re,U,$);for(var we,ke=re,tt=U,wt=$;!we&&ke>0;)ke--,tt=Math.floor(tt/2),wt=Math.floor(wt/2),we=this.tiles[bi(ke,tt,wt)];return we&&we.source?(be>1&&console.log("found parent tile z%d-%d-%d",ke,tt,wt),be>1&&console.time("drilling down"),this.splitTile(we.source,ke,tt,wt,re,U,$),be>1&&console.timeEnd("drilling down"),this.tiles[De]?$r(this.tiles[De],ue):null):null};class $s extends p.VectorTileWorkerSource{constructor(U,$,ie,ue,be){super(U,$,ie,ue,Ha),be&&(this.loadGeoJSON=be)}loadData(U,$){const ie=U&&U.request,ue=ie&&ie.collectResourceTiming;this.loadGeoJSON(U,(be,Ee)=>{if(be||!Ee)return $(be);if("object"!=typeof Ee)return $(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));{m1(Ee,!0);try{if(U.filter){const we=p.createExpression(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===we.result)throw new Error(we.value.map(tt=>`${tt.key}: ${tt.message}`).join(", "));Ee={type:"FeatureCollection",features:Ee.features.filter(tt=>we.value.evaluate({zoom:0},tt))}}this._geoJSONIndex=U.cluster?new s2(function({superclusterOptions:we,clusterProperties:ke}){if(!ke||!we)return we;const tt={},wt={},Je={accumulated:null,zoom:0},Lt={properties:null},Dt=Object.keys(ke);for(const It of Dt){const[Tt,y1]=ke[It],K1=p.createExpression(y1),qt=p.createExpression("string"==typeof Tt?[Tt,["accumulated"],["get",It]]:Tt);tt[It]=K1.value,wt[It]=qt.value}return we.map=It=>{Lt.properties=It;const Tt={};for(const y1 of Dt)Tt[y1]=tt[y1].evaluate(Je,Lt);return Tt},we.reduce=(It,Tt)=>{Lt.properties=Tt;for(const y1 of Dt)Je.accumulated=It[y1],It[y1]=wt[y1].evaluate(Je,Lt)},we}(U)).load(Ee.features):new rr(we=Ee,U.geojsonVtOptions)}catch(we){return $(we)}this.loaded={};const De={};if(ue){const we=p.getPerformanceMeasurement(ie);we&&(De.resourceTiming={},De.resourceTiming[U.source]=JSON.parse(JSON.stringify(we)))}$(null,De)}var we})}reloadTile(U,$){const ie=this.loaded;return ie&&ie[U.uid]?super.reloadTile(U,$):this.loadTile(U,$)}loadGeoJSON(U,$){if(U.request)p.getJSON(U.request,$);else{if("string"!=typeof U.data)return $(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));try{return $(null,JSON.parse(U.data))}catch{return $(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(U,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(ie){$(ie)}}getClusterChildren(U,$){try{$(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(ie){$(ie)}}getClusterLeaves(U,$){try{$(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(ie){$(ie)}}}class ka{constructor(U){this.self=U,this.actor=new p.Actor(U,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=p.getProjection({name:"mercator"}),this.workerSourceTypes={vector:p.VectorTileWorkerSource,geojson:$s},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=($,ie)=>{if(this.workerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.workerSourceTypes[$]=ie},this.self.registerRTLTextPlugin=$=>{if(p.plugin.isParsed())throw new Error("RTL text plugin already registered.");p.plugin.applyArabicShaping=$.applyArabicShaping,p.plugin.processBidirectionalText=$.processBidirectionalText,p.plugin.processStyledBidirectionalText=$.processStyledBidirectionalText}}clearCaches(U,$,ie){delete this.layerIndexes[U],delete this.availableImages[U],delete this.workerSources[U],delete this.demWorkerSources[U],ie()}checkIfReady(U,$,ie){ie()}setReferrer(U,$){this.referrer=$}spriteLoaded(U,$){this.isSpriteLoaded[U]=$;for(const ie in this.workerSources[U]){const ue=this.workerSources[U][ie];for(const be in ue)ue[be]instanceof p.VectorTileWorkerSource&&(ue[be].isSpriteLoaded=$,ue[be].fire(new p.Event("isSpriteLoaded")))}}setImages(U,$,ie){this.availableImages[U]=$;for(const ue in this.workerSources[U]){const be=this.workerSources[U][ue];for(const Ee in be)be[Ee].availableImages=$}ie()}enableTerrain(U,$,ie){this.terrain=$,ie()}setProjection(U,$){this.projections[U]=p.getProjection($)}setLayers(U,$,ie){this.getLayerIndex(U).replace($),ie()}updateLayers(U,$,ie){this.getLayerIndex(U).update($.layers,$.removedIds),ie()}loadTile(U,$,ie){const ue=this.enableTerrain?p.extend({enableTerrain:this.terrain},$):$;ue.projection=this.projections[U]||this.defaultProjection,this.getWorkerSource(U,$.type,$.source).loadTile(ue,ie)}loadDEMTile(U,$,ie){const ue=this.enableTerrain?p.extend({buildQuadTree:this.terrain},$):$;this.getDEMWorkerSource(U,$.source).loadTile(ue,ie)}reloadTile(U,$,ie){const ue=this.enableTerrain?p.extend({enableTerrain:this.terrain},$):$;ue.projection=this.projections[U]||this.defaultProjection,this.getWorkerSource(U,$.type,$.source).reloadTile(ue,ie)}abortTile(U,$,ie){this.getWorkerSource(U,$.type,$.source).abortTile($,ie)}removeTile(U,$,ie){this.getWorkerSource(U,$.type,$.source).removeTile($,ie)}removeSource(U,$,ie){if(!this.workerSources[U]||!this.workerSources[U][$.type]||!this.workerSources[U][$.type][$.source])return;const ue=this.workerSources[U][$.type][$.source];delete this.workerSources[U][$.type][$.source],void 0!==ue.removeSource?ue.removeSource($,ie):ie()}loadWorkerSource(U,$,ie){try{this.self.importScripts($.url),ie()}catch(ue){ie(ue.toString())}}syncRTLPluginState(U,$,ie){try{p.plugin.setState($);const ue=p.plugin.getPluginURL();if(p.plugin.isLoaded()&&!p.plugin.isParsed()&&null!=ue){this.self.importScripts(ue);const be=p.plugin.isParsed();ie(be?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ue}`),be)}}catch(ue){ie(ue.toString())}}getAvailableImages(U){let $=this.availableImages[U];return $||($=[]),$}getLayerIndex(U){let $=this.layerIndexes[U];return $||($=this.layerIndexes[U]=new Gn),$}getWorkerSource(U,$,ie){return this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][$]||(this.workerSources[U][$]={}),this.workerSources[U][$][ie]||(this.workerSources[U][$][ie]=new this.workerSourceTypes[$]({send:(be,Ee,De,we,ke,tt)=>{this.actor.send(be,Ee,De,U,ke,tt)},scheduler:this.actor.scheduler},this.getLayerIndex(U),this.getAvailableImages(U),this.isSpriteLoaded[U])),this.workerSources[U][$][ie]}getDEMWorkerSource(U,$){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][$]||(this.demWorkerSources[U][$]=new a1),this.demWorkerSources[U][$]}enforceCacheSizeLimit(U,$){p.enforceCacheSizeLimit($)}getWorkerPerformanceMetrics(U,$,ie){ie(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ka(self)),ka}),Ke(0,function(p){function Ze(m,l){if(Array.isArray(m)){if(!Array.isArray(l)||m.length!==l.length)return!1;for(let f=0;f<m.length;f++)if(!Ze(m[f],l[f]))return!1;return!0}if("object"==typeof m&&null!==m&&null!==l){if("object"!=typeof l||Object.keys(m).length!==Object.keys(l).length)return!1;for(const f in m)if(!Ze(m[f],l[f]))return!1;return!0}return m===l}var Qi=Gn;function Gn(m){return l=m,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,x,w=new Blob([""],{type:"text/javascript"}),D=URL.createObjectURL(w);try{x=new Worker(D),_=!0}catch{_=!1}return x&&x.terminate(),URL.revokeObjectURL(D),_}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var _=document.createElement("canvas");_.width=_.height=1;var x=_.getContext("2d");if(!x)return!1;var w=x.getImageData(0,0,1,1);return w&&w.width===_.width}()||(void 0===a1[f=l&&l.failIfMajorPerformanceCaveat]&&(a1[f]=function(_){var x,D,A,L,w=(D=_,A=document.createElement("canvas"),(L=Object.create(Gn.webGLContextAttributes)).failIfMajorPerformanceCaveat=D,A.getContext("webgl",L)||A.getContext("experimental-webgl",L));if(!w)return!1;try{x=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!x||w.isContextLost())&&(w.shaderSource(x,"void main() {}"),w.compileShader(x),!0===w.getShaderParameter(x,w.COMPILE_STATUS))}(f)),!a1[f]||document.documentMode));var l,f}var a1={};function m1(m,l,f){const _=p.window.document.createElement(m);return void 0!==l&&(_.className=l),f&&f.appendChild(_),_}function h2(m,l,f){const _=p.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const x of Object.keys(l))_.setAttributeNS(null,x,l[x]);return f&&f.appendChild(_),_}Gn.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const $2=p.window.document&&p.window.document.documentElement.style,yi=$2&&void 0!==$2.userSelect?"userSelect":"WebkitUserSelect";let lo;function sa(){$2&&yi&&(lo=$2[yi],$2[yi]="none")}function Fi(){$2&&yi&&($2[yi]=lo)}function qn(m){m.preventDefault(),m.stopPropagation(),p.window.removeEventListener("click",qn,!0)}function q2(){p.window.addEventListener("click",qn,!0),p.window.setTimeout(()=>{p.window.removeEventListener("click",qn,!0)},0)}function ht(m,l){const f=m.getBoundingClientRect();return uo(m,f,l)}function U1(m,l){const f=m.getBoundingClientRect(),_=[];for(let x=0;x<l.length;x++)_.push(uo(m,f,l[x]));return _}function br(m){return void 0!==p.window.InstallTrigger&&2===m.button&&m.ctrlKey&&p.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function uo(m,l,f){const _=m.offsetWidth===l.width?1:m.offsetWidth/l.width;return new p.pointGeometry((f.clientX-l.left)*_,(f.clientY-l.top)*_)}function I1(m,l){var f=l[0],_=l[1],x=l[2],w=l[3],D=f*w-x*_;return D?(m[0]=w*(D=1/D),m[1]=-_*D,m[2]=-x*D,m[3]=f*D,m):null}function o2(m){const{userImage:l}=m;return!!(l&&l.render&&l.render())&&(m.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ur extends p.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new p.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:f,callback:_}of this.requestors)this._notify(f,_);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,f){this._validate(l,f)&&(this.images[l]=f)}_validate(l,f){let _=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new p.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),_=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new p.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),_=!1),this._validateContent(f.content,f)||(this.fire(new p.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),_=!1),_}_validateStretch(l,f){if(!l)return!0;let _=0;for(const x of l){if(x[0]<_||x[1]<x[0]||f<x[1])return!1;_=x[1]}return!0}_validateContent(l,f){return!(l&&(4!==l.length||l[0]<0||f.data.width<l[0]||l[1]<0||f.data.height<l[1]||l[2]<0||f.data.width<l[2]||l[3]<0||f.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,f){f.version=this.images[l].version+1,this.images[l]=f,this.updatedImages[l]=!0}removeImage(l){const f=this.images[l];delete this.images[l],delete this.patterns[l],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,f){let _=!0;if(!this.isLoaded())for(const x of l)this.images[x]||(_=!1);this.isLoaded()||_?this._notify(l,f):this.requestors.push({ids:l,callback:f})}_notify(l,f){const _={};for(const x of l){this.images[x]||this.fire(new p.Event("styleimagemissing",{id:x}));const w=this.images[x];w?_[x]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:Boolean(w.userImage&&w.userImage.render)}:p.warnOnce(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,_)}getPixelSize(){const{width:l,height:f}=this.atlasImage;return{width:l,height:f}}getPattern(l){const f=this.patterns[l],_=this.getImage(l);if(!_)return null;if(f&&f.position.version===_.version)return f.position;if(f)f.position.version=_.version;else{const x={w:_.data.width+2,h:_.data.height+2,x:0,y:0},w=new p.ImagePosition(x,_);this.patterns[l]={bin:x,position:w}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const f=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new p.Texture(l,this.atlasImage,f.RGBA),this.atlasTexture&&this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const w in this.patterns)l.push(this.patterns[w].bin);const{w:f,h:_}=p.potpack(l),x=this.atlasImage;x.resize({width:f||1,height:_||1});for(const w in this.patterns){const{bin:D}=this.patterns[w],A=D.x+1,L=D.y+1,P=this.images[w].data,R=P.width,B=P.height;p.RGBAImage.copy(P,x,{x:0,y:0},{x:A,y:L},{width:R,height:B}),p.RGBAImage.copy(P,x,{x:0,y:B-1},{x:A,y:L-1},{width:R,height:1}),p.RGBAImage.copy(P,x,{x:0,y:0},{x:A,y:L+B},{width:R,height:1}),p.RGBAImage.copy(P,x,{x:R-1,y:0},{x:A-1,y:L},{width:1,height:B}),p.RGBAImage.copy(P,x,{x:0,y:0},{x:A+R,y:L},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const f of l){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const _=this.images[f];o2(_)&&this.updateImage(f,_)}}}const ca=new p.Properties({anchor:new p.DataConstantProperty(p.spec.light.anchor),position:new class{constructor(){this.specification=p.spec.light.position}possiblyEvaluate(m,l){return function([f,_,x]){const w=p.degToRad(_+90),D=p.degToRad(x);return{x:f*Math.cos(w)*Math.sin(D),y:f*Math.sin(w)*Math.sin(D),z:f*Math.cos(D),azimuthal:_,polar:x}}(m.expression.evaluate(l))}interpolate(m,l,f){return{x:p.number(m.x,l.x,f),y:p.number(m.y,l.y,f),z:p.number(m.z,l.z,f),azimuthal:p.number(m.azimuthal,l.azimuthal,f),polar:p.number(m.polar,l.polar,f)}}},color:new p.DataConstantProperty(p.spec.light.color),intensity:new p.DataConstantProperty(p.spec.light.intensity)}),Aa="-transition";class ii extends p.Evented{constructor(l){super(),this._transitionable=new p.Transitionable(ca),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,f={}){if(!this._validate(p.validateLight,l,f))for(const _ in l){const x=l[_];p.endsWith(_,Aa)?this._transitionable.setTransition(_.slice(0,-Aa.length),x):this._transitionable.setValue(_,x)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,_){return(!_||!1!==_.validate)&&p.emitValidationErrors(this,l.call(p.validateStyle,p.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}const d1=new p.Properties({source:new p.DataConstantProperty(p.spec.terrain.source),exaggeration:new p.DataConstantProperty(p.spec.terrain.exaggeration)}),ri="-transition";class xi extends p.Evented{constructor(l,f){super(),this._transitionable=new p.Transitionable(d1),this.set(l),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(l){for(const f in l){const _=l[f];p.endsWith(f,ri)?this._transitionable.setTransition(f.slice(0,-ri.length),_):this._transitionable.setValue(f,_)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}}function Cr(m,l,f,_){const x=p.smoothstep(45,65,f),[w,D]=Ni(m,_),A=p.length(l);let L=1-Math.min(1,Math.exp((A-w)/(D-w)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*x*m.alpha}function Ni(m,l){const f=.5/Math.tan(.5*l);return[m.range[0]+f,m.range[1]+f]}const l1=new p.Properties({range:new p.DataConstantProperty(p.spec.fog.range),color:new p.DataConstantProperty(p.spec.fog.color),"high-color":new p.DataConstantProperty(p.spec.fog["high-color"]),"space-color":new p.DataConstantProperty(p.spec.fog["space-color"]),"horizon-blend":new p.DataConstantProperty(p.spec.fog["horizon-blend"]),"star-intensity":new p.DataConstantProperty(p.spec.fog["star-intensity"])}),Ji="-transition";class Ea extends p.Evented{constructor(l,f){super(),this._transitionable=new p.Transitionable(l1),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const l=this._transform,f="globe"===l.projection.name,_=p.globeToMercatorTransition(l.zoom),x=this.properties.get("range"),w=[.5,3];return{range:f?[p.number(w[0],x[0],_),p.number(w[1],x[1],_)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,f={}){if(!this._validate(p.validateFog,l,f)){for(const _ of Object.keys(p.spec.fog))l&&void 0===l[_]&&(l[_]=p.spec.fog[_].default);for(const _ in l){const x=l[_];p.endsWith(_,Ji)?this._transitionable.setTransition(_.slice(0,-Ji.length),x):this._transitionable.setValue(_,x)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:p.smoothstep(45,65,l))*f.a}getOpacityAtLatLng(l,f){return this._transform.projection.supportsFog?function(_,x,w){const D=p.MercatorCoordinate.fromLngLat(x),A=w.elevation?w.elevation.getAtPointOrZero(D):0,L=[D.x,D.y,A];return p.transformMat4(L,L,w.mercatorFogMatrix),Cr(_,L,w.pitch,w._fov)}(this.state,l,f):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Ni(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,_){return(!_||!1!==_.validate)&&p.emitValidationErrors(this,l.call(p.validateStyle,p.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}class jr{constructor(l,f){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p.uniqueId();const _=this.workerPool.acquire(this.id);for(let x=0;x<_.length;x++){const w=new jr.Actor(_[x],f,this.id);w.name=`Worker ${x}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,f,_){p.asyncAll(this.actors,(x,w)=>{x.send(l,f,w)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function er(m,l,f){return l*(p.EXTENT/(m.tileSize*Math.pow(2,f-m.tileID.overscaledZ)))}jr.Actor=p.Actor;class Qt{constructor(l,f,_,x){this.screenBounds=l,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(l,f){let _,x;if(l instanceof p.pointGeometry||"number"==typeof l[0]){const w=p.pointGeometry.convert(l);_=[w],x=f.isPointAboveHorizon(w)}else{const w=p.pointGeometry.convert(l[0]),D=p.pointGeometry.convert(l[1]);_=[w,D],x=p.polygonizeBounds(w,D).every(A=>f.isPointAboveHorizon(A))}return new Qt(_,f.getCameraPoint(),x,f)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(l){return p.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const f=this.screenBounds[0],_=1===this.screenBounds.length?this.screenBounds[0].add(new p.pointGeometry(1,1)):this.screenBounds[1],x=p.polygonizeBounds(f,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<_.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?x[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(x[3]=this.cameraPoint)),p.bufferConvexPolygon(x,l)}bufferedCameraGeometryGlobe(l){const f=this.screenBounds[0],_=1===this.screenBounds.length?this.screenBounds[0].add(new p.pointGeometry(1,1)):this.screenBounds[1],x=p.polygonizeBounds(f,_,l),w=this.cameraPoint.clone();switch(3*((w.y>f.y)+(w.y>_.y))+((w.x>f.x)+(w.x>_.x))){case 0:x[0]=w,x[4]=w.clone();break;case 1:x.splice(1,0,w);break;case 2:x[1]=w;break;case 3:x.splice(4,0,w);break;case 5:x.splice(2,0,w);break;case 6:x[3]=w;break;case 7:x.splice(3,0,w);break;case 8:x[2]=w}return x}containsTile(l,f,_,x=0){const w=l.queryPadding/f._pixelsPerMercatorPixel+1,D=_?this._bufferedCameraMercator(w,f):this._bufferedScreenMercator(w,f);let A=l.tileID.wrap+(D.unwrapped?x:0);const L=D.polygon.map(ee=>p.getTilePoint(l.tileTransform,ee,A));if(!p.polygonIntersectsBox(L,0,0,p.EXTENT,p.EXTENT))return;A=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const P=this.screenGeometryMercator.polygon.map(ee=>p.getTileVec3(l.tileTransform,ee,A)),R=P.map(ee=>new p.pointGeometry(ee[0],ee[1])),B=f.getFreeCameraOptions().position||new p.MercatorCoordinate(0,0,0),Y=p.getTileVec3(l.tileTransform,B,A),Q=P.map(ee=>{const q=p.sub(ee,ee,Y);return p.normalize(q,q),new p.Ray(Y,q)}),te=er(l,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:R,tilespaceRays:Q,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(J=p.getBounds(L),J.min.x=p.clamp(J.min.x,0,p.EXTENT),J.min.y=p.clamp(J.min.y,0,p.EXTENT),J.max.x=p.clamp(J.max.x,0,p.EXTENT),J.max.y=p.clamp(J.max.y,0,p.EXTENT),J),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:te};var J}_bufferedScreenMercator(l,f){const _=rn(l);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let x;return x="globe"===f.projection.name?this._projectAndResample(this.bufferedScreenGeometry(l),f):{polygon:this.bufferedScreenGeometry(l).map(w=>f.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[_]=x,x}}_bufferedCameraMercator(l,f){const _=rn(l);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let x;return x="globe"===f.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),f):{polygon:this.bufferedCameraGeometry(l).map(w=>f.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[_]=x,x}}_projectAndResample(l,f){const _=function(w,D){const A=p.multiply([],D.pixelMatrix,D.globeMatrix),L=[0,-p.GLOBE_RADIUS,0,1],P=[0,p.GLOBE_RADIUS,0,1],R=[0,0,0,1];p.transformMat4$1(L,L,A),p.transformMat4$1(P,P,A),p.transformMat4$1(R,R,A);const B=new p.pointGeometry(L[0]/L[3],L[1]/L[3]),Y=new p.pointGeometry(P[0]/P[3],P[1]/P[3]),Q=p.polygonContainsPoint(w,B)&&L[3]<R[3],te=p.polygonContainsPoint(w,Y)&&P[3]<R[3];if(!Q&&!te)return null;const J=function(Ce,Se,Ie){for(let Pe=1;Pe<Ce.length;Pe++){const mt=wr(Se.pointCoordinate3D(Ce[Pe-1]).x),Le=wr(Se.pointCoordinate3D(Ce[Pe]).x);if(Ie<0){if(mt<Le)return{idx:Pe,t:-mt/(Le-1-mt)}}else if(Le<mt)return{idx:Pe,t:(1-mt)/(Le+1-mt)}}return null}(w,D,Q?-1:1);if(!J)return null;const{idx:ee,t:q}=J;let oe=ee>1?tr(w.slice(0,ee),D):[],se=ee<w.length?tr(w.slice(ee),D):[];oe=oe.map(Ce=>new p.pointGeometry(wr(Ce.x),Ce.y)),se=se.map(Ce=>new p.pointGeometry(wr(Ce.x),Ce.y));const ce=[...oe];0===ce.length&&ce.push(se[se.length-1]);const ye=p.number(ce[ce.length-1].y,(0===se.length?oe[0]:se[0]).y,q);let ve;return ve=Q?[new p.pointGeometry(0,ye),new p.pointGeometry(0,0),new p.pointGeometry(1,0),new p.pointGeometry(1,ye)]:[new p.pointGeometry(1,ye),new p.pointGeometry(1,1),new p.pointGeometry(0,1),new p.pointGeometry(0,ye)],ce.push(...ve),0===se.length?ce.push(oe[0]):ce.push(...se),{polygon:ce.map(Ce=>new p.MercatorCoordinate(Ce.x,Ce.y)),unwrapped:!1}}(l,f);if(_)return _;const x=function(w,D){let A=!1,L=-1/0,P=0;for(let B=0;B<w.length-1;B++)w[B].x>L&&(L=w[B].x,P=B);for(let B=0;B<w.length-1;B++){const Y=(P+B)%(w.length-1),Q=w[Y],te=w[Y+1];Math.abs(Q.x-te.x)>.5&&(Q.x<te.x?(Q.x+=1,0===Y&&(w[w.length-1].x+=1)):(te.x+=1,Y+1===w.length-1&&(w[0].x+=1)),A=!0)}const R=p.mercatorXfromLng(D.center.lng);return A&&R<Math.abs(R-1)&&w.forEach(B=>{B.x-=1}),{polygon:w,unwrapped:A}}(tr(l,f).map(w=>new p.pointGeometry(wr(w.x),w.y)),f);return{polygon:x.polygon.map(w=>new p.MercatorCoordinate(w.x,w.y)),unwrapped:x.unwrapped}}}function tr(m,l){return p.resample(m,f=>{const _=l.pointCoordinate3D(f);f.x=_.x,f.y=_.y},1/256)}function wr(m){return m<0?1+m%1:m%1}function rn(m){return 100*m|0}function R1(m,l,f,_,x){const w=function(D,A){if(D)return x(D);if(A){m.url&&A.tiles&&m.tiles&&delete m.tiles;const L=p.pick(p.extend(A,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);A.vector_layers&&(L.vectorLayers=A.vector_layers,L.vectorLayerIds=L.vectorLayers.map(P=>P.id)),L.tiles=l.canonicalizeTileset(L,m.url),x(null,L)}};return m.url?p.getJSON(l.transformRequest(l.normalizeSourceURL(m.url,null,f,_),p.ResourceType.Source),w):p.exported.frame(()=>w(null,m))}class s2{constructor(l,f,_){this.bounds=p.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=f||0,this.maxzoom=_||24}validateBounds(l){return Array.isArray(l)&&4===l.length?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const f=Math.pow(2,l.z),_=Math.floor(p.mercatorXfromLng(this.bounds.getWest())*f),x=Math.floor(p.mercatorYfromLat(this.bounds.getNorth())*f),w=Math.ceil(p.mercatorXfromLng(this.bounds.getEast())*f),D=Math.ceil(p.mercatorYfromLat(this.bounds.getSouth())*f);return l.x>=_&&l.x<w&&l.y>=x&&l.y<D}}class h1{constructor(l,f,_){this.context=l;const x=l.gl;this.buffer=x.createBuffer(),this.dynamicDraw=Boolean(_),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const en={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class nr{constructor(l,f,_,x){this.length=f.length,this.attributes=_,this.itemSize=f.bytesPerElement,this.dynamicDraw=x,this.context=l;const w=l.gl;this.buffer=w.createBuffer(),l.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,f){for(let _=0;_<this.attributes.length;_++){const x=f.attributes[this.attributes[_].name];void 0!==x&&l.enableVertexAttribArray(x)}}setVertexAttribPointers(l,f,_){for(let x=0;x<this.attributes.length;x++){const w=this.attributes[x],D=f.attributes[w.name];void 0!==D&&l.vertexAttribPointer(D,w.components,l[en[w.type]],!1,this.itemSize,w.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class X1{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Mr extends X1{getDefault(){return p.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class j1 extends X1{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Oi extends X1{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class ai extends X1{getDefault(){return[!0,!0,!0,!0]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class la extends X1{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Qn extends X1{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class d2 extends X1{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const f=this.current;(l.func!==f.func||l.ref!==f.ref||l.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class zr extends X1{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Bi extends X1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=l,this.dirty=!1}}class T2 extends X1{getDefault(){return[0,1]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class fo extends X1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=l,this.dirty=!1}}class Ns extends X1{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Gr extends X1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.BLEND):f.disable(f.BLEND),this.current=l,this.dirty=!1}}class Va extends X1{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Os extends X1{getDefault(){return p.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Bs extends X1{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class p1 extends X1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=l,this.dirty=!1}}class Sr extends X1{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class La extends X1{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class ho extends X1{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Us extends X1{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class js extends X1{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class ir extends X1{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Wo extends X1{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class wc extends X1{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Zo extends X1{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class $r extends X1{getDefault(){return null}set(l){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Yo extends X1{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class Ta extends X1{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Gs extends X1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class po extends X1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class rr extends X1{constructor(l,f){super(l),this.context=l,this.parent=f}getDefault(){return null}}class bi extends rr{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ha extends rr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class $s extends Ha{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ka{constructor(l,f,_,x){this.context=l,this.width=f,this.height=_;const w=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new bi(l,w),x&&(this.depthAttachment=new Ha(l,w))}destroy(){const l=this.context.gl,f=this.colorAttachment.get();if(f&&l.deleteTexture(f),this.depthAttachment){const _=this.depthAttachment.get();_&&l.deleteRenderbuffer(_)}l.deleteFramebuffer(this.framebuffer)}}class re{constructor(l,f=!1){if(this.gl=l,this.isWebGL2=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),f){const _=l;this.extVertexArrayObject={createVertexArrayOES:_.createVertexArray.bind(l),deleteVertexArrayOES:_.deleteVertexArray.bind(l),bindVertexArrayOES:_.bindVertexArray.bind(l)}}this.clearColor=new Mr(this),this.clearDepth=new j1(this),this.clearStencil=new Oi(this),this.colorMask=new ai(this),this.depthMask=new la(this),this.stencilMask=new Qn(this),this.stencilFunc=new d2(this),this.stencilOp=new zr(this),this.stencilTest=new Bi(this),this.depthRange=new T2(this),this.depthTest=new fo(this),this.depthFunc=new Ns(this),this.blend=new Gr(this),this.blendFunc=new Va(this),this.blendColor=new Os(this),this.blendEquation=new Bs(this),this.cullFace=new p1(this),this.cullFaceSide=new Sr(this),this.frontFace=new La(this),this.program=new ho(this),this.activeTexture=new Us(this),this.viewport=new js(this),this.bindFramebuffer=new ir(this),this.bindRenderbuffer=new Wo(this),this.bindTexture=new wc(this),this.bindVertexBuffer=new Zo(this),this.bindElementBuffer=new $r(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Yo(this),this.pixelStoreUnpack=new Ta(this),this.pixelStoreUnpackPremultiplyAlpha=new Gs(this),this.pixelStoreUnpackFlipY=new po(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),f||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(f||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=f||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,f){return new h1(this,l,f)}createVertexBuffer(l,f,_){return new nr(this,l,f,_)}createRenderbuffer(l,f,_){const x=this.gl,w=x.createRenderbuffer();return this.bindRenderbuffer.set(w),x.renderbufferStorage(x.RENDERBUFFER,l,f,_),this.bindRenderbuffer.set(null),w}createFramebuffer(l,f,_){return new ka(this,l,f,_)}clear({color:l,depth:f,stencil:_}){const x=this.gl;let w=0;l&&(w|=x.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),void 0!==f&&(w|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),void 0!==_&&(w|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),x.clear(w)}setCullFace(l){!1===l.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){Ze(l.blendFunction,p.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class U extends p.Evented{constructor(l,f,_,x){if(super(),this.id=l,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,p.extend(this,p.pick(f,["url","scheme","tileSize","promoteId"])),this._options=p.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new p.DedupedRequest}load(l){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=R1(this._options,this.map._requestManager,f,_,(x,w)=>{this._tileJSONRequest=null,this._loaded=!0,x?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),_&&2!==_.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new p.ErrorEvent(x))):w&&(p.extend(this,w),w.bounds&&(this.tileBounds=new s2(w.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(x)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return p.extend({},this._options)}loadTile(l,f){const _=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(_,p.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(x.request.collectResourceTiming=this._collectResourceTiming,l.actor&&"expired"!==l.state)"loading"===l.state?l.reloadCallback=f:l.request=l.actor.send("reloadTile",x,w.bind(this));else if(l.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",x,w.bind(this),void 0,!0);else{const D=p.loadVectorTile.call({deduped:this._deduped},x,(A,L)=>{A||!L?w.call(this,A):(x.data={cacheControl:L.cacheControl,expires:L.expires,rawData:L.rawData.slice(0)},l.actor&&l.actor.send("loadTile",x,w.bind(this),void 0,!0))},!0);l.request={cancel:D}}function w(D,A){return delete l.request,l.aborted?f(null):D&&404!==D.status?f(D):(A&&A.resourceTiming&&(l.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&l.setExpiryData(A),l.loadVectorData(A,this.map.painter),p.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class $ extends p.Evented{constructor(l,f,_,x){super(),this.id=l,this.dispatcher=_,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=p.extend({type:"raster"},f),p.extend(this,p.pick(f,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=R1(this._options,this.map._requestManager,null,null,(f,_)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new p.ErrorEvent(f)):_&&(p.extend(this,_),_.bounds&&(this.tileBounds=new s2(_.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(_.tiles),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(f)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return p.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,f){const _=p.exported.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);l.request=p.getImage(this.map._requestManager.transformRequest(x,p.ResourceType.Tile),(w,D,A,L)=>(delete l.request,l.aborted?(l.state="unloaded",f(null)):w?(l.state="errored",f(w)):D?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:A,expires:L}),l.setTexture(D,this.map.painter),l.state="loaded",p.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(l,f,_){l.setTexture(f,_)}static unloadTileData(l,f){l.texture&&f.saveTileTexture(l.texture)}abortTile(l,f){l.request&&(l.request.cancel(),delete l.request),f()}unloadTile(l,f){l.texture&&this.map.painter.saveTileTexture(l.texture),f()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let ie;function ue(m,l,f,_,x,w,D,A){const L=[m,f,x,l,_,w,1,1,1],P=[D,A,1],R=p.adjoint([],L),[B,Y,Q]=p.transformMat3(P,P,p.transpose(R,R));return p.multiply$1(L,[B,0,0,0,Y,0,0,0,Q],L)}class be extends p.Evented{constructor(l,f,_,x){super(),this.id=l,this.dispatcher=_,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=f,this._dirty=!1}load(l,f){this._loaded=f||!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=p.getImage(this.map._requestManager.transformRequest(this.url,p.ResourceType.Image),(_,x)=>{if(this._imageRequest=null,this._loaded=!0,_)this.fire(new p.ErrorEvent(_));else if(x){const{HTMLImageElement:w}=p.window;this.image=x instanceof w?p.exported.getImageData(x):x,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const f=l.map(p.MercatorCoordinate.fromLngLat);return this.tileID=function(_){let x=1/0,w=1/0,D=-1/0,A=-1/0;for(const B of _)x=Math.min(x,B.x),w=Math.min(w,B.y),D=Math.max(D,B.x),A=Math.max(A,B.y);const L=Math.max(D-x,A-w),P=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),R=Math.pow(2,P);return new p.CanonicalTileID(P,Math.floor((x+D)/2*R),Math.floor((w+A)/2*R))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const L in this.tiles){const P=this.tiles[L];"loaded"!==P.state&&(P.state="loaded",P.texture=this.texture)}if(this._boundsArray)return;const f=p.tileTransform(this.tileID,this.map.transform.projection),[_,x,w,D]=this.coordinates.map(L=>{const P=f.projection.project(L[0],L[1]);return p.getTilePoint(f,P)._round()});this.perspectiveTransform=function(L,P,R,B,Y,Q,te,J,ee,q){const oe=ue(0,0,L,0,0,P,L,P),se=ue(R,B,Y,Q,te,J,ee,q);return p.multiply$1(se,p.adjoint(oe,oe),se),[se[6]/se[8]*L/p.EXTENT,se[7]/se[8]*P/p.EXTENT]}(this.width,this.height,_.x,_.y,x.x,x.y,D.x,D.y,w.x,w.y);const A=this._boundsArray=new p.StructArrayLayout4i8;A.emplaceBack(_.x,_.y,0,0),A.emplaceBack(x.x,x.y,p.EXTENT,0),A.emplaceBack(D.x,D.y,0,p.EXTENT),A.emplaceBack(w.x,w.y,p.EXTENT,p.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(A,p.boundsAttributes.members),this.boundsSegments=p.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const l=this.map.painter.context,f=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new p.Texture(l,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,f){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},f(null)):(l.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ee={vector:U,raster:$,"raster-dem":class extends ${constructor(m,l,f,_){super(m,l,f,_),this.type="raster-dem",this.maxzoom=22,this._options=p.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(m,l){const f=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(x,w){x&&(m.state="errored",l(x)),w&&(m.dem=w,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",l(null))}m.request=p.getImage(this.map._requestManager.transformRequest(f,p.ResourceType.Tile),function(x,w,D,A){if(delete m.request,m.aborted)m.state="unloaded",l(null);else if(x)m.state="errored",l(x);else if(w){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:D,expires:A});const L=p.window.ImageBitmap&&w instanceof p.window.ImageBitmap&&(null==ie&&(ie=p.window.OffscreenCanvas&&new p.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof p.window.createImageBitmap),ie),P=1-(w.width-p.prevPowerOfTwo(w.width))/2;P<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const R=L?w:p.exported.getImageData(w,P),B={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:R,encoding:this.encoding,padding:P};m.actor&&"expired"!==m.state||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",B,_.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(m){const l=m.canonical,f=Math.pow(2,l.z),_=(l.x-1+f)%f,x=0===l.x?m.wrap-1:m.wrap,w=(l.x+1+f)%f,D=l.x+1===f?m.wrap+1:m.wrap,A={};return A[new p.OverscaledTileID(m.overscaledZ,x,l.z,_,l.y).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,D,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(A[new p.OverscaledTileID(m.overscaledZ,x,l.z,_,l.y-1).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,D,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<f&&(A[new p.OverscaledTileID(m.overscaledZ,x,l.z,_,l.y+1).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,D,l.z,w,l.y+1).key]={backfilled:!1}),A}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends p.Evented{constructor(m,l,f,_){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(_),this._data=l.data,this._options=p.extend({},l),this._collectResourceTiming=l.collectResourceTiming,void 0!==l.maxzoom&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const x=p.EXTENT/this.tileSize;this.workerOptions=p.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(void 0!==l.buffer?l.buffer:128)*x,tolerance:(void 0!==l.tolerance?l.tolerance:.375)*x,extent:p.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:void 0!==l.clusterMaxZoom?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:p.EXTENT,radius:(void 0!==l.clusterRadius?l.clusterRadius:50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},l),this}getClusterChildren(m,l){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},l),this}getClusterLeaves(m,l,f,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:l,offset:f},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new p.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=p.extend({},this.workerOptions),l=this._data;"string"==typeof l?(m.request=this.map._requestManager.transformRequest(p.exported.resolveURL(l),p.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(f,_)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new p.ErrorEvent(f));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(x.resourceTiming=_.resourceTiming[this.id]),this.fire(new p.Event("data",x)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,l){const f=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(f,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(_,x)=>(delete m.request,m.unloadVectorData(),m.aborted?l(null):_?l(_):(m.loadVectorData(x,this.map.painter,"reloadTile"===f),l(null))),void 0,"loadTile"===f)}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return p.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends be{constructor(m,l,f,_){super(m,l,f,_),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const l of m.urls)this.urls.push(this.map._requestManager.transformRequest(l,p.ResourceType.Source).url);p.getVideo(this.urls,(l,f)=>{this._loaded=!0,l?this.fire(new p.ErrorEvent(l)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const l=this.video.seekable;m<l.start(0)||m>l.end(0)?this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const m=this.map.painter.context,l=m.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new p.Texture(m,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:be,canvas:class extends be{constructor(m,l,f,_){super(m,l,f,_),l.coordinates?Array.isArray(l.coordinates)&&4===l.coordinates.length&&!l.coordinates.some(x=>!Array.isArray(x)||2!==x.length||x.some(w=>"number"!=typeof w))||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),l.animate&&"boolean"!=typeof l.animate&&this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),l.canvas?"string"==typeof l.canvas||l.canvas instanceof p.window.HTMLCanvasElement||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=l,this.animate=void 0===l.animate||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof p.window.HTMLCanvasElement?this.options.canvas:p.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new p.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const l=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new p.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends p.Evented{constructor(m,l,f,_){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=l,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new p.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new p.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new s2(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),p.extend(this,p.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return p.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:l,y:f,z:_}=m.canonical;return this._implementation.hasTile({x:l,y:f,z:_})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,l){const{x:f,y:_,z:x}=m.tileID.canonical,w=new p.window.AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:f,y:_,z:x},{signal:w.signal})).then(function(D){return delete m.request,m.aborted?(m.state="unloaded",l(null)):void 0===D?(m.state="errored",l(null)):null===D?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",l(null)):(A=D)instanceof p.window.ImageData||A instanceof p.window.HTMLCanvasElement||A instanceof p.window.ImageBitmap||A instanceof p.window.HTMLImageElement?(this.loadTileData(m,D),m.state="loaded",void l(null)):(m.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var A}.bind(this)).catch(D=>{20!==D.code&&(m.state="errored",l(D))}),m.request.cancel=()=>w.abort()}loadTileData(m,l){$.loadTileData(m,l,this._map.painter)}unloadTileData(m){$.unloadTileData(m,this._map.painter)}unloadTile(m,l){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:f,y:_,z:x}=m.tileID.canonical;this._implementation.unloadTile({x:f,y:_,z:x})}l()}abortTile(m,l){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}}},De=function(m,l,f,_){const x=new Ee[l.type](m,l,f,_);if(x.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${x.id}`);return p.bindAll(["load","abort","unload","serialize","prepare"],x),x};function we(m,l){const f=p.identity([]);return p.scale(f,f,[.5*m.width,.5*-m.height,1]),p.translate(f,f,[1,-1,0]),p.multiply(f,f,m.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(f)}function ke(m,l,f,_,x,w,D,A=!1){const L=m.tilesIn(_,D,A);L.sort(wt);const P=[];for(const B of L)P.push({wrappedTileID:B.tile.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(l,f,m._state,B,x,w,we(m.transform,B.tile.tileID),A)});const R=function(B){const Y={},Q={};for(const te of B){const J=te.queryResults,ee=te.wrappedTileID,q=Q[ee]=Q[ee]||{};for(const oe in J){const se=J[oe],ce=q[oe]=q[oe]||{},ye=Y[oe]=Y[oe]||[];for(const ve of se)ce[ve.featureIndex]||(ce[ve.featureIndex]=!0,ye.push(ve))}}return Y}(P);for(const B in R)R[B].forEach(Y=>{const Q=Y.feature,te=Q.layer;te&&"background"!==te.type&&"sky"!==te.type&&(Q.source=te.source,te["source-layer"]&&(Q.sourceLayer=te["source-layer"]),Q.state=void 0!==Q.id?m.getFeatureState(te["source-layer"],Q.id):{})});return R}function tt(m,l){const f=m.getRenderableIds().map(w=>m.getTileByID(w)),_=[],x={};for(let w=0;w<f.length;w++){const D=f[w],A=D.tileID.canonical.key;x[A]||(x[A]=!0,D.querySourceFeatures(_,l))}return _}function wt(m,l){const f=m.tileID,_=l.tileID;return f.overscaledZ-_.overscaledZ||f.canonical.y-_.canonical.y||f.wrap-_.wrap||f.canonical.x-_.canonical.x}function Je(){return null!=B3.workerClass?new B3.workerClass:new p.window.Worker(B3.workerUrl)}const Lt="mapboxgl_preloaded_worker_pool";class Dt{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Dt.workerCount;)this.workers.push(new Je);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],0===this.numActive()&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Lt]}numActive(){return Object.keys(this.active).length}}let It;function Tt(){return It||(It=new Dt),It}function y1(m,l){const f={};for(const _ in m)"ref"!==_&&(f[_]=m[_]);return p.refProperties.forEach(_=>{_ in l&&(f[_]=l[_])}),f}function K1(m){m=m.slice();const l=Object.create(null);for(let f=0;f<m.length;f++)l[m[f].id]=m[f];for(let f=0;f<m.length;f++)"ref"in m[f]&&(m[f]=y1(m[f],l[m[f].ref]));return m}Dt.workerCount=2;const qt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function tn(m,l,f){f.push({command:qt.addSource,args:[m,l[m]]})}function yn(m,l,f){l.push({command:qt.removeSource,args:[m]}),f[m]=!0}function ua(m,l,f,_){yn(m,f,_),tn(m,l,f)}function qr(m,l,f){let _;for(_ in m[f])if(m[f].hasOwnProperty(_)&&"data"!==_&&!Ze(m[f][_],l[f][_]))return!1;for(_ in l[f])if(l[f].hasOwnProperty(_)&&"data"!==_&&!Ze(m[f][_],l[f][_]))return!1;return!0}function Ge(m,l,f,_,x,w){let D;for(D in l=l||{},m=m||{})m.hasOwnProperty(D)&&(Ze(m[D],l[D])||f.push({command:w,args:[_,D,l[D],x]}));for(D in l)l.hasOwnProperty(D)&&!m.hasOwnProperty(D)&&(Ze(m[D],l[D])||f.push({command:w,args:[_,D,l[D],x]}))}function da(m){return m.id}function Jn(m,l){return m[l.id]=l,m}class Ia{constructor(l,f){this.reset(l,f)}reset(l,f){this.points=l||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(1===this.points.length)return this.points[0];l=p.clamp(l,0,1);let f=1,_=this._distances[f];const x=l*this.paddedLength+this.padding;for(;_<x&&f<this._distances.length;)_=this._distances[++f];const w=f-1,D=this._distances[w],A=_-D,L=A>0?(x-D)/A:0;return this.points[w].mult(1-L).add(this.points[f].mult(L))}}class v3{constructor(l,f,_){const x=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(l/_),this.yCellCount=Math.ceil(f/_);for(let D=0;D<this.xCellCount*this.yCellCount;D++)x.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=f,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,f,_,x,w){this._forEachCell(f,_,x,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(f),this.bboxes.push(_),this.bboxes.push(x),this.bboxes.push(w)}insertCircle(l,f,_,x){this._forEachCell(f-x,_-x,f+x,_+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(f),this.circles.push(_),this.circles.push(x)}_insertBoxCell(l,f,_,x,w,D){this.boxCells[w].push(D)}_insertCircleCell(l,f,_,x,w,D){this.circleCells[w].push(D)}_query(l,f,_,x,w,D){if(_<0||l>this.width||x<0||f>this.height)return!w&&[];const A=[];if(l<=0&&f<=0&&this.width<=_&&this.height<=x){if(w)return!0;for(let L=0;L<this.boxKeys.length;L++)A.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const P=this.circles[3*L],R=this.circles[3*L+1],B=this.circles[3*L+2];A.push({key:this.circleKeys[L],x1:P-B,y1:R-B,x2:P+B,y2:R+B})}return D?A.filter(D):A}return this._forEachCell(l,f,_,x,this._queryCell,A,{hitTest:w,seenUids:{box:{},circle:{}}},D),w?A.length>0:A}_queryCircle(l,f,_,x,w){const D=l-_,A=l+_,L=f-_,P=f+_;if(A<0||D>this.width||P<0||L>this.height)return!x&&[];const R=[];return this._forEachCell(D,L,A,P,this._queryCellCircle,R,{hitTest:x,circle:{x:l,y:f,radius:_},seenUids:{box:{},circle:{}}},w),x?R.length>0:R}query(l,f,_,x,w){return this._query(l,f,_,x,!1,w)}hitTest(l,f,_,x,w){return this._query(l,f,_,x,!0,w)}hitTestCircle(l,f,_,x){return this._queryCircle(l,f,_,!0,x)}_queryCell(l,f,_,x,w,D,A,L){const P=A.seenUids,R=this.boxCells[w];if(null!==R){const Y=this.bboxes;for(const Q of R)if(!P.box[Q]){P.box[Q]=!0;const te=4*Q;if(l<=Y[te+2]&&f<=Y[te+3]&&_>=Y[te+0]&&x>=Y[te+1]&&(!L||L(this.boxKeys[Q]))){if(A.hitTest)return D.push(!0),!0;D.push({key:this.boxKeys[Q],x1:Y[te],y1:Y[te+1],x2:Y[te+2],y2:Y[te+3]})}}}const B=this.circleCells[w];if(null!==B){const Y=this.circles;for(const Q of B)if(!P.circle[Q]){P.circle[Q]=!0;const te=3*Q;if(this._circleAndRectCollide(Y[te],Y[te+1],Y[te+2],l,f,_,x)&&(!L||L(this.circleKeys[Q]))){if(A.hitTest)return D.push(!0),!0;{const J=Y[te],ee=Y[te+1],q=Y[te+2];D.push({key:this.circleKeys[Q],x1:J-q,y1:ee-q,x2:J+q,y2:ee+q})}}}}}_queryCellCircle(l,f,_,x,w,D,A,L){const P=A.circle,R=A.seenUids,B=this.boxCells[w];if(null!==B){const Q=this.bboxes;for(const te of B)if(!R.box[te]){R.box[te]=!0;const J=4*te;if(this._circleAndRectCollide(P.x,P.y,P.radius,Q[J+0],Q[J+1],Q[J+2],Q[J+3])&&(!L||L(this.boxKeys[te])))return D.push(!0),!0}}const Y=this.circleCells[w];if(null!==Y){const Q=this.circles;for(const te of Y)if(!R.circle[te]){R.circle[te]=!0;const J=3*te;if(this._circlesCollide(Q[J],Q[J+1],Q[J+2],P.x,P.y,P.radius)&&(!L||L(this.circleKeys[te])))return D.push(!0),!0}}}_forEachCell(l,f,_,x,w,D,A,L){const P=this._convertToXCellCoord(l),R=this._convertToYCellCoord(f),B=this._convertToXCellCoord(_),Y=this._convertToYCellCoord(x);for(let Q=P;Q<=B;Q++)for(let te=R;te<=Y;te++)if(w.call(this,l,f,_,x,this.xCellCount*te+Q,D,A,L))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,f,_,x,w,D){const A=x-l,L=w-f,P=_+D;return P*P>A*A+L*L}_circleAndRectCollide(l,f,_,x,w,D,A){const L=(D-x)/2,P=Math.abs(l-(x+L));if(P>L+_)return!1;const R=(A-w)/2,B=Math.abs(f-(w+R));if(B>R+_)return!1;if(P<=L||B<=R)return!0;const Y=P-L,Q=B-R;return Y*Y+Q*Q<=_*_}}const Wr=Math.tan(85*Math.PI/180);function Xo(m,l,f,_,x,w,D){const A=p.create();if(f)if("globe"===w.name){const L=p.calculateGlobeLabelMatrix(x,l);p.multiply(A,A,L)}else{const L=I1([],D);A[0]=L[0],A[1]=L[1],A[4]=L[2],A[5]=L[3],_||p.rotateZ(A,A,x.angle)}else p.multiply(A,x.labelPlaneMatrix,m);return A}function e2(m,l,f,_,x,w,D){const A=Xo(m,l,f,_,x,w,D);return"globe"===w.name&&f||(A[2]=A[6]=A[10]=A[14]=0),A}function W2(m,l,f,_,x,w,D){if(f){if("globe"===w.name){const A=Xo(m,l,f,_,x,w,D);return p.invert(A,A),p.multiply(A,m,A),A}{const A=p.clone(m),L=p.identity([]);return L[0]=D[0],L[1]=D[1],L[4]=D[2],L[5]=D[3],p.multiply(A,A,L),_||p.rotateZ(A,A,-x.angle),A}}return x.glCoordMatrix}function yt(m,l,f,_){const x=[m,l,f,1];f?p.transformMat4$1(x,x,_):jl(x,x,_);const w=x[3];return x[0]/=w,x[1]/=w,x[2]/=w,x}function S1(m,l){return Math.min(.5+m/l*.5,1.5)}function Ht(m,l){const f=m[0]/m[3],_=m[1]/m[3];return f>=-l[0]&&f<=l[0]&&_>=-l[1]&&_<=l[1]}function ar(m,l,f,_,x,w,D,A,L,P){const R=f.transform,B=_?m.textSizeData:m.iconSizeData,Y=p.evaluateSizeForZoom(B,f.transform.zoom),Q="globe"===R.projection.name,te=[256/f.width*2+1,256/f.height*2+1],J=_?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;J.clear();let ee=null;Q&&(ee=_?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const q=m.lineVertexArray,oe=_?m.text.placedSymbolArray:m.icon.placedSymbolArray,se=f.transform.width/f.transform.height;let ce,ye=!1;for(let ve=0;ve<oe.length;ve++){const Ce=oe.get(ve),{numGlyphs:Se,writingMode:Ie}=Ce;if(Ie!==p.WritingMode.vertical||ye||ce===p.WritingMode.horizontal||(ye=!0),ce=Ie,(Ce.hidden||Ie===p.WritingMode.vertical)&&!ye){gn(Se,J);continue}ye=!1;const Pe=new p.pointGeometry(Ce.tileAnchorX,Ce.tileAnchorY);let{x:mt,y:Le,z:it}=R.projection.projectTilePoint(Pe.x,Pe.y,P.canonical);if(L){const[A1,Et,Mt]=L(Pe);mt+=A1,Le+=Et,it+=Mt}const Be=[mt,Le,it,1];if(p.transformMat4$1(Be,Be,l),!Ht(Be,te)){gn(Se,J);continue}const at=S1(f.transform.cameraToCenterDistance,Be[3]),Fe=p.evaluateSizeForFeature(B,Y,Ce),Ae=D?Fe/at:Fe*at,Ne=yt(mt,Le,it,x);if(Ne[3]<=0){gn(Se,J);continue}let ot={};const dt=D?null:L,kt=Ko(Ce,Ae,!1,A,l,x,w,m.glyphOffsetArray,q,J,ee,Ne,Pe,ot,se,dt,R.projection,P,D);ye=kt.useVertical,dt&&kt.needsFlipping&&(ot={}),(kt.notEnoughRoom||ye||kt.needsFlipping&&Ko(Ce,Ae,!0,A,l,x,w,m.glyphOffsetArray,q,J,ee,Ne,Pe,ot,se,dt,R.projection,P,D).notEnoughRoom)&&gn(Se,J)}_?(m.text.dynamicLayoutVertexBuffer.updateData(J),ee&&m.text.globeExtVertexBuffer.updateData(ee)):(m.icon.dynamicLayoutVertexBuffer.updateData(J),ee&&m.icon.globeExtVertexBuffer.updateData(ee))}function mn(m,l,f,_,x,w,D,A,L,P,R,B,Y,Q,te,J){const{lineStartIndex:ee,glyphStartIndex:q,segment:oe}=A,se=q+A.numGlyphs,ce=ee+A.lineLength,ye=l.getoffsetX(q),ve=l.getoffsetX(se-1),Ce=t2(m*ye,f,_,x,w,D,oe,ee,ce,L,P,R,B,Y,!0,Q,te,J);if(!Ce)return null;const Se=t2(m*ve,f,_,x,w,D,oe,ee,ce,L,P,R,B,Y,!0,Q,te,J);return Se?{first:Ce,last:Se}:null}function C1(m,l,f,_){return m===p.WritingMode.horizontal&&Math.abs(_)>Math.abs(f)?{useVertical:!0}:m===p.WritingMode.vertical?_>0?{needsFlipping:!0}:null:0!==l&&(0===(x=f)||Math.abs(_/x)>Wr)?1===l?{needsFlipping:!0}:null:f<0?{needsFlipping:!0}:null;var x}function Ko(m,l,f,_,x,w,D,A,L,P,R,B,Y,Q,te,J,ee,q,oe){const se=l/24,ce=m.lineOffsetX*se,ye=m.lineOffsetY*se,{lineStartIndex:ve,glyphStartIndex:Ce,numGlyphs:Se,segment:Ie,writingMode:Pe,flipState:mt}=m,Le=ve+m.lineLength,it=Be=>{if(R){const[Ne,ot,dt]=Be.up,kt=P.length;p.updateGlobeVertexNormal(R,kt+0,Ne,ot,dt),p.updateGlobeVertexNormal(R,kt+1,Ne,ot,dt),p.updateGlobeVertexNormal(R,kt+2,Ne,ot,dt),p.updateGlobeVertexNormal(R,kt+3,Ne,ot,dt)}const[at,Fe,Ae]=Be.point;p.addDynamicAttributes(P,at,Fe,Ae,Be.angle)};if(Se>1){const Be=mn(se,A,ce,ye,f,B,Y,m,L,w,Q,J,!1,ee,q,oe);if(!Be)return{notEnoughRoom:!0};if(_&&!f){let[at,Fe,Ae]=Be.first.point,[Ne,ot,dt]=Be.last.point;[at,Fe]=yt(at,Fe,Ae,D),[Ne,ot]=yt(Ne,ot,dt,D);const kt=C1(Pe,mt,(Ne-at)*te,ot-Fe);if(m.flipState=kt&&kt.needsFlipping?1:2,kt)return kt}it(Be.first);for(let at=Ce+1;at<Ce+Se-1;at++){const Fe=t2(se*A.getoffsetX(at),ce,ye,f,B,Y,Ie,ve,Le,L,w,Q,J,!1,!1,ee,q,oe);if(!Fe)return P.length-=4*(at-Ce),{notEnoughRoom:!0};it(Fe)}it(Be.last)}else{if(_&&!f){const at=yt(Y.x,Y.y,0,x),Fe=ve+Ie+1,Ae=new p.pointGeometry(L.getx(Fe),L.gety(Fe)),Ne=yt(Ae.x,Ae.y,0,x),ot=Ne[3]>0?Ne:Jt(Y,Ae,at,1,x,void 0,ee,q.canonical),dt=C1(Pe,mt,(ot[0]-at[0])*te,ot[1]-at[1]);if(m.flipState=dt&&dt.needsFlipping?1:2,dt)return dt}const Be=t2(se*A.getoffsetX(Ce),ce,ye,f,B,Y,Ie,ve,Le,L,w,Q,J,!1,!1,ee,q,oe);if(!Be)return{notEnoughRoom:!0};it(Be)}return{}}function nn(m,l,f,_,x){const{x:w,y:D,z:A}=_.projectTilePoint(m.x,m.y,l);if(!x)return yt(w,D,A,f);const[L,P,R]=x(m);return yt(w+L,D+P,A+R,f)}function Jt(m,l,f,_,x,w,D,A){const L=nn(m.sub(l)._unit()._add(m),A,x,D,w);return p.sub(L,f,L),p.normalize(L,L),p.scaleAndAdd(L,f,L,_)}function t2(m,l,f,_,x,w,D,A,L,P,R,B,Y,Q,te,J,ee,q){const oe=_?m-l:m+l;let se=oe>0?1:-1,ce=0;_&&(se*=-1,ce=Math.PI),se<0&&(ce+=Math.PI);let ye=A+D+(se>0?0:1)|0,ve=x,Ce=x,Se=0,Ie=0;const Pe=Math.abs(oe),mt=[],Le=[];let it=w,Be=it;const at=()=>Jt(Be,it,Ce,Pe-Se+1,R,Y,J,ee.canonical);for(;Se+Ie<=Pe;){if(ye+=se,ye<A||ye>=L)return null;if(Ce=ve,Be=it,mt.push(Ce),Q&&Le.push(Be),it=new p.pointGeometry(P.getx(ye),P.gety(ye)),ve=B[ye],!ve){const Mt=nn(it,ee.canonical,R,J,Y);ve=Mt[3]>0?B[ye]=Mt:at()}Se+=Ie,Ie=p.distance(Ce,ve)}te&&Y&&(B[ye]&&(ve=at(),Ie=p.distance(Ce,ve)),B[ye]=ve);const Fe=(Pe-Se)/Ie,Ae=it.sub(Be)._mult(Fe)._add(Be),Ne=p.sub([],ve,Ce),ot=p.scaleAndAdd([],Ce,Ne,Fe);let dt=[0,0,1],kt=Ne[0],A1=Ne[1];if(q&&(dt=J.upVector(ee.canonical,Ae.x,Ae.y),0!==dt[0]||0!==dt[1]||1!==dt[2])){const Mt=[dt[2],0,-dt[0]],Pt=p.cross([],dt,Mt);p.normalize(Mt,Mt),p.normalize(Pt,Pt),kt=p.dot(Ne,Mt),A1=p.dot(Ne,Pt)}if(f){const Mt=p.cross([],dt,Ne);p.normalize(Mt,Mt),p.scaleAndAdd(ot,ot,Mt,f*se)}const Et=ce+Math.atan2(A1,kt);return mt.push(ot),Q&&Le.push(Ae),{point:ot,angle:Et,path:mt,tilePath:Le,up:dt}}function gn(m,l){const f=l.length,_=f+4*m;l.resize(_),l.float32.fill(-1/0,4*f,4*_)}function jl(m,l,f){const _=l[0],x=l[1];return m[0]=f[0]*_+f[4]*x+f[12],m[1]=f[1]*_+f[5]*x+f[13],m[3]=f[3]*_+f[7]*x+f[15],m}const p2=100;class rt{constructor(l,f,_=new v3(l.width+200,l.height+200,25),x=new v3(l.width+200,l.height+200,25)){this.transform=l,this.grid=_,this.ignoredGrid=x,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+p2,this.screenBottomBoundary=l.height+p2,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=f}placeCollisionBox(l,f,_,x,w,D,A,L){let P=_.projectedAnchorX,R=_.projectedAnchorY,B=_.projectedAnchorZ;const Y=_.elevation,Q=_.tileID,te=l.getProjection();if(Y&&Q){const[ve,Ce,Se]=te.upVector(Q.canonical,_.tileAnchorX,_.tileAnchorY),Ie=te.upVectorScale(Q.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;P+=ve*Y*Ie,R+=Ce*Y*Ie,B+=Se*Y*Ie}const J=this.projectAndGetPerspectiveRatio(A,P,R,B,_.tileID,"globe"===te.name||!!Y||this.transform.pitch>0,te),ee=D*J.perspectiveRatio,q=(_.x1*f+x.x-_.padding)*ee+J.point.x,oe=(_.y1*f+x.y-_.padding)*ee+J.point.y,se=(_.x2*f+x.x+_.padding)*ee+J.point.x,ce=(_.y2*f+x.y+_.padding)*ee+J.point.y,ye=J.perspectiveRatio<=.55||J.occluded;return!this.isInsideGrid(q,oe,se,ce)||!w&&this.grid.hitTest(q,oe,se,ce,L)||ye?{box:[],offscreen:!1,occluded:J.occluded}:{box:[q,oe,se,ce],offscreen:this.isOffscreen(q,oe,se,ce),occluded:!1}}placeCollisionCircles(l,f,_,x,w,D,A,L,P,R,B,Y,Q,te,J){const ee=[],q=this.transform.elevation,oe=l.getProjection(),se=q?q.getAtTileOffsetFunc(J,this.transform.center.lat,this.transform.worldSize,oe):null,ce=new p.pointGeometry(_.tileAnchorX,_.tileAnchorY);let{x:ye,y:ve,z:Ce}=oe.projectTilePoint(ce.x,ce.y,J.canonical);if(se){const[Ae,Ne,ot]=se(ce);ye+=Ae,ve+=Ne,Ce+=ot}const Se="globe"===oe.name,Ie=this.projectAndGetPerspectiveRatio(A,ye,ve,Ce,J,Se||!!q||this.transform.pitch>0,oe),{perspectiveRatio:Pe}=Ie,mt=(B?D/Pe:D*Pe)/p.ONE_EM,Le=yt(ye,ve,Ce,L),it=Ie.signedDistanceFromCamera>0?mn(mt,w,_.lineOffsetX*mt,_.lineOffsetY*mt,!1,Le,ce,_,x,L,{},q&&!B?se:null,B&&!!q,oe,J,B):null;let Be=!1,at=!1,Fe=!0;if(it&&!Ie.occluded){const Ae=.5*Q*Pe+te,Ne=new p.pointGeometry(-100,-100),ot=new p.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),dt=new Ia,{first:kt,last:A1}=it,Et=kt.path.length;let Mt=[];for(let Nt=Et-1;Nt>=1;Nt--)Mt.push(kt.path[Nt]);for(let Nt=1;Nt<A1.path.length;Nt++)Mt.push(A1.path[Nt]);const Pt=2.5*Ae;P&&(Mt=Mt.map(([Nt,hn,_n],Mn)=>(se&&!Se&&(_n=se(Mn<Et-1?kt.tilePath[Et-1-Mn]:A1.tilePath[Mn-Et+2])[2]),yt(Nt,hn,_n,P))),Mt.some(Nt=>Nt[3]<=0)&&(Mt=[]));let N1=[];if(Mt.length>0){let Nt=1/0,hn=-1/0,_n=1/0,Mn=-1/0;for(const kn of Mt)Nt=Math.min(Nt,kn[0]),_n=Math.min(_n,kn[1]),hn=Math.max(hn,kn[0]),Mn=Math.max(Mn,kn[1]);hn>=Ne.x&&Nt<=ot.x&&Mn>=Ne.y&&_n<=ot.y&&(N1=[Mt.map(kn=>new p.pointGeometry(kn[0],kn[1]))],(Nt<Ne.x||hn>ot.x||_n<Ne.y||Mn>ot.y)&&(N1=p.clipLine(N1,Ne.x,Ne.y,ot.x,ot.y)))}for(const Nt of N1){dt.reset(Nt,.25*Ae);let hn=0;hn=dt.length<=.5*Ae?1:Math.ceil(dt.paddedLength/Pt)+1;for(let _n=0;_n<hn;_n++){const Mn=_n/Math.max(hn-1,1),kn=dt.lerp(Mn),a2=kn.x+p2,Di=kn.y+p2;ee.push(a2,Di,Ae,0);const fr=a2-Ae,ms=Di-Ae,On=a2+Ae,An=Di+Ae;if(Fe=Fe&&this.isOffscreen(fr,ms,On,An),at=at||this.isInsideGrid(fr,ms,On,An),!f&&this.grid.hitTestCircle(a2,Di,Ae,Y)&&(Be=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Be,occluded:!1}}}}return{circles:!R&&Be||!at?[]:ee,offscreen:Fe,collisionDetected:Be,occluded:Ie.occluded}}queryRenderedSymbols(l){if(0===l.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const f=[];let _=1/0,x=1/0,w=-1/0,D=-1/0;for(const R of l){const B=new p.pointGeometry(R.x+p2,R.y+p2);_=Math.min(_,B.x),x=Math.min(x,B.y),w=Math.max(w,B.x),D=Math.max(D,B.y),f.push(B)}const A=this.grid.query(_,x,w,D).concat(this.ignoredGrid.query(_,x,w,D)),L={},P={};for(const R of A){const B=R.key;if(void 0===L[B.bucketInstanceId]&&(L[B.bucketInstanceId]={}),L[B.bucketInstanceId][B.featureIndex])continue;const Y=[new p.pointGeometry(R.x1,R.y1),new p.pointGeometry(R.x2,R.y1),new p.pointGeometry(R.x2,R.y2),new p.pointGeometry(R.x1,R.y2)];p.polygonIntersectsPolygon(f,Y)&&(L[B.bucketInstanceId][B.featureIndex]=!0,void 0===P[B.bucketInstanceId]&&(P[B.bucketInstanceId]=[]),P[B.bucketInstanceId].push(B.featureIndex))}return P}insertCollisionBox(l,f,_,x,w){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:x,collisionGroupID:w},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,f,_,x,w){const D=f?this.ignoredGrid:this.grid,A={bucketInstanceId:_,featureIndex:x,collisionGroupID:w};for(let L=0;L<l.length;L+=4)D.insertCircle(A,l[L],l[L+1],l[L+2])}projectAndGetPerspectiveRatio(l,f,_,x,w,D,A){const L=[f,_,x,1];let P=!1;x||this.transform.pitch>0?(p.transformMat4$1(L,L,l),this.fogState&&w&&"globe"!==A.name&&(P=function(Q,te,J,ee,q,oe){const se=oe.calculateFogTileMatrix(q),ce=[te,J,ee];return p.transformMat4(ce,ce,se),Cr(Q,ce,oe.pitch,oe._fov)}(this.fogState,f,_,x,w.toUnwrapped(),this.transform)>.9)):jl(L,L,l);const R=L[3];return{point:new p.pointGeometry((L[0]/R+1)/2*this.transform.width+p2,(-L[1]/R+1)/2*this.transform.height+p2),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(A)/R*.5,1.5),signedDistanceFromCamera:R,occluded:D&&L[2]>R||P}}isOffscreen(l,f,_,x){return _<p2||l>=this.screenRightBoundary||x<p2||f>this.screenBottomBoundary}isInsideGrid(l,f,_,x){return _>=0&&l<this.gridRightBoundary&&x>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const l=p.identity([]);return p.translate(l,l,[-100,-100,0]),l}}function Zr(m,l,f){const _=l.createTileMatrix(m,m.worldSize,f.toUnwrapped());return p.multiply(new Float32Array(16),m.projMatrix,_)}function x1(m,l,f){if(l.projection.name===f.projection.name)return m.projMatrix;const _=f.clone();return _.setProjection(l.projection),Zr(_,l.getProjection(),m)}function un(m,l,f){return l.name===f.projection.name?m.projMatrix:Zr(f,l,m)}class qs{constructor(l,f,_,x){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?f:-f))):x&&_?1:0,this.placed=_}isHidden(){return 0===this.opacity&&!this.placed}}class Qo{constructor(l,f,_,x,w,D=!1){this.text=new qs(l?l.text:null,f,_,w),this.icon=new qs(l?l.icon:null,f,x,w),this.clipped=D}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Jo{constructor(l,f,_,x=!1){this.text=l,this.icon=f,this.skipFade=_,this.clipped=x}}class Yr{constructor(){this.invProjMatrix=p.create(),this.viewportMatrix=p.create(),this.circles=[]}}class Nn{constructor(l,f,_,x,w){this.bucketInstanceId=l,this.featureIndex=f,this.sourceLayerIndex=_,this.bucketIndex=x,this.tileID=w}}class n2{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const f=++this.maxGroupID;this.collisionGroups[l]={ID:f,predicate:_=>_.collisionGroupID===f}}return this.collisionGroups[l]}}function Mc(m,l,f,_,x){const{horizontalAlign:w,verticalAlign:D}=p.getAnchorAlignment(m),A=-(w-.5)*l,L=-(D-.5)*f,P=p.evaluateVariableOffset(m,_);return new p.pointGeometry(A+P[0]*x,L+P[1]*x)}function zc(m,l,f,_,x){const w=new p.pointGeometry(m,l);return f&&w._rotate(_?x:-x),w}class c2{constructor(l,f,_,x,w){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new rt(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new n2(_),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,f,_,x){const w=_.getBucket(f),D=_.latestFeatureIndex;if(!w||!D||f.id!==w.layerIds[0])return;const A=w.layers[0].layout,L=_.collisionBoxArray,P=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),R=_.tileSize/p.EXTENT,B=_.tileID.toUnwrapped();this.transform.setProjection(w.projection);const Y=(Q=_.tileID,te=w.getProjection(),J=this.transform,te.name===this.projection?J.calculateProjMatrix(Q.toUnwrapped()):Zr(J,te,Q));var Q,te,J;const ee="map"===A.get("text-pitch-alignment"),q="map"===A.get("text-rotation-alignment");f.compileFilter();const oe=f.dynamicFilter(),se=f.dynamicFilterNeedsFeature(),ce=this.transform.calculatePixelsToTileUnitsMatrix(_),ye=e2(Y,_.tileID.canonical,ee,q,this.transform,w.getProjection(),ce);let ve=null;if(ee){const Ie=W2(Y,_.tileID.canonical,ee,q,this.transform,w.getProjection(),ce);ve=p.multiply([],this.transform.labelPlaneMatrix,Ie)}let Ce=null;oe&&_.latestFeatureIndex&&(Ce={unwrappedTileID:B,dynamicFilter:oe,dynamicFilterNeedsFeature:se,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Nn(w.bucketInstanceId,D,w.sourceLayerIndex,w.index,_.tileID);const Se={bucket:w,layout:A,posMatrix:Y,textLabelPlaneMatrix:ye,labelToScreenMatrix:ve,clippingData:Ce,scale:P,textPixelRatio:R,holdingForFade:_.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:p.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:p.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(x)for(const Ie of w.sortKeyRanges){const{sortKey:Pe,symbolInstanceStart:mt,symbolInstanceEnd:Le}=Ie;l.push({sortKey:Pe,symbolInstanceStart:mt,symbolInstanceEnd:Le,parameters:Se})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(l,f,_,x,w,D,A,L,P,R,B,Y,Q,te,J,ee,q,oe){const{textOffset0:se,textOffset1:ce,crossTileID:ye}=Y,ve=[se,ce],Ce=Mc(l,_,x,ve,w),Se=this.collisionIndex.placeCollisionBox(te,w,f,zc(Ce.x,Ce.y,D,A,this.transform.angle),B,L,P,R.predicate);if(ee){const Ie=te.getSymbolInstanceIconSize(oe,this.transform.zoom,Y.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(te,Ie,ee,zc(Ce.x,Ce.y,D,A,this.transform.angle),B,L,P,R.predicate).box.length)return}if(Se.box.length>0){let Ie;return this.prevPlacement&&this.prevPlacement.variableOffsets[ye]&&this.prevPlacement.placements[ye]&&this.prevPlacement.placements[ye].text&&(Ie=this.prevPlacement.variableOffsets[ye].anchor),this.variableOffsets[ye]={textOffset:ve,width:_,height:x,anchor:l,textScale:w,prevAnchor:Ie},this.markUsedJustification(te,l,Y,J),te.allowVerticalPlacement&&(this.markUsedOrientation(te,J,Y),this.placedOrientations[ye]=J),{shift:Ce,placedGlyphBoxes:Se}}}placeLayerBucketPart(l,f,_,x){const{bucket:w,layout:D,posMatrix:A,textLabelPlaneMatrix:L,labelToScreenMatrix:P,clippingData:R,textPixelRatio:B,holdingForFade:Y,collisionBoxArray:Q,partiallyEvaluatedTextSize:te,partiallyEvaluatedIconSize:J,collisionGroup:ee}=l.parameters,q=D.get("text-optional"),oe=D.get("icon-optional"),se=D.get("text-allow-overlap"),ce=D.get("icon-allow-overlap"),ye="map"===D.get("text-rotation-alignment"),ve="map"===D.get("text-pitch-alignment"),Ce="none"!==D.get("icon-text-fit"),Se="viewport-y"===D.get("symbol-z-order");this.transform.setProjection(w.projection);let Ie=se&&(ce||!w.hasIconData()||oe),Pe=ce&&(se||!w.hasTextData()||q);!w.collisionArrays&&Q&&w.deserializeCollisionBoxes(Q),_&&x&&w.updateCollisionDebugBuffers(this.transform.zoom,Q);const mt=(Le,it,Be)=>{const{crossTileID:at,numVerticalGlyphVertices:Fe}=Le;if(R){const On={zoom:this.transform.zoom,pitch:this.transform.pitch};let An=null;if(R.dynamicFilterNeedsFeature){const cn=this.retainedQueryData[w.bucketInstanceId];An=R.featureIndex.loadFeature({featureIndex:Le.featureIndex,bucketIndex:cn.bucketIndex,sourceLayerIndex:cn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,R.dynamicFilter)(On,An,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new p.pointGeometry(Le.tileAnchorX,Le.tileAnchorY),this.transform.calculateDistanceTileData(R.unwrappedTileID)))return this.placements[at]=new Jo(!1,!1,!1,!0),void(f[at]=!0)}if(f[at])return;if(Y)return void(this.placements[at]=new Jo(!1,!1,!1));let Ae=!1,Ne=!1,ot=!0,dt=!1,kt=!1,A1=null,Et={box:null,offscreen:null,occluded:null},Mt={box:null,offscreen:null,occluded:null},Pt=null,N1=null,Nt=null,hn=0,_n=0,Mn=0;Be.textFeatureIndex?hn=Be.textFeatureIndex:Le.useRuntimeCollisionCircles&&(hn=Le.featureIndex),Be.verticalTextFeatureIndex&&(_n=Be.verticalTextFeatureIndex);const kn=On=>{On.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const An=this.transform.elevation;(An||On.elevation)&&(On.elevation=An?An.getAtTileOffset(On.tileID,On.tileAnchorX,On.tileAnchorY):0)},a2=Be.textBox;if(a2){kn(a2);const On=cn=>{let zn=p.WritingMode.horizontal;if(w.allowVerticalPlacement&&!cn&&this.prevPlacement){const Ai=this.prevPlacement.placedOrientations[at];Ai&&(this.placedOrientations[at]=Ai,zn=Ai,this.markUsedOrientation(w,zn,Le))}return zn},An=(cn,zn)=>{if(w.allowVerticalPlacement&&Fe>0&&Be.verticalTextBox){for(const Ai of w.writingModes)if(Ai===p.WritingMode.vertical?(Et=zn(),Mt=Et):Et=cn(),Et&&Et.box&&Et.box.length)break}else Et=cn()};if(D.get("text-variable-anchor")){let cn=D.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[at]){const En=this.prevPlacement.variableOffsets[at];cn.indexOf(En.anchor)>0&&(cn=cn.filter(K2=>K2!==En.anchor),cn.unshift(En.anchor))}const zn=(En,K2,ui)=>{const Wa=w.getSymbolInstanceTextSize(te,Le,this.transform.zoom,it),gs=(En.x2-En.x1)*Wa+2*En.padding,Lr=(En.y2-En.y1)*Wa+2*En.padding,Tr=Ce&&!ce?K2:null;Tr&&kn(Tr);let Za={box:[],offscreen:!1,occluded:!1};const So=se?2*cn.length:cn.length;for(let Do=0;Do<So;++Do){const Pc=this.attemptAnchorPlacement(cn[Do%cn.length],En,gs,Lr,Wa,ye,ve,B,A,ee,Do>=cn.length,Le,it,w,ui,Tr,te,J);if(Pc&&(Za=Pc.placedGlyphBoxes,Za&&Za.box&&Za.box.length)){Ae=!0,A1=Pc.shift;break}}return Za};An(()=>zn(a2,Be.iconBox,p.WritingMode.horizontal),()=>{const En=Be.verticalTextBox;return En&&kn(En),w.allowVerticalPlacement&&!(Et&&Et.box&&Et.box.length)&&Fe>0&&En?zn(En,Be.verticalIconBox,p.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Et&&(Ae=Et.box,ot=Et.offscreen,dt=Et.occluded);const Ai=On(Et&&Et.box);if(!Ae&&this.prevPlacement){const En=this.prevPlacement.variableOffsets[at];En&&(this.variableOffsets[at]=En,this.markUsedJustification(w,En.anchor,Le,Ai))}}else{const cn=(zn,Ai)=>{const En=w.getSymbolInstanceTextSize(te,Le,this.transform.zoom,it),K2=this.collisionIndex.placeCollisionBox(w,En,zn,new p.pointGeometry(0,0),se,B,A,ee.predicate);return K2&&K2.box&&K2.box.length&&(this.markUsedOrientation(w,Ai,Le),this.placedOrientations[at]=Ai),K2};An(()=>cn(a2,p.WritingMode.horizontal),()=>{const zn=Be.verticalTextBox;return w.allowVerticalPlacement&&Fe>0&&zn?(kn(zn),cn(zn,p.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),On(Et&&Et.box&&Et.box.length)}}if(Pt=Et,Ae=Pt&&Pt.box&&Pt.box.length>0,ot=Pt&&Pt.offscreen,dt=Pt&&Pt.occluded,Le.useRuntimeCollisionCircles){const On=w.text.placedSymbolArray.get(Le.centerJustifiedTextSymbolIndex>=0?Le.centerJustifiedTextSymbolIndex:Le.verticalPlacedTextSymbolIndex),An=p.evaluateSizeForFeature(w.textSizeData,te,On),cn=D.get("text-padding");N1=this.collisionIndex.placeCollisionCircles(w,se,On,w.lineVertexArray,w.glyphOffsetArray,An,A,L,P,_,ve,ee.predicate,Le.collisionCircleDiameter*An/p.ONE_EM,cn,this.retainedQueryData[w.bucketInstanceId].tileID),Ae=se||N1.circles.length>0&&!N1.collisionDetected,ot=ot&&N1.offscreen,dt=N1.occluded}if(Be.iconFeatureIndex&&(Mn=Be.iconFeatureIndex),Be.iconBox){const On=An=>{kn(An);const cn=Ce&&A1?zc(A1.x,A1.y,ye,ve,this.transform.angle):new p.pointGeometry(0,0),zn=w.getSymbolInstanceIconSize(J,this.transform.zoom,Le.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,zn,An,cn,ce,B,A,ee.predicate)};Mt&&Mt.box&&Mt.box.length&&Be.verticalIconBox?(Nt=On(Be.verticalIconBox),Ne=Nt.box.length>0):(Nt=On(Be.iconBox),Ne=Nt.box.length>0),ot=ot&&Nt.offscreen,kt=Nt.occluded}const Di=q||0===Le.numHorizontalGlyphVertices&&0===Fe,fr=oe||0===Le.numIconVertices;if(Di||fr?fr?Di||(Ne=Ne&&Ae):Ae=Ne&&Ae:Ne=Ae=Ne&&Ae,Ae&&Pt&&Pt.box&&this.collisionIndex.insertCollisionBox(Pt.box,D.get("text-ignore-placement"),w.bucketInstanceId,Mt&&Mt.box&&_n?_n:hn,ee.ID),Ne&&Nt&&this.collisionIndex.insertCollisionBox(Nt.box,D.get("icon-ignore-placement"),w.bucketInstanceId,Mn,ee.ID),N1&&(Ae&&this.collisionIndex.insertCollisionCircles(N1.circles,D.get("text-ignore-placement"),w.bucketInstanceId,hn,ee.ID),_)){const On=w.bucketInstanceId;let An=this.collisionCircleArrays[On];void 0===An&&(An=this.collisionCircleArrays[On]=new Yr);for(let cn=0;cn<N1.circles.length;cn+=4)An.circles.push(N1.circles[cn+0]),An.circles.push(N1.circles[cn+1]),An.circles.push(N1.circles[cn+2]),An.circles.push(N1.collisionDetected?1:0)}const ms="globe"!==w.projection.name;Ie=Ie&&(ms||!dt),Pe=Pe&&(ms||!kt),this.placements[at]=new Jo(Ae||Ie,Ne||Pe,ot||w.justReloaded),f[at]=!0};if(Se){const Le=w.getSortedSymbolIndexes(this.transform.angle);for(let it=Le.length-1;it>=0;--it){const Be=Le[it];mt(w.symbolInstances.get(Be),Be,w.collisionArrays[Be])}}else for(let Le=l.symbolInstanceStart;Le<l.symbolInstanceEnd;Le++)mt(w.symbolInstances.get(Le),Le,w.collisionArrays[Le]);if(_&&w.bucketInstanceId in this.collisionCircleArrays){const Le=this.collisionCircleArrays[w.bucketInstanceId];p.invert(Le.invProjMatrix,A),Le.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,f,_,x){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:A,verticalPlacedTextSymbolIndex:L,crossTileID:P}=_,R=p.getAnchorJustification(f),B=x===p.WritingMode.vertical?L:"left"===R?w:"center"===R?D:"right"===R?A:-1;w>=0&&(l.text.placedSymbolArray.get(w).crossTileID=B>=0&&w!==B?0:P),D>=0&&(l.text.placedSymbolArray.get(D).crossTileID=B>=0&&D!==B?0:P),A>=0&&(l.text.placedSymbolArray.get(A).crossTileID=B>=0&&A!==B?0:P),L>=0&&(l.text.placedSymbolArray.get(L).crossTileID=B>=0&&L!==B?0:P)}markUsedOrientation(l,f,_){const x=f===p.WritingMode.horizontal||f===p.WritingMode.horizontalOnly?f:0,w=f===p.WritingMode.vertical?f:0,{leftJustifiedTextSymbolIndex:D,centerJustifiedTextSymbolIndex:A,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:P}=_,R=l.text.placedSymbolArray;D>=0&&(R.get(D).placedOrientation=x),A>=0&&(R.get(A).placedOrientation=x),L>=0&&(R.get(L).placedOrientation=x),P>=0&&(R.get(P).placedOrientation=w)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let _=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const x=f?f.symbolFadeChange(l):1,w=f?f.opacities:{},D=f?f.variableOffsets:{},A=f?f.placedOrientations:{};for(const L in this.placements){const P=this.placements[L],R=w[L];R?(this.opacities[L]=new Qo(R,x,P.text,P.icon,null,P.clipped),_=_||P.text!==R.text.placed||P.icon!==R.icon.placed):(this.opacities[L]=new Qo(null,x,P.text,P.icon,P.skipFade,P.clipped),_=_||P.text||P.icon)}for(const L in w){const P=w[L];if(!this.opacities[L]){const R=new Qo(P,x,!1,!1);R.isHidden()||(this.opacities[L]=R,_=_||P.text.placed||P.icon.placed)}}for(const L in D)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=D[L]);for(const L in A)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=A[L]);_?this.lastPlacementChangeTime=l:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:l)}updateLayerOpacities(l,f){const _={};for(const x of f){const w=x.getBucket(l);w&&x.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,_,x.collisionBoxArray)}}updateBucketOpacities(l,f,_){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const x=l.layers[0].layout,w=!!l.layers[0].dynamicFilter(),D=new Qo(null,0,!1,!1,!0),A=x.get("text-allow-overlap"),L=x.get("icon-allow-overlap"),P=x.get("text-variable-anchor"),R="map"===x.get("text-rotation-alignment"),B="map"===x.get("text-pitch-alignment"),Y="none"!==x.get("icon-text-fit"),Q=new Qo(null,0,A&&(L||!l.hasIconData()||x.get("icon-optional")),L&&(A||!l.hasTextData()||x.get("text-optional")),!0);!l.collisionArrays&&_&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(_);const te=(ee,q,oe)=>{for(let se=0;se<q/4;se++)ee.opacityVertexArray.emplaceBack(oe)};let J=0;for(let ee=0;ee<l.symbolInstances.length;ee++){const q=l.symbolInstances.get(ee),{numHorizontalGlyphVertices:oe,numVerticalGlyphVertices:se,crossTileID:ce,numIconVertices:ye}=q;let ve=this.opacities[ce];f[ce]?ve=D:ve||(ve=Q,this.opacities[ce]=ve),f[ce]=!0;const Ce=oe>0||se>0,Se=ye>0,Ie=this.placedOrientations[ce],Pe=Ie===p.WritingMode.vertical,mt=Ie===p.WritingMode.horizontal||Ie===p.WritingMode.horizontalOnly;if(!Ce&&!Se||ve.isHidden()||J++,Ce){const Le=D2(ve.text);te(l.text,oe,Pe?an:Le),te(l.text,se,mt?an:Le);const it=ve.text.isHidden(),{leftJustifiedTextSymbolIndex:Be,centerJustifiedTextSymbolIndex:at,rightJustifiedTextSymbolIndex:Fe,verticalPlacedTextSymbolIndex:Ae}=q,Ne=l.text.placedSymbolArray,ot=it||Pe?1:0;Be>=0&&(Ne.get(Be).hidden=ot),at>=0&&(Ne.get(at).hidden=ot),Fe>=0&&(Ne.get(Fe).hidden=ot),Ae>=0&&(Ne.get(Ae).hidden=it||mt?1:0);const dt=this.variableOffsets[ce];dt&&this.markUsedJustification(l,dt.anchor,q,Ie);const kt=this.placedOrientations[ce];kt&&(this.markUsedJustification(l,"left",q,kt),this.markUsedOrientation(l,kt,q))}if(Se){const Le=D2(ve.icon),{placedIconSymbolIndex:it,verticalPlacedIconSymbolIndex:Be}=q,at=l.icon.placedSymbolArray,Fe=ve.icon.isHidden()?1:0;it>=0&&(te(l.icon,ye,Pe?an:Le),at.get(it).hidden=Fe),Be>=0&&(te(l.icon,q.numVerticalIconVertices,mt?an:Le),at.get(Be).hidden=Fe)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Le=l.collisionArrays[ee];if(Le){let it=new p.pointGeometry(0,0),Be=!0;if(Le.textBox||Le.verticalTextBox){if(P){const Fe=this.variableOffsets[ce];Fe?(it=Mc(Fe.anchor,Fe.width,Fe.height,Fe.textOffset,Fe.textScale),R&&it._rotate(B?this.transform.angle:-this.transform.angle)):Be=!1}w&&(Be=!ve.clipped),Le.textBox&&Ci(l.textCollisionBox.collisionVertexArray,ve.text.placed,!Be||Pe,it.x,it.y),Le.verticalTextBox&&Ci(l.textCollisionBox.collisionVertexArray,ve.text.placed,!Be||mt,it.x,it.y)}const at=Be&&Boolean(!mt&&Le.verticalIconBox);Le.iconBox&&Ci(l.iconCollisionBox.collisionVertexArray,ve.icon.placed,at,Y?it.x:0,Y?it.y:0),Le.verticalIconBox&&Ci(l.iconCollisionBox.collisionVertexArray,ve.icon.placed,!at,Y?it.x:0,Y?it.y:0)}}}if(l.fullyClipped=0===J,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const ee=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ee.invProjMatrix,l.placementViewportMatrix=ee.viewportMatrix,l.collisionCircleArray=ee.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return 0===this.fadeDuration?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,f){const _=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*_>l}setStale(){this.stale=!0}}function Ci(m,l,f,_,x){m.emplaceBack(l?1:0,f?1:0,_||0,x||0),m.emplaceBack(l?1:0,f?1:0,_||0,x||0),m.emplaceBack(l?1:0,f?1:0,_||0,x||0),m.emplaceBack(l?1:0,f?1:0,_||0,x||0)}const Gl=Math.pow(2,25),y3=Math.pow(2,24),m2=Math.pow(2,17),Ws=Math.pow(2,16),b4=Math.pow(2,9),es=Math.pow(2,8),Z2=Math.pow(2,1);function D2(m){if(0===m.opacity&&!m.placed)return 0;if(1===m.opacity&&m.placed)return 4294967295;const l=m.placed?1:0,f=Math.floor(127*m.opacity);return f*Gl+l*y3+f*m2+l*Ws+f*b4+l*es+f*Z2+l}const an=0;class Ra{constructor(l){this._sortAcrossTiles="viewport-y"!==l.layout.get("symbol-z-order")&&void 0!==l.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,f,_,x,w){const D=this._bucketParts;for(;this._currentTileIndex<l.length;)if(f.getBucketParts(D,x,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((A,L)=>A.sortKey-L.sortKey));this._currentPartIndex<D.length;){const A=D[this._currentPartIndex];if(f.placeLayerBucketPart(A,this._seenCrossTileIDs,_,0===A.symbolInstanceStart),this._currentPartIndex++,w())return!0}return!1}}class Sc{constructor(l,f,_,x,w,D,A,L){this.placement=new c2(l,w,D,A,L),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(l,f,_){const x=p.exported.now(),w=()=>{const D=p.exported.now()-x;return!this._forceFullPlacement&&D>2};for(;this._currentPlacementIndex>=0;){const D=f[l[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if("symbol"===D.type&&(!D.minzoom||D.minzoom<=A)&&(!D.maxzoom||D.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Ra(D)),this._inProgressLayer.continuePlacement(_[D.source],this.placement,this._showCollisionBoxes,D,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const mo=512/p.EXTENT/2;class st{constructor(l,f,_){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(let x=0;x<f.length;x++){const w=f.get(x),D=w.key;this.indexedSymbolInstances[D]||(this.indexedSymbolInstances[D]=[]),this.indexedSymbolInstances[D].push({crossTileID:w.crossTileID,coord:this.getScaledCoordinates(w,l)})}}getScaledCoordinates(l,f){const _=mo/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*p.EXTENT+l.tileAnchorX)*_),y:Math.floor((f.canonical.y*p.EXTENT+l.tileAnchorY)*_)}}findMatches(l,f,_){const x=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let w=0;w<l.length;w++){const D=l.get(w);if(D.crossTileID)continue;const A=this.indexedSymbolInstances[D.key];if(!A)continue;const L=this.getScaledCoordinates(D,f);for(const P of A)if(Math.abs(P.coord.x-L.x)<=x&&Math.abs(P.coord.y-L.y)<=x&&!_[P.crossTileID]){_[P.crossTileID]=!0,D.crossTileID=P.crossTileID;break}}}}class C4{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class u1{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const f=Math.round((l-this.lng)/360);if(0!==f)for(const _ in this.indexes){const x=this.indexes[_],w={};for(const D in x){const A=x[D];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+f),w[A.tileID.key]=A}this.indexes[_]=w}this.lng=l}addBucket(l,f,_){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let w=0;w<f.symbolInstances.length;w++)f.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const x=this.usedCrossTileIDs[l.overscaledZ];for(const w in this.indexes){const D=this.indexes[w];if(Number(w)>l.overscaledZ)for(const A in D){const L=D[A];L.tileID.isChildOf(l)&&L.findMatches(f.symbolInstances,l,x)}else{const A=D[l.scaledTo(Number(w)).key];A&&A.findMatches(f.symbolInstances,l,x)}}for(let w=0;w<f.symbolInstances.length;w++){const D=f.symbolInstances.get(w);D.crossTileID||(D.crossTileID=_.generate(),x[D.crossTileID]=!0)}return void 0===this.indexes[l.overscaledZ]&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new st(l,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(l,f){for(const _ in f.indexedSymbolInstances)for(const x of f.indexedSymbolInstances[_])delete this.usedCrossTileIDs[l][x.crossTileID]}removeStaleBuckets(l){let f=!1;for(const _ in this.indexes){const x=this.indexes[_];for(const w in x)l[x[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,x[w]),delete x[w],f=!0)}return f}}class ts{constructor(){this.layerIndexes={},this.crossTileIDs=new C4,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,f,_,x){let w=this.layerIndexes[l.id];void 0===w&&(w=this.layerIndexes[l.id]=new u1);let D=!1;const A={};"globe"!==x.name&&w.handleWrapJump(_);for(const L of f){const P=L.getBucket(l);P&&l.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(L.tileID,P,this.crossTileIDs)&&(D=!0),A[P.bucketInstanceId]=!0)}return w.removeStaleBuckets(A)&&(D=!0),D}pruneUnusedLayers(l){const f={};l.forEach(_=>{f[_]=!0});for(const _ in this.layerIndexes)f[_]||delete this.layerIndexes[_]}}const ns=(m,l)=>p.emitValidationErrors(m,l&&l.filter(f=>"source.canvas"!==f.identifier)),Pa=p.pick(qt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Fa=p.pick(qt,["setCenter","setZoom","setBearing","setPitch"]),Dc={version:8,layers:[],sources:{}},fa={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class oi extends p.Evented{constructor(l,f={}){super(),this.map=l,this.dispatcher=new jr(Tt(),this),this.imageManager=new Ur,this.imageManager.setEventedParent(this),this.glyphManager=new p.GlyphManager(l._requestManager,f.localFontFamily?p.LocalGlyphMode.all:f.localIdeographFontFamily?p.LocalGlyphMode.ideographs:p.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.crossTileSymbolIndex=new ts,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",p.getReferrer());const _=this;this._rtlTextPluginCallback=oi.registerForPluginStateChange(x=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(w,D)=>{if(p.triggerPluginCompletionEvent(w),D&&D.every(A=>A))for(const A in _._sourceCaches){const L=_._sourceCaches[A],P=L.getSource().type;"vector"!==P&&"geojson"!==P||L.reload()}})}),this.on("data",x=>{if("source"!==x.dataType||"metadata"!==x.sourceDataType)return;const w=this.getSource(x.sourceId);if(w&&w.vectorLayerIds)for(const D in this._layers){const A=this._layers[D];A.source===w.id&&this._validateLayer(A)}})}loadURL(l,f={}){this.fire(new p.Event("dataloading",{dataType:"style"}));const _="boolean"==typeof f.validate?f.validate:!p.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,f.accessToken);const x=this.map._requestManager.transformRequest(l,p.ResourceType.Style);this._request=p.getJSON(x,(w,D)=>{this._request=null,w?this.fire(new p.ErrorEvent(w)):D&&this._load(D,_)})}loadJSON(l,f={}){this.fire(new p.Event("dataloading",{dataType:"style"})),this._request=p.exported.frame(()=>{this._request=null,this._load(l,!1!==f.validate)})}loadEmpty(){this.fire(new p.Event("dataloading",{dataType:"style"})),this._load(Dc,!1)}_updateLayerCount(l,f){const _=f?1:-1;l.is3D()&&(this._num3DLayers+=_),"circle"===l.type&&(this._numCircleLayers+=_),"symbol"===l.type&&(this._numSymbolLayers+=_)}_load(l,f){if(f&&ns(this,p.validateStyle(l)))return;this._loaded=!0,this.stylesheet=p.clone$1(l),this._updateMapProjection();for(const x in l.sources)this.addSource(x,l.sources[x],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const _=K1(this.stylesheet.layers);this._order=_.map(x=>x.id),this._layers={},this._serializedLayers={};for(const x of _){const w=p.createStyleLayer(x);w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ii(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new p.Event("data",{dataType:"style"})),this.fire(new p.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(f,_,x){let w,D,A;const L=p.exported.devicePixelRatio>1?"@2x":"";let P=p.getJSON(_.transformRequest(_.normalizeSpriteURL(f,L,".json"),p.ResourceType.SpriteJSON),(Y,Q)=>{P=null,A||(A=Y,w=Q,B())}),R=p.getImage(_.transformRequest(_.normalizeSpriteURL(f,L,".png"),p.ResourceType.SpriteImage),(Y,Q)=>{R=null,A||(A=Y,D=Q,B())});function B(){if(A)x(A);else if(w&&D){const Y=p.exported.getImageData(D),Q={};for(const te in w){const{width:J,height:ee,x:q,y:oe,sdf:se,pixelRatio:ce,stretchX:ye,stretchY:ve,content:Ce}=w[te],Se=new p.RGBAImage({width:J,height:ee});p.RGBAImage.copy(Y,Se,{x:q,y:oe},{x:0,y:0},{width:J,height:ee}),Q[te]={data:Se,pixelRatio:ce,sdf:se,stretchX:ye,stretchY:ve,content:Ce}}x(null,Q)}}return{cancel(){P&&(P.cancel(),P=null),R&&(R.cancel(),R=null)}}}(l,this.map._requestManager,(f,_)=>{if(this._spriteRequest=null,f)this.fire(new p.ErrorEvent(f));else if(_)for(const x in _)this.imageManager.addImage(x,_[x]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new p.Event("data",{dataType:"style"}))})}_validateLayer(l){const f=this.getSource(l.source);if(!f)return;const _=l.sourceLayer;_&&("geojson"===f.type||f.vectorLayerIds&&-1===f.vectorLayerIds.indexOf(_))&&this.fire(new p.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${f.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const f=[];for(const _ of l){const x=this._layers[_];"custom"!==x.type&&f.push(x.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&("function"==typeof l.isLayerDraped?l.isLayerDraped():fa[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const f=this._changed;if(this._changed){const x=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(x.length||w.length)&&this._updateWorkerLayers(x,w);for(const D in this._updatedSources){const A=this._updatedSources[D];"reload"===A?this._reloadSource(D):"clear"===A&&this._clearSource(D)}this._updateTilesForChangedImages();for(const D in this._updatedPaintProps)this._layers[D].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const _={};for(const x in this._sourceCaches){const w=this._sourceCaches[x];_[x]=w.used,w.used=!1}for(const x of this._order){const w=this._layers[x];if(w.recalculate(l,this._availableImages),!w.isHidden(l.zoom)){const A=this._getLayerSourceCache(w);A&&(A.used=!0)}const D=this.map.painter;if(D){const A=w.getProgramIds();if(!A)continue;const L=w.getProgramConfiguration(l.zoom);for(const P of A)D.useProgram(P,L)}}for(const x in _){const w=this._sourceCaches[x];_[x]!==w.used&&w.getSource().fire(new p.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new p.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),ns(this,p.validateStyle(l)))return!1;(l=p.clone$1(l)).layers=K1(l.layers);const f=function(x,w){if(!x)return[{command:qt.setStyle,args:[w]}];let D=[];try{if(!Ze(x.version,w.version))return[{command:qt.setStyle,args:[w]}];Ze(x.center,w.center)||D.push({command:qt.setCenter,args:[w.center]}),Ze(x.zoom,w.zoom)||D.push({command:qt.setZoom,args:[w.zoom]}),Ze(x.bearing,w.bearing)||D.push({command:qt.setBearing,args:[w.bearing]}),Ze(x.pitch,w.pitch)||D.push({command:qt.setPitch,args:[w.pitch]}),Ze(x.sprite,w.sprite)||D.push({command:qt.setSprite,args:[w.sprite]}),Ze(x.glyphs,w.glyphs)||D.push({command:qt.setGlyphs,args:[w.glyphs]}),Ze(x.transition,w.transition)||D.push({command:qt.setTransition,args:[w.transition]}),Ze(x.light,w.light)||D.push({command:qt.setLight,args:[w.light]}),Ze(x.fog,w.fog)||D.push({command:qt.setFog,args:[w.fog]}),Ze(x.projection,w.projection)||D.push({command:qt.setProjection,args:[w.projection]});const A={},L=[];!function(B,Y,Q,te){let J;for(J in Y=Y||{},B=B||{})B.hasOwnProperty(J)&&(Y.hasOwnProperty(J)||yn(J,Q,te));for(J in Y){if(!Y.hasOwnProperty(J))continue;const ee=Y[J];B.hasOwnProperty(J)?Ze(B[J],ee)||("geojson"===B[J].type&&"geojson"===ee.type&&qr(B,Y,J)?Q.push({command:qt.setGeoJSONSourceData,args:[J,ee.data]}):ua(J,Y,Q,te)):tn(J,Y,Q)}}(x.sources,w.sources,L,A);const P=[];x.layers&&x.layers.forEach(B=>{B.source&&A[B.source]?D.push({command:qt.removeLayer,args:[B.id]}):P.push(B)});let R=x.terrain;R&&A[R.source]&&(D.push({command:qt.setTerrain,args:[void 0]}),R=void 0),D=D.concat(L),Ze(R,w.terrain)||D.push({command:qt.setTerrain,args:[w.terrain]}),function(B,Y,Q){Y=Y||[];const te=(B=B||[]).map(da),J=Y.map(da),ee=B.reduce(Jn,{}),q=Y.reduce(Jn,{}),oe=te.slice(),se=Object.create(null);let ce,ye,ve,Ce,Se,Ie,Pe;for(ce=0,ye=0;ce<te.length;ce++)ve=te[ce],q.hasOwnProperty(ve)?ye++:(Q.push({command:qt.removeLayer,args:[ve]}),oe.splice(oe.indexOf(ve,ye),1));for(ce=0,ye=0;ce<J.length;ce++)ve=J[J.length-1-ce],oe[oe.length-1-ce]!==ve&&(ee.hasOwnProperty(ve)?(Q.push({command:qt.removeLayer,args:[ve]}),oe.splice(oe.lastIndexOf(ve,oe.length-ye),1)):ye++,Ie=oe[oe.length-ce],Q.push({command:qt.addLayer,args:[q[ve],Ie]}),oe.splice(oe.length-ce,0,ve),se[ve]=!0);for(ce=0;ce<J.length;ce++)if(ve=J[ce],Ce=ee[ve],Se=q[ve],!se[ve]&&!Ze(Ce,Se))if(Ze(Ce.source,Se.source)&&Ze(Ce["source-layer"],Se["source-layer"])&&Ze(Ce.type,Se.type)){for(Pe in Ge(Ce.layout,Se.layout,Q,ve,null,qt.setLayoutProperty),Ge(Ce.paint,Se.paint,Q,ve,null,qt.setPaintProperty),Ze(Ce.filter,Se.filter)||Q.push({command:qt.setFilter,args:[ve,Se.filter]}),Ze(Ce.minzoom,Se.minzoom)&&Ze(Ce.maxzoom,Se.maxzoom)||Q.push({command:qt.setLayerZoomRange,args:[ve,Se.minzoom,Se.maxzoom]}),Ce)Ce.hasOwnProperty(Pe)&&"layout"!==Pe&&"paint"!==Pe&&"filter"!==Pe&&"metadata"!==Pe&&"minzoom"!==Pe&&"maxzoom"!==Pe&&(0===Pe.indexOf("paint.")?Ge(Ce[Pe],Se[Pe],Q,ve,Pe.slice(6),qt.setPaintProperty):Ze(Ce[Pe],Se[Pe])||Q.push({command:qt.setLayerProperty,args:[ve,Pe,Se[Pe]]}));for(Pe in Se)Se.hasOwnProperty(Pe)&&!Ce.hasOwnProperty(Pe)&&"layout"!==Pe&&"paint"!==Pe&&"filter"!==Pe&&"metadata"!==Pe&&"minzoom"!==Pe&&"maxzoom"!==Pe&&(0===Pe.indexOf("paint.")?Ge(Ce[Pe],Se[Pe],Q,ve,Pe.slice(6),qt.setPaintProperty):Ze(Ce[Pe],Se[Pe])||Q.push({command:qt.setLayerProperty,args:[ve,Pe,Se[Pe]]}))}else Q.push({command:qt.removeLayer,args:[ve]}),Ie=oe[oe.lastIndexOf(ve)+1],Q.push({command:qt.addLayer,args:[Se,Ie]})}(P,w.layers,D)}catch(A){console.warn("Unable to compute style diff:",A),D=[{command:qt.setStyle,args:[w]}]}return D}(this.serialize(),l).filter(x=>!(x.command in Fa));if(0===f.length)return!1;const _=f.filter(x=>!(x.command in Pa));if(_.length>0)throw new Error(`Unimplemented: ${_.map(x=>x.command).join(", ")}.`);return f.forEach(x=>{"setTransition"!==x.command&&"setProjection"!==x.command&&this[x.command].apply(this,x.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,f){return this.getImage(l)?this.fire(new p.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,f),this._afterImageUpdated(l),this)}updateImage(l,f){this.imageManager.updateImage(l,f)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new p.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new p.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,f,_={}){if(this._checkLoaded(),void 0!==this.getSource(l))throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(p.validateSource,`sources.${l}`,f,null,_))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const x=De(l,f,this.dispatcher,this);x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:x.serialize(),sourceId:l}));const w=D=>{const A=(D?"symbol:":"other:")+l,L=this._sourceCaches[A]=new p.SourceCache(A,x,D);(D?this._symbolSourceCaches:this._otherSourceCaches)[l]=L,L.style=this,L.onAdd(this.map)};w(!1),"vector"!==f.type&&"geojson"!==f.type||w(!0),x.onAdd&&x.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const f=this.getSource(l);if(!f)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===l)return this.fire(new p.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new p.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const _=this._getSourceCaches(l);for(const x of _)delete this._sourceCaches[x.id],delete this._updatedSources[x.id],x.fire(new p.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,f){this._checkLoaded(),this.getSource(l).setData(f),this._changed=!0}getSource(l){const f=this._getSourceCache(l);return f&&f.getSource()}_getSources(){const l=[];for(const f in this._otherSourceCaches){const _=this._getSourceCache(f);_&&l.push(_.getSource())}return l}addLayer(l,f,_={}){this._checkLoaded();const x=l.id;if(this.getLayer(x))return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${x}" already exists on this map`)));let w;if("custom"===l.type){if(ns(this,p.validateCustomStyleLayer(l)))return;w=p.createStyleLayer(l)}else{if("object"==typeof l.source&&(this.addSource(x,l.source),l=p.clone$1(l),l=p.extend(l,{source:x})),this._validate(p.validateLayer,`layers.${x}`,l,{arrayIndex:-1},_))return;w=p.createStyleLayer(l),this._validateLayer(w),w.setEventedParent(this,{layer:{id:x}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const D=f?this._order.indexOf(f):this._order.length;if(f&&-1===D)return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(D,0,x),this._layerOrderChanged=!0,this._layers[x]=w;const A=this._getLayerSourceCache(w);if(this._removedLayers[x]&&w.source&&A&&"custom"!==w.type){const L=this._removedLayers[x];delete this._removedLayers[x],L.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",A.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,f){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===f)return;const _=this._order.indexOf(l);this._order.splice(_,1);const x=f?this._order.indexOf(f):this._order.length;f&&-1===x?this.fire(new p.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(x,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const f=this._layers[l];if(!f)return void this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const _=this._order.indexOf(l);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=f,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const f in this._layers)if(this._layers[f].type===l)return!0;return!1}setLayerZoomRange(l,f,_){this._checkLoaded();const x=this.getLayer(l);x?x.minzoom===f&&x.maxzoom===_||(null!=f&&(x.minzoom=f),null!=_&&(x.maxzoom=_),this._updateLayer(x)):this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,f,_={}){this._checkLoaded();const x=this.getLayer(l);if(x){if(!Ze(x.filter,f))return null==f?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(p.validateFilter,`layers.${x.id}.filter`,f,{layerType:x.type},_)||(x.filter=p.clone$1(f),this._updateLayer(x)))}else this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const f=this.getLayer(l);return f&&p.clone$1(f.filter)}setLayoutProperty(l,f,_,x={}){this._checkLoaded();const w=this.getLayer(l);w?Ze(w.getLayoutProperty(f),_)||(w.setLayoutProperty(f,_,x),this._updateLayer(w)):this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,f){const _=this.getLayer(l);if(_)return _.getLayoutProperty(f);this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,f,_,x={}){this._checkLoaded();const w=this.getLayer(l);w?Ze(w.getPaintProperty(f),_)||(w.setPaintProperty(f,_,x)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,f){const _=this.getLayer(l);return _&&_.getPaintProperty(f)}setFeatureState(l,f){this._checkLoaded();const _=l.source,x=l.sourceLayer,w=this.getSource(_);if(!w)return void this.fire(new p.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const D=w.type;if("geojson"===D&&x)return void this.fire(new p.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===D&&!x)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===l.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided.")));const A=this._getSourceCaches(_);for(const L of A)L.setFeatureState(x,l.id,f)}removeFeatureState(l,f){this._checkLoaded();const _=l.source,x=this.getSource(_);if(!x)return void this.fire(new p.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const w=x.type,D="vector"===w?l.sourceLayer:void 0;if("vector"===w&&!D)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&"string"!=typeof l.id&&"number"!=typeof l.id)return void this.fire(new p.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const A=this._getSourceCaches(_);for(const L of A)L.removeFeatureState(D,l.id,f)}getFeatureState(l){this._checkLoaded();const f=l.source,_=l.sourceLayer,x=this.getSource(f);if(x){if("vector"!==x.type||_)return void 0===l.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(_,l.id);this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new p.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return p.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const f in this._sourceCaches){const _=this._sourceCaches[f].getSource();l[_.id]||(l[_.id]=_.serialize())}return p.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},f=>void 0!==f)}_updateLayer(l){this._updatedLayers[l.id]=!0;const f=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&f&&"raster"!==f.getSource().type&&(this._updatedSources[l.source]="reload",f.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const f=D=>"fill-extrusion"===this._layers[D].type,_={},x=[];for(let D=this._order.length-1;D>=0;D--){const A=this._order[D];if(f(A)){_[A]=D;for(const L of l){const P=L[A];if(P)for(const R of P)x.push(R)}}}x.sort((D,A)=>A.intersectionZ-D.intersectionZ);const w=[];for(let D=this._order.length-1;D>=0;D--){const A=this._order[D];if(f(A))for(let L=x.length-1;L>=0;L--){const P=x[L].feature;if(_[P.layer.id]<D)break;w.push(P),x.pop()}else for(const L of l){const P=L[A];if(P)for(const R of P)w.push(R.feature)}}return w}queryRenderedFeatures(l,f,_){f&&f.filter&&this._validate(p.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const x={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new p.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const L of f.layers){const P=this._layers[L];if(!P)return this.fire(new p.ErrorEvent(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];x[P.source]=!0}}const w=[];f.availableImages=this._availableImages;const D=f&&f.layers?f.layers.some(L=>{const P=this.getLayer(L);return P&&P.is3D()}):this.has3DLayers(),A=Qt.createFromScreenPoints(l,_);for(const L in this._sourceCaches){const P=this._sourceCaches[L].getSource().id;f.layers&&!x[P]||w.push(ke(this._sourceCaches[L],this._layers,this._serializedLayers,A,f,_,D,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(L,P,R,B,Y,Q,te){const J={},ee=Q.queryRenderedSymbols(B),q=[];for(const oe of Object.keys(ee).map(Number))q.push(te[oe]);q.sort(wt);for(const oe of q){const se=oe.featureIndex.lookupSymbolFeatures(ee[oe.bucketInstanceId],P,oe.bucketIndex,oe.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,L);for(const ce in se){const ye=J[ce]=J[ce]||[],ve=se[ce];ve.sort((Ce,Se)=>{const Ie=oe.featureSortOrder;if(Ie){const Pe=Ie.indexOf(Ce.featureIndex);return Ie.indexOf(Se.featureIndex)-Pe}return Se.featureIndex-Ce.featureIndex});for(const Ce of ve)ye.push(Ce)}}for(const oe in J)J[oe].forEach(se=>{const ce=se.feature,ye=R(L[oe]);if(!ye)return;const ve=ye.getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=ve});return J}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),A.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(l,f){f&&f.filter&&this._validate(p.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const _=this._getSourceCaches(l);let x=[];for(const w of _)x=x.concat(tt(w,f));return x}addSourceType(l,f,_){return oi.getSourceType(l)?_(new Error(`A source type called "${l}" already exists.`)):(oi.setSourceType(l,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:f.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(l,f={}){this._checkLoaded();const _=this.light.getLight();let x=!1;for(const D in l)if(!Ze(l[D],_[D])){x=!0;break}if(!x)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,f),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,f=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=l;if(1===f){if("object"==typeof _.source){const x="terrain-dem-src";this.addSource(x,_.source),_=p.clone$1(_),_=p.extend(_,{source:x})}if(this._validate(p.validateTerrain,"terrain",_))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,f)}else{const x=this.terrain,w=x.get();for(const D of Object.keys(p.spec.terrain))!_.hasOwnProperty(D)&&p.spec.terrain[D].default&&(_[D]=p.spec.terrain[D].default);for(const D in _)if(!Ze(_[D],w[D])){x.set(_),this.stylesheet.terrain=_;const A=this._setTransitionParameters({duration:0});x.updateTransitions(A);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const f=this.fog=new Ea(l,this.map.transform);this.stylesheet.fog=l;const _=this._setTransitionParameters({duration:0});f.updateTransitions(_)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,_=f.get();0===Object.keys(l).length&&f.set(l);for(const x in l)if(!Ze(l[x],_[x])){f.set(l),this.stylesheet.fog=l;const w=this._setTransitionParameters({duration:0});f.updateTransitions(w);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:p.exported.now(),transition:p.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(_=>this.isLayerDraped(this._layers[_])),f=this._order.filter(_=>!this.isLayerDraped(this._layers[_]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...f)}_createTerrain(l,f){const _=this.terrain=new xi(l,f);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const x=this._setTransitionParameters({duration:0});_.updateTransitions(x)}_force3DLayerUpdate(){for(const l in this._layers){const f=this._layers[l];"fill-extrusion"===f.type&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const f=this._layers[l];"symbol"===f.type&&this._updateLayer(f)}}_validate(l,f,_,x,w={}){return(!w||!1!==w.validate)&&ns(this,l.call(p.validateStyle,p.extend({key:f,style:this.serialize(),value:_,styleSpec:p.spec},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),p.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const f=this._getSourceCaches(l);for(const _ of f)_.clearTiles()}_reloadSource(l){const f=this._getSourceCaches(l);for(const _ of f)_.resume(),_.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const f in this._sourceCaches)this._sourceCaches[f].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const f=this._sourceCaches[l];f.resume(),f.reload()}}_updatePlacement(l,f,_,x,w=!1){let D=!1,A=!1;const L={};for(const P of this._order){const R=this._layers[P];if("symbol"!==R.type)continue;if(!L[R.source]){const Y=this._getLayerSourceCache(R);if(!Y)continue;L[R.source]=Y.getRenderableIds(!0).map(Q=>Y.getTileByID(Q)).sort((Q,te)=>te.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(te.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(R,L[R.source],l.center.lng,l.projection);D=D||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||0===_,this._layerOrderChanged&&this.fire(new p.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.exported.now(),l.zoom))&&(this.pauseablePlacement=new Sc(l,this._order,w,f,_,x,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.exported.now()),A=!0),D&&this.pauseablePlacement.placement.setStale()),A||D)for(const P of this._order){const R=this._layers[P];"symbol"===R.type&&this.placement.updateLayerOpacities(R,L[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,f,_){this.imageManager.getImages(f.icons,_),this._updateTilesForChangedImages();const x=w=>{w&&w.setDependencies(f.tileID.key,f.type,f.icons)};x(this._otherSourceCaches[f.source]),x(this._symbolSourceCaches[f.source])}getGlyphs(l,f,_){this.glyphManager.getGlyphs(f.stacks,_)}getResource(l,f,_){return p.makeRequest(f,_)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return"symbol"===l.type?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const f=[];return this._otherSourceCaches[l]&&f.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&f.push(this._symbolSourceCaches[l]),f}_isSourceCacheLoaded(l){const f=this._getSourceCaches(l);return 0===f.length?(this.fire(new p.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):f.every(_=>_.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}oi.getSourceType=function(m){return Ee[m]},oi.setSourceType=function(m,l){Ee[m]=l},oi.registerForPluginStateChange=p.registerForPluginStateChange;var go="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",x3="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",_o="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",t1="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",Ac="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let b3={},si={};const Na=[];is(go,Na),is(_o,Na),is(t1,Na),is(Ac,Na),b3=Z1("",_o),si=Z1(Ac,t1);const C3=Z1("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Hn=go,w3="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var w4={background:Z1("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Z1("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Z1("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Z1("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Z1("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Z1("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Z1("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Z1("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Z1("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Z1("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Z1("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Z1("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Z1("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Z1("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Z1("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Z1("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Z1("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Z1("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Z1("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Z1("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Z1("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Z1("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Z1("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Z1("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Z1("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Z1("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",x3),skyboxGradient:Z1("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",x3),skyboxCapture:Z1("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Z1("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Z1("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function is(m,l){const f=m.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let _ of f)if(_=_.trim(),"#"===_[0]&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=_.split(" ");for(const w of x)l.includes(w)||l.push(w)}}function Z1(m,l){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),x={},w=[...Na];return is(m,w),is(l,w),{fragmentSource:m=m.replace(f,(D,A,L,P,R)=>(x[R]=!0,"define"===A?`\n#ifndef HAS_UNIFORM_u_${R}\nvarying ${L} ${P} ${R};\n#else\nuniform ${L} ${P} u_${R};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${R}\n    ${L} ${P} ${R} = u_${R};\n#endif\n`)),vertexSource:l=l.replace(f,(D,A,L,P,R)=>{const B="float"===P?"vec2":"vec4",Y=R.match(/color/)?"color":B;return x[R]?"define"===A?`\n#ifndef HAS_UNIFORM_u_${R}\nuniform lowp float u_${R}_t;\nattribute ${L} ${B} a_${R};\nvarying ${L} ${P} ${R};\n#else\nuniform ${L} ${P} u_${R};\n#endif\n`:"vec4"===Y?`\n#ifndef HAS_UNIFORM_u_${R}\n    ${R} = a_${R};\n#else\n    ${L} ${P} ${R} = u_${R};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${R}\n    ${R} = unpack_mix_${Y}(a_${R}, u_${R}_t);\n#else\n    ${L} ${P} ${R} = u_${R};\n#endif\n`:"define"===A?`\n#ifndef HAS_UNIFORM_u_${R}\nuniform lowp float u_${R}_t;\nattribute ${L} ${B} a_${R};\n#else\nuniform ${L} ${P} u_${R};\n#endif\n`:"vec4"===Y?`\n#ifndef HAS_UNIFORM_u_${R}\n    ${L} ${P} ${R} = a_${R};\n#else\n    ${L} ${P} ${R} = u_${R};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${R}\n    ${L} ${P} ${R} = unpack_mix_${Y}(a_${R}, u_${R}_t);\n#else\n    ${L} ${P} ${R} = u_${R};\n#endif\n`}),staticAttributes:_,usedDefines:w}}class vo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,f,_,x,w,D,A){this.context=l;let L=this.boundPaintVertexBuffers.length!==x.length;for(let R=0;!L&&R<x.length;R++)this.boundPaintVertexBuffers[R]!==x[R]&&(L=!0);let P=this.boundDynamicVertexBuffers.length!==A.length;for(let R=0;!P&&R<A.length;R++)this.boundDynamicVertexBuffers[R]!==A[R]&&(P=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==_||L||P||this.boundIndexBuffer!==w||this.boundVertexOffset!==D)this.freshBind(f,_,x,w,D,A);else{l.bindVertexArrayOES.set(this.vao);for(const R of A)R&&R.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(l,f,_,x,w,D){let A;const L=l.numAttributes,P=this.context,R=P.gl;if(P.extVertexArrayObject)this.vao&&this.destroy(),this.vao=P.extVertexArrayObject.createVertexArrayOES(),P.bindVertexArrayOES.set(this.vao),A=0,this.boundProgram=l,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=x,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=D;else{A=P.currentNumAttributes||0;for(let B=L;B<A;B++)R.disableVertexAttribArray(B)}f.enableAttributes(R,l),f.bind(),f.setVertexAttribPointers(R,l,w);for(const B of _)B.enableAttributes(R,l),B.bind(),B.setVertexAttribPointers(R,l,w);for(const B of D)B&&(B.enableAttributes(R,l),B.bind(),B.setVertexAttribPointers(R,l,w));x&&x.bind(),P.currentNumAttributes=L}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function rs(m,l){const f=Math.pow(2,l.canonical.z),_=l.canonical.y;return[new p.MercatorCoordinate(0,_/f).toLngLat().lat,new p.MercatorCoordinate(0,(_+1)/f).toLngLat().lat]}function Zs(m,l,f,_,x,w,D){const A=m.context,L=A.gl,P=f.fbo;if(!P)return;m.prepareDrawTile();const R=m.useProgram("hillshade");A.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,P.colorAttachment.get());const B=((J,ee,q,oe)=>{const se=q.paint.get("hillshade-shadow-color"),ce=q.paint.get("hillshade-highlight-color"),ye=q.paint.get("hillshade-accent-color");let ve=q.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===q.paint.get("hillshade-illumination-anchor")&&(ve-=J.transform.angle);const Ce=!J.options.moving;return{u_matrix:oe||J.transform.calculateProjMatrix(ee.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:rs(0,ee.tileID),u_light:[q.paint.get("hillshade-exaggeration"),ve],u_shadow:se,u_highlight:ce,u_accent:ye}})(m,f,_,m.terrain?l.projMatrix:null);m.prepareDrawProgram(A,R,l.toUnwrapped());const{tileBoundsBuffer:Y,tileBoundsIndexBuffer:Q,tileBoundsSegments:te}=m.getTileBoundsBuffers(f);R.draw(A,L.TRIANGLES,x,w,D,p.CullFaceMode.disabled,B,_.id,Y,Q,te)}function as(m,l,f){if(!l.needsDEMTextureUpload)return;const _=m.context,x=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||m.getTileTexture(f.stride);const w=f.getPixels();l.demTexture?l.demTexture.update(w,{premultiply:!1}):l.demTexture=new p.Texture(_,w,x.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function os(m,l,f,_,x,w){const D=m.context,A=D.gl;if(!l.dem)return;const L=l.dem;if(D.activeTexture.set(A.TEXTURE1),as(m,l,L),!l.demTexture)return;l.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);const P=L.dim;D.activeTexture.set(A.TEXTURE0);let R=l.fbo;if(!R){const te=new p.Texture(D,{width:P,height:P,data:null},A.RGBA);te.bind(A.LINEAR,A.CLAMP_TO_EDGE),R=l.fbo=D.createFramebuffer(P,P,!0),R.colorAttachment.set(te.texture)}D.bindFramebuffer.set(R.framebuffer),D.viewport.set([0,0,P,P]);const{tileBoundsBuffer:B,tileBoundsIndexBuffer:Y,tileBoundsSegments:Q}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(D,A.TRIANGLES,_,x,w,p.CullFaceMode.disabled,((te,J)=>{const ee=J.stride,q=p.create();return p.ortho(q,0,p.EXTENT,-p.EXTENT,0,0,1),p.translate(q,q,[0,-p.EXTENT,0]),{u_matrix:q,u_image:1,u_dimension:[ee,ee],u_zoom:te.overscaledZ,u_unpack:J.unpackVector}})(l.tileID,L),f.id,B,Y,Q),l.needsHillshadePrepare=!1}const ss=m=>({u_matrix:new p.UniformMatrix4f(m),u_image0:new p.Uniform1i(m),u_skirt_height:new p.Uniform1f(m)}),or=(m,l)=>({u_matrix:m,u_image0:0,u_skirt_height:l}),ha=(m,l,f,_,x,w,D,A,L,P,R,B,Y,Q,te)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:f,u_zoom_transition:x,u_merc_center:w,u_image0:0,u_frustum_tl:D,u_frustum_tr:A,u_frustum_br:L,u_frustum_bl:P,u_globe_pos:R,u_globe_radius:B,u_viewport:Y,u_grid_matrix:te?Float32Array.from(te):new Float32Array(9),u_skirt_height:Q});function M3(m,l){return null!=m&&null!=l&&!(!m.hasData()||!l.hasData())&&null!=m.demTexture&&null!=l.demTexture&&m.tileID.key!==l.tileID.key}const Re=new class{constructor(){this.operations={}}newMorphing(m,l,f,_,x){if(m in this.operations){const w=this.operations[m];w.to.tileID.key!==f.tileID.key&&(w.queued=f)}else this.operations[m]={startTime:_,phase:0,duration:x,from:l,to:f,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const l=this.operations[m];return{from:l.from,to:l.to,phase:l.phase}}update(m){for(const l in this.operations){const f=this.operations[l];for(f.phase=(m-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,m)){delete this.operations[l];break}}}_nextOp(m,l){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=l,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},Oa={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function o1(m){return 6*Math.pow(1.5,22-m)}function cs(m,l){const f=1<<m.z;return!l&&(0===m.x||m.x===f-1)||0===m.y||m.y===f-1}const G1=m=>({u_matrix:m});function pa(m,l,f,_,x){if(x>0){const w=p.exported.now(),D=(w-m.timeAdded)/x,A=l?(w-l.timeAdded)/x:-1,L=f.getSource(),P=_.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),R=!l||Math.abs(l.tileID.overscaledZ-P)>Math.abs(m.tileID.overscaledZ-P),B=R&&m.refreshedUponExpiration?1:p.clamp(R?D:1-A,0,1);return m.refreshedUponExpiration&&D>=1&&(m.refreshedUponExpiration=!1),l?{opacity:1,mix:1-B}:{opacity:B,mix:0}}return{opacity:1,mix:0}}class M4 extends p.SourceCache{constructor(l){const f={type:"raster-dem",maxzoom:l.transform.maxZoom},_=new jr(Tt(),null),x=De("mock-dem",f,_,l.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,f){l.state="loaded",f(null)}}class Ec extends p.SourceCache{constructor(l){const f=De("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new jr(Tt(),null),l.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,f,_){if(l.freezeTileCoverage)return;this.transform=l;const x=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,D)=>{if(w[D.key]="",!this._tiles[D.key]){const A=new p.Tile(D,this._source.tileSize*D.overscaleFactor(),l.tileZoom);A.state="loaded",this._tiles[D.key]=A}return w},{});for(const w in this._tiles)w in x||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(l){const f=this.proxyCachedFBO[l];if(void 0!==f){const _=Object.values(f);this.renderCachePool.push(..._),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Vc extends p.OverscaledTileID{constructor(l,f,_){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=f,this.projMatrix=_}}class Dr extends p.Elevation{constructor(l,f){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,x,w]=function(L){const P=new p.StructArrayLayout2i4,R=new p.StructArrayLayout3ui6,B=131;P.reserve(17161),R.reserve(33800);const Y=p.EXTENT/128,Q=p.EXTENT+Y/2,te=Q+Y;for(let ee=-Y;ee<te;ee+=Y)for(let q=-Y;q<te;q+=Y){const oe=q<0||q>Q||ee<0||ee>Q?24575:0,se=p.clamp(Math.round(q),0,p.EXTENT),ce=p.clamp(Math.round(ee),0,p.EXTENT);P.emplaceBack(se+oe,ce)}const J=(ee,q)=>{const oe=q*B+ee;R.emplaceBack(oe+1,oe,oe+B),R.emplaceBack(oe+B,oe+B+1,oe+1)};for(let ee=1;ee<129;ee++)for(let q=1;q<129;q++)J(q,ee);return[0,129].forEach(ee=>{for(let q=0;q<130;q++)J(q,ee),J(ee,q)}),[P,R,32768]}(),D=l.context;this.gridBuffer=D.createVertexBuffer(_,p.posAttributes.members),this.gridIndexBuffer=D.createIndexBuffer(x),this.gridSegments=p.SegmentVector.simpleSegment(0,0,_.length,x.length),this.gridNoSkirtSegments=p.SegmentVector.simpleSegment(0,0,_.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ec(f.map),this.orthoMatrix=p.create(),p.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,p.EXTENT,0,p.EXTENT,0,1);const A=D.gl;this._overlapStencilMode=new p.StencilMode({func:A.GEQUAL,mask:255},0,255,A.KEEP,A.KEEP,A.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new M4(f.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,f,_){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const x=l.terrain.properties;this.sourceCache=0===l.terrain.drapeRenderMode?this._mockSourceCache:l._getSourceCache(x.get("source")),this._exaggeration=x.get("exaggeration");const w=()=>{this.sourceCache.used&&p.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const D=this.getScaledDemTileSize();this.sourceCache.update(f,D,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),f.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==l.efficiency&&p.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&"source"===l.dataType?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):"style"===l.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=0===_._centerAltitude&&-1===this.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(_.center),-1),this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=f.getIds().map(L=>{const P=f.getTileByID(L).tileID;return P.projMatrix=_.calculateProjMatrix(P.toUnwrapped()),P});(function(L,P){const R=P.transform.pointCoordinate(P.transform.getCameraPoint()),B=new p.pointGeometry(R.x,R.y);L.sort((Y,Q)=>{if(Q.overscaledZ-Y.overscaledZ)return Q.overscaledZ-Y.overscaledZ;const te=new p.pointGeometry(Y.canonical.x+(1<<Y.canonical.z)*Y.wrap,Y.canonical.y),J=new p.pointGeometry(Q.canonical.x+(1<<Q.canonical.z)*Q.wrap,Q.canonical.y),ee=B.mult(1<<Y.canonical.z);return ee.x-=.5,ee.y-=.5,ee.distSqr(te)-ee.distSqr(J)})})(x,this.painter),this._previousZoom=_.zoom;const w=this.proxyToSource||{};this.proxyToSource={},x.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const D=this._style._sourceCaches;for(const L in D){const P=D[L];if(!P.used||(P!==this.sourceCache&&this.resetTileLookupCache(P.id),this._setupProxiedCoordsForOrtho(P,l[L],w),P.usedForTerrain))continue;const R=l[L];P.getSource().reparseOverscaled&&this._assignTerrainTiles(R)}this.proxiedCoords[f.id]=x.map(L=>new Vc(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=p.exported.now();const A={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const P=this.terrainTileForTile[L.key];if(!P)continue;const R=P.tileID.key;R in A||(this._visibleDemTiles.push(P),A[R]=R)}}_assignTerrainTiles(l){this._initializing||l.forEach(f=>{if(this.terrainTileForTile[f.key])return;const _=this._findTileCoveringTileID(f,this.sourceCache);_&&(this.terrainTileForTile[f.key]=_)})}_prepareDEMTextures(){const l=this.painter.context,f=l.gl;for(const _ in this.terrainTileForTile){const x=this.terrainTileForTile[_],w=x.dem;!w||x.demTexture&&!x.needsDEMTextureUpload||(l.activeTexture.set(f.TEXTURE1),as(this.painter,x,w))}}_prepareDemTileUniforms(l,f,_,x){if(!f||null==f.demTexture)return!1;const w=l.tileID.canonical,D=Math.pow(2,f.tileID.canonical.z-w.z),A=x||"";return _[`u_dem_tl${A}`]=[w.x*D%1,w.y*D%1],_[`u_dem_scale${A}`]=D,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,f=l.gl;if(!this._emptyDepthBufferTexture){const _=new p.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new p.Texture(l,_,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const f=this._visibleDemTiles.reduce((_,x)=>{if(!x.dem)return _;const w=x.dem.tree.minimums[0];return w>0&&l++,_+w},0);return l?f/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,f=l.gl;l.activeTexture.set(f.TEXTURE2);const _=this._getLoadedAreaMinimum(),x=new p.RGBAImage({width:1,height:1},new Uint8Array(p.DEMData.pack(_,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(x,{premultiply:!1}):w=this._emptyDEMTexture=new p.Texture(l,x,f.RGBA,{premultiply:!1}),w}setupElevationDraw(l,f,_){const x=this.painter.context,w=x.gl,D=(A=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:p.DEMData.getUnpackVector(A),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var A;D.u_dem_size=this.sourceCache.getSource().tileSize,D.u_exaggeration=this.exaggeration();let L=null,P=null,R=1;if(_&&_.morphing&&this._useVertexMorphing){const B=_.morphing.srcDemTile,Y=_.morphing.dstDemTile;R=_.morphing.phase,B&&Y&&(this._prepareDemTileUniforms(l,B,D,"_prev")&&(P=B),this._prepareDemTileUniforms(l,Y,D)&&(L=Y))}if(P&&L?(x.activeTexture.set(w.TEXTURE2),L.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),x.activeTexture.set(w.TEXTURE4),P.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),D.u_dem_lerp=R):(L=this.terrainTileForTile[l.tileID.key],x.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(l,L,D)?L.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),x.activeTexture.set(w.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(D.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),D.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&L){const B=(1<<L.tileID.canonical.z)*p.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;D.u_meter_to_dem=B}if(_&&_.labelPlaneMatrixInv&&(D.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),f.setTerrainUniformValues(x,D),"globe"===this.painter.transform.projection.name){const B=this.globeUniformValues(this.painter.transform,l.tileID.canonical,_&&_.useDenormalizedUpVectorScale);f.setGlobeUniformValues(x,B)}}globeUniformValues(l,f,_){const x=l.projection;return{u_tile_tl_up:x.upVector(f,0,0),u_tile_tr_up:x.upVector(f,p.EXTENT,0),u_tile_br_up:x.upVector(f,p.EXTENT,p.EXTENT),u_tile_bl_up:x.upVector(f,0,p.EXTENT),u_tile_up_scale:_?p.globeMetersToEcef(1):x.upVectorScale(f,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const f=this.painter,_=this.painter.context;0!==l.length&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,w,D,A,L){if("globe"===x.transform.projection.name)!function(P,R,B,Y,Q){const te=P.context,J=te.gl;let ee,q;const oe=P.options.showTerrainWireframe?2:0,se=P.transform,ce=p.globeUseCustomAntiAliasing(P,te,se),ye=(at,Fe)=>{if(q===at)return;const Ae=[Oa[at],"PROJECTION_GLOBE_VIEW"];ce&&Ae.push("CUSTOM_ANTIALIASING"),Fe&&Ae.push(Oa[oe]),ee=P.useProgram("globeRaster",null,Ae),q=at},ve=P.colorModeForRenderPass(),Ce=new p.DepthMode(J.LEQUAL,p.DepthMode.ReadWrite,P.depthRangeFor3D);Re.update(Q);const Se=p.calculateGlobeMercatorMatrix(se),Ie=[p.mercatorXfromLng(se.center.lng),p.mercatorYfromLat(se.center.lat)],Pe=oe?[!1,!0]:[!1],mt=P.globeSharedBuffers,Le=[se.width*p.exported.devicePixelRatio,se.height*p.exported.devicePixelRatio],it=Float32Array.from(se.globeMatrix),Be={useDenormalizedUpVectorScale:!0};if(Pe.forEach(at=>{const Fe=P.transform,Ae=o1(Fe.zoom)*R.exaggeration();q=-1;const Ne=at?J.LINES:J.TRIANGLES;for(const ot of Y){const dt=B.getTile(ot),kt=p.StencilMode.disabled,A1=R.prevTerrainTileForTile[ot.key],Et=R.terrainTileForTile[ot.key];M3(A1,Et)&&Re.newMorphing(ot.key,A1,Et,Q,250),te.activeTexture.set(J.TEXTURE0),dt.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE);const Mt=Re.getMorphValuesForProxy(ot.key),Pt=Mt?1:0;Mt&&p.extend$1(Be,{morphing:{srcDemTile:Mt.from,dstDemTile:Mt.to,phase:p.easeCubicInOut(Mt.phase)}});const N1=p.tileCornersToBounds(ot.canonical),Nt=p.getLatitudinalLod(N1.getCenter().lat),hn=p.getGridMatrix(ot.canonical,N1,Nt,Fe.worldSize/Fe._pixelsPerMercatorPixel),_n=p.globeNormalizeECEF(p.globeTileBounds(ot.canonical)),Mn=ha(Fe.projMatrix,it,Se,_n,p.globeToMercatorTransition(Fe.zoom),Ie,Fe.frustumCorners.TL,Fe.frustumCorners.TR,Fe.frustumCorners.BR,Fe.frustumCorners.BL,Fe.globeCenterInViewSpace,Fe.globeRadius,Le,Ae,hn);if(ye(Pt,at),R.setupElevationDraw(dt,ee,Be),P.prepareDrawProgram(te,ee,ot.toUnwrapped()),mt){const[kn,a2,Di]=at?mt.getWirefameBuffers(P.context,Nt):mt.getGridBuffers(Nt,0!==Ae);ee.draw(te,Ne,Ce,kt,ve,p.CullFaceMode.backCCW,Mn,"globe_raster",kn,a2,Di)}}}),mt){const at=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ce&&at.push("CUSTOM_ANTIALIASING"),ee=P.useProgram("globeRaster",null,at);for(const Fe of Y){const{x:Ae,y:Ne,z:ot}=Fe.canonical,dt=0===Ne,kt=Ne===(1<<ot)-1,[A1,Et,Mt,Pt]=mt.getPoleBuffers(ot);if(Pt&&(dt||kt)){const N1=B.getTile(Fe);te.activeTexture.set(J.TEXTURE0),N1.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE);let Nt=p.globePoleMatrixForTile(ot,Ae,se);const hn=p.globeNormalizeECEF(p.globeTileBounds(Fe.canonical)),_n=(Mn,kn)=>Mn.draw(te,J.TRIANGLES,Ce,p.StencilMode.disabled,ve,p.CullFaceMode.disabled,ha(se.projMatrix,Nt,Nt,hn,0,Ie,se.frustumCorners.TL,se.frustumCorners.TR,se.frustumCorners.BR,se.frustumCorners.BL,se.globeCenterInViewSpace,se.globeRadius,Le,0),"globe_pole_raster",kn,Mt,Pt);R.setupElevationDraw(N1,ee,Be),P.prepareDrawProgram(te,ee,Fe.toUnwrapped()),dt&&_n(ee,A1),kt&&(Nt=p.scale(p.create(),Nt,[1,-1,1]),_n(ee,Et))}}}}(x,w,D,A,L);else{const P=x.context,R=P.gl;let B,Y;const Q=x.options.showTerrainWireframe?2:0,te=(se,ce)=>{if(Y===se)return;const ye=[Oa[se]];ce&&ye.push(Oa[Q]),B=x.useProgram("terrainRaster",null,ye),Y=se},J=x.colorModeForRenderPass(),ee=new p.DepthMode(R.LEQUAL,p.DepthMode.ReadWrite,x.depthRangeFor3D);Re.update(L);const q=x.transform,oe=o1(q.zoom)*w.exaggeration();(Q?[!1,!0]:[!1]).forEach(se=>{Y=-1;const ce=se?R.LINES:R.TRIANGLES,[ye,ve]=se?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const Ce of A){const Se=D.getTile(Ce),Ie=p.StencilMode.disabled,Pe=w.prevTerrainTileForTile[Ce.key],mt=w.terrainTileForTile[Ce.key];M3(Pe,mt)&&Re.newMorphing(Ce.key,Pe,mt,L,250),P.activeTexture.set(R.TEXTURE0),Se.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const Le=Re.getMorphValuesForProxy(Ce.key),it=Le?1:0;let Be;Le&&(Be={morphing:{srcDemTile:Le.from,dstDemTile:Le.to,phase:p.easeCubicInOut(Le.phase)}});const at=or(Ce.projMatrix,cs(Ce.canonical,q.renderWorldCopies)?oe/10:oe);te(it,se),w.setupElevationDraw(Se,B,Be),x.prepareDrawProgram(P,B,Ce.toUnwrapped()),B.draw(P,ce,ee,Ie,J,p.CullFaceMode.backCCW,at,"terrain_raster",w.gridBuffer,ye,ve)}})}}(f,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(0===this._drapedRenderBatches.length)return l+1;this.renderingToTexture=!0;const f=this.painter,_=this.painter.context,x=this.proxySourceCache,w=this.proxiedCoords[x.id],D=this._drapedRenderBatches.shift(),A=[],L=f.style.order;let P=0;for(const R of w){const B=x.getTileByID(R.proxyTileKey),Y=x.proxyCachedFBO[R.key]?x.proxyCachedFBO[R.key][l]:void 0,Q=void 0!==Y?x.renderCache[Y]:this.pool[P++],te=void 0!==Y;if(B.texture=Q.tex,te&&!Q.dirty){A.push(B.tileID);continue}let J;_.bindFramebuffer.set(Q.fb.framebuffer),this.renderedToTile=!1,Q.dirty&&(_.clear({color:p.Color.transparent,stencil:0}),Q.dirty=!1);for(let ee=D.start;ee<=D.end;++ee){const q=f.style._layers[L[ee]];if(q.isHidden(f.transform.zoom))continue;const oe=f.style._getLayerSourceCache(q),se=oe?this.proxyToSource[R.key][oe.id]:[R];if(!se)continue;const ce=se;_.viewport.set([0,0,Q.fb.width,Q.fb.height]),J!==(oe?oe.id:null)&&(this._setupStencil(Q,se,q,oe),J=oe?oe.id:null),f.renderLayer(f,oe,q,ce)}this.renderedToTile?(Q.dirty=!0,A.push(B.tileID)):te||--P,5===P&&(P=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,f.width,f.height]),D.end+1}postRender(){}renderCacheEfficiency(l){const f=l.order.length;if(0===f)return{efficiency:100};let _,x=0,w=0,D=!1;for(let A=0;A<f;++A){const L=l._layers[l.order[A]];this._style.isLayerDraped(L)?(D&&++x,++w):D||(D=!0,_=L.id)}return 0===w?{efficiency:100}:{efficiency:100*(1-x/w),firstUndrapedLayer:_}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{l=Math.min(l,f.dem.tree.minimums[0])}),0===l?l:(l-30)*this._exaggeration}raycast(l,f,_){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const D=w.tileID,A=1<<D.overscaledZ,{x:L,y:P}=D.canonical,R=L/A,B=(L+1)/A,Y=P/A,Q=(P+1)/A;return{minx:R,miny:Y,maxx:B,maxy:Q,t:w.dem.tree.raycastRoot(R,Y,B,Q,l,f,_),tile:w}});x.sort((w,D)=>(null!==w.t?w.t:Number.MAX_VALUE)-(null!==D.t?D.t:Number.MAX_VALUE));for(const w of x){if(null==w.t)return null;const D=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,l,f,_);if(null!=D)return D}return null}_createFBO(){const l=this.painter.context,f=l.gl,_=this.drapeBufferSize;l.activeTexture.set(f.TEXTURE0);const x=new p.Texture(l,{width:_[0],height:_[1],data:null},f.RGBA);x.bind(f.LINEAR,f.CLAMP_TO_EDGE);const w=l.createFramebuffer(_[0],_[1],!1);return w.colorAttachment.set(x.texture),w.depthAttachment=new $s(l,w.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:w,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const f=this._style._layers[l],_=f.isHidden(this.painter.transform.zoom);return"custom"===f.type?!_&&f.shouldRedrape():!_&&f.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const _ of this._style._getSources())if(_ instanceof U){l=!0;break}if(!l)return;const f={};for(let _=0;_<this._style.order.length;++_){const x=this._style._layers[this._style.order[_]],w=this._style._getLayerSourceCache(x);if(w&&!f[w.id]&&!x.isHidden(this.painter.transform.zoom)&&"line"===x.type&&x.widthExpression()instanceof p.ZoomDependentExpression){f[w.id]=!0;for(const D of this.proxyCoords){const A=this.proxyToSource[D.key][w.id];if(A)for(const L of A)this._clearRenderCacheForTile(w.id,L)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const _ in this._style._sourceCaches)if(this._style._sourceCaches[_]._source instanceof $){l=!0;break}if(!l)return;const f={};for(let _=0;_<this._style.order.length;++_){const x=this._style._layers[this._style.order[_]],w=this._style._getLayerSourceCache(x);if(!w||f[w.id]||x.isHidden(this.painter.transform.zoom)||"raster"!==x.type)continue;const D=x.paint.get("raster-fade-duration");for(const A of this.proxyCoords){const L=this.proxyToSource[A.key][w.id];if(L)for(const P of L){const R=pa(w.getTile(P),w.findLoadedParent(P,0),w,this.painter.transform,D);(1!==R.opacity||0!==R.mix)&&this._clearRenderCacheForTile(w.id,P)}}}}_setupDrapedRenderBatches(){const l=this._style.order,f=l.length;if(0===f)return;const _=[];let x,w=0,D=this._style._layers[l[w]];for(;!this._style.isLayerDraped(D)&&D.isHidden(this.painter.transform.zoom)&&++w<f;)D=this._style._layers[l[w]];for(;w<f;++w){const A=this._style._layers[l[w]];A.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(A)?void 0===x&&(x=w):void 0!==x&&(_.push({start:x,end:w-1}),x=void 0))}void 0!==x&&_.push({start:x,end:w-1}),this._drapedRenderBatches=_}_setupRenderCache(l){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const D=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let A=0;A<D.length;++A){const L=Object.values(D[A]);f.renderCachePool.push(...L)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,x=this._tilesDirty;for(let D=_.length-1;D>=0;D--){const A=_[D];if(f.getTileByID(A.key),void 0!==f.proxyCachedFBO[A.key]){const L=l[A.key],P=this.proxyToSource[A.key];let R=0;for(const B in P){const Y=P[B],Q=L[B];if(!Q||Q.length!==Y.length||Y.some((te,J)=>te!==Q[J]||x[B]&&x[B].hasOwnProperty(te.key))){R=-1;break}++R}for(const B in f.proxyCachedFBO[A.key])f.renderCache[f.proxyCachedFBO[A.key][B]].dirty=R<0||R!==Object.values(L).length}}const w=[...this._drapedRenderBatches];w.sort((D,A)=>A.end-A.start-(D.end-D.start));for(const D of w)for(const A of _){if(f.proxyCachedFBO[A.key])continue;let L=f.renderCachePool.pop();void 0===L&&f.renderCache.length<50&&(L=f.renderCache.length,f.renderCache.push(this._createFBO())),void 0!==L&&(f.proxyCachedFBO[A.key]={},f.proxyCachedFBO[A.key][D.start]=L,f.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(l,f,_,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,D=w.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let A;if(_.isTileClipped())A=f.length,this._overlapStencilMode.test={func:D.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);A=1,this._overlapStencilMode.test={func:D.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+A>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=A,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):p.StencilMode.disabled}_renderTileClippingMasks(l,f){const _=this.painter,x=this.painter.context,w=x.gl;_._tileClippingMaskIDs={},x.setColorMode(p.ColorMode.disabled),x.setDepthMode(p.DepthMode.disabled);const D=_.useProgram("clippingMask");for(const A of l){const L=_._tileClippingMaskIDs[A.key]=--f;D.draw(x,w.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:w.ALWAYS,mask:0},L,255,w.KEEP,w.KEEP,w.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,G1(A.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(l){const f=this.painter.transform;if(l.x<0||l.x>f.width||l.y<0||l.y>f.height)return null;const _=[l.x,l.y,1,1];p.transformMat4$1(_,_,f.pixelMatrixInverse),p.scale$1(_,_,1/_[3]),_[0]/=f.worldSize,_[1]/=f.worldSize;const x=f._camera.position,w=p.mercatorZfromAltitude(1,f.center.lat),D=[x[0],x[1],x[2]/w,0],A=p.subtract([],_.slice(0,3),D);p.normalize(A,A);const L=this.raycast(D,A,this._exaggeration);return null!==L&&L?(p.scaleAndAdd(D,D,A,L),D[3]=D[2],D[2]*=w,D):null}drawDepth(){const l=this.painter,f=l.context,_=this.proxySourceCache,x=Math.ceil(l.width),w=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===x&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const D=f.gl,A=f.createFramebuffer(x,w,!0);f.activeTexture.set(D.TEXTURE0);const L=new p.Texture(f,{width:x,height:w,data:null},D.RGBA);L.bind(D.NEAREST,D.CLAMP_TO_EDGE),A.colorAttachment.set(L.texture);const P=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,x,w);A.depthAttachment.set(P),this._depthFBO=A,this._depthTexture=L}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,x,w]),function(D,A,L,P){if("globe"===D.transform.projection.name)return;const R=D.context,B=R.gl;R.clear({depth:1});const Y=D.useProgram("terrainDepth"),Q=new p.DepthMode(B.LESS,p.DepthMode.ReadWrite,D.depthRangeFor3D);for(const te of P){const J=L.getTile(te),ee=or(te.projMatrix,0);A.setupElevationDraw(J,Y),Y.draw(R,B.TRIANGLES,Q,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.backCCW,ee,"terrain_depth",A.gridBuffer,A.gridIndexBuffer,A.gridNoSkirtSegments)}}(l,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,f,_){if(l.getSource()instanceof be)return this._setupProxiedCoordsForImageSource(l,f,_);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const x=this.proxiedCoords[l.id]=[],w=this.proxyCoords;for(let A=0;A<w.length;A++){const L=w[A],P=this._findTileCoveringTileID(L,l);if(P){const R=this._createProxiedId(L,P,_[L.key]&&_[L.key][l.id]);x.push(R),this.proxyToSource[L.key][l.id]=[R]}}let D=!1;for(let A=0;A<f.length;A++){const L=l.getTile(f[A]);if(!L||!L.hasData())continue;const P=this._findTileCoveringTileID(L.tileID,this.proxySourceCache);if(P&&P.tileID.canonical.z!==L.tileID.canonical.z){const R=this.proxyToSource[P.tileID.key][l.id],B=this._createProxiedId(P.tileID,L,_[P.tileID.key]&&_[P.tileID.key][l.id]);R?R.splice(R.length-1,0,B):this.proxyToSource[P.tileID.key][l.id]=[B],x.push(B),D=!0}}this._sourceTilesOverlap[l.id]=D}_setupProxiedCoordsForImageSource(l,f,_){if(!l.getSource().loaded())return;const x=this.proxiedCoords[l.id]=[],w=this.proxyCoords,D=l.getSource(),A=new p.pointGeometry(D.tileID.x,D.tileID.y)._div(1<<D.tileID.z),L=D.coordinates.map(p.MercatorCoordinate.fromLngLat).reduce((R,B)=>(R.min.x=Math.min(R.min.x,B.x-A.x),R.min.y=Math.min(R.min.y,B.y-A.y),R.max.x=Math.max(R.max.x,B.x-A.x),R.max.y=Math.max(R.max.y,B.y-A.y),R),{min:new p.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new p.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),P=(R,B)=>{const Y=R.wrap+R.canonical.x/(1<<R.canonical.z),Q=R.canonical.y/(1<<R.canonical.z),te=p.EXTENT/(1<<R.canonical.z),J=B.wrap+B.canonical.x/(1<<B.canonical.z),ee=B.canonical.y/(1<<B.canonical.z);return Y+te<J+L.min.x||Y>J+L.max.x||Q+te<ee+L.min.y||Q>ee+L.max.y};for(let R=0;R<w.length;R++){const B=w[R];for(let Y=0;Y<f.length;Y++){const Q=l.getTile(f[Y]);if(!Q||!Q.hasData()||P(B,Q.tileID))continue;const te=this._createProxiedId(B,Q,_[B.key]&&_[B.key][l.id]),J=this.proxyToSource[B.key][l.id];J?J.push(te):this.proxyToSource[B.key][l.id]=[te],x.push(te)}}}_createProxiedId(l,f,_){let x=this.orthoMatrix;if(_){const w=_.find(D=>D.key===f.tileID.key);if(w)return w}if(f.tileID.key!==l.key){const w=l.canonical.z-f.tileID.canonical.z;let D,A,L;x=p.create();const P=f.tileID.wrap-l.wrap<<l.overscaledZ;w>0?(D=p.EXTENT>>w,A=D*((f.tileID.canonical.x<<w)-l.canonical.x+P),L=D*((f.tileID.canonical.y<<w)-l.canonical.y)):(D=p.EXTENT<<-w,A=p.EXTENT*(f.tileID.canonical.x-(l.canonical.x+P<<-w)),L=p.EXTENT*(f.tileID.canonical.y-(l.canonical.y<<-w))),p.ortho(x,0,D,0,D,0,1),p.translate(x,x,[A,L,0])}return new Vc(f.tileID,l.key,x)}_findTileCoveringTileID(l,f){let _=f.getTile(l);if(_&&_.hasData())return _;const x=this._findCoveringTileCache[f.id],w=x[l.key];if(_=w?f.getTileByID(w):null,_&&_.hasData()||null===w)return _;let D=_?_.tileID:l,A=D.overscaledZ;const L=f.getSource().minzoom,P=[];if(!w){const B=f.getSource().maxzoom;if(l.canonical.z>=B){const Y=l.canonical.z-B;f.getSource().reparseOverscaled?(A=Math.max(l.canonical.z+2,f.transform.tileZoom),D=new p.OverscaledTileID(A,l.wrap,B,l.canonical.x>>Y,l.canonical.y>>Y)):0!==Y&&(A=B,D=new p.OverscaledTileID(A,l.wrap,B,l.canonical.x>>Y,l.canonical.y>>Y))}D.key!==l.key&&(P.push(D.key),_=f.getTile(D))}const R=B=>{P.forEach(Y=>{x[Y]=B}),P.length=0};for(A-=1;A>=L&&(!_||!_.hasData());A--){_&&R(_.tileID.key);const B=D.calculateScaledKey(A);if(_=f.getTileByID(B),_&&_.hasData())break;const Y=x[B];if(null===Y)break;void 0===Y?P.push(B):_=f.getTileByID(Y)}return R(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,f){let _=this._tilesDirty[l];_||(_=this._tilesDirty[l]={}),_[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(f){let _=0;const x=new p.StructArrayLayout2ui4,w=131;for(let D=1;D<129;D++){for(let A=1;A<129;A++)_=D*w+A,x.emplaceBack(_,_+1),x.emplaceBack(_,_+w),x.emplaceBack(_+1,_+w),128===D&&x.emplaceBack(_+w,_+w+1);x.emplaceBack(_+1,_+1+w)}return x}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=p.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class sr{static cacheKey(l,f,_,x){let w=`${f}${x?x.cacheKey:""}`;for(const D of _)l.usedDefines.includes(D)&&(w+=`/${D}`);return w}constructor(l,f,_,x,w,D){const A=l.gl;this.program=A.createProgram();const L=function(q){const oe=[];for(let se=0;se<q.length;se++){if(null===q[se])continue;const ce=q[se].split(" ");oe.push(ce.pop())}return oe}(_.staticAttributes),P=x?x.getBinderAttributes():[],R=L.concat(P);let B=x?x.defines():[];B=B.concat(D.map(q=>`#define ${q}`));const Y=l.isWebGL2?"#version 300 es\n":"",Q=Y+B.concat(l.extStandardDerivatives&&0===Y.length?"#extension GL_OES_standard_derivatives : enable\n".concat(w3):w3,w3,Hn,C3.fragmentSource,si.fragmentSource,_.fragmentSource).join("\n"),te=Y+B.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Hn,C3.vertexSource,si.vertexSource,b3.vertexSource,_.vertexSource).join("\n"),J=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(J,Q),A.compileShader(J),A.attachShader(this.program,J);const ee=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{A.shaderSource(ee,te),A.compileShader(ee),A.attachShader(this.program,ee),this.attributes={},this.numAttributes=R.length;for(let q=0;q<this.numAttributes;q++)R[q]&&(A.bindAttribLocation(this.program,q,R[q]),this.attributes[R[q]]=q);A.linkProgram(this.program),A.deleteShader(ee),A.deleteShader(J),this.fixedUniforms=w(l),this.binderUniforms=x?x.getUniforms(l):[],D.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new p.Uniform1i(q=l),u_dem_prev:new p.Uniform1i(q),u_dem_unpack:new p.Uniform4f(q),u_dem_tl:new p.Uniform2f(q),u_dem_scale:new p.Uniform1f(q),u_dem_tl_prev:new p.Uniform2f(q),u_dem_scale_prev:new p.Uniform1f(q),u_dem_size:new p.Uniform1f(q),u_dem_lerp:new p.Uniform1f(q),u_exaggeration:new p.Uniform1f(q),u_depth:new p.Uniform1i(q),u_depth_size_inv:new p.Uniform2f(q),u_meter_to_dem:new p.Uniform1f(q),u_label_plane_matrix_inv:new p.UniformMatrix4f(q)}),D.includes("GLOBE")&&(this.globeUniforms=(q=>({u_tile_tl_up:new p.Uniform3f(q),u_tile_tr_up:new p.Uniform3f(q),u_tile_br_up:new p.Uniform3f(q),u_tile_bl_up:new p.Uniform3f(q),u_tile_up_scale:new p.Uniform1f(q)}))(l)),D.includes("FOG")&&(this.fogUniforms=(q=>({u_fog_matrix:new p.UniformMatrix4f(q),u_fog_range:new p.Uniform2f(q),u_fog_color:new p.Uniform4f(q),u_fog_horizon_blend:new p.Uniform1f(q),u_fog_temporal_offset:new p.Uniform1f(q),u_frustum_tl:new p.Uniform3f(q),u_frustum_tr:new p.Uniform3f(q),u_frustum_br:new p.Uniform3f(q),u_frustum_bl:new p.Uniform3f(q),u_globe_pos:new p.Uniform3f(q),u_globe_radius:new p.Uniform1f(q),u_globe_transition:new p.Uniform1f(q),u_is_globe:new p.Uniform1i(q),u_viewport:new p.Uniform2f(q)}))(l))}var q}setTerrainUniformValues(l,f){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in f)_[x]&&_[x].set(this.program,x,f[x])}}setGlobeUniformValues(l,f){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in f)_[x]&&_[x].set(this.program,x,f[x])}}setFogUniformValues(l,f){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in f)_[x].set(this.program,x,f[x])}}draw(l,f,_,x,w,D,A,L,P,R,B,Y,Q,te,J){const ee=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(_),l.setStencilMode(x),l.setColorMode(w),l.setCullFace(D);for(const oe of Object.keys(this.fixedUniforms))this.fixedUniforms[oe].set(this.program,oe,A[oe]);te&&te.setUniforms(this.program,l,this.binderUniforms,Y,{zoom:Q});const q={[ee.LINES]:2,[ee.TRIANGLES]:3,[ee.LINE_STRIP]:1}[f];for(const oe of B.get()){const se=oe.vaos||(oe.vaos={});(se[L]||(se[L]=new vo)).bind(l,this,P,te?te.getPaintVertexBuffers():[],R,oe.vertexOffset,J||[]),ee.drawElements(f,oe.primitiveLength*q,ee.UNSIGNED_SHORT,oe.primitiveOffset*q*2)}}}function cr(m,l){const f=Math.pow(2,l.tileID.overscaledZ),_=l.tileSize*Math.pow(2,m.transform.tileZoom)/f,x=_*(l.tileID.canonical.x+l.tileID.wrap*f),w=_*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/er(l,1,m.transform.tileZoom),u_pixel_coord_upper:[x>>16,w>>16],u_pixel_coord_lower:[65535&x,65535&w]}}const Xr=p.create(),sn=(m,l,f,_,x,w,D,A,L,P,R)=>{const B=l.style.light,Y=B.properties.get("position"),Q=[Y.x,Y.y,Y.z],te=p.create$1();"viewport"===B.properties.get("anchor")&&(p.fromRotation(te,-l.transform.angle),p.transformMat3(Q,Q,te));const J=B.properties.get("color"),ee=l.transform,q={u_matrix:m,u_lightpos:Q,u_lightintensity:B.properties.get("intensity"),u_lightcolor:[J.r,J.g,J.b],u_vertical_gradient:+f,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Xr,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:x,u_edge_radius:w};return"globe"===ee.projection.name&&(q.u_tile_id=[D.canonical.x,D.canonical.y,1<<D.canonical.z],q.u_zoom_transition=L,q.u_inv_rot_matrix=R,q.u_merc_center=P,q.u_up_dir=ee.projection.upVector(new p.CanonicalTileID(0,0,0),P[0]*p.EXTENT,P[1]*p.EXTENT),q.u_height_lift=A),q},Ba=(m,l,f,_,x,w,D,A,L,P,R,B)=>{const Y=sn(m,l,f,_,x,w,D,L,P,R,B),Q={u_height_factor:-Math.pow(2,D.overscaledZ)/A.tileSize/8};return p.extend(Y,cr(l,A),Q)},yo=m=>({u_matrix:m}),xo=(m,l,f)=>p.extend(yo(m),cr(l,f)),Ys=(m,l)=>({u_matrix:m,u_world:l}),Kr=(m,l,f,_)=>p.extend(xo(m,l,f),{u_world:_}),Xs=p.create(),Ks=(m,l,f,_,x,w)=>{const D=m.transform,A="globe"===D.projection.name;let L;if("map"===w.paint.get("circle-pitch-alignment"))if(A){const R=p.globePixelsToTileUnits(D.zoom,l.canonical)*D._pixelsPerMercatorPixel;L=Float32Array.from([R,0,0,R])}else L=D.calculatePixelsToTileUnitsMatrix(f);else L=new Float32Array([D.pixelsToGLUnits[0],0,0,D.pixelsToGLUnits[1]]);const P={u_camera_to_center_distance:D.cameraToCenterDistance,u_matrix:m.translatePosMatrix(l.projMatrix,f,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:p.exported.devicePixelRatio,u_extrude_scale:L,u_inv_rot_matrix:Xs,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(A){P.u_inv_rot_matrix=_,P.u_merc_center=x,P.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],P.u_zoom_transition=p.globeToMercatorTransition(D.zoom);const R=x[0]*p.EXTENT,B=x[1]*p.EXTENT;P.u_up_dir=D.projection.upVector(new p.CanonicalTileID(0,0,0),R,B)}return P},Ft=m=>{const l=[];return"map"===m.paint.get("circle-pitch-alignment")&&l.push("PITCH_WITH_MAP"),"map"===m.paint.get("circle-pitch-scale")&&l.push("SCALE_WITH_MAP"),l},z4=(m,l,f,_)=>{const x=p.EXTENT/f.tileSize;return{u_matrix:m,u_camera_to_center_distance:l.getCameraToCenterDistance(_),u_extrude_scale:[l.pixelsToGLUnits[0]/x,l.pixelsToGLUnits[1]/x]}},Qs=(m,l,f=1)=>({u_matrix:m,u_color:l,u_overlay:0,u_overlay_scale:f}),z3=p.create(),n1=(m,l,f,_,x,w,D)=>{const A=m.transform,L="globe"===A.projection.name,P=L?p.globePixelsToTileUnits(A.zoom,l.canonical)*A._pixelsPerMercatorPixel:er(f,1,w),R={u_matrix:l.projMatrix,u_extrude_scale:P,u_intensity:D,u_inv_rot_matrix:z3,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){R.u_inv_rot_matrix=_,R.u_merc_center=x,R.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],R.u_zoom_transition=p.globeToMercatorTransition(A.zoom);const B=x[0]*p.EXTENT,Y=x[1]*p.EXTENT;R.u_up_dir=A.projection.upVector(new p.CanonicalTileID(0,0,0),B,Y)}return R},Lc=(m,l,f,_,x,w,D)=>{const A=m.transform,L=A.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:H2(m,l,f,_),u_pixels_to_tile_units:L,u_device_pixel_ratio:w,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:dn(f)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:je(l,m.transform),u_alpha_discard_threshold:0,u_trim_offset:D}},S3=(m,l,f,_,x)=>{const w=m.transform;return{u_matrix:H2(m,l,f,_),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:x,u_image:0,u_tile_units_to_pixels:je(l,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function je(m,l){return 1/er(m,1,l.tileZoom)}function H2(m,l,f,_){return m.translatePosMatrix(_||l.tileID.projMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function dn(m){const l=m.paint.get("line-dasharray").value;return l.value||"constant"!==l.kind}const k2=(m,l,f,_,x,w)=>{return{u_matrix:m,u_tl_parent:l,u_scale_parent:f,u_fade_t:_.mix,u_opacity:_.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(A=x.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(D=x.paint.get("raster-contrast"),D>0?1/(1-D):1+D),u_spin_weights:I2(x.paint.get("raster-hue-rotate")),u_perspective_transform:w};var D,A};function I2(m){m*=Math.PI/180;const l=Math.sin(m),f=Math.cos(m);return[(2*f+1)/3,(-Math.sqrt(3)*l-f+1)/3,(Math.sqrt(3)*l-f+1)/3]}const bo=p.create(),R2=(m,l,f,_,x,w,D,A,L,P,R,B,Y,Q,te,J)=>{const ee=x.transform,q={u_is_size_zoom_constant:+("constant"===m||"source"===m),u_is_size_feature_constant:+("constant"===m||"camera"===m),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:ee.width/ee.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:D,u_coord_matrix:A,u_is_text:+L,u_pitch_with_map:+_,u_texsize:P,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:bo,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:bo,u_up_vector:[0,-1,0]};return"globe"===J.name&&(q.u_tile_id=[R.canonical.x,R.canonical.y,1<<R.canonical.z],q.u_zoom_transition=B,q.u_inv_rot_matrix=Q,q.u_merc_center=Y,q.u_camera_forward=ee._camera.forward(),q.u_ecef_origin=p.globeECEFOrigin(ee.globeMatrix,R.toUnwrapped()),q.u_tile_matrix=Float32Array.from(ee.globeMatrix),q.u_up_vector=te),q},D3=(m,l,f,_,x,w,D,A,L,P,R,B,Y,Q,te,J,ee)=>p.extend(R2(m,l,f,_,x,w,D,A,L,P,B,Y,Q,te,J,ee),{u_gamma_scale:_?x.transform.cameraToCenterDistance*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:p.exported.devicePixelRatio,u_is_halo:+R}),Js=(m,l,f,_,x,w,D,A,L,P,R,B,Y,Q,te,J)=>p.extend(D3(m,l,f,_,x,w,D,A,!0,L,!0,R,B,Y,Q,te,J),{u_texsize_icon:P,u_texture_icon:1}),ls=(m,l,f)=>({u_matrix:m,u_opacity:l,u_color:f}),Ar=(m,l,f,_,x)=>p.extend(function(w,D,A){const L=D.imageManager.getPattern(w.toString()),{width:P,height:R}=D.imageManager.getPixelSize(),B=Math.pow(2,A.tileID.overscaledZ),Y=A.tileSize*Math.pow(2,D.transform.tileZoom)/B,Q=Y*(A.tileID.canonical.x+A.tileID.wrap*B),te=Y*A.tileID.canonical.y;return{u_image:0,u_pattern_tl:L.tl,u_pattern_br:L.br,u_texsize:[P,R],u_pattern_size:L.displaySize,u_tile_units_to_pixels:1/er(A,1,D.transform.tileZoom),u_pixel_coord_upper:[Q>>16,te>>16],u_pixel_coord_lower:[65535&Q,65535&te]}}(_,f,x),{u_matrix:m,u_opacity:l}),Rt={fillExtrusion:m=>({u_matrix:new p.UniformMatrix4f(m),u_lightpos:new p.Uniform3f(m),u_lightintensity:new p.Uniform1f(m),u_lightcolor:new p.Uniform3f(m),u_vertical_gradient:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m),u_edge_radius:new p.Uniform1f(m),u_ao:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_up_dir:new p.Uniform3f(m),u_height_lift:new p.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_lightpos:new p.Uniform3f(m),u_lightintensity:new p.Uniform1f(m),u_lightcolor:new p.Uniform3f(m),u_vertical_gradient:new p.Uniform1f(m),u_height_factor:new p.Uniform1f(m),u_edge_radius:new p.Uniform1f(m),u_ao:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_up_dir:new p.Uniform3f(m),u_height_lift:new p.Uniform1f(m),u_image:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m)}),fill:m=>({u_matrix:new p.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_image:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m)}),fillOutline:m=>({u_matrix:new p.UniformMatrix4f(m),u_world:new p.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_world:new p.Uniform2f(m),u_image:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new p.Uniform1f(m),u_extrude_scale:new p.UniformMatrix2f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_up_dir:new p.Uniform3f(m)}),collisionBox:m=>({u_matrix:new p.UniformMatrix4f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_extrude_scale:new p.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new p.UniformMatrix4f(m),u_inv_matrix:new p.UniformMatrix4f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_viewport_size:new p.Uniform2f(m)}),debug:m=>({u_color:new p.UniformColor(m),u_matrix:new p.UniformMatrix4f(m),u_overlay:new p.Uniform1i(m),u_overlay_scale:new p.Uniform1f(m)}),clippingMask:m=>({u_matrix:new p.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new p.Uniform1f(m),u_intensity:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_up_dir:new p.Uniform3f(m)}),heatmapTexture:m=>({u_image:new p.Uniform1i(m),u_color_ramp:new p.Uniform1i(m),u_opacity:new p.Uniform1f(m)}),hillshade:m=>({u_matrix:new p.UniformMatrix4f(m),u_image:new p.Uniform1i(m),u_latrange:new p.Uniform2f(m),u_light:new p.Uniform2f(m),u_shadow:new p.UniformColor(m),u_highlight:new p.UniformColor(m),u_accent:new p.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new p.UniformMatrix4f(m),u_image:new p.Uniform1i(m),u_dimension:new p.Uniform2f(m),u_zoom:new p.Uniform1f(m),u_unpack:new p.Uniform4f(m)}),line:m=>({u_matrix:new p.UniformMatrix4f(m),u_pixels_to_tile_units:new p.UniformMatrix2f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_units_to_pixels:new p.Uniform2f(m),u_dash_image:new p.Uniform1i(m),u_gradient_image:new p.Uniform1i(m),u_image_height:new p.Uniform1f(m),u_texsize:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m),u_alpha_discard_threshold:new p.Uniform1f(m),u_trim_offset:new p.Uniform2f(m)}),linePattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_texsize:new p.Uniform2f(m),u_pixels_to_tile_units:new p.UniformMatrix2f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_image:new p.Uniform1i(m),u_units_to_pixels:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m),u_alpha_discard_threshold:new p.Uniform1f(m)}),raster:m=>({u_matrix:new p.UniformMatrix4f(m),u_tl_parent:new p.Uniform2f(m),u_scale_parent:new p.Uniform1f(m),u_fade_t:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m),u_image0:new p.Uniform1i(m),u_image1:new p.Uniform1i(m),u_brightness_low:new p.Uniform1f(m),u_brightness_high:new p.Uniform1f(m),u_saturation_factor:new p.Uniform1f(m),u_contrast_factor:new p.Uniform1f(m),u_spin_weights:new p.Uniform3f(m),u_perspective_transform:new p.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new p.Uniform1i(m),u_is_size_feature_constant:new p.Uniform1i(m),u_size_t:new p.Uniform1f(m),u_size:new p.Uniform1f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_rotate_symbol:new p.Uniform1i(m),u_aspect_ratio:new p.Uniform1f(m),u_fade_change:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_label_plane_matrix:new p.UniformMatrix4f(m),u_coord_matrix:new p.UniformMatrix4f(m),u_is_text:new p.Uniform1i(m),u_pitch_with_map:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_camera_forward:new p.Uniform3f(m),u_tile_matrix:new p.UniformMatrix4f(m),u_up_vector:new p.Uniform3f(m),u_ecef_origin:new p.Uniform3f(m),u_texture:new p.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new p.Uniform1i(m),u_is_size_feature_constant:new p.Uniform1i(m),u_size_t:new p.Uniform1f(m),u_size:new p.Uniform1f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_rotate_symbol:new p.Uniform1i(m),u_aspect_ratio:new p.Uniform1f(m),u_fade_change:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_label_plane_matrix:new p.UniformMatrix4f(m),u_coord_matrix:new p.UniformMatrix4f(m),u_is_text:new p.Uniform1i(m),u_pitch_with_map:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_texture:new p.Uniform1i(m),u_gamma_scale:new p.Uniform1f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_camera_forward:new p.Uniform3f(m),u_tile_matrix:new p.UniformMatrix4f(m),u_up_vector:new p.Uniform3f(m),u_ecef_origin:new p.Uniform3f(m),u_is_halo:new p.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new p.Uniform1i(m),u_is_size_feature_constant:new p.Uniform1i(m),u_size_t:new p.Uniform1f(m),u_size:new p.Uniform1f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_rotate_symbol:new p.Uniform1i(m),u_aspect_ratio:new p.Uniform1f(m),u_fade_change:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_label_plane_matrix:new p.UniformMatrix4f(m),u_coord_matrix:new p.UniformMatrix4f(m),u_is_text:new p.Uniform1i(m),u_pitch_with_map:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_texsize_icon:new p.Uniform2f(m),u_texture:new p.Uniform1i(m),u_texture_icon:new p.Uniform1i(m),u_gamma_scale:new p.Uniform1f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_is_halo:new p.Uniform1i(m)}),background:m=>({u_matrix:new p.UniformMatrix4f(m),u_opacity:new p.Uniform1f(m),u_color:new p.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_opacity:new p.Uniform1f(m),u_image:new p.Uniform1i(m),u_pattern_tl:new p.Uniform2f(m),u_pattern_br:new p.Uniform2f(m),u_texsize:new p.Uniform2f(m),u_pattern_size:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m)}),terrainRaster:ss,terrainDepth:ss,skybox:m=>({u_matrix:new p.UniformMatrix4f(m),u_sun_direction:new p.Uniform3f(m),u_cubemap:new p.Uniform1i(m),u_opacity:new p.Uniform1f(m),u_temporal_offset:new p.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new p.UniformMatrix4f(m),u_color_ramp:new p.Uniform1i(m),u_center_direction:new p.Uniform3f(m),u_radius:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m),u_temporal_offset:new p.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new p.UniformMatrix3f(m),u_sun_direction:new p.Uniform3f(m),u_sun_intensity:new p.Uniform1f(m),u_color_tint_r:new p.Uniform4f(m),u_color_tint_m:new p.Uniform4f(m),u_luminance:new p.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new p.UniformMatrix4f(m),u_globe_matrix:new p.UniformMatrix4f(m),u_normalize_matrix:new p.UniformMatrix4f(m),u_merc_matrix:new p.UniformMatrix4f(m),u_zoom_transition:new p.Uniform1f(m),u_merc_center:new p.Uniform2f(m),u_image0:new p.Uniform1i(m),u_grid_matrix:new p.UniformMatrix3f(m),u_skirt_height:new p.Uniform1f(m),u_frustum_tl:new p.Uniform3f(m),u_frustum_tr:new p.Uniform3f(m),u_frustum_br:new p.Uniform3f(m),u_frustum_bl:new p.Uniform3f(m),u_globe_pos:new p.Uniform3f(m),u_globe_radius:new p.Uniform1f(m),u_viewport:new p.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new p.Uniform3f(m),u_frustum_tr:new p.Uniform3f(m),u_frustum_br:new p.Uniform3f(m),u_frustum_bl:new p.Uniform3f(m),u_horizon:new p.Uniform1f(m),u_transition:new p.Uniform1f(m),u_fadeout_range:new p.Uniform1f(m),u_color:new p.Uniform4f(m),u_high_color:new p.Uniform4f(m),u_space_color:new p.Uniform4f(m),u_star_intensity:new p.Uniform1f(m),u_star_density:new p.Uniform1f(m),u_star_size:new p.Uniform1f(m),u_temporal_offset:new p.Uniform1f(m),u_horizon_angle:new p.Uniform1f(m),u_rotation_matrix:new p.UniformMatrix4f(m)})};let g1;function Wn(m,l,f,_,x,w,D){const A=m.context,L=A.gl,P=m.transform,R=m.useProgram("collisionBox"),B=[];let Y=0,Q=0;for(let ce=0;ce<_.length;ce++){const ye=_[ce],ve=l.getTile(ye),Ce=ve.getBucket(f);if(!Ce)continue;const Se=x1(ye,Ce,P);let Ie=Se;0===x[0]&&0===x[1]||(Ie=m.translatePosMatrix(Se,ve,x,w));const Pe=D?Ce.textCollisionBox:Ce.iconCollisionBox,mt=Ce.collisionCircleArray;if(mt.length>0){const Le=p.create(),it=Ie;p.mul(Le,Ce.placementInvProjMatrix,P.glCoordMatrix),p.mul(Le,Le,Ce.placementViewportMatrix),B.push({circleArray:mt,circleOffset:Q,transform:it,invTransform:Le,projection:Ce.getProjection()}),Y+=mt.length/4,Q=Y}Pe&&(m.terrain&&m.terrain.setupElevationDraw(ve,R),R.draw(A,L.LINES,p.DepthMode.disabled,p.StencilMode.disabled,m.colorModeForRenderPass(),p.CullFaceMode.disabled,z4(Ie,P,ve,Ce.getProjection()),f.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,null,P.zoom,null,[Pe.collisionVertexBuffer,Pe.collisionVertexBufferExt]))}if(!D||!B.length)return;const te=m.useProgram("collisionCircle"),J=new p.StructArrayLayout2f1f2i16;J.resize(4*Y),J._trim();let ee=0;for(const ce of B)for(let ye=0;ye<ce.circleArray.length/4;ye++){const ve=4*ye,Ce=ce.circleArray[ve+0],Se=ce.circleArray[ve+1],Ie=ce.circleArray[ve+2],Pe=ce.circleArray[ve+3];J.emplace(ee++,Ce,Se,Ie,Pe,0),J.emplace(ee++,Ce,Se,Ie,Pe,1),J.emplace(ee++,Ce,Se,Ie,Pe,2),J.emplace(ee++,Ce,Se,Ie,Pe,3)}(!g1||g1.length<2*Y)&&(g1=function(ce){const ye=2*ce,ve=new p.StructArrayLayout3ui6;ve.resize(ye),ve._trim();for(let Ce=0;Ce<ye;Ce++){const Se=6*Ce;ve.uint16[Se+0]=4*Ce+0,ve.uint16[Se+1]=4*Ce+1,ve.uint16[Se+2]=4*Ce+2,ve.uint16[Se+3]=4*Ce+2,ve.uint16[Se+4]=4*Ce+3,ve.uint16[Se+5]=4*Ce+0}return ve}(Y));const q=A.createIndexBuffer(g1,!0),oe=A.createVertexBuffer(J,p.collisionCircleLayout.members,!0);for(const ce of B){const ye={u_matrix:ce.transform,u_inv_matrix:ce.invTransform,u_camera_to_center_distance:(se=P).getCameraToCenterDistance(ce.projection),u_viewport_size:[se.width,se.height]};te.draw(A,L.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,m.colorModeForRenderPass(),p.CullFaceMode.disabled,ye,f.id,oe,q,p.SegmentVector.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,P.zoom)}var se;oe.destroy(),q.destroy()}const wi=p.create();function Ua({width:m,height:l,anchor:f,textOffset:_,textScale:x},w){const{horizontalAlign:D,verticalAlign:A}=p.getAnchorAlignment(f),L=-(D-.5)*m,P=-(A-.5)*l,R=p.evaluateVariableOffset(f,_);return new p.pointGeometry((L/x+R[0])*w,(P/x+R[1])*w)}function l2(m,l,f,_,x,w,D,A,L,P,R){const B=m.text.placedSymbolArray,Y=m.text.dynamicLayoutVertexArray,Q=m.icon.dynamicLayoutVertexArray,te={},J=m.getProjection(),ee=un(A,J,w),q=w.elevation,oe=J.upVectorScale(A.canonical,w.center.lat,w.worldSize).metersToTile;Y.clear();for(let se=0;se<B.length;se++){const ce=B.get(se),{tileAnchorX:ye,tileAnchorY:ve,numGlyphs:Ce}=ce,Ie=ce.hidden||!ce.crossTileID||m.allowVerticalPlacement&&!ce.placedOrientation?null:_[ce.crossTileID];if(Ie){let Pe=0,mt=0,Le=0;if(q){const kt=q?q.getAtTileOffset(A,ye,ve):0,[A1,Et,Mt]=J.upVector(A.canonical,ye,ve);Pe=kt*A1*oe,mt=kt*Et*oe,Le=kt*Mt*oe}let[it,Be,at,Fe]=yt(ce.projectedAnchorX+Pe,ce.projectedAnchorY+mt,ce.projectedAnchorZ+Le,f?ee:D);const Ae=S1(w.getCameraToCenterDistance(J),Fe);let Ne=x.evaluateSizeForFeature(m.textSizeData,P,ce)*Ae/p.ONE_EM;f&&(Ne*=m.tilePixelRatio/L);const ot=Ua(Ie,Ne);f?(({x:it,y:Be,z:at}=J.projectTilePoint(ye+ot.x,ve+ot.y,A.canonical)),[it,Be,at]=yt(it+Pe,Be+mt,at+Le,D)):(l&&ot._rotate(-w.angle),it+=ot.x,Be+=ot.y,at=0);const dt=m.allowVerticalPlacement&&ce.placedOrientation===p.WritingMode.vertical?Math.PI/2:0;for(let kt=0;kt<Ce;kt++)p.addDynamicAttributes(Y,it,Be,at,dt);R&&ce.associatedIconIndex>=0&&(te[ce.associatedIconIndex]={x:it,y:Be,z:at,angle:dt})}else gn(Ce,Y)}if(R){Q.clear();const se=m.icon.placedSymbolArray;for(let ce=0;ce<se.length;ce++){const ye=se.get(ce),{numGlyphs:ve}=ye,Ce=te[ce];if(ye.hidden||!Ce)gn(ve,Q);else{const{x:Se,y:Ie,z:Pe,angle:mt}=Ce;for(let Le=0;Le<ve;Le++)p.addDynamicAttributes(Q,Se,Ie,Pe,mt)}}m.icon.dynamicLayoutVertexBuffer.updateData(Q)}m.text.dynamicLayoutVertexBuffer.updateData(Y)}function us(m,l,f){return f.iconsInText&&l?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function r2(m,l,f,_,x,w,D,A,L,P,R,B){const Y=m.context,Q=Y.gl,te=m.transform,J="map"===A,ee="map"===L,q=J&&"point"!==f.layout.get("symbol-placement"),oe=J&&!ee&&!q,se=void 0!==f.layout.get("symbol-sort-key").constantOr(1);let ce=!1;const ye=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),ve=[p.mercatorXfromLng(te.center.lng),p.mercatorYfromLat(te.center.lat)],Ce=f.layout.get("text-variable-anchor"),Se="globe"===te.projection.name,Ie=[],Pe=[0,-1,0];let mt=Pe;!Se&&!te.mercatorFromTransition||J||(mt=function(Le){const it=Le._camera.getWorldToCamera(Le.worldSize,1),Be=p.multiply([],it,Le.globeMatrix);p.invert(Be,Be);const at=[0,0,0],Fe=[0,1,0,0];return p.transformMat4$1(Fe,Fe,Be),at[0]=Fe[0],at[1]=Fe[1],at[2]=Fe[2],p.normalize(at,at),at}(te));for(const Le of _){const it=l.getTile(Le),Be=it.getBucket(f);if(!Be||"mercator"===Be.projection.name&&Se)continue;const at=x?Be.text:Be.icon;if(!at||Be.fullyClipped||!at.segments.get().length)continue;const Fe=at.programConfigurations.get(f.id),Ae=x||Be.sdfIcons,Ne=x?Be.textSizeData:Be.iconSizeData,ot=ee||0!==te.pitch,dt=p.evaluateSizeForZoom(Ne,te.zoom);let kt,A1,Et,Mt,Pt=[0,0],N1=null;if(x)A1=it.glyphAtlasTexture,Et=Q.LINEAR,kt=it.glyphAtlasTexture.size,Be.iconsInText&&(Pt=it.imageAtlasTexture.size,N1=it.imageAtlasTexture,Mt=ot||m.options.rotating||m.options.zooming||"composite"===Ne.kind||"camera"===Ne.kind?Q.LINEAR:Q.NEAREST);else{const Lr=1!==f.layout.get("icon-size").constantOr(0)||Be.iconsNeedLinear;A1=it.imageAtlasTexture,Et=Ae||m.options.rotating||m.options.zooming||Lr||ot?Q.LINEAR:Q.NEAREST,kt=it.imageAtlasTexture.size}const Nt="globe"===Be.projection.name,hn=Nt?mt:Pe,_n=Nt?p.globeToMercatorTransition(te.zoom):0,Mn=un(Le,Be.getProjection(),te),kn=te.calculatePixelsToTileUnitsMatrix(it),a2=Xo(Mn,it.tileID.canonical,ee,J,te,Be.getProjection(),kn),Di=m.terrain&&ee&&q?p.invert(p.create(),a2):wi,fr=W2(Mn,it.tileID.canonical,ee,J,te,Be.getProjection(),kn),ms=Ce&&Be.hasTextData(),On="none"!==f.layout.get("icon-text-fit")&&ms&&Be.hasIconData();if(q){const Lr=te.elevation,Tr=Lr?Lr.getAtTileOffsetFunc(Le,te.center.lat,te.worldSize,Be.getProjection()):null,Za=e2(Mn,it.tileID.canonical,ee,J,te,Be.getProjection(),kn);ar(Be,Mn,m,x,Za,fr,ee,P,Tr,Le)}const An=q||x&&Ce||On,cn=m.translatePosMatrix(Mn,it,w,D),zn=An?wi:a2,Ai=m.translatePosMatrix(fr,it,w,D,!0),En=Be.getProjection().createInversionMatrix(te,Le.canonical),K2=[];m.terrainRenderModeElevated()&&ee&&K2.push("PITCH_WITH_MAP_TERRAIN"),Nt&&K2.push("PROJECTION_GLOBE_VIEW"),An&&K2.push("PROJECTED_POS_ON_VIEWPORT");const ui=Ae&&0!==f.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1);let Wa;Wa=Ae?Be.iconsInText?Js(Ne.kind,dt,oe,ee,m,cn,zn,Ai,kt,Pt,Le,_n,ve,En,hn,Be.getProjection()):D3(Ne.kind,dt,oe,ee,m,cn,zn,Ai,x,kt,!0,Le,_n,ve,En,hn,Be.getProjection()):R2(Ne.kind,dt,oe,ee,m,cn,zn,Ai,x,kt,Le,_n,ve,En,hn,Be.getProjection());const gs={program:m.useProgram(us(Ae,x,Be),Fe,K2),buffers:at,uniformValues:Wa,atlasTexture:A1,atlasTextureIcon:N1,atlasInterpolation:Et,atlasInterpolationIcon:Mt,isSDF:Ae,hasHalo:ui,tile:it,labelPlaneMatrixInv:Di};if(se&&Be.canOverlap){ce=!0;const Lr=at.segments.get();for(const Tr of Lr)Ie.push({segments:new p.SegmentVector([Tr]),sortKey:Tr.sortKey,state:gs})}else Ie.push({segments:at.segments,sortKey:0,state:gs})}ce&&Ie.sort((Le,it)=>Le.sortKey-it.sortKey);for(const Le of Ie){const it=Le.state;if(m.terrain&&m.terrain.setupElevationDraw(it.tile,it.program,{useDepthForOcclusion:!Se,labelPlaneMatrixInv:it.labelPlaneMatrixInv}),Y.activeTexture.set(Q.TEXTURE0),it.atlasTexture.bind(it.atlasInterpolation,Q.CLAMP_TO_EDGE),it.atlasTextureIcon&&(Y.activeTexture.set(Q.TEXTURE1),it.atlasTextureIcon&&it.atlasTextureIcon.bind(it.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),it.isSDF){const Be=it.uniformValues;it.hasHalo&&(Be.u_is_halo=1,ec(it.buffers,Le.segments,f,m,it.program,ye,R,B,Be)),Be.u_is_halo=0}ec(it.buffers,Le.segments,f,m,it.program,ye,R,B,it.uniformValues)}}function ec(m,l,f,_,x,w,D,A,L){const P=_.context,R=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];x.draw(P,P.gl.TRIANGLES,w,D,A,p.CullFaceMode.disabled,L,f.id,m.layoutVertexBuffer,m.indexBuffer,l,f.paint,_.transform.zoom,m.programConfigurations.get(f.id),R)}function tc(m,l,f,_,x,w,D){const A=m.context.gl,L=f.paint.get("fill-pattern"),P=L&&L.constantOr(1);let R,B,Y,Q,te;D?(B=P&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",R=A.LINES):(B=P?"fillPattern":"fill",R=A.TRIANGLES);for(const J of _){const ee=l.getTile(J);if(P&&!ee.patternsLoaded())continue;const q=ee.getBucket(f);if(!q)continue;m.prepareDrawTile();const oe=q.programConfigurations.get(f.id),se=m.useProgram(B,oe);P&&(m.context.activeTexture.set(A.TEXTURE0),ee.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),oe.updatePaintBuffers());const ce=L.constantOr(null);if(ce&&ee.imageAtlas){const ve=ee.imageAtlas.patternPositions[ce.toString()];ve&&oe.setConstantPatternPositions(ve)}const ye=m.translatePosMatrix(J.projMatrix,ee,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(D){Q=q.indexBuffer2,te=q.segments2;const ve=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[A.drawingBufferWidth,A.drawingBufferHeight];Y="fillOutlinePattern"===B&&P?Kr(ye,m,ee,ve):Ys(ye,ve)}else Q=q.indexBuffer,te=q.segments,Y=P?xo(ye,m,ee):yo(ye);m.prepareDrawProgram(m.context,se,J.toUnwrapped()),se.draw(m.context,R,x,m.stencilModeForClipping(J),w,p.CullFaceMode.disabled,Y,f.id,q.layoutVertexBuffer,Q,te,f.paint,m.transform.zoom,oe)}}function P1(m,l,f,_,x,w,D){const A=m.context,L=A.gl,P=m.transform,R=f.paint.get("fill-extrusion-pattern"),B=R.constantOr(1),Y=f.paint.get("fill-extrusion-opacity"),Q=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],te=f.layout.get("fill-extrusion-edge-radius"),J="globe"===P.projection.name?p.fillExtrusionHeightLift():0,ee="globe"===P.projection.name,q=ee?p.globeToMercatorTransition(P.zoom):0,oe=[p.mercatorXfromLng(P.center.lng),p.mercatorYfromLat(P.center.lat)],se=[];ee&&se.push("PROJECTION_GLOBE_VIEW"),Q[0]>0&&se.push("FAUX_AO");for(const ce of _){const ye=l.getTile(ce),ve=ye.getBucket(f);if(!ve||ve.projection.name!==P.projection.name)continue;const Ce=ve.programConfigurations.get(f.id),Se=m.useProgram(B?"fillExtrusionPattern":"fillExtrusion",Ce,se);if(m.terrain){const at=m.terrain;if(m.style.terrainSetForDrapingOnly())at.setupElevationDraw(ye,Se,{useMeterToDem:!0});else{if(!ve.enableTerrain)continue;if(at.setupElevationDraw(ye,Se,{useMeterToDem:!0}),A3(A,l,ce,ve,f,at),!ve.centroidVertexBuffer){const Fe=Se.attributes.a_centroid_pos;void 0!==Fe&&L.vertexAttrib2f(Fe,0,0)}}}B&&(m.context.activeTexture.set(L.TEXTURE0),ye.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ce.updatePaintBuffers());const Ie=R.constantOr(null);if(Ie&&ye.imageAtlas){const at=ye.imageAtlas.patternPositions[Ie.toString()];at&&Ce.setConstantPatternPositions(at)}const Pe=m.translatePosMatrix(ce.projMatrix,ye,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),mt=P.projection.createInversionMatrix(P,ce.canonical),Le=f.paint.get("fill-extrusion-vertical-gradient"),it=B?Ba(Pe,m,Le,Y,Q,te,ce,ye,J,q,oe,mt):sn(Pe,m,Le,Y,Q,te,ce,J,q,oe,mt);m.prepareDrawProgram(A,Se,ce.toUnwrapped());const Be=[];m.terrain&&Be.push(ve.centroidVertexBuffer),ee&&Be.push(ve.layoutVertexExtBuffer),Se.draw(A,A.gl.TRIANGLES,x,w,D,p.CullFaceMode.backCCW,it,f.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,f.paint,m.transform.zoom,Ce,Be)}}function A3(m,l,f,_,x,w){const D=[q=>{let oe=q.canonical.x-1,se=q.wrap;return oe<0&&(oe=(1<<q.canonical.z)-1,se--),new p.OverscaledTileID(q.overscaledZ,se,q.canonical.z,oe,q.canonical.y)},q=>{let oe=q.canonical.x+1,se=q.wrap;return oe===1<<q.canonical.z&&(oe=0,se++),new p.OverscaledTileID(q.overscaledZ,se,q.canonical.z,oe,q.canonical.y)},q=>new p.OverscaledTileID(q.overscaledZ,q.wrap,q.canonical.z,q.canonical.x,(0===q.canonical.y?1<<q.canonical.z:q.canonical.y)-1),q=>new p.OverscaledTileID(q.overscaledZ,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y===(1<<q.canonical.z)-1?0:q.canonical.y+1)],A=q=>{const oe=l.getSource().minzoom,se=ye=>{const ve=l.getTileByID(ye);if(ve&&ve.hasData())return ve.getBucket(x)},ce=[0,-1,1];for(const ye of ce){if(q.overscaledZ+ye<oe)continue;const ve=se(q.calculateScaledKey(q.overscaledZ+ye));if(ve)return ve}},L=[0,0,0],P=(q,oe)=>(L[0]=Math.min(q.min.y,oe.min.y),L[1]=Math.max(q.max.y,oe.max.y),L[2]=p.EXTENT-oe.min.x>q.max.x?oe.min.x-p.EXTENT:q.max.x,L),R=(q,oe)=>(L[0]=Math.min(q.min.x,oe.min.x),L[1]=Math.max(q.max.x,oe.max.x),L[2]=p.EXTENT-oe.min.y>q.max.y?oe.min.y-p.EXTENT:q.max.y,L),B=[(q,oe)=>P(q,oe),(q,oe)=>P(oe,q),(q,oe)=>R(q,oe),(q,oe)=>R(oe,q)],Y=new p.pointGeometry(0,0);let Q,te,J;const ee=(q,oe,se,ce,ye)=>{const ve=[[ce?se:q,ce?q:se,0],[ce?se:oe,ce?oe:se,0]],Ce=ye<0?p.EXTENT+ye:ye,Se=[ce?Ce:(q+oe)/2,ce?(q+oe)/2:Ce,0];return 0===se&&ye<0||0!==se&&ye>0?w.getForTilePoints(J,[Se],!0,te):ve.push(Se),w.getForTilePoints(f,ve,!0,Q),Math.max(ve[0][2],ve[1][2],Se[2])/w.exaggeration()};for(let q=0;q<4;q++){const oe=(q<2?1:5)-q,se=_.borders[q];if(0===se.length)continue;const ce=J=D[q](f),ye=A(ce);if(!(ye&&ye instanceof p.FillExtrusionBucket&&ye.enableTerrain)||_.borderDoneWithNeighborZ[q]===ye.canonical.z&&ye.borderDoneWithNeighborZ[oe]===_.canonical.z||(te=w.findDEMTileFor(ce),!te||!te.dem))continue;if(!Q){const Ie=w.findDEMTileFor(f);if(!Ie||!Ie.dem)return;Q=Ie}const ve=ye.borders[oe];let Ce=0;const Se=ye.borderDoneWithNeighborZ[oe]!==_.canonical.z;if(_.canonical.z===ye.canonical.z){for(let Ie=0;Ie<se.length;Ie++){const Pe=_.featuresOnBorder[se[Ie]],mt=Pe.borders[q];let Le;for(;Ce<ve.length&&(Le=ye.featuresOnBorder[ve[Ce]],!(Le.borders[oe][1]>mt[0]+3));)Se&&ye.encodeCentroid(void 0,Le,!1),Ce++;if(Le&&Ce<ve.length){const it=Ce;let Be=0;for(;!(Le.borders[oe][0]>mt[1]-3)&&(Be++,++Ce!==ve.length);)Le=ye.featuresOnBorder[ve[Ce]];if(Le=ye.featuresOnBorder[ve[it]],Pe.intersectsCount()>1||Le.intersectsCount()>1||1!==Be){1!==Be&&(Ce=it),_.encodeCentroid(void 0,Pe,!1),Se&&ye.encodeCentroid(void 0,Le,!1);continue}const at=B[q](Pe,Le),Fe=q%2?p.EXTENT-1:0;Y.x=ee(at[0],Math.min(p.EXTENT-1,at[1]),Fe,q<2,at[2]),Y.y=0,_.encodeCentroid(Y,Pe,!1),Se&&ye.encodeCentroid(Y,Le,!1)}else _.encodeCentroid(void 0,Pe,!1)}_.borderDoneWithNeighborZ[q]=ye.canonical.z,_.needsCentroidUpdate=!0,Se&&(ye.borderDoneWithNeighborZ[oe]=_.canonical.z,ye.needsCentroidUpdate=!0)}else{for(const Ie of se)_.encodeCentroid(void 0,_.featuresOnBorder[Ie],!1);if(Se){for(const Ie of ve)ye.encodeCentroid(void 0,ye.featuresOnBorder[Ie],!1);ye.borderDoneWithNeighborZ[oe]=_.canonical.z,ye.needsCentroidUpdate=!0}_.borderDoneWithNeighborZ[q]=ye.canonical.z,_.needsCentroidUpdate=!0}}(_.needsCentroidUpdate||!_.centroidVertexBuffer&&0!==_.centroidVertexArray.length)&&_.uploadCentroid(m)}const Co=new p.Color(1,0,0,1),Qr=new p.Color(0,1,0,1),ja=new p.Color(0,0,1,1),P2=new p.Color(1,0,1,1),wo=new p.Color(0,1,1,1);function Ga(m,l,f){const _=m.context,x=m.transform,w=_.gl,D="globe"===x.projection.name,A=D?["PROJECTION_GLOBE_VIEW"]:null;let L=f.projMatrix;if(D&&p.globeToMercatorTransition(x.zoom)>0){const Pe=p.transitionTileAABBinECEF(f.canonical,x),mt=p.globeDenormalizeECEF(Pe);L=p.multiply(new Float32Array(16),x.globeMatrix,mt),p.multiply(L,x.projMatrix,L)}const P=m.useProgram("debug",null,A),R=l.getTileByID(f.key);m.terrain&&m.terrain.setupElevationDraw(R,P);const B=p.DepthMode.disabled,Y=p.StencilMode.disabled,Q=m.colorModeForRenderPass();_.activeTexture.set(w.TEXTURE0),m.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),D?R._makeGlobeTileDebugBuffers(m.context,x):R._makeDebugTileBoundsBuffers(m.context,x.projection);const J=R._tileDebugBuffer||m.debugBuffer,ee=R._tileDebugIndexBuffer||m.debugIndexBuffer,q=R._tileDebugSegments||m.debugSegments;P.draw(_,w.LINE_STRIP,B,Y,Q,p.CullFaceMode.disabled,Qs(L,p.Color.red),"$debug",J,ee,q,null,null,null,[R._globeTileDebugBorderBuffer]);const oe=R.latestRawTileData,se=Math.floor((oe&&oe.byteLength||0)/1024),ce=l.getTile(f).tileSize,ye=512/Math.min(ce,512)*(f.overscaledZ/x.zoom)*.5;let ve=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(ve+=` => ${f.overscaledZ}`),ve+=` ${se}kb`,function(Pe,mt){Pe.initDebugOverlayCanvas();const Le=Pe.debugOverlayCanvas,it=Pe.context.gl,Be=Pe.debugOverlayCanvas.getContext("2d");Be.clearRect(0,0,Le.width,Le.height),Be.shadowColor="white",Be.shadowBlur=2,Be.lineWidth=1.5,Be.strokeStyle="white",Be.textBaseline="top",Be.font="bold 36px Open Sans, sans-serif",Be.fillText(mt,5,5),Be.strokeText(mt,5,5),Pe.debugOverlayTexture.update(Le),Pe.debugOverlayTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE)}(m,ve);const Ce=R._tileDebugTextBuffer||m.debugBuffer,Se=R._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Ie=R._tileDebugTextSegments||m.debugSegments;P.draw(_,w.TRIANGLES,B,Y,p.ColorMode.alphaBlended,p.CullFaceMode.disabled,Qs(L,p.Color.transparent,ye),"$debug",Ce,Se,Ie,null,null,null,[R._globeTileDebugTextBuffer])}function F2(m,l,f,_){Mo(m,0,l+f/2,m.transform.width,f,_)}function Jr(m,l,f,_){Mo(m,l-f/2,0,f,m.transform.height,_)}function Mo(m,l,f,_,x,w){const D=m.context,A=D.gl;A.enable(A.SCISSOR_TEST),A.scissor(l*p.exported.devicePixelRatio,f*p.exported.devicePixelRatio,_*p.exported.devicePixelRatio,x*p.exported.devicePixelRatio),D.clear({color:w}),A.disable(A.SCISSOR_TEST)}const Cn=p.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:nc}=Cn;function Er(m,l,f,_){m.emplaceBack(l,f,_)}class Mi{constructor(l){this.vertexArray=new p.StructArrayLayout3f12,this.indices=new p.StructArrayLayout3ui6,Er(this.vertexArray,-1,-1,1),Er(this.vertexArray,1,-1,1),Er(this.vertexArray,-1,1,1),Er(this.vertexArray,1,1,1),Er(this.vertexArray,-1,-1,-1),Er(this.vertexArray,1,-1,-1),Er(this.vertexArray,-1,1,-1),Er(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,nc),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=p.SegmentVector.simpleSegment(0,0,36,12)}}function _1(m,l,f,_,x,w){const D=m.gl,A=l.paint.get("sky-atmosphere-color"),L=l.paint.get("sky-atmosphere-halo-color"),P=l.paint.get("sky-atmosphere-sun-intensity"),R={u_matrix_3f:p.fromMat4(p.create$1(),_),u_sun_direction:x,u_sun_intensity:P,u_color_tint_r:[(te=A).r,te.g,te.b,te.a],u_color_tint_m:[(J=L).r,J.g,J.b,J.a],u_luminance:5e-5};var te,J;D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+w,l.skyboxTexture,0),f.draw(m,D.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.frontCW,R,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const zo=p.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ds{constructor(l){const f=new p.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const _=new p.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(f,zo.members),this.indexBuffer=l.createIndexBuffer(_),this.segments=p.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const N2={symbol:function(m,l,f,_,x){if("translucent"!==m.renderPass)return;const w=p.StencilMode.disabled,D=m.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(A,L,P,R,B,Y,Q){const te=L.transform,J="map"===B,ee="map"===Y;for(const q of A){const oe=R.getTile(q),se=oe.getBucket(P);if(!se||!se.text||!se.text.segments.get().length)continue;const ce=p.evaluateSizeForZoom(se.textSizeData,te.zoom),ye=un(q,se.getProjection(),te),ve=te.calculatePixelsToTileUnitsMatrix(oe),Ce=Xo(ye,oe.tileID.canonical,ee,J,te,se.getProjection(),ve),Se="none"!==P.layout.get("icon-text-fit")&&se.hasIconData();if(ce){const Ie=Math.pow(2,te.zoom-oe.tileID.overscaledZ);l2(se,J,ee,Q,p.symbolSize,te,Ce,q,Ie,ce,Se)}}}(_,m,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),x),0!==f.paint.get("icon-opacity").constantOr(1)&&r2(m,l,f,_,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),w,D),0!==f.paint.get("text-opacity").constantOr(1)&&r2(m,l,f,_,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),w,D),l.map.showCollisionBoxes&&(Wn(m,l,f,_,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),Wn(m,l,f,_,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(m,l,f,_){if("translucent"!==m.renderPass)return;const x=f.paint.get("circle-opacity"),w=f.paint.get("circle-stroke-width"),D=f.paint.get("circle-stroke-opacity"),A=void 0!==f.layout.get("circle-sort-key").constantOr(1);if(0===x.constantOr(1)&&(0===w.constantOr(1)||0===D.constantOr(1)))return;const L=m.context,P=L.gl,R=m.transform,B=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),Y=p.StencilMode.disabled,Q=m.colorModeForRenderPass(),te="globe"===R.projection.name,J=[p.mercatorXfromLng(R.center.lng),p.mercatorYfromLat(R.center.lat)],ee=[];for(let oe=0;oe<_.length;oe++){const se=_[oe],ce=l.getTile(se),ye=ce.getBucket(f);if(!ye||ye.projection.name!==R.projection.name)continue;const ve=ye.programConfigurations.get(f.id),Ce=Ft(f);te&&Ce.push("PROJECTION_GLOBE_VIEW");const Se=m.useProgram("circle",ve,Ce),Ie=ye.layoutVertexBuffer,Pe=ye.globeExtVertexBuffer,mt=ye.indexBuffer,Le=R.projection.createInversionMatrix(R,se.canonical),it={programConfiguration:ve,program:Se,layoutVertexBuffer:Ie,globeExtVertexBuffer:Pe,indexBuffer:mt,uniformValues:Ks(m,se,ce,Le,J,f),tile:ce};if(A){const Be=ye.segments.get();for(const at of Be)ee.push({segments:new p.SegmentVector([at]),sortKey:at.sortKey,state:it})}else ee.push({segments:ye.segments,sortKey:0,state:it})}A&&ee.sort((oe,se)=>oe.sortKey-se.sortKey);const q={useDepthForOcclusion:!te};for(const oe of ee){const{programConfiguration:se,program:ce,layoutVertexBuffer:ye,globeExtVertexBuffer:ve,indexBuffer:Ce,uniformValues:Se,tile:Ie}=oe.state,Pe=oe.segments;m.terrain&&m.terrain.setupElevationDraw(Ie,ce,q),m.prepareDrawProgram(L,ce,Ie.tileID.toUnwrapped()),ce.draw(L,P.TRIANGLES,B,Y,Q,p.CullFaceMode.disabled,Se,f.id,ye,Ce,Pe,f.paint,R.zoom,se,[ve])}},heatmap:function(m,l,f,_){if(0!==f.paint.get("heatmap-opacity"))if("offscreen"===m.renderPass){const x=m.context,w=x.gl,D=p.StencilMode.disabled,A=new p.ColorMode([w.ONE,w.ONE],p.Color.transparent,[!0,!0,!0,!0]);(function(Q,te,J,ee){const q=Q.gl,oe=te.width*ee,se=te.height*ee;Q.activeTexture.set(q.TEXTURE1),Q.viewport.set([0,0,oe,se]);let ce=J.heatmapFbo;if(!ce||ce&&(ce.width!==oe||ce.height!==se)){ce&&ce.destroy();const ye=q.createTexture();q.bindTexture(q.TEXTURE_2D,ye),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),ce=J.heatmapFbo=Q.createFramebuffer(oe,se,!1),function(ve,Ce,Se,Ie,Pe,mt){const Le=ve.gl;Le.texImage2D(Le.TEXTURE_2D,0,ve.isWebGL2&&ve.extRenderToTextureHalfFloat?Le.RGBA16F:Le.RGBA,Pe,mt,0,Le.RGBA,ve.extRenderToTextureHalfFloat?ve.isWebGL2?Le.HALF_FLOAT:ve.extTextureHalfFloat.HALF_FLOAT_OES:Le.UNSIGNED_BYTE,null),Ie.colorAttachment.set(Se)}(Q,0,ye,ce,oe,se)}else q.bindTexture(q.TEXTURE_2D,ce.colorAttachment.get()),Q.bindFramebuffer.set(ce.framebuffer)})(x,m,f,"globe"===m.transform.projection.name?.5:.25),x.clear({color:p.Color.transparent});const L=m.transform,P="globe"===L.projection.name,R=P?["PROJECTION_GLOBE_VIEW"]:null,B=P?p.CullFaceMode.frontCCW:p.CullFaceMode.disabled,Y=[p.mercatorXfromLng(L.center.lng),p.mercatorYfromLat(L.center.lat)];for(let Q=0;Q<_.length;Q++){const te=_[Q];if(l.hasRenderableParent(te))continue;const J=l.getTile(te),ee=J.getBucket(f);if(!ee||ee.projection.name!==L.projection.name)continue;const q=ee.programConfigurations.get(f.id),oe=m.useProgram("heatmap",q,R),{zoom:se}=m.transform;m.terrain&&m.terrain.setupElevationDraw(J,oe),m.prepareDrawProgram(x,oe,te.toUnwrapped());const ce=L.projection.createInversionMatrix(L,te.canonical);oe.draw(x,w.TRIANGLES,p.DepthMode.disabled,D,A,B,n1(m,te,J,ce,Y,se,f.paint.get("heatmap-intensity")),f.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,f.paint,m.transform.zoom,q,P?[ee.globeExtVertexBuffer]:null)}x.viewport.set([0,0,m.width,m.height])}else"translucent"===m.renderPass&&(m.context.setColorMode(m.colorModeForRenderPass()),function(x,w){const D=x.context,A=D.gl,L=w.heatmapFbo;if(!L)return;D.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,L.colorAttachment.get()),D.activeTexture.set(A.TEXTURE1);let P=w.colorRampTexture;P||(P=w.colorRampTexture=new p.Texture(D,w.colorRamp,A.RGBA)),P.bind(A.LINEAR,A.CLAMP_TO_EDGE),x.useProgram("heatmapTexture").draw(D,A.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,x.colorModeForRenderPass(),p.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:w.paint.get("heatmap-opacity")},w.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,w.paint,x.transform.zoom)}(m,f))},line:function(m,l,f,_){if("translucent"!==m.renderPass)return;const x=f.paint.get("line-opacity"),w=f.paint.get("line-width");if(0===x.constantOr(1)||0===w.constantOr(1))return;const D=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),A=m.colorModeForRenderPass(),L=m.terrain&&m.terrain.renderingToTexture?1:p.exported.devicePixelRatio,P=f.paint.get("line-dasharray"),R=P.constantOr(1),B=f.layout.get("line-cap"),Y=f.paint.get("line-pattern"),Q=Y.constantOr(1),te=f.paint.get("line-gradient"),J=Q?"linePattern":"line",ee=m.context,q=ee.gl,oe=(ce=>{const ye=[];dn(ce)&&ye.push("RENDER_LINE_DASH"),ce.paint.get("line-gradient")&&ye.push("RENDER_LINE_GRADIENT");const ve=ce.paint.get("line-trim-offset");0===ve[0]&&0===ve[1]||ye.push("RENDER_LINE_TRIM_OFFSET");const Ce=ce.paint.get("line-pattern").constantOr(1),Se=1!==ce.paint.get("line-opacity").constantOr(1);return!Ce&&Se&&ye.push("RENDER_LINE_ALPHA_DISCARD"),ye})(f);let se=oe.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(se=!1);for(const ce of _){const ye=l.getTile(ce);if(Q&&!ye.patternsLoaded())continue;const ve=ye.getBucket(f);if(!ve)continue;m.prepareDrawTile();const Ce=ve.programConfigurations.get(f.id),Se=m.useProgram(J,Ce,oe),Ie=Y.constantOr(null);if(Ie&&ye.imageAtlas){const Ae=ye.imageAtlas.patternPositions[Ie.toString()];Ae&&Ce.setConstantPatternPositions(Ae)}const Pe=P.constantOr(null),mt=B.constantOr(null);if(!Q&&Pe&&mt&&ye.lineAtlas){const Ae=ye.lineAtlas.getDash(Pe,mt);Ae&&Ce.setConstantPatternPositions(Ae)}let[Le,it]=f.paint.get("line-trim-offset");("round"===mt||"square"===mt)&&Le!==it&&(0===Le&&(Le-=1),1===it&&(it+=1));const Be=m.terrain?ce.projMatrix:null,at=Q?S3(m,ye,f,Be,L):Lc(m,ye,f,Be,ve.lineClipsArray.length,L,[Le,it]);if(te){const Ae=ve.gradients[f.id];let Ne=Ae.texture;if(f.gradientVersion!==Ae.version){let ot=256;if(f.stepInterpolant){const dt=l.getSource().maxzoom,kt=ce.canonical.z===dt?Math.ceil(1<<m.transform.maxZoom-ce.canonical.z):1;ot=p.clamp(p.nextPowerOfTwo(ve.maxLineLength/p.EXTENT*1024*kt),256,ee.maxTextureSize)}Ae.gradient=p.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:ot,image:Ae.gradient||void 0,clips:ve.lineClipsArray}),Ae.texture?Ae.texture.update(Ae.gradient):Ae.texture=new p.Texture(ee,Ae.gradient,q.RGBA),Ae.version=f.gradientVersion,Ne=Ae.texture}ee.activeTexture.set(q.TEXTURE1),Ne.bind(f.stepInterpolant?q.NEAREST:q.LINEAR,q.CLAMP_TO_EDGE)}R&&(ee.activeTexture.set(q.TEXTURE0),ye.lineAtlasTexture.bind(q.LINEAR,q.REPEAT),Ce.updatePaintBuffers()),Q&&(ee.activeTexture.set(q.TEXTURE0),ye.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Ce.updatePaintBuffers()),m.prepareDrawProgram(ee,Se,ce.toUnwrapped());const Fe=Ae=>{Se.draw(ee,q.TRIANGLES,D,Ae,A,p.CullFaceMode.disabled,at,f.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,f.paint,m.transform.zoom,Ce,[ve.layoutVertexBuffer2])};if(se){const Ae=m.stencilModeForClipping(ce).ref;0===Ae&&m.terrain&&ee.clear({stencil:0});const Ne={func:q.EQUAL,mask:255};at.u_alpha_discard_threshold=.8,Fe(new p.StencilMode(Ne,Ae,255,q.KEEP,q.KEEP,q.INVERT)),at.u_alpha_discard_threshold=0,Fe(new p.StencilMode(Ne,Ae,255,q.KEEP,q.KEEP,q.KEEP))}else Fe(m.stencilModeForClipping(ce))}se&&(m.resetStencilClippingMasks(),m.terrain&&ee.clear({stencil:0}))},fill:function(m,l,f,_){const x=f.paint.get("fill-color"),w=f.paint.get("fill-opacity");if(0===w.constantOr(1))return;const D=m.colorModeForRenderPass(),A=f.paint.get("fill-pattern"),L=m.opaquePassEnabledForLayer()&&!A.constantOr(1)&&1===x.constantOr(p.Color.transparent).a&&1===w.constantOr(0)?"opaque":"translucent";if(m.renderPass===L){const P=m.depthModeForSublayer(1,"opaque"===m.renderPass?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly);tc(m,l,f,_,P,D,!1)}if("translucent"===m.renderPass&&f.paint.get("fill-antialias")){const P=m.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,p.DepthMode.ReadOnly);tc(m,l,f,_,P,D,!0)}},"fill-extrusion":function(m,l,f,_){const x=f.paint.get("fill-extrusion-opacity");if(0!==x&&"translucent"===m.renderPass){const w=new p.DepthMode(m.context.gl.LEQUAL,p.DepthMode.ReadWrite,m.depthRangeFor3D);if(1!==x||f.paint.get("fill-extrusion-pattern").constantOr(1))P1(m,l,f,_,w,p.StencilMode.disabled,p.ColorMode.disabled),P1(m,l,f,_,w,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const D=m.colorModeForRenderPass();P1(m,l,f,_,w,p.StencilMode.disabled,D)}}},hillshade:function(m,l,f,_){if("offscreen"!==m.renderPass&&"translucent"!==m.renderPass)return;const x=m.context,w=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),D=m.colorModeForRenderPass(),A=m.terrain&&m.terrain.renderingToTexture,[L,P]="translucent"!==m.renderPass||A?[{},_]:m.stencilConfigForOverlap(_);for(const R of P){const B=l.getTile(R);if(B.needsHillshadePrepare&&"offscreen"===m.renderPass)os(m,B,f,w,p.StencilMode.disabled,D);else if("translucent"===m.renderPass){const Y=A&&m.terrain?m.terrain.stencilModeForRTTOverlap(R):L[R.overscaledZ];Zs(m,R,B,f,w,Y,D)}}x.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,l,f,_,x,w){if("translucent"!==m.renderPass||0===f.paint.get("raster-opacity")||!_.length)return;const D=m.context,A=D.gl,L=l.getSource(),P=m.useProgram("raster"),R=m.colorModeForRenderPass(),B=m.terrain&&m.terrain.renderingToTexture,[Y,Q]=L instanceof be||B?[{},_]:m.stencilConfigForOverlap(_),te=Q[Q.length-1].overscaledZ,J=!m.options.moving;for(const ee of Q){const q=B?p.DepthMode.disabled:m.depthModeForSublayer(ee.overscaledZ-te,1===f.paint.get("raster-opacity")?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly,A.LESS),oe=ee.toUnwrapped(),se=l.getTile(ee);if(B&&(!se||!se.hasData()))continue;const ce=B?ee.projMatrix:m.transform.calculateProjMatrix(oe,J),ye=m.terrain&&B?m.terrain.stencilModeForRTTOverlap(ee):Y[ee.overscaledZ],ve=w?0:f.paint.get("raster-fade-duration");se.registerFadeDuration(ve);const Ce=l.findLoadedParent(ee,0),Se=pa(se,Ce,l,m.transform,ve);let Ie,Pe;m.terrain&&m.terrain.prepareDrawTile();const mt="nearest"===f.paint.get("raster-resampling")?A.NEAREST:A.LINEAR;D.activeTexture.set(A.TEXTURE0),se.texture.bind(mt,A.CLAMP_TO_EDGE),D.activeTexture.set(A.TEXTURE1),Ce?(Ce.texture.bind(mt,A.CLAMP_TO_EDGE),Ie=Math.pow(2,Ce.tileID.overscaledZ-se.tileID.overscaledZ),Pe=[se.tileID.canonical.x*Ie%1,se.tileID.canonical.y*Ie%1]):se.texture.bind(mt,A.CLAMP_TO_EDGE),se.texture.useMipmap&&D.extTextureFilterAnisotropic&&m.transform.pitch>20&&A.texParameterf(A.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax);const Le=k2(ce,Pe||[0,0],Ie||1,Se,f,L instanceof be?L.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(D,P,oe),L instanceof be)L.boundsBuffer&&L.boundsSegments&&P.draw(D,A.TRIANGLES,q,p.StencilMode.disabled,R,p.CullFaceMode.disabled,Le,f.id,L.boundsBuffer,m.quadTriangleIndexBuffer,L.boundsSegments);else{const{tileBoundsBuffer:it,tileBoundsIndexBuffer:Be,tileBoundsSegments:at}=m.getTileBoundsBuffers(se);P.draw(D,A.TRIANGLES,q,ye,R,p.CullFaceMode.disabled,Le,f.id,it,Be,at)}}m.resetStencilClippingMasks()},background:function(m,l,f,_){const x=f.paint.get("background-color"),w=f.paint.get("background-opacity");if(0===w)return;const D=m.context,A=D.gl,L=m.transform,P=L.tileSize,R=f.paint.get("background-pattern");if(m.isPatternMissing(R))return;const B=!R&&1===x.a&&1===w&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==B)return;const Y=p.StencilMode.disabled,Q=m.depthModeForSublayer(0,"opaque"===B?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly),te=m.colorModeForRenderPass(),J=m.useProgram(R?"backgroundPattern":"background");let ee,q=_;q||(ee=m.getBackgroundTiles(),q=Object.values(ee).map(oe=>oe.tileID)),R&&(D.activeTexture.set(A.TEXTURE0),m.imageManager.bind(m.context));for(const oe of q){const se=oe.toUnwrapped(),ce=_?oe.projMatrix:m.transform.calculateProjMatrix(se);m.prepareDrawTile();const ye=l?l.getTile(oe):ee?ee[oe.key]:new p.Tile(oe,P,L.zoom,m),ve=R?Ar(ce,w,m,R,{tileID:oe,tileSize:P}):ls(ce,w,x);m.prepareDrawProgram(D,J,se);const{tileBoundsBuffer:Ce,tileBoundsIndexBuffer:Se,tileBoundsSegments:Ie}=m.getTileBoundsBuffers(ye);J.draw(D,A.TRIANGLES,Q,Y,te,p.CullFaceMode.disabled,ve,f.id,Ce,Se,Ie)}},sky:function(m,l,f){const _=m.transform,x="mercator"===_.projection.name||"globe"===_.projection.name?1:p.smoothstep(7,8,_.zoom),w=f.paint.get("sky-opacity")*x;if(0===w)return;const D=m.context,A=f.paint.get("sky-type"),L=new p.DepthMode(D.gl.LEQUAL,p.DepthMode.ReadOnly,[0,1]),P=m.frameCounter/1e3%1;"atmosphere"===A?"offscreen"===m.renderPass?f.needsSkyboxCapture(m)&&(function(R,B,Y,Q){const te=R.context,J=te.gl;let ee=B.skyboxFbo;if(!ee){ee=B.skyboxFbo=te.createFramebuffer(32,32,!1),B.skyboxGeometry=new Mi(te),B.skyboxTexture=te.gl.createTexture(),J.bindTexture(J.TEXTURE_CUBE_MAP,B.skyboxTexture),J.texParameteri(J.TEXTURE_CUBE_MAP,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_CUBE_MAP,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_CUBE_MAP,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_CUBE_MAP,J.TEXTURE_MAG_FILTER,J.LINEAR);for(let ce=0;ce<6;++ce)J.texImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,J.RGBA,32,32,0,J.RGBA,J.UNSIGNED_BYTE,null)}te.bindFramebuffer.set(ee.framebuffer),te.viewport.set([0,0,32,32]);const q=B.getCenter(R,!0),oe=R.useProgram("skyboxCapture"),se=new Float64Array(16);p.identity(se),p.rotateY(se,se,.5*-Math.PI),_1(te,B,oe,se,q,0),p.identity(se),p.rotateY(se,se,.5*Math.PI),_1(te,B,oe,se,q,1),p.identity(se),p.rotateX(se,se,.5*-Math.PI),_1(te,B,oe,se,q,2),p.identity(se),p.rotateX(se,se,.5*Math.PI),_1(te,B,oe,se,q,3),p.identity(se),_1(te,B,oe,se,q,4),p.identity(se),p.rotateY(se,se,Math.PI),_1(te,B,oe,se,q,5),te.viewport.set([0,0,R.width,R.height])}(m,f),f.markSkyboxValid(m)):"sky"===m.renderPass&&function(R,B,Y,Q,te){const J=R.context,ee=J.gl,q=R.transform,oe=R.useProgram("skybox");J.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_CUBE_MAP,B.skyboxTexture);const se={u_matrix:q.skyboxMatrix,u_sun_direction:B.getCenter(R,!1),u_cubemap:0,u_opacity:Q,u_temporal_offset:te};R.prepareDrawProgram(J,oe),oe.draw(J,ee.TRIANGLES,Y,p.StencilMode.disabled,R.colorModeForRenderPass(),p.CullFaceMode.backCW,se,"skybox",B.skyboxGeometry.vertexBuffer,B.skyboxGeometry.indexBuffer,B.skyboxGeometry.segment)}(m,f,L,w,P):"gradient"===A&&"sky"===m.renderPass&&function(R,B,Y,Q,te){const J=R.context,ee=J.gl,q=R.transform,oe=R.useProgram("skyboxGradient");B.skyboxGeometry||(B.skyboxGeometry=new Mi(J)),J.activeTexture.set(ee.TEXTURE0);let se=B.colorRampTexture;se||(se=B.colorRampTexture=new p.Texture(J,B.colorRamp,ee.RGBA)),se.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);const ce=(ye=q.skyboxMatrix,ve=B.getCenter(R,!1),Ce=B.paint.get("sky-gradient-radius"),Se=Q,Ie=te,{u_matrix:ye,u_color_ramp:0,u_center_direction:ve,u_radius:p.degToRad(Ce),u_opacity:Se,u_temporal_offset:Ie});var ye,ve,Ce,Se,Ie;R.prepareDrawProgram(J,oe),oe.draw(J,ee.TRIANGLES,Y,p.StencilMode.disabled,R.colorModeForRenderPass(),p.CullFaceMode.backCW,ce,"skyboxGradient",B.skyboxGeometry.vertexBuffer,B.skyboxGeometry.indexBuffer,B.skyboxGeometry.segment)}(m,f,L,w,P)},debug:function(m,l,f){for(let _=0;_<f.length;_++)Ga(m,l,f[_])},custom:function(m,l,f,_){const x=m.context,w=f.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||"offscreen"===m.renderPass)&&f.isLayerDraped()){if("offscreen"===m.renderPass){const D=w.prerender;if(D){if(m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),"globe"===m.transform.projection.name){const A=m.transform.pointMerc;D.call(w,x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),p.globeToMercatorTransition(m.transform.zoom),[A.x,A.y],m.transform.pixelsPerMeterRatio)}else D.call(w,x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState()}}else if("translucent"===m.renderPass){if(m.terrain&&m.terrain.renderingToTexture){const A=w.renderToTile;if(A){const L=_[0].canonical,P=new p.MercatorCoordinate(L.x+_[0].wrap*(1<<L.z),L.y,L.z);x.setDepthMode(p.DepthMode.disabled),x.setStencilMode(p.StencilMode.disabled),x.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),A.call(w,x.gl,P),x.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),x.setStencilMode(p.StencilMode.disabled);const D="3d"===w.renderingMode?new p.DepthMode(m.context.gl.LEQUAL,p.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,p.DepthMode.ReadOnly);if(x.setDepthMode(D),"globe"===m.transform.projection.name){const A=m.transform.pointMerc;w.render(x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),p.globeToMercatorTransition(m.transform.zoom),[A.x,A.y],m.transform.pixelsPerMeterRatio)}else w.render(x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState(),x.bindFramebuffer.set(null)}}else p.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Tc{constructor(l,f,_=!1){this.context=new re(l,_),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=p.SourceCache.maxUnderzooming+p.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ts,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,f){const _=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Dr(this,l));const x=this._terrain;this.transform.elevation=_?x:null,x.update(l,this.transform,f)}_updateFog(l){const f=l.fog;if(!f||"globe"===this.transform.projection.name||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,x]=f.getFovAdjustedRange(this.transform._fov);if(_>x)return void(this.transform.fogCullDistSq=null);const w=_+.78*(x-_);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,f){if(this.width=l*p.exported.devicePixelRatio,this.height=f*p.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._layers[_].resize()}setup(){const l=this.context,f=new p.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(p.EXTENT,0),f.emplaceBack(0,p.EXTENT),f.emplaceBack(p.EXTENT,p.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(f,p.posAttributes.members),this.tileExtentSegments=p.SegmentVector.simpleSegment(0,0,4,2);const _=new p.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(p.EXTENT,0),_.emplaceBack(0,p.EXTENT),_.emplaceBack(p.EXTENT,p.EXTENT),this.debugBuffer=l.createVertexBuffer(_,p.posAttributes.members),this.debugSegments=p.SegmentVector.simpleSegment(0,0,4,5);const x=new p.StructArrayLayout2i4;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(x,p.posAttributes.members),this.viewportSegments=p.SegmentVector.simpleSegment(0,0,4,2);const w=new p.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(p.EXTENT,0,p.EXTENT,0),w.emplaceBack(0,p.EXTENT,0,p.EXTENT),w.emplaceBack(p.EXTENT,p.EXTENT,p.EXTENT,p.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(w,p.boundsAttributes.members),this.mercatorBoundsSegments=p.SegmentVector.simpleSegment(0,0,4,2);const D=new p.StructArrayLayout3ui6;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(D);const A=new p.StructArrayLayout1ui2;for(const P of[0,1,3,2,0])A.emplaceBack(P);this.debugIndexBuffer=l.createIndexBuffer(A),this.emptyTexture=new p.Texture(l,new p.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=p.create();const L=this.context.gl;this.stencilClearMode=new p.StencilMode({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(p.window.performance.now()),this.atmosphereBuffer=new ds(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,f=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,f.TRIANGLES,p.DepthMode.disabled,this.stencilClearMode,p.ColorMode.disabled,p.CullFaceMode.disabled,G1(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,f,_){if(!f||this.currentStencilSource===f.id||!l.isTileClipped()||!_||0===_.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let A=!1;for(const L of _)if(void 0===this._tileClippingMaskIDs[L.key]){A=!0;break}if(!A)return}this.currentStencilSource=f.id;const x=this.context,w=x.gl;this.nextStencilID+_.length>256&&this.clearStencil(),x.setColorMode(p.ColorMode.disabled),x.setDepthMode(p.DepthMode.disabled);const D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of _){const L=f.getTile(A),P=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,{tileBoundsBuffer:R,tileBoundsIndexBuffer:B,tileBoundsSegments:Y}=this.getTileBoundsBuffers(L);D.draw(x,w.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:w.ALWAYS,mask:0},P,255,w.KEEP,w.KEEP,w.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,G1(A.projMatrix),"$clipping",R,B,Y)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,f=this.context.gl;return new p.StencilMode({func:f.NOTEQUAL,mask:255},l,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const f=this.context.gl;return new p.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(l){const f=this.context.gl,_=l.sort((D,A)=>A.overscaledZ-D.overscaledZ),x=_[_.length-1].overscaledZ,w=_[0].overscaledZ-x+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const D={};for(let A=0;A<w;A++)D[A+x]=new p.StencilMode({func:f.GEQUAL,mask:255},A+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=w,[D,_]}return[{[x]:p.StencilMode.disabled},_]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new p.ColorMode([l.CONSTANT_COLOR,l.ONE],new p.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?p.ColorMode.unblended:p.ColorMode.alphaBlended}depthModeForSublayer(l,f,_){if(!this.opaquePassEnabledForLayer())return p.DepthMode.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new p.DepthMode(_||this.context.gl.LEQUAL,f,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,f){this.style=l,this.options=f,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(p.exported.now()),this.imageManager.beginFrame();const _=this.style.order,x=this.style._sourceCaches;for(const P in x){const R=x[P];R.used&&R.prepare(this.context)}const w={},D={},A={};for(const P in x){const R=x[P];w[P]=R.getVisibleCoordinates(),D[P]=w[P].slice().reverse(),A[P]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<_.length;P++)if(this.style._layers[_[P]].is3D()){this.opaquePassCutoff=P;break}if(this.terrain&&(this.terrain.updateTileBinding(A),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new p.GlobeSharedBuffers(this.context)),!p.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const P of _){const R=this.style._layers[P],B=l._getLayerSourceCache(R);if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const Y=B?D[B.id]:void 0;("custom"===R.type||R.isSky()||Y&&Y.length)&&this.renderLayer(this,B,R,Y)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const L=this.terrain;if(L&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&L.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?p.Color.black:p.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[_[this.currentLayer]],R=l._getLayerSourceCache(P);if(P.isSky())continue;const B=R?D[R.id]:void 0;this._renderTileClippingMasks(P,R,B),this.renderLayer(this,R,P,B)}if(this.style.fog&&this.transform.projection.supportsFog&&function(P,R){const B=P.context,Y=B.gl,Q=P.transform,te=new p.DepthMode(Y.LEQUAL,p.DepthMode.ReadOnly,[0,1]),J=P.useProgram("globeAtmosphere",null,"globe"===Q.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ee=p.globeToMercatorTransition(Q.zoom),q=R.properties.get("color").toArray01(),oe=R.properties.get("high-color").toArray01(),se=R.properties.get("space-color").toArray01PremultipliedAlpha(),ce=p.identity$1([]);p.rotateY$1(ce,ce,-p.degToRad(Q._center.lng)),p.rotateX$1(ce,ce,p.degToRad(Q._center.lat)),p.rotateZ$1(ce,ce,Q.angle),p.rotateX$1(ce,ce,-Q._pitch);const ye=p.fromQuat(new Float32Array(16),ce),ve=p.mapValue(R.properties.get("star-intensity"),0,1,0,.25),Se=p.mapValue(R.properties.get("horizon-blend"),0,1,5e-4,.25),Ie=p.globeUseCustomAntiAliasing(P,B,Q)&&5e-4===Se?Q.worldSize/(2*Math.PI*1.025)-1:Q.globeRadius,Pe=P.frameCounter/1e3%1,mt=p.length(Q.globeCenterInViewSpace),Le=Math.sqrt(Math.pow(mt,2)-Math.pow(Ie,2)),it=Math.acos(Le/mt),Be={u_frustum_tl:Q.frustumCorners.TL,u_frustum_tr:Q.frustumCorners.TR,u_frustum_br:Q.frustumCorners.BR,u_frustum_bl:Q.frustumCorners.BL,u_horizon:Q.frustumCorners.horizon,u_transition:ee,u_fadeout_range:Se,u_color:q,u_high_color:oe,u_space_color:se,u_star_intensity:ve,u_star_size:5*p.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Pe,u_horizon_angle:it,u_rotation_matrix:ye};P.prepareDrawProgram(B,J);const at=P.atmosphereBuffer;at&&J.draw(B,Y.TRIANGLES,te,p.StencilMode.disabled,p.ColorMode.alphaBlended,p.CullFaceMode.backCW,Be,"skybox",at.vertexBuffer,at.indexBuffer,at.segments)}(this,this.style.fog),this.renderPass="sky",(p.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const P=this.style._layers[_[this.currentLayer]],R=l._getLayerSourceCache(P);P.isSky()&&this.renderLayer(this,R,P,R?D[R.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;){const P=this.style._layers[_[this.currentLayer]],R=l._getLayerSourceCache(P);if(P.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(P)){if(P.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const B=R?("symbol"===P.type?A:D)[R.id]:void 0;this._renderTileClippingMasks(P,R,R?w[R.id]:void 0),this.renderLayer(this,R,P,B),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let P=null;p.values(this.style._layers).forEach(R=>{const B=l._getLayerSourceCache(R);B&&!R.isHidden(this.transform.zoom)&&(!P||P.getSource().maxzoom<B.getSource().maxzoom)&&(P=B)}),P&&this.options.showTileBoundaries&&N2.debug(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const R=P.transform.padding;F2(P,P.transform.height-(R.top||0),3,Co),F2(P,R.bottom||0,3,Qr),Jr(P,R.left||0,3,ja),Jr(P,P.transform.width-(R.right||0),3,P2);const B=P.transform.centerPoint;var Y,Q,te,J;Mo(Y=P,(Q=B.x)-1,(te=P.transform.height-B.y)-10,2,20,J=wo),Mo(Y,Q-10,te-1,20,2,J)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(p.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,f,_,x){_.isHidden(this.transform.zoom)||("background"===_.type||"sky"===_.type||"custom"===_.type||x&&x.length)&&(this.id=_.id,this.gpuTimingStart(_),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(_.type)||l.terrain&&"custom"===_.type)&&N2[_.type](l,f,_,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let _=this.gpuTimers[l.id];_||(_=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),_.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,f=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),l.beginQueryEXT(l.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const f={};for(const _ in l){const x=l[_],w=this.context.extTimerQuery,D=w.getQueryObjectEXT(x.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(x.query),f[_]=D}return f}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let _=0;for(const x of l)_+=f.getQueryObjectEXT(x,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(x);return _}translatePosMatrix(l,f,_,x,w){if(!_[0]&&!_[1])return l;const D=w?"map"===x?this.transform.angle:0:"viewport"===x?-this.transform.angle:0;if(D){const P=Math.sin(D),R=Math.cos(D);_=[_[0]*R-_[1]*P,_[0]*P+_[1]*R]}const A=[w?_[0]:er(f,_[0],this.transform.zoom),w?_[1]:er(f,_[1],this.transform.zoom),0],L=new Float32Array(16);return p.translate(L,l,A),L}saveTileTexture(l){const f=this._tileTextures[l.size[0]];f?f.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const f=this._tileTextures[l];return f&&f.length>0?f.pop():null}isPatternMissing(l){return null===l||void 0!==l&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,f=this.terrain&&0===this.terrain.exaggeration(),_=this.style&&this.style.fog,x=[];return this.terrainRenderModeElevated()&&x.push("TERRAIN"),"globe"===this.transform.projection.name&&x.push("GLOBE"),f&&x.push("ZERO_EXAGGERATION"),_&&!l&&0!==_.getOpacity(this.transform.pitch)&&x.push("FOG"),l&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}useProgram(l,f,_){this.cache=this.cache||{};const x=_||[],w=this.currentGlobalDefines().concat(x),D=sr.cacheKey(w4[l],l,w,f);return this.cache[D]||(this.cache[D]=new sr(this.context,l,w4[l],f,Rt[l],w)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=p.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new p.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,f,_){if(this.terrain&&this.terrain.renderingToTexture)return;const x=this.style.fog;if(x){const w=x.getOpacity(this.transform.pitch),D=((A,L,P,R,B,Y,Q,te,J,ee,q)=>{const oe=A.transform,se=L.properties.get("color").toArray01();se[3]=R;const ce=A.frameCounter/1e3%1;return{u_fog_matrix:P?oe.calculateFogTileMatrix(P):A.identityMat,u_fog_range:L.getFovAdjustedRange(oe._fov),u_fog_color:se,u_fog_horizon_blend:L.properties.get("horizon-blend"),u_fog_temporal_offset:ce,u_frustum_tl:B,u_frustum_tr:Y,u_frustum_br:Q,u_frustum_bl:te,u_globe_pos:J,u_globe_radius:ee,u_viewport:q,u_globe_transition:p.globeToMercatorTransition(oe.zoom),u_is_globe:+("globe"===oe.projection.name)}})(this,x,_,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*p.exported.devicePixelRatio,this.transform.height*p.exported.devicePixelRatio]);f.setFogUniformValues(l,D)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,f=l.createTexture();return l.bindTexture(l.TEXTURE_2D,f),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&0!==l.getOpacity(this.transform.pitch)}getBackgroundTiles(){const l=this._backgroundTiles,f=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const x of _)f[x.key]=l[x.key]||new p.Tile(x,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class ci{constructor(l=0,f=0,_=0,x=0){if(isNaN(l)||l<0||isNaN(f)||f<0||isNaN(_)||_<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=f,this.left=_,this.right=x}interpolate(l,f,_){return null!=f.top&&null!=l.top&&(this.top=p.number(l.top,f.top,_)),null!=f.bottom&&null!=l.bottom&&(this.bottom=p.number(l.bottom,f.bottom,_)),null!=f.left&&null!=l.left&&(this.left=p.number(l.left,f.left,_)),null!=f.right&&null!=l.right&&(this.right=p.number(l.right,f.right,_)),this}getCenter(l,f){const _=p.clamp((this.left+l-this.right)/2,0,l),x=p.clamp((this.top+f-this.bottom)/2,0,f);return new p.pointGeometry(_,x)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new ci(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function lr(m,l){const f=p.getColumn(m,3);p.fromQuat(m,l),p.setColumn(m,3,f)}function fs(m,l){const f=p.identity$1([]);return p.rotateZ$1(f,f,-l),p.rotateX$1(f,f,-m),f}function ma(m,l){const f=[m[0],m[1],0],_=[l[0],l[1],0];if(p.length(f)>=1e-15){const D=p.normalize([],f);p.scale$2(_,D,p.dot(_,D)),l[0]=_[0],l[1]=_[1]}const x=p.cross([],l,m);if(p.len(x)<1e-15)return null;const w=Math.atan2(-x[1],x[0]);return fs(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),w)}class H{constructor(l,f){this.position=l,this.orientation=f}get position(){return this._position}set position(l){if(l){const f=l instanceof p.MercatorCoordinate?l:new p.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(f.x=p.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(l,f){if(this.orientation=null,!this.position)return;const _=this.position,x=this._elevation?this._elevation.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(l)):0,w=p.MercatorCoordinate.fromLngLat(l,x),D=[w.x-_.x,w.y-_.y,w.z-_.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=ma(D,f)}setPitchBearing(l,f){this.orientation=fs(p.degToRad(l),p.degToRad(-f))}}class k{constructor(l,f){this._transform=p.identity([]),this.orientation=f,this.position=l}get mercatorPosition(){const l=this.position;return new p.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=p.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var f;l&&p.setColumn(this._transform,3,[(f=l)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||p.identity$1([]),l&&lr(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,f){this._orientation=fs(l,f),lr(this._transform,this._orientation)}forward(){const l=p.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=p.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=p.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,f){const _=new Float64Array(16);return p.invert(_,this.getWorldToCamera(l,f)),_}getWorldToCameraPosition(l,f,_){const x=this.position;p.scale$2(x,x,-l);const w=new Float64Array(16);return p.fromScaling(w,[_,_,_]),p.translate(w,w,x),w[10]*=f,w}getWorldToCamera(l,f){const _=new Float64Array(16),x=new Float64Array(4),w=this.position;return p.conjugate(x,this._orientation),p.scale$2(w,w,-l),p.fromQuat(_,x),p.translate(_,_,w),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=f,_[9]*=f,_[10]*=f,_[11]*=f,_}getCameraToClipPerspective(l,f,_,x){const w=new Float64Array(16);return p.perspective(w,l,f,_,x),w}getDistanceToElevation(l,f=!1){const _=0===l?0:p.mercatorZfromAltitude(l,f?p.latFromMercatorY(this.position[1]):this.position[1]),x=this.forward();return(_-this.position[2])/x[2]}clone(){return new k([...this.position],[...this.orientation])}}function G(m,l){const f=Qe(m.projection,m.zoom,m.width,m.height),_=function(w,D,A,L,P){const R=new p.LngLat(A.lng-180*Wt,A.lat),B=new p.LngLat(A.lng+180*Wt,A.lat),Y=w.project(R.lng,R.lat),Q=w.project(B.lng,B.lat),te=-Math.atan2(Q.y-Y.y,Q.x-Y.x),J=p.MercatorCoordinate.fromLngLat(A);J.y=p.clamp(J.y,-.999975,.999975);const ee=J.toLngLat(),q=w.project(ee.lng,ee.lat),oe=p.MercatorCoordinate.fromLngLat(ee);oe.x+=Wt;const se=oe.toLngLat(),ce=w.project(se.lng,se.lat),ye=Y2(ce.x-q.x,ce.y-q.y,te),ve=p.MercatorCoordinate.fromLngLat(ee);ve.y+=Wt;const Ce=ve.toLngLat(),Se=w.project(Ce.lng,Ce.lat),Ie=Y2(Se.x-q.x,Se.y-q.y,te),Pe=Math.abs(ye.x)/Math.abs(Ie.y),mt=p.identity([]);p.rotateZ(mt,mt,-te*(1-(P?0:L)));const Le=p.identity([]);return p.scale(Le,Le,[1,1-(1-Pe)*L,1]),Le[4]=-Ie.x/Ie.y*L,p.rotateZ(Le,Le,te),p.multiply(Le,mt,Le),Le}(m.projection,0,m.center,f,l),x=ge(m);return p.scale(_,_,[x,x,1]),_}function ge(m){const l=m.projection,f=Qe(m.projection,m.zoom,m.width,m.height),_=Dn(l,m.center),x=Dn(l,p.LngLat.convert(l.center));return Math.pow(2,_*f+(1-f)*x)}function Qe(m,l,f,_,x=1/0){const w=m.range;if(!w)return 0;const D=Math.min(x,Math.max(f,_)),A=Math.log(D/1024)/Math.LN2;return p.smoothstep(w[0]+A,w[1]+A,l)}const Wt=1/4e4;function Dn(m,l){const f=p.clamp(l.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),_=new p.LngLat(l.lng-180*Wt,f),x=new p.LngLat(l.lng+180*Wt,f),w=m.project(_.lng,f),D=m.project(x.lng,f),A=p.MercatorCoordinate.fromLngLat(_),L=p.MercatorCoordinate.fromLngLat(x),P=D.x-w.x,R=D.y-w.y,B=L.x-A.x,Y=L.y-A.y,Q=Math.sqrt((B*B+Y*Y)/(P*P+R*R));return Math.log(Q)/Math.LN2}function Y2(m,l,f){const _=Math.cos(f),x=Math.sin(f);return{x:m*_-l*x,y:m*x+l*_}}class gt{constructor(l,f,_,x,w,D,A){this.tileSize=512,this._renderWorldCopies=void 0===w||w,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=_??0,this._maxPitch=x??60,this.setProjection(D),this.setMaxBounds(A),this.width=0,this.height=0,this._center=new p.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ci,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new k,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new gt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,f=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||_)&&this._updateCameraOnTerrain(),(l||_)&&this._constrainCamera(f),this._calcMatrices()}getProjection(){return p.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=p.getProjection(this.projectionOptions);const _=!Ze(f,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=p.getProjection({name:"mercator"});const f=l!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(l){void 0===l?l=!0:null===l&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return p.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new p.pointGeometry(this.width,this.height)}get bearing(){return p.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const f=-l*Math.PI/180;var _,x,w,D,A,L,P,R,B,Y;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(_=new p.ARRAY_TYPE(4),p.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),x=this.rotationMatrix,D=this.angle,A=(w=this.rotationMatrix)[0],L=w[1],P=w[2],R=w[3],B=Math.sin(D),Y=Math.cos(D),x[0]=A*Y+P*B,x[1]=L*Y+R*B,x[2]=A*-B+P*Y,x[3]=L*-B+R*Y)}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const f=p.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=p.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const f=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let x=0,w=0;for(let D=0;D<f.length;D++){const A=new p.pointGeometry(f[D][0]*this.width,_+f[D][1]*(this.height-_)),L=l.pointCoordinate(A);if(!L)continue;const P=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);x+=L[3]*P,w+=P}return 0===w?NaN:x/w}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const l=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*f,x=this._mercatorZfromZoom(l),w=this._mercatorZfromZoom(this._maxZoom),D=Math.max(x-_,w);this._setZoom(this._zoomFromMercatorZ(D))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let _;_=l.z<this._camera.position[2]?[f.x,f.y,f.z]:[l.x,l.y,l.z];const x=p.length(p.sub([],this._camera.position,_));return p.clamp(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let f=!1;if(l.orientation&&!p.exactEquals(l.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(l.orientation)),l.position){const _=[l.position.x,l.position.y,l.position.z];p.exactEquals$1(_,this._camera.position)||(this._setCameraPosition(_),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,f=new H;return f.position=new p.MercatorCoordinate(l[0],l[1],l[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(l){if(!p.length$1(l))return!1;p.normalize$1(l,l);const f=p.transformQuat([],[0,0,-1],l),_=p.transformQuat([],[0,-1,0],l);if(_[2]<0)return!1;const x=ma(f,_);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(l){const f=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;l[2]=p.clamp(l[2],x/_,x/f),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,f,_){this._unmodified=!1,this._edgeInsets.interpolate(l,f,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const f=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(l){const f=[new p.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const _=this.pointCoordinate(new p.pointGeometry(0,0)),x=this.pointCoordinate(new p.pointGeometry(this.width,0)),w=this.pointCoordinate(new p.pointGeometry(this.width,this.height)),D=this.pointCoordinate(new p.pointGeometry(0,this.height)),A=Math.floor(Math.min(_.x,x.x,w.x,D.x)),L=Math.floor(Math.max(_.x,x.x,w.x,D.x)),P=1;for(let R=A-P;R<=L+P;R++)0!==R&&f.push(new p.UnwrappedTileID(R,l))}return f}coveringTiles(l){let f=this.coveringZoomLevel(l);const _=f,x=this.elevation&&!l.isTerrainDEM,w="mercator"===this.projection.name;if(void 0!==l.minzoom&&f<l.minzoom)return[];void 0!==l.maxzoom&&f>l.maxzoom&&(f=l.maxzoom);const D=this.locationCoordinate(this.center),A=this.center.lat,L=1<<f,P=[L*D.x,L*D.y,0],R="globe"===this.projection.name,B=!R,Y=p.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,B),Q=R?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),te=L*p.mercatorZfromAltitude(1,this.center.lat),J=this._camera.position[2]/p.mercatorZfromAltitude(1,this.center.lat),ee=[L*Q.x,L*Q.y,J*(B?1:te)],q=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),oe=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,se=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ce=l.isTerrainDEM?-se:this._elevation?this._elevation.getMinElevationBelowMSL():0,ye=this.projection.isReprojectedInTileSpace?ge(this):1,ve=Fe=>{const Ne=new p.MercatorCoordinate(Fe.x+25e-6,Fe.y,Fe.z),ot=new p.MercatorCoordinate(Fe.x,Fe.y+25e-6,Fe.z),dt=Fe.toLngLat(),kt=Ne.toLngLat(),A1=ot.toLngLat(),Et=this.locationCoordinate(dt),Mt=this.locationCoordinate(kt),Pt=this.locationCoordinate(A1),N1=Math.hypot(Mt.x-Et.x,Mt.y-Et.y),Nt=Math.hypot(Pt.x-Et.x,Pt.y-Et.y);return Math.sqrt(N1*Nt)*ye/25e-6},Ce=Fe=>{const Ae=se,Ne=ce;return{aabb:p.tileAABB(this,L,0,0,0,Fe,Ne,Ae,this.projection),zoom:0,x:0,y:0,minZ:Ne,maxZ:Ae,wrap:Fe,fullyVisible:!1}},Se=[];let Ie=[];const Pe=f,mt=l.reparseOverscaled?_:f,Le=Fe=>Fe*Fe,it=Le((J-this._centerAltitude)*te),Be=Fe=>{if(!this._elevation||!Fe.tileID||!w)return;const Ae=this._elevation.getMinMaxForTile(Fe.tileID),Ne=Fe.aabb;Ae?(Ne.min[2]=Ae.min,Ne.max[2]=Ae.max,Ne.center[2]=(Ne.min[2]+Ne.max[2])/2):(Fe.shouldSplit=at(Fe),Fe.shouldSplit||(Ne.min[2]=Ne.max[2]=Ne.center[2]=this._centerAltitude))},at=Fe=>{if(Fe.zoom<oe)return!0;if(Fe.zoom===Pe)return!1;if(null!=Fe.shouldSplit)return Fe.shouldSplit;const Ae=Fe.aabb.distanceX(ee),Ne=Fe.aabb.distanceY(ee);let ot=it,dt=1;if(R){ot=Le(Fe.aabb.distanceZ(ee));const Et=Math.pow(2,Fe.zoom),Mt=p.latFromMercatorY((Fe.y+1)/Et),Pt=p.latFromMercatorY(Fe.y/Et),N1=Math.min(Math.max(A,Mt),Pt),Nt=p.circumferenceAtLatitude(N1)/p.circumferenceAtLatitude(A);if(dt=N1===A?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Nt/this._mercatorScaleRatio),this.zoom<=p.GLOBE_ZOOM_THRESHOLD_MIN&&Fe.zoom===Pe-1&&Nt>=.9)return!0}else if(x&&(ot=Le(Fe.aabb.distanceZ(ee)*te)),this.projection.isReprojectedInTileSpace&&_<=5){const Et=Math.pow(2,Fe.zoom),Mt=ve(new p.MercatorCoordinate((Fe.x+.5)/Et,(Fe.y+.5)/Et));dt=Mt>.85?1:Mt}const kt=Ae*Ae+Ne*Ne+ot;return kt<Le((1<<Pe-Fe.zoom)*q*dt*((Et,Mt)=>{if(Mt*Le(.707)<Et)return 1;const Pt=Math.sqrt(Mt/Et);return Pt/(1.4144271570014144+(Math.pow(1.1,Pt-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ot,it),kt))};if(this.renderWorldCopies)for(let Fe=1;Fe<=3;Fe++)Se.push(Ce(-Fe)),Se.push(Ce(Fe));for(Se.push(Ce(0));Se.length>0;){const Fe=Se.pop(),Ae=Fe.x,Ne=Fe.y;let ot=Fe.fullyVisible;if(!ot){const dt=Fe.aabb.intersects(Y);if(0===dt)continue;ot=2===dt}if(Fe.zoom!==Pe&&at(Fe))for(let dt=0;dt<4;dt++){const kt=(Ae<<1)+dt%2,A1=(Ne<<1)+(dt>>1),Et={aabb:w?Fe.aabb.quadrant(dt):p.tileAABB(this,L,Fe.zoom+1,kt,A1,Fe.wrap,Fe.minZ,Fe.maxZ,this.projection),zoom:Fe.zoom+1,x:kt,y:A1,wrap:Fe.wrap,fullyVisible:ot,tileID:void 0,shouldSplit:void 0,minZ:Fe.minZ,maxZ:Fe.maxZ};x&&!R&&(Et.tileID=new p.OverscaledTileID(Fe.zoom+1===Pe?mt:Fe.zoom+1,Fe.wrap,Fe.zoom+1,kt,A1),Be(Et)),Se.push(Et)}else{const dt=Fe.zoom===Pe?mt:Fe.zoom;if(l.minzoom&&l.minzoom>dt)continue;const kt=P[0]-(.5+Ae+(Fe.wrap<<Fe.zoom))*(1<<f-Fe.zoom),A1=P[1]-.5-Ne,Et=Fe.tileID?Fe.tileID:new p.OverscaledTileID(dt,Fe.wrap,Fe.zoom,Ae,Ne);Ie.push({tileID:Et,distanceSq:kt*kt+A1*A1})}}if(this.fogCullDistSq){const Fe=this.fogCullDistSq,Ae=this.horizonLineFromTop();Ie=Ie.filter(Ne=>{const ot=[0,0,0,1],dt=[p.EXTENT,p.EXTENT,0,1],kt=this.calculateFogTileMatrix(Ne.tileID.toUnwrapped());p.transformMat4$1(ot,ot,kt),p.transformMat4$1(dt,dt,kt);const A1=p.getAABBPointSquareDist(ot,dt);if(0===A1)return!0;let Et=!1;const Mt=this._elevation;if(Mt&&A1>Fe&&0!==Ae){const Pt=this.calculateProjMatrix(Ne.tileID.toUnwrapped());let N1;l.isTerrainDEM||(N1=Mt.getMinMaxForTile(Ne.tileID)),N1||(N1={min:ce,max:se});const Nt=p.furthestTileCorner(this.rotation),hn=[Nt[0]*p.EXTENT,Nt[1]*p.EXTENT,N1.max];p.transformMat4(hn,hn,Pt),Et=(1-hn[1])*this.height*.5<Ae}return A1<Fe||Et})}return Ie.sort((Fe,Ae)=>Fe.distanceSq-Ae.distanceSq).map(Fe=>Fe.tileID)}resize(l,f){this.width=l,this.height=f,this.pixelsToGLUnits=[2/l,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const f=p.clamp(l.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),_=this.projection.project(l.lng,f);return new p.pointGeometry(_.x*this.worldSize,_.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/p.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,f){let _,x;const w=this.centerPoint;if("globe"===this.projection.name){const A=this.worldSize;_=(f.x-w.x)/A,x=(f.y-w.y)/A}else{const A=this.pointCoordinate(f),L=this.pointCoordinate(w);_=A.x-L.x,x=A.y-L.y}const D=this.locationCoordinate(l);this.setLocation(new p.MercatorCoordinate(D.x-_,D.y-x))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,f){const _=f?p.mercatorZfromAltitude(f,l.lat):void 0,x=this.projection.project(l.lng,l.lat);return new p.MercatorCoordinate(x.x,x.y,_)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,f){const _=f??this._centerAltitude,x=[l.x,l.y,0,1],w=[l.x,l.y,1,1];p.transformMat4$1(x,x,this.pixelMatrixInverse),p.transformMat4$1(w,w,this.pixelMatrixInverse);const D=w[3];p.scale$1(x,x,1/x[3]),p.scale$1(w,w,1/D);const A=x[2],L=w[2];return{p0:x,p1:w,t:A===L?0:(_-A)/(L-A)}}screenPointToMercatorRay(l){const f=[l.x,l.y,0,1],_=[l.x,l.y,1,1];return p.transformMat4$1(f,f,this.pixelMatrixInverse),p.transformMat4$1(_,_,this.pixelMatrixInverse),p.scale$1(f,f,1/f[3]),p.scale$1(_,_,1/_[3]),f[2]=p.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,_[2]=p.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,p.scale$1(f,f,1/this.worldSize),p.scale$1(_,_,1/this.worldSize),new p.Ray([f[0],f[1],f[2]],p.normalize([],p.sub([],_,f)))}rayIntersectionCoordinate(l){const{p0:f,p1:_,t:x}=l,w=p.mercatorZfromAltitude(f[2],this._center.lat),D=p.mercatorZfromAltitude(_[2],this._center.lat);return new p.MercatorCoordinate(p.number(f[0],_[0],x)/this.worldSize,p.number(f[1],_[1],x)/this.worldSize,p.number(w,D,x))}pointCoordinate(l,f=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,f)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let f=this.projection.pointCoordinate3D(this,l.x,l.y);if(f)return new p.MercatorCoordinate(f[0],f[1],f[2]);let _=0,x=this.horizonLineFromTop();if(l.y>x)return this.pointCoordinate(l);const w=.02*x,D=l.clone();for(let A=0;A<10&&x-_>w;A++){D.y=p.number(_,x,.66);const L=this.projection.pointCoordinate3D(this,D.x,D.y);L?(x=D.y,f=L):_=D.y}return f?new p.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}_coordinatePoint(l,f){const _=f&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,x=[l.x*this.worldSize,l.y*this.worldSize,_+l.toAltitude(),1];return p.transformMat4$1(x,x,this.pixelMatrix),x[3]>0?new p.pointGeometry(x[0]/x[3],x[1]/x[3]):new p.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:f}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,w=this.pointLocation3D(new p.pointGeometry(f,l)),D=this.pointLocation3D(new p.pointGeometry(x,l)),A=this.pointLocation3D(new p.pointGeometry(x,_)),L=this.pointLocation3D(new p.pointGeometry(f,_));let P=Math.min(w.lng,D.lng,A.lng,L.lng),R=Math.max(w.lng,D.lng,A.lng,L.lng),B=Math.min(w.lat,D.lat,A.lat,L.lat),Y=Math.max(w.lat,D.lat,A.lat,L.lat);const Q=Math.pow(2,-this.zoom)/16*270,te="globe"===this.projection.name?1:4,J=(ee,q,oe,se,ce)=>{const ye=(ee+oe)/2,ve=(q+se)/2,Ce=new p.pointGeometry(ye,ve),{lng:Se,lat:Ie}=this.pointLocation3D(Ce),Pe=Math.max(0,P-Se,B-Ie,Se-R,Ie-Y);P=Math.min(P,Se),R=Math.max(R,Se),B=Math.min(B,Ie),Y=Math.max(Y,Ie),(ce<te||Pe>Q)&&(J(ee,q,ye,ve,ce+1),J(ye,ve,oe,se,ce+1))};if(J(f,l,x,l,1),J(x,l,x,_,1),J(x,_,f,_,1),J(f,_,f,l,1),"globe"===this.projection.name){const[ee,q]=p.polesInViewport(this);ee?(Y=90,R=180,P=-180):q&&(B=-90,R=180,P=-180)}return new p.LngLatBounds(new p.LngLat(P,B),new p.LngLat(R,Y))}_getBoundsRectangular(l,f){const{top:_,left:x}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,D=this.width-this._edgeInsets.right,A=new p.pointGeometry(x,_),L=new p.pointGeometry(D,_),P=new p.pointGeometry(D,w),R=new p.pointGeometry(x,w);let B=this.pointCoordinate(A,l),Y=this.pointCoordinate(L,l);const Q=this.pointCoordinate(P,f),te=this.pointCoordinate(R,f),J=(ee,q)=>(q.y-ee.y)/(q.x-ee.x);return B.y>1&&Y.y>=0?B=new p.MercatorCoordinate((1-te.y)/J(te,B)+te.x,1):B.y<0&&Y.y<=1&&(B=new p.MercatorCoordinate(-te.y/J(te,B)+te.x,0)),Y.y>1&&B.y>=0?Y=new p.MercatorCoordinate((1-Q.y)/J(Q,Y)+Q.x,1):Y.y<0&&B.y<=1&&(Y=new p.MercatorCoordinate(-Q.y/J(Q,Y)+Q.x,0)),(new p.LngLatBounds).extend(this.coordinateLocation(B)).extend(this.coordinateLocation(Y)).extend(this.coordinateLocation(te)).extend(this.coordinateLocation(Q))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const f=l.visibleDemTiles.reduce((_,x)=>{if(x.dem){const w=x.dem.tree;_.min=Math.min(_.min,w.minimums[0]),_.max=Math.max(_.max,w.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(f.min*l.exaggeration(),f.max*l.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,_=this.height/2-f*(1-this._horizonShift);return l?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-p.MAX_MERCATOR_LATITUDE,this.maxLat=p.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=p.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=p.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=p.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=p.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,f){return this.projection.createTileMatrix(this,f,l)}calculateDistanceTileData(l){const f=l.key,_=this._distanceTileDataCache;if(_[f])return _[f];const x=l.canonical,w=1/this.height,D=this.cameraWorldSize,A=D/this.zoomScale(x.z),L=(x.x+Math.pow(2,x.z)*l.wrap)*A,P=x.y*A,R=this.point;R.x*=D/this.worldSize,R.y*=D/this.worldSize;const B=this.angle,Y=Math.sin(-B),Q=-Math.cos(-B);return _[f]={bearing:[Y,Q],center:[(R.x-L)*w,(R.y-P)*w],scale:A/p.EXTENT*w},_[f]}calculateFogTileMatrix(l){const f=l.key,_=this._fogTileMatrixCache;if(_[f])return _[f];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return p.multiply(x,this.worldToFogMatrix,x),_[f]=new Float32Array(x),_[f]}calculateProjMatrix(l,f=!1){const _=l.key,x=f?this._alignedProjMatrixCache:this._projMatrixCache;if(x[_])return x[_];const w=this.calculatePosMatrix(l,this.worldSize);return p.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,w),x[_]=new Float32Array(w),x[_]}calculatePixelsToTileUnitsMatrix(l){const f=l.tileID.key,_=this._pixelsToTileUnitsCache;if(_[f])return _[f];const x=function(w,D){const{scale:A}=w.tileTransform,L=A*p.EXTENT/(w.tileSize*Math.pow(2,D.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return P=new Float32Array(4),Y=(R=D.inverseAdjustmentMatrix)[1],Q=R[2],te=R[3],ee=(B=[L,L])[1],P[0]=R[0]*(J=B[0]),P[1]=Y*J,P[2]=Q*ee,P[3]=te*ee,P;var P,R,B,Y,Q,te,J,ee}(l,this);return _[f]=x,_[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const l=1/this.worldSize,f=p.fromScaling([],[l,l,l]);return p.multiply(f,f,this.globeMatrix),f}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const l=this._elevation;this._updateCameraState();const f=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(f),x=this._camera.forward(),w=p.mercatorZfromAltitude(1,this._center.lat);_[2]/=w,x[2]/=w,p.normalize(x,x);const D=l.raycast(_,x,l.exaggeration());if(D){const A=p.scaleAndAdd([],_,x,D),L=new p.MercatorCoordinate(A[0],A[1],p.mercatorZfromAltitude(A[2],p.latFromMercatorY(A[1]))),P=(L.z+p.length([L.x-_[0],L.y-_[1],L.z-_[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(P),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const f=this._elevation,_=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(_),w=f.getAtPointOrZero(new p.MercatorCoordinate(...x)),D=this.pixelsPerMeter/this.worldSize*w,A=this._minimumHeightOverTerrain(),L=x[2]-D;if(L<=A)if(L<0||l){const P=this.locationCoordinate(this._center,this._centerAltitude),R=[x[0],x[1],P.z-x[2]],B=p.length(R);R[2]-=(A-L)/this._pixelsPerMercatorPixel;const Y=p.length(R);if(0===Y)return;p.scale$2(R,R,B/Y*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],P.z*this._pixelsPerMercatorPixel-R[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const Y=this.center;return Y.lat=p.clamp(Y.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(Y.lng=p.clamp(Y.lng,this.minLng,this.maxLng)),this.center=Y,void(this._constraining=!1)}const f=this._unmodified,{x:_,y:x}=this.point;let w=0,D=_,A=x;const L=this.width/2,P=this.height/2,R=this.worldMinY*this.scale,B=this.worldMaxY*this.scale;if(x-P<R&&(A=R+P),x+P>B&&(A=B-P),B-R<this.height&&(w=Math.max(w,this.height/(B-R)),A=(B+R)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Y=this.worldMinX*this.scale,Q=this.worldMaxX*this.scale,te=this.worldSize/2-(Y+Q)/2;D=(_+te+this.worldSize)%this.worldSize-te,D-L<Y&&(D=Y+L),D+L>Q&&(D=Q-L),Q-Y<this.width&&(w=Math.max(w,this.width/(Q-Y)),D=(Q+Y)/2)}D===_&&A===x||(this.center=this.unproject(new p.pointGeometry(D,A))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,f=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=p.mercatorZfromAltitude(1,this.center.lat)/p.mercatorZfromAltitude(1,p.GLOBE_SCALE_MATCH_LATITUDE));const _=Qe(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x="meters"===this.projection.zAxisUnit?f:1,w=this._camera.getWorldToCamera(this.worldSize,x),D=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);D[8]=2*-l.x/this.width,D[9]=2*l.y/this.height;let A=p.mul([],D,w);if(this.projection.isReprojectedInTileSpace){const ve=this.locationCoordinate(this.center),Ce=p.identity([]);p.translate(Ce,Ce,[ve.x*this.worldSize,ve.y*this.worldSize,0]),p.multiply(Ce,Ce,G(this)),p.translate(Ce,Ce,[-ve.x*this.worldSize,-ve.y*this.worldSize,0]),p.multiply(A,A,Ce),this.inverseAdjustmentMatrix=function(Se){const Ie=G(Se,!0);return I1([],[Ie[0],Ie[1],Ie[4],Ie[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=p.scale([],A,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=A,this.invProjMatrix=p.invert(new Float64Array(16),this.projMatrix);const L=p.invert([],D);this.frustumCorners=p.FrustumCorners.fromInvProjectionMatrix(L,this.horizonLineFromTop(),this.height);const P=new Float32Array(16);p.identity(P),p.scale(P,P,[1,-1,1]),p.rotateX(P,P,this._pitch),p.rotateZ(P,P,this.angle);const R=p.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),B=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;R[8]=2*-l.x/this.width,R[9]=2*(l.y+B)/this.height,this.skyboxMatrix=p.multiply(P,R,P);const Y=this.point,Q=Y.x,te=Y.y,J=this.width%2/2,ee=this.height%2/2,q=Math.cos(this.angle),oe=Math.sin(this.angle),se=Q-Math.round(Q)+q*J+oe*ee,ce=te-Math.round(te)+q*ee+oe*J,ye=new Float64Array(A);if(p.translate(ye,ye,[se>.5?se-1:se,ce>.5?ce-1:ce,0]),this.alignedProjMatrix=ye,A=p.create(),p.scale(A,A,[this.width/2,-this.height/2,1]),p.translate(A,A,[1,-1,0]),this.labelPlaneMatrix=A,A=p.create(),p.scale(A,A,[1,-1,1]),p.translate(A,A,[-1,-1,0]),p.scale(A,A,[2/this.width,2/this.height,1]),this.glCoordMatrix=A,this.pixelMatrix=p.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},A=p.invert(new Float64Array(16),this.pixelMatrix),!A)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=A,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=p.calculateGlobeMatrix(this);const ve=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=p.transformMat4(ve,ve,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=A;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,f=this.cameraPixelsPerMeter,_=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,w=[l,l,f];p.scale$2(w,w,x),p.scale$2(_,_,-1),p.multiply$2(_,_,w);const D=p.create();p.translate(D,D,_),p.scale(D,D,w),this.mercatorFogMatrix=D,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,f,x)}_computeCameraPosition(l){const f=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),x=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-l/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-_[0]*w,x.y/this.worldSize-_[1]*w,l/this.worldSize*this._centerAltitude-_[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],x=l[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(w=Math.min((f-_)/x,1)),this._camera.position=p.scaleAndAdd([],this._camera.position,l,w),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,f=this._camera.forward(),{pitch:_,bearing:x}=this._camera.getPitchBearing(),w=p.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,D=this._mercatorZfromZoom(this._maxZoom)*Math.cos(p.degToRad(this._maxPitch)),A=Math.max((l[2]-w)/Math.cos(_),D),L=this._zoomFromMercatorZ(A);p.scaleAndAdd(l,l,f,A),this._pitch=p.clamp(_,p.degToRad(this.minPitch),p.degToRad(this.maxPitch)),this.angle=p.wrap(x,-Math.PI,Math.PI),this._setZoom(p.clamp(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new p.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let f=0,_=p.GLOBE_ZOOM_THRESHOLD_MAX,x=0,w=1/0;for(;_-f>1e-6&&_>f;){const D=f+.5*(_-f),A=this.tileSize*Math.pow(2,D),L=this.getCameraToCenterDistance(this.projection,D,A),P=this.scaleZoom(L/(l*this.tileSize)),R=Math.abs(D-P);R<w&&(w=R,x=D),D<P?f=D:_=D}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(p.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,f){const _=Math.min(l.x,f.x),x=Math.max(l.x,f.x),w=Math.min(l.y,f.y),D=Math.max(l.y,f.y);if(w<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const A=[new p.pointGeometry(_,w),new p.pointGeometry(x,D),new p.pointGeometry(_,D),new p.pointGeometry(x,w)],L=this.renderWorldCopies?-3:0,P=this.renderWorldCopies?4:1;for(const R of A){const B=this.pointRayIntersection(R);if(B.t<0)return!0;const Y=this.rayIntersectionCoordinate(B);if(Y.x<L||Y.y<0||Y.x>P||Y.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+p.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new p.pointGeometry(0,0),new p.pointGeometry(this.width,this.height))}zoomDeltaToMovement(l,f){const _=p.length(p.sub([],this._camera.position,l)),x=this._zoomFromMercatorZ(_)+f;return _-this._mercatorZfromZoom(x)}getCameraPoint(){if("globe"===this.projection.name){const l=function([f,_,x],w){const D=[f,_,x,1];p.transformMat4$1(D,D,w);const A=D[3]=Math.max(D[3],1e-6);return D[0]/=A,D[1]/=A,D[2]/=A,D}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new p.pointGeometry(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new p.pointGeometry(0,l))}}getCameraToCenterDistance(l,f=this.zoom,_=this.worldSize){const x=Qe(l,f,this.width,this.height,1024),w=l.pixelSpaceConversion(this.center.lat,_,x);return.5/Math.tan(.5*this._fov)*this.height*w}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&p.multiply(l,l,this.globeMatrix),l}}function X2(m,l){let f=!1,_=null;const x=()=>{_=null,f&&(m(),_=setTimeout(x,l),f=!1)};return()=>(f=!0,_||x(),_)}class E3{constructor(l){this._hashName=l&&encodeURIComponent(l),p.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=X2(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,p.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),p.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const f=h6(l);if(this._hashName){const _=this._hashName;let x=!1;const w=p.window.location.hash.slice(1).split("&").map(D=>{const A=D.split("=")[0];return A===_?(x=!0,`${A}=${f}`):D}).filter(D=>D);return x||w.push(`${_}=${f}`),`#${w.join("&")}`}return`#${f}`}_getCurrentHash(){const l=p.window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(f=_)}),(f&&f[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(_=>isNaN(_))){const _=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(f[3]||0):l.getBearing();return l.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:_,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=p.window.location.href.replace(/(#.+)?$/,this.getHashString());p.window.history.replaceState(p.window.history.state,null,l)}}function h6(m,l){const f=m.getCenter(),_=Math.round(100*m.getZoom())/100,x=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,x),D=Math.round(f.lng*w)/w,A=Math.round(f.lat*w)/w,L=m.getBearing(),P=m.getPitch();let R=l?`/${D}/${A}/${_}`:`${_}/${A}/${D}`;return(L||P)&&(R+="/"+Math.round(10*L)/10),P&&(R+=`/${Math.round(P)}`),R}const S4={linearity:.3,easing:p.bezier(0,0,.3,1)},V3=p.extend({deceleration:2500,maxSpeed:1400},S4),b5=p.extend({deceleration:20,maxSpeed:1400},S4),$l=p.extend({deceleration:1e3,maxSpeed:360},S4),p6=p.extend({deceleration:1e3,maxSpeed:90},S4);class ql{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,f=p.exported.now();for(;l.length>0&&f-l[0].time>160;)l.shift()}_onMoveEnd(l){if(p.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const f={zoom:0,bearing:0,pitch:0,pan:new p.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)f.zoom+=w.zoomDelta||0,f.bearing+=w.bearingDelta||0,f.pitch+=w.pitchDelta||0,w.panDelta&&f.pan._add(w.panDelta),w.around&&(f.around=w.around),w.pinchAround&&(f.pinchAround=w.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(f.pan.mag()){const w=kc(f.pan.mag(),_,p.extend({},V3,l||{}));x.offset=f.pan.mult(w.amount/f.pan.mag()),x.center=this._map.transform.center,Hc(x,w)}if(f.zoom){const w=kc(f.zoom,_,b5);x.zoom=this._map.transform.zoom+w.amount,Hc(x,w)}if(f.bearing){const w=kc(f.bearing,_,$l);x.bearing=this._map.transform.bearing+p.clamp(w.amount,-179,179),Hc(x,w)}if(f.pitch){const w=kc(f.pitch,_,p6);x.pitch=this._map.transform.pitch+w.amount,Hc(x,w)}if(x.zoom||x.bearing){const w=void 0===f.pinchAround?f.around:f.pinchAround;x.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function Hc(m,l){(!m.duration||m.duration<l.duration)&&(m.duration=l.duration,m.easing=l.easing)}function kc(m,l,f){const{maxSpeed:_,linearity:x,deceleration:w}=f,D=p.clamp(m*x/(l/1e3),-_,_),A=Math.abs(D)/(w*x);return{easing:f.easing,duration:1e3*A,amount:D*(A/2)}}class li extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,_,x={}){const w=ht(f.getCanvasContainer(),_),D=f.unproject(w);super(l,p.extend({point:w,lngLat:D,originalEvent:_},x)),this._defaultPrevented=!1,this.target=f}}class Wl extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,_){const x="touchend"===l?_.changedTouches:_.touches,w=U1(f.getCanvasContainer(),x),D=w.map(L=>f.unproject(L)),A=w.reduce((L,P,R,B)=>L.add(P.div(B.length)),new p.pointGeometry(0,0));super(l,{points:w,point:A,lngLats:D,lngLat:f.unproject(A),originalEvent:_}),this._defaultPrevented=!1}}class hd extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,_){super(l,{originalEvent:_}),this._defaultPrevented=!1}}class hs{constructor(l,f){this._map=l,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new hd(l.type,this._map,l))}mousedown(l,f){return this._mousedownPos=f,this._firePreventable(new li(l.type,this._map,l))}mouseup(l){this._map.fire(new li(l.type,this._map,l))}preclick(l){const f=p.extend({},l);f.type="preclick",this._map.fire(new li(f.type,this._map,f))}click(l,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(l),this._map.fire(new li(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new li(l.type,this._map,l))}mouseover(l){this._map.fire(new li(l.type,this._map,l))}mouseout(l){this._map.fire(new li(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Wl(l.type,this._map,l))}touchmove(l){this._map.fire(new Wl(l.type,this._map,l))}touchend(l){this._map.fire(new Wl(l.type,this._map,l))}touchcancel(l){this._map.fire(new Wl(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class D4{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new li(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new li("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new li(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wn{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,f){this.isEnabled()&&l.shiftKey&&0===l.button&&(sa(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(l,f){if(!this._active)return;const _=f,x=this._startPos,w=this._lastPos;if(!x||!w||w.equals(_)||!this._box&&_.dist(x)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=m1("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const D=Math.min(x.x,_.x),A=Math.max(x.x,_.x),L=Math.min(x.y,_.y),P=Math.max(x.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${D}px,${L}px)`,this._box.style.width=A-D+"px",this._box.style.height=P-L+"px")})}mouseupWindow(l,f){if(!this._active)return;const _=this._startPos,x=f;if(_&&0===l.button){if(this.reset(),q2(),_.x!==x.x||_.y!==x.y)return this._map.fire(new p.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:w=>w.fitScreenCoordinates(_,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&27===l.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Fi(),delete this._startPos,delete this._lastPos}_fireEvent(l,f){return this._map.fire(new p.Event(l,{originalEvent:f}))}}function L3(m,l){const f={};for(let _=0;_<m.length;_++)f[m[_].identifier]=l[_];return f}class m6{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,f,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=l.timeStamp),_.length===this.numTouches&&(this.centroid=function(x){const w=new p.pointGeometry(0,0);for(const D of x)w._add(D);return w.div(x.length)}(f),this.touches=L3(_,f)))}touchmove(l,f,_){if(this.aborted||!this.centroid)return;const x=L3(_,f);for(const w in this.touches){const A=x[w];(!A||A.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(l,f,_){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),0===_.length){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class Ic{constructor(l){this.singleTap=new m6(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,f,_){this.singleTap.touchstart(l,f,_)}touchmove(l,f,_){this.singleTap.touchmove(l,f,_)}touchend(l,f,_){const x=this.singleTap.touchend(l,f,_);if(x){const w=l.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(x)<30;if(w&&D||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class A4{constructor(){this._zoomIn=new Ic({numTouches:1,numTaps:2}),this._zoomOut=new Ic({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,f,_){this._zoomIn.touchstart(l,f,_),this._zoomOut.touchstart(l,f,_)}touchmove(l,f,_){this._zoomIn.touchmove(l,f,_),this._zoomOut.touchmove(l,f,_)}touchend(l,f,_){const x=this._zoomIn.touchend(l,f,_),w=this._zoomOut.touchend(l,f,_);return x?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()+1,around:D.unproject(x)},{originalEvent:l})}):w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()-1,around:D.unproject(w)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Zl={0:1,2:2};class E4{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,f){return!1}_move(l,f){return{}}mousedown(l,f){if(this._lastPoint)return;const _=br(l);this._correctButton(l,_)&&(this._lastPoint=f,this._eventButton=_)}mousemoveWindow(l,f){const _=this._lastPoint;if(_)if(l.preventDefault(),null!=this._eventButton&&function(x,w){const D=Zl[w];return void 0===x.buttons||(x.buttons&D)!==D}(l,this._eventButton))this.reset();else if(this._moved||!(f.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(_,f)}mouseupWindow(l){this._lastPoint&&br(l)===this._eventButton&&(this._moved&&q2(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class V4 extends E4{mousedown(l,f){super.mousedown(l,f),this._lastPoint&&(this._active=!0)}_correctButton(l,f){return 0===f&&!l.ctrlKey}_move(l,f){return{around:f,panDelta:f.sub(l)}}}class Yl extends E4{_correctButton(l,f){return 0===f&&l.ctrlKey||2===f}_move(l,f){const _=.8*(f.x-l.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(l){l.preventDefault()}}class ur extends E4{_correctButton(l,f){return 0===f&&l.ctrlKey||2===f}_move(l,f){const _=-.5*(f.y-l.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(l){l.preventDefault()}}class ic{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),p.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new p.pointGeometry(0,0)}touchstart(l,f,_){return this._calculateTransform(l,f,_)}touchmove(l,f,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===_.length&&!p.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,f,_)}}touchend(l,f,_){this._calculateTransform(l,f,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,f,_){_.length>0&&(this._active=!0);const x=L3(_,f),w=new p.pointGeometry(0,0),D=new p.pointGeometry(0,0);let A=0;for(const P in x){const R=x[P],B=this._touches[P];B&&(w._add(R),D._add(R.sub(B)),A++,x[P]=R)}if(this._touches=x,A<this._minTouches||!D.mag())return;const L=D.div(A);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(A),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=m1("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class T3{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,f,_){return{}}touchstart(l,f,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([f[0],f[1]]))}touchmove(l,f,_){const x=this._firstTwoTouches;if(!x)return;l.preventDefault();const[w,D]=x,A=g2(_,f,w),L=g2(_,f,D);if(!A||!L)return;const P=this._aroundCenter?null:A.add(L).div(2);return this._move([A,L],P,l)}touchend(l,f,_){if(!this._firstTwoTouches)return;const[x,w]=this._firstTwoTouches,D=g2(_,f,x),A=g2(_,f,w);D&&A||(this._active&&q2(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&"center"===l.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function g2(m,l,f){for(let _=0;_<m.length;_++)if(m[_].identifier===f)return l[_]}function g6(m,l){return Math.log(m/l)/Math.LN2}class H3 extends T3{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,f){const _=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(g6(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:g6(this._distance,_),pinchAround:f}}}function Ui(m,l){return 180*m.angleWith(l)/Math.PI}class _6 extends T3{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,f){const _=this._vector;if(this._vector=l[0].sub(l[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ui(this._vector,_),pinchAround:f}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const f=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const x=Ui(l,_);return Math.abs(x)<f}}function k3(m){return Math.abs(m.y)>Math.abs(m.x)}class _2 extends T3{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,k3(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,f,_){const x=this._lastPoints;if(!x)return;const w=l[0].sub(x[0]),D=l[1].sub(x[1]);return this._map._cooperativeGestures&&!p.isFullscreen()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(w,D,_.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+D.y)/2*-.5})}gestureBeginsVertically(l,f,_){if(void 0!==this._valid)return this._valid;const x=l.mag()>=2,w=f.mag()>=2;if(!x&&!w)return;if(!x||!w)return null==this._firstMove&&(this._firstMove=_),_-this._firstMove<100&&void 0;const D=l.y>0==f.y>0;return k3(l)&&k3(f)&&D}}const dr={panStep:100,bearingStep:15,pitchStep:10};class v6{constructor(){const l=dr;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let f=0,_=0,x=0,w=0,D=0;switch(l.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:l.shiftKey?_=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?_=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?x=1:(l.preventDefault(),D=-1);break;case 40:l.shiftKey?x=-1:(l.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(_=0,x=0),{cameraAnimation:A=>{const L=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:L4,zoom:f?Math.round(L)+f*(l.shiftKey?2:1):L,bearing:A.getBearing()+_*this._bearingStep,pitch:A.getPitch()+x*this._pitchStep,offset:[-w*this._panStep,-D*this._panStep],center:A.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function L4(m){return m*(2-m)}const y6=4.000244140625;class zi{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,p.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&"center"===l.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||p.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=l.deltaMode===p.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const _=p.exported.now(),x=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,0!==f&&f%y6==0?this._type="wheel":0!==f&&Math.abs(f)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(x*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),l.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=l,this._delta-=f,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=ht(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;"wheel"===this._type&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const f=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(0!==this._delta){const L="wheel"===this._type&&Math.abs(this._delta)>y6?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&0!==P&&(P=1/P);const R=f(),B=Math.pow(2,R),Y="number"==typeof this._targetZoom?l.zoomScale(this._targetZoom):B;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(Y*P))),"wheel"===this._type&&(this._startZoom=R,this._easing=this._smoothOutEasing(200)),this._delta=0}const _="number"==typeof this._targetZoom?this._targetZoom:f(),x=this._startZoom,w=this._easing;let D,A=!1;if("wheel"===this._type&&x&&w){const L=Math.min((p.exported.now()-this._lastWheelEventTime)/200,1),P=w(L);D=p.number(x,_,P),L<1?this._frameId||(this._frameId=!0):A=!0}else D=_,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:D-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let f=p.ease;if(this._prevEase){const _=this._prevEase,x=(p.exported.now()-_.start)/_.duration,w=_.easing(x+.01)-_.easing(x),D=.27/Math.sqrt(w*w+1e-4)*.01,A=Math.sqrt(.0729-D*D);f=p.bezier(D,A,.25,1)}return this._prevEase={start:p.exported.now(),duration:l,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=m1("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(p.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Xl{constructor(l,f){this._clickZoom=l,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ps{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,f){return l.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(l.shiftKey?-1:1),around:_.unproject(f)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class s1{constructor(){this._tap=new Ic({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,f,_){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=f[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(l,f,_))}touchmove(l,f,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const x=f[0],w=x.y-this._swipePoint.y;return this._swipePoint=x,l.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(l,f,_)}touchend(l,f,_){this._tapTime?this._swipePoint&&0===_.length&&this.reset():this._tap.touchend(l,f,_)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class I3{constructor(l,f,_){this._el=l,this._mousePan=f,this._touchPan=_}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class At{constructor(l,f,_){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=f,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class x6{constructor(l,f,_,x){this._el=l,this._touchZoom=f,this._touchRotate=_,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const R3=m=>m.zoom||m.drag||m.pitch||m.rotate;class P3 extends p.Event{}class Rc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,f){const _=p.sub([],f,l);this.radius=p.length(_[2]<0?p.div([],_,this.constants):[_[0],_[1],0])}projectRay(l){p.div(l,l,this.constants),p.normalize(l,l),p.mul$1(l,l,this.constants);const f=p.scale$2([],l,this.radius);if(f[2]>0){const _=p.scale$2([],[0,0,1],p.dot(f,[0,0,1])),x=p.scale$2([],p.normalize([],[f[0],f[1],0]),this.radius),w=p.add([],f,p.scale$2([],p.sub([],p.add([],x,_),f),2));f[0]=w[0],f[1]=w[1]}return f}}function F3(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class b6{constructor(l,f){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ql(l),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Rc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),p.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[p.window.document,"mousemove",{capture:!0}],[p.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[p.window,"blur",void 0]];for(const[x,w,D]of this._listeners)x.addEventListener(w,x===p.window.document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(const[l,f,_]of this._listeners)l.removeEventListener(f,l===p.window.document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(l){const f=this._map,_=f.getCanvasContainer();this._add("mapEvent",new hs(f,l));const x=f.boxZoom=new wn(f,l);this._add("boxZoom",x);const w=new A4,D=new ps;f.doubleClickZoom=new Xl(D,w),this._add("tapZoom",w),this._add("clickZoom",D);const A=new s1;this._add("tapDragZoom",A);const L=f.touchPitch=new _2(f);this._add("touchPitch",L);const P=new Yl(l),R=new ur(l);f.dragRotate=new At(l,P,R),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);const B=new V4(l),Y=new ic(f,l);f.dragPan=new I3(_,B,Y),this._add("mousePan",B),this._add("touchPan",Y,["touchZoom","touchRotate"]);const Q=new _6,te=new H3;f.touchZoomRotate=new x6(_,te,Q,A),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",te,["touchPan","touchRotate"]),this._add("blockableMapEvent",new D4(f));const J=f.scrollZoom=new zi(f,this);this._add("scrollZoom",J,["mousePan"]);const ee=f.keyboard=new v6;this._add("keyboard",ee);for(const q of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[q]&&f[q].enable(l[q])}_add(l,f,_){this._handlers.push({handlerName:l,handler:f,allowed:_}),this._handlersById[l]=f}stop(l){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!R3(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,f,_){for(const x in l)if(x!==_&&(!f||f.indexOf(x)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const f=[];for(const _ of l)this._el.contains(_.target)&&f.push(_);return f}handleEvent(l,f){this._updatingCamera=!0;const _="renderFrame"===l.type,x=_?void 0:l,w={needsRenderFrame:!1},D={},A={},L=l.touches?this._getMapTouches(l.touches):void 0,P=L?U1(this._el,L):_?void 0:ht(this._el,l);for(const{handlerName:Y,handler:Q,allowed:te}of this._handlers){if(!Q.isEnabled())continue;let J;this._blockedByActive(A,te,Y)?Q.reset():Q[f||l.type]&&(J=Q[f||l.type](l,P,L),this.mergeHandlerResult(w,D,J,Y,x),J&&J.needsRenderFrame&&this._triggerRenderFrame()),(J||Q.isActive())&&(A[Y]=Q)}const R={};for(const Y in this._previousActiveHandlers)A[Y]||(R[Y]=x);this._previousActiveHandlers=A,(Object.keys(R).length||F3(w))&&(this._changes.push([w,D,R]),this._triggerRenderFrame()),(Object.keys(A).length||F3(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:B}=w;B&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],B(this._map))}mergeHandlerResult(l,f,_,x,w){if(!_)return;p.extend(l,_);const D={handlerName:x,originalEvent:_.originalEvent||w};void 0!==_.zoomDelta&&(f.zoom=D),void 0!==_.panDelta&&(f.drag=D),void 0!==_.pitchDelta&&(f.pitch=D),void 0!==_.bearingDelta&&(f.rotate=D)}_applyChanges(){const l={},f={},_={};for(const[x,w,D]of this._changes)x.panDelta&&(l.panDelta=(l.panDelta||new p.pointGeometry(0,0))._add(x.panDelta)),x.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+x.pitchDelta),void 0!==x.around&&(l.around=x.around),void 0!==x.aroundCoord&&(l.aroundCoord=x.aroundCoord),void 0!==x.pinchAround&&(l.pinchAround=x.pinchAround),x.noInertia&&(l.noInertia=x.noInertia),p.extend(f,w),p.extend(_,D);this._updateMapTransform(l,f,_),this._changes=[]}_updateMapTransform(l,f,_){const x=this._map,w=x.transform,D=oe=>[oe.x,oe.y,oe.z];if((oe=>{const se=this._eventsInProgress.drag;return se&&!this._handlersById[se.handlerName].isActive()})()&&!F3(l)){const oe=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",oe!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&x._stop(!0),!F3(l))return void this._fireEvents(f,_,!0);let{panDelta:A,zoomDelta:L,bearingDelta:P,pitchDelta:R,around:B,aroundCoord:Y,pinchAround:Q}=l;w._isCameraConstrained&&(L>0&&(L=0),w._isCameraConstrained=!1),void 0!==Q&&(B=Q),(L||(oe=>f.drag&&!this._eventsInProgress.drag)())&&B&&(this._dragOrigin=D(w.pointCoordinate3D(B)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",x._stop(!0),B=B||x.transform.centerPoint,P&&(w.bearing+=P),R&&(w.pitch+=R),w._updateCameraState();const te=[0,0,0];if(A)if("mercator"===w.projection.name){const oe=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(B).dir),se=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(B.sub(A)).dir);te[0]=se[0]-oe[0],te[1]=se[1]-oe[1]}else{const oe=w.pointCoordinate(B);if("globe"===w.projection.name){A=A.rotate(-w.angle);const se=w._pixelsPerMercatorPixel/w.worldSize;te[0]=-A.x*p.mercatorScale(p.latFromMercatorY(oe.y))*se,te[1]=-A.y*p.mercatorScale(w.center.lat)*se}else{const se=w.pointCoordinate(B.sub(A));oe&&se&&(te[0]=se.x-oe.x,te[1]=se.y-oe.y)}}const J=w.zoom,ee=[0,0,0];if(L){const oe=D(Y||w.pointCoordinate3D(B)),se={dir:p.normalize([],p.sub([],oe,w._camera.position))};if(se.dir[2]<0){const ce=w.zoomDeltaToMovement(oe,L);p.scale$2(ee,se.dir,ce)}}const q=p.add(te,te,ee);w._translateCameraConstrained(q),L&&Math.abs(w.zoom-J)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(f,_,!0)}_fireEvents(l,f,_){const x=R3(this._eventsInProgress),w=R3(l),D={};for(const R in l){const{originalEvent:B}=l[R];this._eventsInProgress[R]||(D[`${R}start`]=B),this._eventsInProgress[R]=l[R]}!x&&w&&this._fireEvent("movestart",w.originalEvent);for(const R in D)this._fireEvent(R,D[R]);w&&this._fireEvent("move",w.originalEvent);for(const R in l){const{originalEvent:B}=l[R];this._fireEvent(R,B)}const A={};let L;for(const R in this._eventsInProgress){const{handlerName:B,originalEvent:Y}=this._eventsInProgress[R];this._handlersById[B].isActive()||(delete this._eventsInProgress[R],L=f[B]||Y,A[`${R}end`]=L)}for(const R in A)this._fireEvent(R,A[R]);const P=R3(this._eventsInProgress);if(_&&(x||w)&&!P){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=Y=>0!==Y&&-this._bearingSnap<Y&&Y<this._bearingSnap;R?(B(R.bearing||this._map.getBearing())&&(R.bearing=0),this._map.easeTo(R,{originalEvent:L})):(this._map.fire(new p.Event("moveend",{originalEvent:L})),B(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,f){this._map.fire(new p.Event(l,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new P3("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const pt="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class fn extends p.Evented{constructor(l,f){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=f.bearingSnap,p.bindAll(["_renderFrameCallback"],this)}getCenter(){return new p.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,f){return this.jumpTo({center:l},f)}panBy(l,f,_){return l=p.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,p.extend({offset:l},f),_)}panTo(l,f,_){return this.easeTo(p.extend({center:l},f),_)}getZoom(){return this.transform.zoom}setZoom(l,f){return this.jumpTo({zoom:l},f),this}zoomTo(l,f,_){return this.easeTo(p.extend({zoom:l},f),_)}zoomIn(l,f){return this.zoomTo(this.getZoom()+1,l,f),this}zoomOut(l,f){return this.zoomTo(this.getZoom()-1,l,f),this}getBearing(){return this.transform.bearing}setBearing(l,f){return this.jumpTo({bearing:l},f),this}getPadding(){return this.transform.padding}setPadding(l,f){return this.jumpTo({padding:l},f),this}rotateTo(l,f,_){return this.easeTo(p.extend({bearing:l},f),_)}resetNorth(l,f){return this.rotateTo(0,p.extend({duration:1e3},l),f),this}resetNorthPitch(l,f){return this.easeTo(p.extend({bearing:0,pitch:0,duration:1e3},l),f),this}snapToNorth(l,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,f):this}getPitch(){return this.transform.pitch}setPitch(l,f){return this.jumpTo({pitch:l},f),this}cameraForBounds(l,f){l=p.LngLatBounds.convert(l);const _=f&&f.bearing||0,x=f&&f.pitch||0,w=l.getNorthWest(),D=l.getSouthEast();return this._cameraForBounds(this.transform,w,D,_,x,f)}_extendCameraOptions(l){const f={top:0,bottom:0,right:0,left:0};if("number"==typeof(l=p.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding){const _=l.padding;l.padding={top:_,bottom:_,right:_,left:_}}return l.padding=p.extend(f,l.padding),l}_minimumAABBFrustumDistance(l,f){const _=f.max[0]-f.min[0],x=f.max[1]-f.min[1];return _/x>l.aspect?_/(2*Math.tan(.5*l.fovX)*l.aspect):x/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,f,_,x,w,D){const A=l.clone(),L=this._extendCameraOptions(D);A.bearing=x,A.pitch=w;const P=p.LngLat.convert(f),R=p.LngLat.convert(_),B=.5*(P.lat+R.lat),Y=.5*(P.lng+R.lng),Q=p.latLngToECEF(B,Y),te=p.normalize([],Q),J=p.normalize([],p.cross([],te,[0,1,0])),ee=p.cross([],J,te),q=[J[0],J[1],J[2],0,ee[0],ee[1],ee[2],0,te[0],te[1],te[2],0,0,0,0,1],oe=[Q,p.latLngToECEF(P.lat,P.lng),p.latLngToECEF(R.lat,P.lng),p.latLngToECEF(R.lat,R.lng),p.latLngToECEF(P.lat,R.lng),p.latLngToECEF(B,P.lng),p.latLngToECEF(B,R.lng),p.latLngToECEF(P.lat,Y),p.latLngToECEF(R.lat,Y)];let se=p.Aabb.fromPoints(oe.map(ot=>[p.dot(J,ot),p.dot(ee,ot),p.dot(te,ot)]));const ce=p.transformMat4([],se.center,q);0===p.squaredLength(ce)&&p.set(ce,0,0,1),p.normalize(ce,ce),p.scale$2(ce,ce,p.GLOBE_RADIUS),A.center=p.ecefToLatLng(ce);const ye=A.getWorldToCameraMatrix(),ve=p.invert(new Float64Array(16),ye);se=p.Aabb.applyTransform(se,p.multiply([],ye,q)),p.transformMat4(ce,ce,ye);const Ce=.5*(se.max[2]-se.min[2]),Se=this._minimumAABBFrustumDistance(A,se),Ie=p.scale$2([],[0,0,1],Ce),Pe=p.add(Ie,ce,Ie),mt=Se+(0===A.pitch?0:p.distance(ce,Pe)),Le=A.globeCenterInViewSpace,it=p.sub([],ce,[Le[0],Le[1],Le[2]]);p.normalize(it,it),p.scale$2(it,it,mt);const Be=p.add([],ce,it);p.transformMat4(Be,Be,ve);const at=p.earthRadius/p.GLOBE_RADIUS,Fe=p.length(Be),Ae=p.mercatorZfromAltitude(Math.max(Fe*at-p.earthRadius,Number.EPSILON),0),Ne=Math.min(A.zoomFromMercatorZAdjusted(Ae),L.maxZoom);return Ne>.5*(p.GLOBE_ZOOM_THRESHOLD_MIN+p.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"mercator"}),A.zoom=Ne,this._cameraForBounds(A,f,_,x,w,D)):{center:A.center,zoom:Ne,bearing:x,pitch:w}}queryTerrainElevation(l,f){const _=this.transform.elevation;return _?(f=p.extend({},{exaggerated:!0},f),_.getAtPoint(p.MercatorCoordinate.fromLngLat(l),null,f.exaggerated)):null}_cameraForBounds(l,f,_,x,w,D){if("globe"===l.projection.name)return this._cameraForBoundsOnGlobe(l,f,_,x,w,D);const A=l.clone(),L=this._extendCameraOptions(D),P=A.padding;A.bearing=x,A.pitch=w;const R=p.LngLat.convert(f),B=p.LngLat.convert(_),Y=new p.LngLat(R.lng,B.lat),Q=new p.LngLat(B.lng,R.lat),te=A.project(R),J=A.project(B),ee=this.queryTerrainElevation(R),q=this.queryTerrainElevation(B),oe=this.queryTerrainElevation(Y),se=this.queryTerrainElevation(Q),ce=[[te.x,te.y,Math.min(ee||0,q||0,oe||0,se||0)],[J.x,J.y,Math.max(ee||0,q||0,oe||0,se||0)]];let ye=p.Aabb.fromPoints(ce);const ve=A.getWorldToCameraMatrix(),Ce=p.invert(new Float64Array(16),ve);ye=p.Aabb.applyTransform(ye,ve);const Se=p.sub([],ye.max,ye.min),Ie=P.left||0,Pe=P.right||0,mt=P.bottom||0,Le=P.top||0,{left:it,right:Be,top:at,bottom:Fe}=L.padding,Ae=.5*(Ie+Pe),Ne=.5*(Le+mt),ot=Math.min(A.scaleZoom(A.scale*Math.min((A.width-(Ie+Pe+it+Be))/Se[0],(A.height-(mt+Le+Fe+at))/Se[1])),L.maxZoom),dt=A.scale/A.zoomScale(ot);ye=new p.Aabb([ye.min[0]-(it+Ae)*dt,ye.min[1]-(Fe+Ne)*dt,ye.min[2]],[ye.max[0]+(Be+Ae)*dt,ye.max[1]+(at+Ne)*dt,ye.max[2]]);const kt=.5*Se[2],A1=this._minimumAABBFrustumDistance(A,ye),Et=[0,0,1,0];p.transformMat4$1(Et,Et,ve),p.normalize$2(Et,Et);const Mt=p.scale$2([],Et,A1+kt),Pt=p.add([],ye.center,Mt),N1=("number"==typeof L.offset.x&&"number"==typeof L.offset.y?new p.pointGeometry(L.offset.x,L.offset.y):p.pointGeometry.convert(L.offset)).rotate(-p.degToRad(x));ye.center[0]-=N1.x*dt,ye.center[1]+=N1.y*dt,p.transformMat4(ye.center,ye.center,Ce),p.transformMat4(Pt,Pt,Ce);const Nt=[ye.center[0],ye.center[1],Pt[2]*A.pixelsPerMeter];p.scale$2(Nt,Nt,1/A.worldSize);const hn=p.lngFromMercatorX(Nt[0]),_n=p.latFromMercatorY(Nt[1]),Mn=Math.min(A._zoomFromMercatorZ(Nt[2]),L.maxZoom),kn=new p.LngLat(hn,_n);return A.mercatorFromTransition&&Mn<.5*(p.GLOBE_ZOOM_THRESHOLD_MIN+p.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"globe"}),A.zoom=Mn,this._cameraForBounds(A,f,_,x,w,D)):{center:kn,zoom:Mn,bearing:x,pitch:w}}fitBounds(l,f,_){const x=this.cameraForBounds(l,f);return this._fitInternal(x,f,_)}fitScreenCoordinates(l,f,_,x,w){const D=p.pointGeometry.convert(l),A=p.pointGeometry.convert(f),L=new p.pointGeometry(Math.min(D.x,A.x),Math.min(D.y,A.y)),P=new p.pointGeometry(Math.max(D.x,A.x),Math.max(D.y,A.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(D,A))return this;const R=this.transform.pointLocation3D(L),B=this.transform.pointLocation3D(P),Y=this.transform.pointLocation3D(new p.pointGeometry(L.x,P.y)),Q=this.transform.pointLocation3D(new p.pointGeometry(P.x,L.y)),te=[Math.min(R.lng,B.lng,Y.lng,Q.lng),Math.min(R.lat,B.lat,Y.lat,Q.lat)],J=[Math.max(R.lng,B.lng,Y.lng,Q.lng),Math.max(R.lat,B.lat,Y.lat,Q.lat)],ee=x&&x.pitch?x.pitch:this.getPitch(),q=this._cameraForBounds(this.transform,te,J,_,ee,x);return this._fitInternal(q,x,w)}_fitInternal(l,f,_){return l?(delete(f=p.extend(l,f)).padding,f.linear?this.easeTo(f,_):this.flyTo(f,_)):this}jumpTo(l,f){this.stop();const _=l.preloadOnly?this.transform.clone():this.transform;let x=!1,w=!1,D=!1;return"zoom"in l&&_.zoom!==+l.zoom&&(x=!0,_.zoom=+l.zoom),void 0!==l.center&&(_.center=p.LngLat.convert(l.center)),"bearing"in l&&_.bearing!==+l.bearing&&(w=!0,_.bearing=+l.bearing),"pitch"in l&&_.pitch!==+l.pitch&&(D=!0,_.pitch=+l.pitch),null==l.padding||_.isPaddingEqual(l.padding)||(_.padding=l.padding),l.preloadOnly?(this._preloadTiles(_),this):(this.fire(new p.Event("movestart",f)).fire(new p.Event("move",f)),x&&this.fire(new p.Event("zoomstart",f)).fire(new p.Event("zoom",f)).fire(new p.Event("zoomend",f)),w&&this.fire(new p.Event("rotatestart",f)).fire(new p.Event("rotate",f)).fire(new p.Event("rotateend",f)),D&&this.fire(new p.Event("pitchstart",f)).fire(new p.Event("pitch",f)).fire(new p.Event("pitchend",f)),this.fire(new p.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||p.warnOnce(pt),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,f){const _=this.transform;if(!_.projection.supportsFreeCamera)return p.warnOnce(pt),this;this.stop();const x=_.zoom,w=_.pitch,D=_.bearing;_.setFreeCameraOptions(l);const A=x!==_.zoom,L=w!==_.pitch,P=D!==_.bearing;return this.fire(new p.Event("movestart",f)).fire(new p.Event("move",f)),A&&this.fire(new p.Event("zoomstart",f)).fire(new p.Event("zoom",f)).fire(new p.Event("zoomend",f)),P&&this.fire(new p.Event("rotatestart",f)).fire(new p.Event("rotate",f)).fire(new p.Event("rotateend",f)),L&&this.fire(new p.Event("pitchstart",f)).fire(new p.Event("pitch",f)).fire(new p.Event("pitchend",f)),this.fire(new p.Event("moveend",f)),this}easeTo(l,f){this._stop(!1,l.easeId),(!1===(l=p.extend({offset:[0,0],duration:500,easing:p.ease},l)).animate||!l.essential&&p.exported.prefersReducedMotion)&&(l.duration=0);const _=this.transform,x=this.getZoom(),w=this.getBearing(),D=this.getPitch(),A=this.getPadding(),L="zoom"in l?+l.zoom:x,P="bearing"in l?this._normalizeBearing(l.bearing,w):w,R="pitch"in l?+l.pitch:D,B="padding"in l?l.padding:_.padding,Y=p.pointGeometry.convert(l.offset);let Q,te,J;if("globe"===_.projection.name){const Ie=p.MercatorCoordinate.fromLngLat(_.center),Pe=Y.rotate(-_.angle);Ie.x+=Pe.x/_.worldSize,Ie.y+=Pe.y/_.worldSize;const mt=Ie.toLngLat(),Le=p.LngLat.convert(l.center||mt);this._normalizeCenter(Le),Q=_.centerPoint.add(Pe),te=new p.pointGeometry(Ie.x,Ie.y).mult(_.worldSize),J=new p.pointGeometry(p.mercatorXfromLng(Le.lng),p.mercatorYfromLat(Le.lat)).mult(_.worldSize).sub(te)}else{Q=_.centerPoint.add(Y);const Ie=_.pointLocation(Q),Pe=p.LngLat.convert(l.center||Ie);this._normalizeCenter(Pe),te=_.project(Ie),J=_.project(Pe).sub(te)}const ee=_.zoomScale(L-x);let q,oe;l.around&&(q=p.LngLat.convert(l.around),oe=_.locationPoint(q));const se=this._zooming||L!==x,ce=this._rotating||w!==P,ye=this._pitching||R!==D,ve=!_.isPaddingEqual(B),Ce=Ie=>Pe=>{if(se&&(Ie.zoom=p.number(x,L,Pe)),ce&&(Ie.bearing=p.number(w,P,Pe)),ye&&(Ie.pitch=p.number(D,R,Pe)),ve&&(Ie.interpolatePadding(A,B,Pe),Q=Ie.centerPoint.add(Y)),q)Ie.setLocationAtPoint(q,oe);else{const mt=Ie.zoomScale(Ie.zoom-x),Le=L>x?Math.min(2,ee):Math.max(.5,ee),it=Math.pow(Le,1-Pe),Be=Ie.unproject(te.add(J.mult(Pe*it)).mult(mt));Ie.setLocationAtPoint(Ie.renderWorldCopies?Be.wrap():Be,Q)}return l.preloadOnly||this._fireMoveEvents(f),Ie};if(l.preloadOnly){const Ie=this._emulate(Ce,l.duration,_);return this._preloadTiles(Ie),this}const Se={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=se,this._rotating=ce,this._pitching=ye,this._padding=ve,this._easeId=l.easeId,this._prepareEase(f,l.noMoveStart,Se),this._ease(Ce(_),Ie=>{_.recenterOnTerrain(),this._afterEase(f,Ie)},l),this}_prepareEase(l,f,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||_.moving||this.fire(new p.Event("movestart",l)),this._zooming&&!_.zooming&&this.fire(new p.Event("zoomstart",l)),this._rotating&&!_.rotating&&this.fire(new p.Event("rotatestart",l)),this._pitching&&!_.pitching&&this.fire(new p.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new p.Event("move",l)),this._zooming&&this.fire(new p.Event("zoom",l)),this._rotating&&this.fire(new p.Event("rotate",l)),this._pitching&&this.fire(new p.Event("pitch",l))}_afterEase(l,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,x=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new p.Event("zoomend",l)),x&&this.fire(new p.Event("rotateend",l)),w&&this.fire(new p.Event("pitchend",l)),this.fire(new p.Event("moveend",l))}flyTo(l,f){if(!l.essential&&p.exported.prefersReducedMotion){const ot=p.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ot,f)}this.stop(),l=p.extend({offset:[0,0],speed:1.2,curve:1.42,easing:p.ease},l);const _=this.transform,x=this.getZoom(),w=this.getBearing(),D=this.getPitch(),A=this.getPadding(),L="zoom"in l?p.clamp(+l.zoom,_.minZoom,_.maxZoom):x,P="bearing"in l?this._normalizeBearing(l.bearing,w):w,R="pitch"in l?+l.pitch:D,B="padding"in l?l.padding:_.padding,Y=_.zoomScale(L-x),Q=p.pointGeometry.convert(l.offset);let te=_.centerPoint.add(Q);const J=_.pointLocation(te),ee=p.LngLat.convert(l.center||J);this._normalizeCenter(ee);const q=_.project(J),oe=_.project(ee).sub(q);let se=l.curve;const ce=Math.max(_.width,_.height),ye=ce/Y,ve=oe.mag();if("minZoom"in l){const ot=p.clamp(Math.min(l.minZoom,x,L),_.minZoom,_.maxZoom),dt=ce/_.zoomScale(ot-x);se=Math.sqrt(dt/ve*2)}const Ce=se*se;function Se(ot){const dt=(ye*ye-ce*ce+(ot?-1:1)*Ce*Ce*ve*ve)/(2*(ot?ye:ce)*Ce*ve);return Math.log(Math.sqrt(dt*dt+1)-dt)}function Ie(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function Pe(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const mt=Se(0);let Le=function(ot){return Pe(mt)/Pe(mt+se*ot)},it=function(ot){return ce*((Pe(mt)*(Ie(dt=mt+se*ot)/Pe(dt))-Ie(mt))/Ce)/ve;var dt},Be=(Se(1)-mt)/se;if(Math.abs(ve)<1e-6||!isFinite(Be)){if(Math.abs(ce-ye)<1e-6)return this.easeTo(l,f);const ot=ye<ce?-1:1;Be=Math.abs(Math.log(ye/ce))/se,it=function(){return 0},Le=function(dt){return Math.exp(ot*se*dt)}}l.duration="duration"in l?+l.duration:1e3*Be/("screenSpeed"in l?+l.screenSpeed/se:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const at=w!==P,Fe=R!==D,Ae=!_.isPaddingEqual(B),Ne=ot=>dt=>{const kt=dt*Be,A1=1/Le(kt);ot.zoom=1===dt?L:x+ot.scaleZoom(A1),at&&(ot.bearing=p.number(w,P,dt)),Fe&&(ot.pitch=p.number(D,R,dt)),Ae&&(ot.interpolatePadding(A,B,dt),te=ot.centerPoint.add(Q));const Et=1===dt?ee:ot.unproject(q.add(oe.mult(it(kt))).mult(A1));return ot.setLocationAtPoint(ot.renderWorldCopies?Et.wrap():Et,te),ot._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(f),ot};if(l.preloadOnly){const ot=this._emulate(Ne,l.duration,_);return this._preloadTiles(ot),this}return this._zooming=!0,this._rotating=at,this._pitching=Fe,this._padding=Ae,this._prepareEase(f,!1),this._ease(Ne(_),()=>this._afterEase(f),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,f)}if(!l){const _=this.handlers;_&&_.stop(!1)}return this}_ease(l,f,_){!1===_.animate||0===_.duration?(l(1),f()):(this._easeStart=p.exported.now(),this._easeOptions=_,this._onEaseFrame=l,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((p.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,f){l=p.wrap(l,-180,180);const _=Math.abs(l-f);return Math.abs(l-360-f)<_&&(l-=360),Math.abs(l+360-f)<_&&(l+=360),l}_normalizeCenter(l){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const _=l.lng-f.center.lng;l.lng+=_>180?-360:_<-180?360:0}_emulate(l,f,_){const x=Math.ceil(15*f/1e3),w=[],D=l(_.clone());for(let A=0;A<=x;A++){const L=D(A/x);w.push(L.clone())}return w}}class A2{constructor(l={}){this.options=l,p.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const f=this.options&&this.options.compact;return this._map=l,this._container=m1("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=m1("button","mapboxgl-ctrl-attrib-button",this._container),m1("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=m1("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===f&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,f){const _=this._map._getUIString(`AttributionControl.${f}`);l.setAttribute("aria-label",_),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||p.config.ACCESS_TOKEN}];if(l){const _=f.reduce((x,w,D)=>(w.value&&(x+=`${w.key}=${w.value}${D<f.length-1?"&":""}`),x),"?");l.href=`${p.config.FEEDBACK_URL}/${_}#${h6(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||"metadata"!==l.sourceDataType&&"visibility"!==l.sourceDataType&&"style"!==l.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const f=this._map.style._sourceCaches;for(const x in f){const w=f[x];if(w.used){const D=w.getSource();D.attribution&&l.indexOf(D.attribution)<0&&l.push(D.attribution)}}l.sort((x,w)=>x.length-w.length),l=l.filter((x,w)=>{for(let D=w+1;D<l.length;D++)if(l[D].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const _=l.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,l.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class E2{constructor(){p.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=m1("div","mapboxgl-ctrl");const f=m1("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&"metadata"!==l.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(0===Object.entries(l).length)return!0;for(const f in l){const _=l[f].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class v2{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const f=++this._id;return this._queue.push({callback:l,id:f,cancelled:!1}),f}remove(l){const f=this._currentlyRunning,_=f?this._queue.concat(f):this._queue;for(const x of _)if(x.id===l)return void(x.cancelled=!0)}run(l=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const _ of f)if(!_.cancelled&&(_.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function N3(m,l,f){if(m=new p.LngLat(m.lng,m.lat),l){const _=new p.LngLat(m.lng-360,m.lat),x=new p.LngLat(m.lng+360,m.lat),w=360*Math.ceil(Math.abs(m.lng-f.center.lng)/360),D=f.locationPoint(m).distSqr(l),A=l.x<0||l.y<0||l.x>f.width||l.y>f.height;f.locationPoint(_).distSqr(l)<D&&(A||Math.abs(_.lng-f.center.lng)<w)?m=_:f.locationPoint(x).distSqr(l)<D&&(A||Math.abs(x.lng-f.center.lng)<w)&&(m=x)}for(;Math.abs(m.lng-f.center.lng)>180;){const _=f.locationPoint(m);if(_.x>=0&&_.y>=0&&_.x<=f.width&&_.y<=f.height)break;m.lng>f.center.lng?m.lng-=360:m.lng+=360}return m}const $a={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Vr extends p.Evented{constructor(l,f){if(super(),(l instanceof p.window.HTMLElement||f)&&(l=p.extend({element:l},f)),p.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=p.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=m1("div");const x=41,w=27,D=h2("svg",{display:"block",height:x*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${x}`},this._element),A=h2("radialGradient",{id:"shadowGradient"},h2("defs",{},D));h2("stop",{offset:"10%","stop-opacity":.4},A),h2("stop",{offset:"100%","stop-opacity":.05},A),h2("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},D),h2("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},D),h2("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},D),h2("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},D),this._offset=p.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const _=this._element.classList;for(const x in $a)_.remove(`mapboxgl-marker-anchor-${x}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=p.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(24.6+x)],"bottom-right":[-x,-1*(24.6+x)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const f=l.code,_=l.charCode||l.keyCode;"Space"!==f&&"Enter"!==f&&32!==_&&13!==_||this.togglePopup()}_onMapClick(l){const f=l.originalEvent.target,_=this._element;this._popup&&(f===_||_.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,f=this._pos;if(!l||!f)return!1;const _=l.unproject(f),x=l.getFreeCameraOptions();if(!x.position)return!1;const w=x.position.toLngLat();return w.distanceTo(_)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const f=this._pos;if(!f||f.x<0||f.x>l.transform.width||f.y<0||f.y>l.transform.height)return void this._clearFadeTimer();const _=l.unproject(f);let x;l._showingGlobe()&&p.isLngLatBehindGlobe(l.transform,this._lngLat)?x=0:(x=1-l._queryFogOpacity(_),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${l.x}px,${l.y}px)\n            ${$a[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${f.x}px,${f.y}px)\n        `}_calculateXYTransform(){const l=this._pos,f=this._map,_=this.getPitchAlignment();if(!f||!l||"map"!==_)return"";if(!f._showingGlobe()){const L=f.getPitch();return L?`rotateX(${L}deg)`:""}const x=p.radToDeg(p.globeTiltAtLngLat(f.transform,this._lngLat)),w=l.sub(p.globeCenterToScreenPoint(f.transform)),D=Math.abs(w.x)+Math.abs(w.y);if(0===D)return"";const A=x/D;return`rotateX(${-w.y*A}deg) rotateY(${w.x*A}deg)`}_calculateZTransform(){const l=this._pos,f=this._map;if(!f||!l)return"";let _=0;const x=this.getRotationAlignment();if("map"===x)if(f._showingGlobe()){const w=f.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),D=f.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);_=p.radToDeg(Math.atan2(D.y,D.x))-90}else _=-f.getBearing();else if("horizon"===x){const w=p.smoothstep(4,6,f.getZoom()),D=p.globeCenterToScreenPoint(f.transform);D.y+=w*f.transform.height;const A=l.sub(D),L=p.radToDeg(Math.atan2(A.y,A.x));_=(L>90?L-270:L+90)*(1-w)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(l){p.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=N3(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),!0===l?this._updateFrameId=p.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=p.pointGeometry.convert(l),this._update(),this}_onMove(l){const f=this._map;if(!f)return;const _=this._pointerdownPos,x=this._positionDelta;if(_&&x){if(!this._isDragging){const w=this._clickTolerance||f._clickTolerance;if(l.point.dist(_)<w)return;this._isDragging=!0}this._pos=l.point.sub(x),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new p.Event("dragstart"))),this.fire(new p.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new p.Event("dragend")),this._state="inactive"}_addDragHandler(l){const f=this._map,_=this._pos;f&&_&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(_),this._pointerdownPos=l.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const f=this._map;return f&&(l?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const T4={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},H4=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Kl(m=new p.pointGeometry(0,0),l="bottom"){if("number"==typeof m){const f=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(l){case"top":return new p.pointGeometry(0,m);case"top-left":return new p.pointGeometry(f,f);case"top-right":return new p.pointGeometry(-f,f);case"bottom":return new p.pointGeometry(0,-m);case"bottom-left":return new p.pointGeometry(f,-f);case"bottom-right":return new p.pointGeometry(-f,-f);case"left":return new p.pointGeometry(m,0);case"right":return new p.pointGeometry(-m,0)}return new p.pointGeometry(0,0)}return m instanceof p.pointGeometry||Array.isArray(m)?p.pointGeometry.convert(m):p.pointGeometry.convert(m[l]||[0,0])}class C5{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const f=p.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,f,_){this._start=this.getValue(f),this._end=l,this._startTime=f,this._endTime=f+_}}const Ql={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Si={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ga={showCompass:!0,showZoom:!0,visualizePitch:!1};class Jl{constructor(l,f,_=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new Yl({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,_&&(this.mousePitch=new ur({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),p.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(l,f){this.mouseRotate.mousedown(l,f),this.mousePitch&&this.mousePitch.mousedown(l,f),sa()}move(l,f){const _=this.map,x=this.mouseRotate.mousemoveWindow(l,f),w=x&&x.bearingDelta;if(w&&_.setBearing(_.getBearing()+w),this.mousePitch){const D=this.mousePitch.mousemoveWindow(l,f),A=D&&D.pitchDelta;A&&_.setPitch(_.getPitch()+A)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Fi(),p.window.removeEventListener("mousemove",this.mousemove),p.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(p.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),ht(this.element,l)),p.window.addEventListener("mousemove",this.mousemove),p.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,ht(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){1!==l.targetTouches.length?this.reset():(this._startPos=this._lastPos=U1(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){1!==l.targetTouches.length?this.reset():(this._lastPos=U1(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){0===l.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const rc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},qa={maxWidth:100,unit:"metric"};function C6(m,l,f){const _=O3(l),x=_/l,w={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[f];this._map._requestDomTask(()=>{this._container.style.width=m*x+"px",this._container.innerHTML=`${_}&nbsp;${w}`})}function O3(m){const l=Math.pow(10,`${Math.floor(m)}`.length-1);let f=m/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:f>=1?1:function(_){const x=Math.pow(10,Math.ceil(-Math.log(_)/Math.LN10));return Math.round(_*x)/x}(f),l*f}const B3={version:p.version,supported:Qi,setRTLTextPlugin:p.setRTLTextPlugin,getRTLTextPluginStatus:p.getRTLTextPluginStatus,Map:class extends fn{constructor(m){if(p.LivePerformanceUtils.mark(p.PerformanceMarkers.create),null!=(m=p.extend({},Si,m)).minZoom&&null!=m.maxZoom&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=m.minPitch&&null!=m.maxPitch&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=m.minPitch&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=m.maxPitch&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&p.isSafariWithAntialiasingBug(p.window)&&(m.antialias=!1,p.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new gt(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._useWebGL2=m.useWebGL2,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new v2,this._domRenderTaskQueue=new v2,this._controls=[],this._markers=[],this._popups=[],this._mapId=p.uniqueId(),this._locale=p.extend({},Ql,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new C5(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new p.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,"string"==typeof m.container){if(this._container=p.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof p.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&p.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),p.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==p.window&&(p.window.addEventListener("online",this._onWindowOnline,!1),p.window.addEventListener("resize",this._onWindowResize,!1),p.window.addEventListener("orientationchange",this._onWindowResize,!1),p.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),p.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new b6(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new E3("string"==typeof m.hash&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,p.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new A2({customAttribution:m.customAttribution})),this._logoControl=new E2,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update("style"===l.dataType),this.fire(new p.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new p.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(m,l){if(void 0===l&&(l=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=m.onAdd(this);this._controls.push(m);const _=this._controlPositions[l];return-1!==l.indexOf("bottom")?_.insertBefore(f,_.firstChild):_.appendChild(f),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(m);return l>-1&&this._controls.splice(l,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new p.Event("movestart",m)).fire(new p.Event("move",m)),this.fire(new p.Event("resize",m)),l&&this.fire(new p.Event("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(p.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return"auto"===m?p.window.navigator.language:Array.isArray(m)?0===m.length?void 0:m.map(l=>"auto"===l?p.window.navigator.language:l):m}setLanguage(m){const l=this._parseLanguage(m);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const f of this._controls)f._setLanguage&&f._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(m){return this._lazyInitEmptyStyle(),m?"string"==typeof m&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const m=this.transform,l=m.projection.name;let f;"globe"===l&&m.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),f=!0):"mercator"===l&&m.zoom<p.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,l){return this._updateProjection(m||l||{name:"mercator"})}_updateProjection(m){let l;if(l="globe"===m.name&&this.transform.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(m){return this.transform.locationPoint3D(p.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(p.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,l,f){if("mouseenter"===m||"mouseover"===m){let _=!1;const x=D=>{const A=l.filter(P=>this.getLayer(P)),L=A.length?this.queryRenderedFeatures(D.point,{layers:A}):[];L.length?_||(_=!0,f.call(this,new li(m,this,D.originalEvent,{features:L}))):_=!1},w=()=>{_=!1};return{layers:new Set(l),listener:f,delegates:{mousemove:x,mouseout:w}}}if("mouseleave"===m||"mouseout"===m){let _=!1;const x=D=>{const A=l.filter(L=>this.getLayer(L));(A.length?this.queryRenderedFeatures(D.point,{layers:A}):[]).length?_=!0:_&&(_=!1,f.call(this,new li(m,this,D.originalEvent)))},w=D=>{_&&(_=!1,f.call(this,new li(m,this,D.originalEvent)))};return{layers:new Set(l),listener:f,delegates:{mousemove:x,mouseout:w}}}{const _=x=>{const w=l.filter(A=>this.getLayer(A)),D=w.length?this.queryRenderedFeatures(x.point,{layers:w}):[];D.length&&(x.features=D,f.call(this,x),delete x.features)};return{layers:new Set(l),listener:f,delegates:{[m]:_}}}}on(m,l,f){if(void 0===f)return super.on(m,l);Array.isArray(l)||(l=[l]);const _=this._createDelegatedListener(m,l,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(_);for(const x in _.delegates)this.on(x,_.delegates[x]);return this}once(m,l,f){if(void 0===f)return super.once(m,l);Array.isArray(l)||(l=[l]);const _=this._createDelegatedListener(m,l,f);for(const x in _.delegates)this.once(x,_.delegates[x]);return this}off(m,l,f){if(void 0===f)return super.off(m,l);l=new Set(Array.isArray(l)?l:[l]);const _=(w,D)=>{if(w.size!==D.size)return!1;for(const A of w)if(!D.has(A))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[m]:void 0;return x&&(w=>{for(let D=0;D<w.length;D++){const A=w[D];if(A.listener===f&&_(A.layers,l)){for(const L in A.delegates)this.off(L,A.delegates[L]);return w.splice(D,1),this}}})(x),this}queryRenderedFeatures(m,l){return this.style?(void 0!==l||void 0===m||m instanceof p.pointGeometry||Array.isArray(m)||(l=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(m,l){return this.style.querySourceFeatures(m,l)}setStyle(m,l){return!1!==(l=p.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(m,l))}_getUIString(m){const l=this._locale[m];if(null==l)throw new Error(`Missing UI string '${m}'`);return l}_updateStyle(m,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new oi(this,l||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof m?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new oi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,l){if("string"==typeof m){const f=this._requestManager.normalizeStyleURL(m),_=this._requestManager.transformRequest(f,p.ResourceType.Style);p.getJSON(_,(x,w)=>{x?this.fire(new p.ErrorEvent(x)):w&&this._updateDiff(w,l)})}else"object"==typeof m&&this._updateDiff(m,l)}_updateDiff(m,l){try{this.style.setState(m)&&this._update(!0)}catch(f){p.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(m,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(p.warnOnce("There is no style added to the map."),!1)}addSource(m,l){return this._lazyInitEmptyStyle(),this.style.addSource(m,l),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const l in m){const f=m[l]._tiles;for(const _ in f){const x=f[_];if("loaded"!==x.state&&"errored"!==x.state)return!1}}return!0}addSourceType(m,l,f){this._lazyInitEmptyStyle(),this.style.addSourceType(m,l,f)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,l,{pixelRatio:f=1,sdf:_=!1,stretchX:x,stretchY:w,content:D}={}){if(this._lazyInitEmptyStyle(),l instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&l instanceof p.window.ImageBitmap){const{width:A,height:L,data:P}=p.exported.getImageData(l);this.style.addImage(m,{data:new p.RGBAImage({width:A,height:L},P),pixelRatio:f,stretchX:x,stretchY:w,content:D,sdf:_,version:0})}else if(void 0===l.width||void 0===l.height)this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:A,height:L}=l,P=l;this.style.addImage(m,{data:new p.RGBAImage({width:A,height:L},new Uint8Array(P.data)),pixelRatio:f,stretchX:x,stretchY:w,content:D,sdf:_,version:0,userImage:P}),P.onAdd&&P.onAdd(this,m)}}updateImage(m,l){const f=this.style.getImage(m);if(!f)return void this.fire(new p.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=l instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&l instanceof p.window.ImageBitmap?p.exported.getImageData(l):l,{width:x,height:w}=_;void 0!==x&&void 0!==w?x===f.data.width&&w===f.data.height?(f.data.replace(_.data,!(l instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&l instanceof p.window.ImageBitmap)),this.style.updateImage(m,f)):this.fire(new p.ErrorEvent(new Error(`The width and height of the updated image (${x}, ${w})\n                must be that same as the previous version of the image\n                (${f.data.width}, ${f.data.height})`))):this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new p.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,l){p.getImage(this._requestManager.transformRequest(m,p.ResourceType.Image),(f,_)=>{l(f,_ instanceof p.window.HTMLImageElement?p.exported.getImageData(_):_)})}listImages(){return this.style.listImages()}addLayer(m,l){return this._lazyInitEmptyStyle(),this.style.addLayer(m,l),this._update(!0)}moveLayer(m,l){return this.style.moveLayer(m,l),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,l,f){return this.style.setLayerZoomRange(m,l,f),this._update(!0)}setFilter(m,l,f={}){return this.style.setFilter(m,l,f),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,l,f,_={}){return this.style.setPaintProperty(m,l,f,_),this._update(!0)}getPaintProperty(m,l){return this.style.getPaintProperty(m,l)}setLayoutProperty(m,l,f,_={}){return this.style.setLayoutProperty(m,l,f,_),this._update(!0)}getLayoutProperty(m,l){return this.style.getLayoutProperty(m,l)}setLight(m,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(p.LngLat.convert(m),this.transform):0}setFeatureState(m,l){return this.style.setFeatureState(m,l),this._update()}removeFeatureState(m,l){return this.style.removeFeatureState(m,l),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let f,_,x,w=this._container;for(;w&&(!_||!x);){const D=p.window.getComputedStyle(w).transform;D&&"none"!==D&&(f=D.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&"0"!==f[0]&&"1"!==f[0]&&(_=f[0]),f[3]&&"0"!==f[3]&&"1"!==f[3]&&(x=f[3])),w=w.parentElement}this._containerWidth=_?Math.abs(m/_):m,this._containerHeight=x?Math.abs(l/x):l}_detectMissingCSS(){"rgb(250, 128, 114)"!==p.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&p.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=m1("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=m1("div","mapboxgl-canvas-container",m);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=m1("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=m1("div","mapboxgl-control-container",m),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{_[x]=m1("div",`mapboxgl-ctrl-${x}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,l){const f=p.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(m),this._canvas.height=f*Math.ceil(l),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${l}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const l=this._markers.indexOf(m);-1!==l&&this._markers.splice(l,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const l=this._popups.indexOf(m);-1!==l&&this._popups.splice(l,1)}_setupPainter(){const m=p.extend({},Qi.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",m),f=l||this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);f?(this._useWebGL2&&!l&&p.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),p.storeAuthState(f,!0),this.painter=new Tc(f,this.transform,!!l),this.on("data",_=>{"source"===_.dataType&&this.painter.setTileLoadedFlag(!0)}),p.exported$1.testSupport(f)):this.fire(new p.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new p.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new p.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let l;const f=this.painter.context.extTimerQuery,_=p.exported.now();if(this.listens("gpu-timing-frame")&&(l=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],p.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],p.window.performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const A=this.transform.zoom,L=this.transform.pitch,P=p.exported.now(),R=new p.EvaluationParameters(A,{now:P,fadeDuration:x,pitch:L,transition:this.style.getTransition()});this.style.update(R)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(_),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new p.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new p.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const A=p.exported.now()-_;f.endQueryEXT(f.TIME_ELAPSED_EXT,l),setTimeout(()=>{const L=f.getQueryObjectEXT(l,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(l),this.fire(new p.Event("gpu-timing-frame",{cpuTime:A,gpuTime:L})),p.window.performance.mark("frame-gpu",{startTime:_,detail:{gpuTime:L}})},50)}if(this.listens("gpu-timing-layer")){const A=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(A);this.fire(new p.Event("gpu-timing-layer",{layerTimes:L}))},50)}if(this.listens("gpu-timing-deferred-render")){const A=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const L=this.painter.queryGpuTimeDeferredRender(A);this.fire(new p.Event("gpu-timing-deferred-render",{gpuTime:L}))},50)}const D=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(D||this._repaint)this.triggerRepaint();else{const A=!this.isMoving()&&this.loaded();if(A&&(w=this._updateAverageElevation(_,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),A&&(this.fire(new p.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const L=this._calculateSpeedIndex();this.fire(new p.Event("speedindexcompleted",{speedIndex:L})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||D||(this._fullyLoaded=!0,p.LivePerformanceUtils.mark(p.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&p.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const l of this._markers)m&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!m||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(m,l=!1){const f=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&f(0);if((l||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const _=this.transform.averageElevation;let x=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=m;const D=Math.abs(_-x);if(D>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(x),f(x);this._averageElevation.easeTo(x,m,300)}else if(D>1e-4)return this._averageElevation.jumpTo(x),f(x)}return!!this._averageElevation.isEasing(m)&&f(this._averageElevation.getValue(m))}_authenticate(){p.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===p.AUTH_ERR_MSG||401===m.status)){const l=this.painter.context.gl;p.storeAuthState(l,!1),this._logoControl instanceof E2&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new p.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),p.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const f=this.painter.context.gl,_=f.createFramebuffer();function x(w){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,w,0);const D=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,D),D}return f.bindFramebuffer(f.FRAMEBUFFER,_),this._canvasPixelComparison(x(m),l.canvasCopies.map(x),l.timeStamps)}_canvasPixelComparison(m,l,f){let _=f[1]-f[0];const x=m.length/4;for(let w=0;w<l.length;w++){const D=l[w];let A=0;for(let L=0;L<D.length;L+=4)D[L]===m[L]&&D[L+1]===m[L+1]&&D[L+2]===m[L+2]&&D[L+3]===m[L+3]&&(A+=1);_+=(f[w+2]-f[w+1])*(1-A/x)}return _}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==p.window&&(p.window.removeEventListener("resize",this._onWindowResize,!1),p.window.removeEventListener("orientationchange",this._onWindowResize,!1),p.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),p.window.removeEventListener("online",this._onWindowOnline,!1),p.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),p.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new p.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=p.exported.frame(l=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(l)}))}_preloadTiles(m){const l=this.style?Object.values(this.style._sourceCaches):[];return p.asyncAll(l,(f,_)=>f._preloadTiles(m,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){"hidden"===p.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,l){p.setCacheLimits(m,l)}get version(){return p.version}},NavigationControl:class{constructor(m){this.options=p.extend({},ga,m),this._container=m1("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(p.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),m1("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),m1("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(p.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:l}):f.resetNorth({},{originalEvent:l}))}),this._compassIcon=m1("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const l=m.getZoom(),f=l===m.getMaxZoom(),_=l===m.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jl(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,l){const f=m1("button",m,this._container);return f.type="button",f.addEventListener("click",l),f}_setButtonTitle(m,l){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${l}`);m.setAttribute("aria-label",f),m.firstElementChild&&m.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends p.Evented{constructor(m){super(),this.options=p.extend({geolocation:p.window.navigator.geolocation},rc,m),p.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=X2(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=m1("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const l=(f=!!this.options.geolocation)=>{this._supportsGeolocation=f,m(f)};void 0!==this._supportsGeolocation?m(this._supportsGeolocation):void 0!==p.window.navigator.permissions?p.window.navigator.permissions.query({name:"geolocation"}).then(f=>l("denied"!==f.state)).catch(()=>l()):l()}_isOutOfMapMaxBounds(m){const l=this._map.getMaxBounds(),f=m.coords;return!!l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new p.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(m),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("geolocate",m)),this._finish()}}_updateCamera(m){const l=new p.LngLat(m.coords.longitude,m.coords.latitude),f=m.coords.accuracy,_=this._map.getBearing(),x=p.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),x,{geolocateSource:!0})}_updateMarker(m){if(m){const l=new p.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,l=p.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,f=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(1===m.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===m.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=m1("button","mapboxgl-ctrl-geolocate",this._container),m1("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===m){p.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=m1("div","mapboxgl-user-location"),this._dotElement.appendChild(m1("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(m1("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Vr({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=m1("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||"ACTIVE_LOCK"!==this._watchState||l.originalEvent&&"resize"===l.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new p.Event("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:!0===m.absolute&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return p.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new p.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new p.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new p.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{p.window.addEventListener("ondeviceorientationabsolute"in p.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==p.window.DeviceMotionEvent&&"function"==typeof p.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(l=>{"granted"===l&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),p.window.removeEventListener("deviceorientation",this._onDeviceOrientation),p.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:A2,ScaleControl:class{constructor(m){this.options=p.extend({},qa,m),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=C6.bind(this)),p.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,l=this._map,f=l._containerHeight/2,_=l._containerWidth/2-m/2,x=l.unproject([_,f]),w=l.unproject([_+m,f]),D=x.distanceTo(w);if("imperial"===this.options.unit){const A=3.2808*D;A>5280?this._setScale(m,A/5280,"mile"):this._setScale(m,A,"foot")}else"nautical"===this.options.unit?this._setScale(m,D/1852,"nautical-mile"):D>=1e3?this._setScale(m,D/1e3,"kilometer"):this._setScale(m,D,"meter")}_setScale(m,l,f){const _=O3(l),x=_/l;this._map._requestDomTask(()=>{this._container.style.width=m*x+"px",this._container.innerHTML="nautical-mile"!==f?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:f}).format(_):`${_}&nbsp;nm`})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=m1("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof p.window.HTMLElement?this._container=m.container:p.warnOnce("Full screen control 'container' must be a DOM element.")),p.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in p.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in p.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=m1("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",p.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,p.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!p.window.document.fullscreenEnabled&&!p.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=m1("button","mapboxgl-ctrl-fullscreen",this._controlContainer);m1("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),p.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(p.window.document.fullscreenElement||p.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?p.window.document.exitFullscreen?p.window.document.exitFullscreen():p.window.document.webkitCancelFullScreen&&p.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends p.Evented{constructor(m){super(),this.options=p.extend(Object.create(T4),m),p.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new p.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new p.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=p.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(p.window.document.createTextNode(m))}setHTML(m){const l=p.window.document.createDocumentFragment(),f=p.window.document.createElement("body");let _;for(f.innerHTML=m;_=f.firstChild,_;)l.appendChild(_);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=m1("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(m),this.options.closeButton){const f=this._closeButton=m1("button","mapboxgl-popup-close-button",l);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let l;return this._classList.delete(m)?l=!1:(this._classList.add(m),l=!0),this._updateClassList(),l}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const l=this._map,f=this._container,_=this._pos;if(!l||!f||!_)return"bottom";const x=f.offsetWidth,w=f.offsetHeight,D=_.x<x/2,A=_.x>l.transform.width-x/2;if(_.y+m<w)return D?"top-left":A?"top-right":"top";if(_.y>l.transform.height-w){if(D)return"bottom-left";if(A)return"bottom-right"}return D?"left":A?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),m.className=l.join(" ")}_update(m){const l=this._map,f=this._content;if(!l||!this._lngLat&&!this._trackPointer||!f)return;let _=this._container;if(_||(_=this._container=m1("div","mapboxgl-popup",l.getContainer()),this._tip=m1("div","mapboxgl-popup-tip",_),_.appendChild(f)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=N3(this._lngLat,this._pos,l.transform)),!this._trackPointer||m){const x=this._pos=this._trackPointer&&m?m:l.project(this._lngLat),w=Kl(this.options.offset),D=this._anchor=this._getAnchor(w.y),A=Kl(this.options.offset,D),L=x.add(A).round();l._requestDomTask(()=>{this._container&&D&&(this._container.style.transform=`${$a[D]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&l._showingGlobe()){const x=p.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(H4);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:Vr,Style:oi,LngLat:p.LngLat,LngLatBounds:p.LngLatBounds,Point:p.pointGeometry,MercatorCoordinate:p.MercatorCoordinate,FreeCameraOptions:H,Evented:p.Evented,config:p.config,prewarm:function(){Tt().acquire(Lt)},clearPrewarmedResources:function(){const m=It;m&&(m.isPreloaded()&&1===m.numActive()?(m.release(Lt),It=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return p.config.ACCESS_TOKEN},set accessToken(m){p.config.ACCESS_TOKEN=m},get baseApiUrl(){return p.config.API_URL},set baseApiUrl(m){p.config.API_URL=m},get workerCount(){return Dt.workerCount},set workerCount(m){Dt.workerCount=m},get maxParallelImageRequests(){return p.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){p.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){p.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:p.exported.setNow,restoreNow:p.exported.restoreNow};return B3}),k1}()},226:function(Ul){Ul.exports=function(){"use strict";var b1={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const k1=H=>{const k={};for(const G in H)k[H[G]]="swal2-"+H[G];return k},Ke=k1(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Fs=k1(["success","warning","info","question","error"]),p="SweetAlert2:",Qi=H=>H.charAt(0).toUpperCase()+H.slice(1),Gn=H=>{console.warn(`${p} ${"object"==typeof H?H.join(" "):H}`)},a1=H=>{console.error(`${p} ${H}`)},m1=[],$2=(H,k)=>{(H=>{m1.includes(H)||(m1.push(H),Gn(H))})(`"${H}" is deprecated and will be removed in the next major release. Please use "${k}" instead.`)},yi=H=>"function"==typeof H?H():H,lo=H=>H&&"function"==typeof H.toPromise,sa=H=>lo(H)?H.toPromise():Promise.resolve(H),Fi=H=>H&&Promise.resolve(H)===H,qn=()=>document.body.querySelector(`.${Ke.container}`),q2=H=>{const k=qn();return k?k.querySelector(H):null},ht=H=>q2(`.${H}`),U1=()=>ht(Ke.popup),br=()=>ht(Ke.icon),I1=()=>ht(Ke.title),o2=()=>ht(Ke["html-container"]),Ur=()=>ht(Ke.image),ca=()=>ht(Ke["progress-steps"]),Aa=()=>ht(Ke["validation-message"]),ii=()=>q2(`.${Ke.actions} .${Ke.confirm}`),d1=()=>q2(`.${Ke.actions} .${Ke.cancel}`),ri=()=>q2(`.${Ke.actions} .${Ke.deny}`),Cr=()=>q2(`.${Ke.loader}`),Ni=()=>ht(Ke.actions),l1=()=>ht(Ke.footer),Ji=()=>ht(Ke["timer-progress-bar"]),Ea=()=>ht(Ke.close),er=()=>{const H=Array.from(U1().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((G,ge)=>{const Qe=parseInt(G.getAttribute("tabindex")),Wt=parseInt(ge.getAttribute("tabindex"));return Qe>Wt?1:Qe<Wt?-1:0}),k=Array.from(U1().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(G=>"-1"!==G.getAttribute("tabindex"));return(H=>{const k=[];for(let G=0;G<H.length;G++)-1===k.indexOf(H[G])&&k.push(H[G]);return k})(H.concat(k)).filter(G=>T2(G))},Qt=()=>s2(document.body,Ke.shown)&&!s2(document.body,Ke["toast-shown"])&&!s2(document.body,Ke["no-backdrop"]),tr=()=>U1()&&s2(U1(),Ke.toast),rn={previousBodyPadding:null},R1=(H,k)=>{if(H.textContent="",k){const ge=(new DOMParser).parseFromString(k,"text/html");Array.from(ge.querySelector("head").childNodes).forEach(Qe=>{H.appendChild(Qe)}),Array.from(ge.querySelector("body").childNodes).forEach(Qe=>{Qe instanceof HTMLVideoElement||Qe instanceof HTMLAudioElement?H.appendChild(Qe.cloneNode(!0)):H.appendChild(Qe)})}},s2=(H,k)=>{if(!k)return!1;const G=k.split(/\s+/);for(let ge=0;ge<G.length;ge++)if(!H.classList.contains(G[ge]))return!1;return!0},en=(H,k,G)=>{if(((H,k)=>{Array.from(H.classList).forEach(G=>{!Object.values(Ke).includes(G)&&!Object.values(Fs).includes(G)&&!Object.values(k.showClass).includes(G)&&H.classList.remove(G)})})(H,k),k.customClass&&k.customClass[G]){if("string"!=typeof k.customClass[G]&&!k.customClass[G].forEach)return void Gn(`Invalid type of customClass.${G}! Expected string or iterable object, got "${typeof k.customClass[G]}"`);j1(H,k.customClass[G])}},nr=(H,k)=>{if(!k)return null;switch(k){case"select":case"textarea":case"file":return H.querySelector(`.${Ke.popup} > .${Ke[k]}`);case"checkbox":return H.querySelector(`.${Ke.popup} > .${Ke.checkbox} input`);case"radio":return H.querySelector(`.${Ke.popup} > .${Ke.radio} input:checked`)||H.querySelector(`.${Ke.popup} > .${Ke.radio} input:first-child`);case"range":return H.querySelector(`.${Ke.popup} > .${Ke.range} input`);default:return H.querySelector(`.${Ke.popup} > .${Ke.input}`)}},X1=H=>{if(H.focus(),"file"!==H.type){const k=H.value;H.value="",H.value=k}},Mr=(H,k,G)=>{!H||!k||("string"==typeof k&&(k=k.split(/\s+/).filter(Boolean)),k.forEach(ge=>{Array.isArray(H)?H.forEach(Qe=>{G?Qe.classList.add(ge):Qe.classList.remove(ge)}):G?H.classList.add(ge):H.classList.remove(ge)}))},j1=(H,k)=>{Mr(H,k,!0)},Oi=(H,k)=>{Mr(H,k,!1)},ai=(H,k)=>{const G=Array.from(H.children);for(let ge=0;ge<G.length;ge++){const Qe=G[ge];if(Qe instanceof HTMLElement&&s2(Qe,k))return Qe}},la=(H,k,G)=>{G===`${parseInt(G)}`&&(G=parseInt(G)),G||0===parseInt(G)?H.style[k]="number"==typeof G?`${G}px`:G:H.style.removeProperty(k)},Qn=function(H){H.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},d2=H=>{H.style.display="none"},zr=(H,k,G,ge)=>{const Qe=H.querySelector(k);Qe&&(Qe.style[G]=ge)},Bi=function(H,k){k?Qn(H,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):d2(H)},T2=H=>!(!H||!(H.offsetWidth||H.offsetHeight||H.getClientRects().length)),Ns=H=>H.scrollHeight>H.clientHeight,Gr=H=>{const k=window.getComputedStyle(H),G=parseFloat(k.getPropertyValue("animation-duration")||"0"),ge=parseFloat(k.getPropertyValue("transition-duration")||"0");return G>0||ge>0},Va=function(H){let k=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const G=Ji();T2(G)&&(k&&(G.style.transition="none",G.style.width="100%"),setTimeout(()=>{G.style.transition=`width ${H/1e3}s linear`,G.style.width="0%"},10))},p1={},La=H=>new Promise(k=>{if(!H)return k();const G=window.scrollX,ge=window.scrollY;p1.restoreFocusTimeout=setTimeout(()=>{p1.previousActiveElement instanceof HTMLElement?(p1.previousActiveElement.focus(),p1.previousActiveElement=null):document.body&&document.body.focus(),k()},100),window.scrollTo(G,ge)}),ho=()=>typeof window>"u"||typeof document>"u",Us=`\n <div aria-labelledby="${Ke.title}" aria-describedby="${Ke["html-container"]}" class="${Ke.popup}" tabindex="-1">\n   <button type="button" class="${Ke.close}"></button>\n   <ul class="${Ke["progress-steps"]}"></ul>\n   <div class="${Ke.icon}"></div>\n   <img class="${Ke.image}" />\n   <h2 class="${Ke.title}" id="${Ke.title}"></h2>\n   <div class="${Ke["html-container"]}" id="${Ke["html-container"]}"></div>\n   <input class="${Ke.input}" />\n   <input type="file" class="${Ke.file}" />\n   <div class="${Ke.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${Ke.select}"></select>\n   <div class="${Ke.radio}"></div>\n   <label for="${Ke.checkbox}" class="${Ke.checkbox}">\n     <input type="checkbox" />\n     <span class="${Ke.label}"></span>\n   </label>\n   <textarea class="${Ke.textarea}"></textarea>\n   <div class="${Ke["validation-message"]}" id="${Ke["validation-message"]}"></div>\n   <div class="${Ke.actions}">\n     <div class="${Ke.loader}"></div>\n     <button type="button" class="${Ke.confirm}"></button>\n     <button type="button" class="${Ke.deny}"></button>\n     <button type="button" class="${Ke.cancel}"></button>\n   </div>\n   <div class="${Ke.footer}"></div>\n   <div class="${Ke["timer-progress-bar-container"]}">\n     <div class="${Ke["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),ir=()=>{p1.currentInstance.resetValidationMessage()},Yo=H=>{const k=(()=>{const H=qn();return!!H&&(H.remove(),Oi([document.documentElement,document.body],[Ke["no-backdrop"],Ke["toast-shown"],Ke["has-column"]]),!0)})();if(ho())return void a1("SweetAlert2 requires document to initialize");const G=document.createElement("div");G.className=Ke.container,k&&j1(G,Ke["no-transition"]),R1(G,Us);const ge=(H=>"string"==typeof H?document.querySelector(H):H)(H.target);ge.appendChild(G),(H=>{const k=U1();k.setAttribute("role",H.toast?"alert":"dialog"),k.setAttribute("aria-live",H.toast?"polite":"assertive"),H.toast||k.setAttribute("aria-modal","true")})(H),(H=>{"rtl"===window.getComputedStyle(H).direction&&j1(qn(),Ke.rtl)})(ge),(()=>{const H=U1(),k=ai(H,Ke.input),G=ai(H,Ke.file),ge=H.querySelector(`.${Ke.range} input`),Qe=H.querySelector(`.${Ke.range} output`),Wt=ai(H,Ke.select),Dn=H.querySelector(`.${Ke.checkbox} input`),Y2=ai(H,Ke.textarea);k.oninput=ir,G.onchange=ir,Wt.onchange=ir,Dn.onchange=ir,Y2.oninput=ir,ge.oninput=()=>{ir(),Qe.value=ge.value},ge.onchange=()=>{ir(),Qe.value=ge.value}})()},Ta=(H,k)=>{H instanceof HTMLElement?k.appendChild(H):"object"==typeof H?Gs(H,k):H&&R1(k,H)},Gs=(H,k)=>{H.jquery?po(k,H):R1(k,H.toString())},po=(H,k)=>{if(H.textContent="",0 in k)for(let G=0;G in k;G++)H.appendChild(k[G].cloneNode(!0));else H.appendChild(k.cloneNode(!0))},rr=(()=>{if(ho())return!1;const H=document.createElement("div"),k={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const G in k)if(Object.prototype.hasOwnProperty.call(k,G)&&typeof H.style[G]<"u")return k[G];return!1})(),Ha=(H,k)=>{const G=Ni(),ge=Cr();k.showConfirmButton||k.showDenyButton||k.showCancelButton?Qn(G):d2(G),en(G,k,"actions"),function $s(H,k,G){const ge=ii(),Qe=ri(),Wt=d1();re(ge,"confirm",G),re(Qe,"deny",G),re(Wt,"cancel",G),function ka(H,k,G,ge){ge.buttonsStyling?(j1([H,k,G],Ke.styled),ge.confirmButtonColor&&(H.style.backgroundColor=ge.confirmButtonColor,j1(H,Ke["default-outline"])),ge.denyButtonColor&&(k.style.backgroundColor=ge.denyButtonColor,j1(k,Ke["default-outline"])),ge.cancelButtonColor&&(G.style.backgroundColor=ge.cancelButtonColor,j1(G,Ke["default-outline"]))):Oi([H,k,G],Ke.styled)}(ge,Qe,Wt,G),G.reverseButtons&&(G.toast?(H.insertBefore(Wt,ge),H.insertBefore(Qe,ge)):(H.insertBefore(Wt,k),H.insertBefore(Qe,k),H.insertBefore(ge,k)))}(G,ge,k),R1(ge,k.loaderHtml),en(ge,k,"loader")};function re(H,k,G){Bi(H,G[`show${Qi(k)}Button`],"inline-block"),R1(H,G[`${k}ButtonText`]),H.setAttribute("aria-label",G[`${k}ButtonAriaLabel`]),H.className=Ke[k],en(H,G,`${k}Button`),j1(H,G[`${k}ButtonClass`])}const $=(H,k)=>{const G=qn();G&&(function ie(H,k){"string"==typeof k?H.style.background=k:k||j1([document.documentElement,document.body],Ke["no-backdrop"])}(G,k.backdrop),function ue(H,k){k in Ke?j1(H,Ke[k]):(Gn('The "position" parameter is not valid, defaulting to "center"'),j1(H,Ke.center))}(G,k.position),function be(H,k){if(k&&"string"==typeof k){const G=`grow-${k}`;G in Ke&&j1(H,Ke[G])}}(G,k.grow),en(G,k,"container"))};const Ee=["input","file","range","select","radio","checkbox","textarea"],we=H=>{if(!Tt[H.input])return void a1(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${H.input}"`);const k=Dt(H.input),G=Tt[H.input](k,H);Qn(k),H.inputAutoFocus&&setTimeout(()=>{X1(G)})},tt=(H,k)=>{const G=nr(U1(),H);if(G){(H=>{for(let k=0;k<H.attributes.length;k++){const G=H.attributes[k].name;["type","value","style"].includes(G)||H.removeAttribute(G)}})(G);for(const ge in k)G.setAttribute(ge,k[ge])}},wt=H=>{const k=Dt(H.input);"object"==typeof H.customClass&&j1(k,H.customClass.input)},Je=(H,k)=>{(!H.placeholder||k.inputPlaceholder)&&(H.placeholder=k.inputPlaceholder)},Lt=(H,k,G)=>{if(G.inputLabel){H.id=Ke.input;const ge=document.createElement("label"),Qe=Ke["input-label"];ge.setAttribute("for",H.id),ge.className=Qe,"object"==typeof G.customClass&&j1(ge,G.customClass.inputLabel),ge.innerText=G.inputLabel,k.insertAdjacentElement("beforebegin",ge)}},Dt=H=>ai(U1(),Ke[H]||Ke.input),It=(H,k)=>{["string","number"].includes(typeof k)?H.value=`${k}`:Fi(k)||Gn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof k}"`)},Tt={};Tt.text=Tt.email=Tt.password=Tt.number=Tt.tel=Tt.url=(H,k)=>(It(H,k.inputValue),Lt(H,H,k),Je(H,k),H.type=k.input,H),Tt.file=(H,k)=>(Lt(H,H,k),Je(H,k),H),Tt.range=(H,k)=>{const G=H.querySelector("input"),ge=H.querySelector("output");return It(G,k.inputValue),G.type=k.input,It(ge,k.inputValue),Lt(G,H,k),H},Tt.select=(H,k)=>{if(H.textContent="",k.inputPlaceholder){const G=document.createElement("option");R1(G,k.inputPlaceholder),G.value="",G.disabled=!0,G.selected=!0,H.appendChild(G)}return Lt(H,H,k),H},Tt.radio=H=>(H.textContent="",H),Tt.checkbox=(H,k)=>{const G=nr(U1(),"checkbox");G.value="1",G.id=Ke.checkbox,G.checked=Boolean(k.inputValue);const ge=H.querySelector("span");return R1(ge,k.inputPlaceholder),G},Tt.textarea=(H,k)=>{It(H,k.inputValue),Je(H,k),Lt(H,H,k);return setTimeout(()=>{if("MutationObserver"in window){const ge=parseInt(window.getComputedStyle(U1()).width);new MutationObserver(()=>{const Wt=H.offsetWidth+(ge=>parseInt(window.getComputedStyle(ge).marginLeft)+parseInt(window.getComputedStyle(ge).marginRight))(H);U1().style.width=Wt>ge?`${Wt}px`:null}).observe(H,{attributes:!0,attributeFilter:["style"]})}}),H};const y1=(H,k)=>{const G=o2();en(G,k,"htmlContainer"),k.html?(Ta(k.html,G),Qn(G,"block")):k.text?(G.textContent=k.text,Qn(G,"block")):d2(G),((H,k)=>{const G=U1(),ge=b1.innerParams.get(H),Qe=!ge||k.input!==ge.input;Ee.forEach(Wt=>{const Dn=ai(G,Ke[Wt]);tt(Wt,k.inputAttributes),Dn.className=Ke[Wt],Qe&&d2(Dn)}),k.input&&(Qe&&we(k),wt(k))})(H,k)},tn=(H,k)=>{for(const G in Fs)k.icon!==G&&Oi(H,Fs[G]);j1(H,Fs[k.icon]),da(H,k),yn(),en(H,k,"icon")},yn=()=>{const H=U1(),k=window.getComputedStyle(H).getPropertyValue("background-color"),G=H.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ge=0;ge<G.length;ge++)G[ge].style.backgroundColor=k},Ge=(H,k)=>{let ge,G=H.innerHTML;k.iconHtml?ge=Jn(k.iconHtml):"success"===k.icon?(ge='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',G=G.replace(/ style=".*?"/g,"")):ge="error"===k.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Jn({question:"?",warning:"!",info:"i"}[k.icon]),G.trim()!==ge.trim()&&R1(H,ge)},da=(H,k)=>{if(k.iconColor){H.style.color=k.iconColor,H.style.borderColor=k.iconColor;for(const G of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])zr(H,G,"backgroundColor",k.iconColor);zr(H,".swal2-success-ring","borderColor",k.iconColor)}},Jn=H=>`<div class="${Ke["icon-content"]}">${H}</div>`,Wr=(H,k)=>{H.className=`${Ke.popup} ${T2(H)?k.showClass.popup:""}`,k.toast?(j1([document.documentElement,document.body],Ke["toast-shown"]),j1(H,Ke.toast)):j1(H,Ke.modal),en(H,k,"popup"),"string"==typeof k.customClass&&j1(H,k.customClass),k.icon&&j1(H,Ke[`icon-${k.icon}`])},e2=H=>{const k=document.createElement("li");return j1(k,Ke["progress-step"]),R1(k,H),k},W2=H=>{const k=document.createElement("li");return j1(k,Ke["progress-step-line"]),H.progressStepsDistance&&la(k,"width",H.progressStepsDistance),k},S1=(H,k)=>{((H,k)=>{const G=qn(),ge=U1();k.toast?(la(G,"width",k.width),ge.style.width="100%",ge.insertBefore(Cr(),br())):la(ge,"width",k.width),la(ge,"padding",k.padding),k.color&&(ge.style.color=k.color),k.background&&(ge.style.background=k.background),d2(Aa()),Wr(ge,k)})(0,k),$(0,k),((H,k)=>{const G=ca();k.progressSteps&&0!==k.progressSteps.length?(Qn(G),G.textContent="",k.currentProgressStep>=k.progressSteps.length&&Gn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),k.progressSteps.forEach((ge,Qe)=>{const Wt=e2(ge);if(G.appendChild(Wt),Qe===k.currentProgressStep&&j1(Wt,Ke["active-progress-step"]),Qe!==k.progressSteps.length-1){const Dn=W2(k);G.appendChild(Dn)}})):d2(G)})(0,k),((H,k)=>{const G=b1.innerParams.get(H),ge=br();G&&k.icon===G.icon?(Ge(ge,k),tn(ge,k)):k.icon||k.iconHtml?k.icon&&-1===Object.keys(Fs).indexOf(k.icon)?(a1(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${k.icon}"`),d2(ge)):(Qn(ge),Ge(ge,k),tn(ge,k),j1(ge,k.showClass.icon)):d2(ge)})(H,k),((H,k)=>{const G=Ur();k.imageUrl?(Qn(G,""),G.setAttribute("src",k.imageUrl),G.setAttribute("alt",k.imageAlt),la(G,"width",k.imageWidth),la(G,"height",k.imageHeight),G.className=Ke.image,en(G,k,"image")):d2(G)})(0,k),((H,k)=>{const G=I1();Bi(G,k.title||k.titleText,"block"),k.title&&Ta(k.title,G),k.titleText&&(G.innerText=k.titleText),en(G,k,"title")})(0,k),((H,k)=>{const G=Ea();R1(G,k.closeButtonHtml),en(G,k,"closeButton"),Bi(G,k.showCloseButton),G.setAttribute("aria-label",k.closeButtonAriaLabel)})(0,k),y1(H,k),Ha(0,k),((H,k)=>{const G=l1();Bi(G,k.footer),k.footer&&Ta(k.footer,G),en(G,k,"footer")})(0,k),"function"==typeof k.didRender&&k.didRender(U1())};function Ht(){const H=b1.innerParams.get(this);if(!H)return;const k=b1.domCache.get(this);d2(k.loader),tr()?H.icon&&Qn(br()):ar(k),Oi([k.popup,k.actions],Ke.loading),k.popup.removeAttribute("aria-busy"),k.popup.removeAttribute("data-loading"),k.confirmButton.disabled=!1,k.denyButton.disabled=!1,k.cancelButton.disabled=!1}const ar=H=>{const k=H.popup.getElementsByClassName(H.loader.getAttribute("data-button-to-replace"));k.length?Qn(k[0],"inline-block"):!T2(ii())&&!T2(ri())&&!T2(d1())&&d2(H.actions)};const Ko=()=>ii()&&ii().click(),t2=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),gn=H=>{H.keydownTarget&&H.keydownHandlerAdded&&(H.keydownTarget.removeEventListener("keydown",H.keydownHandler,{capture:H.keydownListenerCapture}),H.keydownHandlerAdded=!1)},p2=(H,k)=>{const G=er();if(G.length)return(H+=k)===G.length?H=0:-1===H&&(H=G.length-1),void G[H].focus();U1().focus()},rt=["ArrowRight","ArrowDown"],Zr=["ArrowLeft","ArrowUp"],x1=(H,k,G)=>{const ge=b1.innerParams.get(H);ge&&(k.isComposing||229===k.keyCode||(ge.stopKeydownPropagation&&k.stopPropagation(),"Enter"===k.key?un(H,k,ge):"Tab"===k.key?qs(k):[...rt,...Zr].includes(k.key)?Qo(k.key):"Escape"===k.key&&Jo(k,ge,G)))},un=(H,k,G)=>{if(yi(G.allowEnterKey)&&k.target&&H.getInput()&&k.target instanceof HTMLElement&&k.target.outerHTML===H.getInput().outerHTML){if(["textarea","file"].includes(G.input))return;Ko(),k.preventDefault()}},qs=H=>{const k=H.target,G=er();let ge=-1;for(let Qe=0;Qe<G.length;Qe++)if(k===G[Qe]){ge=Qe;break}p2(ge,H.shiftKey?-1:1),H.stopPropagation(),H.preventDefault()},Qo=H=>{const k=ii(),G=ri(),ge=d1();if(document.activeElement instanceof HTMLElement&&![k,G,ge].includes(document.activeElement))return;const Wt=rt.includes(H)?"nextElementSibling":"previousElementSibling";let Dn=document.activeElement;for(let Y2=0;Y2<Ni().children.length;Y2++){if(Dn=Dn[Wt],!Dn)return;if(Dn instanceof HTMLButtonElement&&T2(Dn))break}Dn instanceof HTMLButtonElement&&Dn.focus()},Jo=(H,k,G)=>{yi(k.allowEscapeKey)&&(H.preventDefault(),G(t2.esc))};var Yr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const n2=()=>{Array.from(document.body.children).forEach(k=>{k.hasAttribute("data-previous-aria-hidden")?(k.setAttribute("aria-hidden",k.getAttribute("data-previous-aria-hidden")),k.removeAttribute("data-previous-aria-hidden")):k.removeAttribute("aria-hidden")})},zc=()=>{const H=navigator.userAgent,k=!!H.match(/iPad/i)||!!H.match(/iPhone/i),G=!!H.match(/WebKit/i);k&&G&&!H.match(/CriOS/i)&&U1().scrollHeight>window.innerHeight-44&&(qn().style.paddingBottom="44px")},c2=()=>{const H=qn();let k;H.ontouchstart=G=>{k=Ci(G)},H.ontouchmove=G=>{k&&(G.preventDefault(),G.stopPropagation())}},Ci=H=>{const k=H.target,G=qn();return!Gl(H)&&!y3(H)&&(k===G||!Ns(G)&&k instanceof HTMLElement&&"INPUT"!==k.tagName&&"TEXTAREA"!==k.tagName&&!(Ns(o2())&&o2().contains(k)))},Gl=H=>H.touches&&H.touches.length&&"stylus"===H.touches[0].touchType,y3=H=>H.touches&&H.touches.length>1,m2=()=>{if(s2(document.body,Ke.iosfix)){const H=parseInt(document.body.style.top,10);Oi(document.body,Ke.iosfix),document.body.style.top="",document.body.scrollTop=-1*H}},Ws=()=>{null===rn.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(rn.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${rn.previousBodyPadding+(()=>{const H=document.createElement("div");H.className=Ke["scrollbar-measure"],document.body.appendChild(H);const k=H.getBoundingClientRect().width-H.clientWidth;return document.body.removeChild(H),k})()}px`)},b4=()=>{null!==rn.previousBodyPadding&&(document.body.style.paddingRight=`${rn.previousBodyPadding}px`,rn.previousBodyPadding=null)};function es(H,k,G,ge){tr()?ts(H,ge):(La(G).then(()=>ts(H,ge)),gn(p1)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(k.setAttribute("style","display:none !important"),k.removeAttribute("class"),k.innerHTML=""):k.remove(),Qt()&&(b4(),m2(),n2()),function Z2(){Oi([document.documentElement,document.body],[Ke.shown,Ke["height-auto"],Ke["no-backdrop"],Ke["toast-shown"]])}()}function D2(H){H=st(H);const k=Yr.swalPromiseResolve.get(this),G=Ra(this);this.isAwaitingPromise()?H.isDismissed||(mo(this),k(H)):G&&k(H)}const Ra=H=>{const k=U1();if(!k)return!1;const G=b1.innerParams.get(H);if(!G||s2(k,G.hideClass.popup))return!1;Oi(k,G.showClass.popup),j1(k,G.hideClass.popup);const ge=qn();return Oi(ge,G.showClass.backdrop),j1(ge,G.hideClass.backdrop),C4(H,k,G),!0};const mo=H=>{H.isAwaitingPromise()&&(b1.awaitingPromise.delete(H),b1.innerParams.get(H)||H._destroy())},st=H=>typeof H>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},H),C4=(H,k,G)=>{const ge=qn(),Qe=rr&&Gr(k);"function"==typeof G.willClose&&G.willClose(k),Qe?u1(H,k,ge,G.returnFocus,G.didClose):es(H,ge,G.returnFocus,G.didClose)},u1=(H,k,G,ge,Qe)=>{p1.swalCloseEventFinishedCallback=es.bind(null,H,G,ge,Qe),k.addEventListener(rr,function(Wt){Wt.target===k&&(p1.swalCloseEventFinishedCallback(),delete p1.swalCloseEventFinishedCallback)})},ts=(H,k)=>{setTimeout(()=>{"function"==typeof k&&k.bind(H.params)(),H._destroy()})};function ns(H,k,G){const ge=b1.domCache.get(H);k.forEach(Qe=>{ge[Qe].disabled=G})}function Pa(H,k){if(H)if("radio"===H.type){const ge=H.parentNode.parentNode.querySelectorAll("input");for(let Qe=0;Qe<ge.length;Qe++)ge[Qe].disabled=k}else H.disabled=k}const _o={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},t1=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Ac={},b3=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],si=H=>Object.prototype.hasOwnProperty.call(_o,H),Na=H=>-1!==t1.indexOf(H),C3=H=>Ac[H],Hn=H=>{si(H)||Gn(`Unknown parameter "${H}"`)},w3=H=>{b3.includes(H)&&Gn(`The parameter "${H}" is incompatible with toasts`)},w4=H=>{C3(H)&&$2(H,C3(H))};const vo=H=>{const k={};return Object.keys(H).forEach(G=>{Na(G)?k[G]=H[G]:Gn(`Invalid parameter to update: ${G}`)}),k};const Zs=H=>{as(H),delete H.params,delete p1.keydownHandler,delete p1.keydownTarget,delete p1.currentInstance},as=H=>{H.isAwaitingPromise()?(os(b1,H),b1.awaitingPromise.set(H,!0)):(os(Yr,H),os(b1,H))},os=(H,k)=>{for(const G in H)H[G].delete(k)};var ss=Object.freeze({__proto__:null,_destroy:function rs(){const H=b1.domCache.get(this),k=b1.innerParams.get(this);k?(H.popup&&p1.swalCloseEventFinishedCallback&&(p1.swalCloseEventFinishedCallback(),delete p1.swalCloseEventFinishedCallback),"function"==typeof k.didDestroy&&k.didDestroy(),Zs(this)):as(this)},close:D2,closeModal:D2,closePopup:D2,closeToast:D2,disableButtons:function Dc(){ns(this,["confirmButton","denyButton","cancelButton"],!0)},disableInput:function oi(){Pa(this.getInput(),!0)},disableLoading:Ht,enableButtons:function Fa(){ns(this,["confirmButton","denyButton","cancelButton"],!1)},enableInput:function fa(){Pa(this.getInput(),!1)},getInput:function mn(H){const k=b1.innerParams.get(H||this),G=b1.domCache.get(H||this);return G?nr(G.popup,k.input):null},handleAwaitingPromise:mo,hideLoading:Ht,isAwaitingPromise:function an(){return!!b1.awaitingPromise.get(this)},rejectPromise:function Sc(H){const k=Yr.swalPromiseReject.get(this);mo(this),k&&k(H)},resetValidationMessage:function x3(){const H=b1.domCache.get(this);H.validationMessage&&d2(H.validationMessage);const k=this.getInput();k&&(k.removeAttribute("aria-invalid"),k.removeAttribute("aria-describedby"),Oi(k,Ke.inputerror))},showValidationMessage:function go(H){const k=b1.domCache.get(this),G=b1.innerParams.get(this);R1(k.validationMessage,H),k.validationMessage.className=Ke["validation-message"],G.customClass&&G.customClass.validationMessage&&j1(k.validationMessage,G.customClass.validationMessage),Qn(k.validationMessage);const ge=this.getInput();ge&&(ge.setAttribute("aria-invalid",!0),ge.setAttribute("aria-describedby",Ke["validation-message"]),X1(ge),j1(ge,Ke.inputerror))},update:function Z1(H){const k=U1(),G=b1.innerParams.get(this);if(!k||s2(k,G.hideClass.popup))return void Gn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const ge=vo(H),Qe=Object.assign({},G,ge);S1(this,Qe),b1.innerParams.set(this,Qe),Object.defineProperties(this,{params:{value:Object.assign({},this.params,H),writable:!1,enumerable:!0}})}});const or=H=>{let k=U1();k||new ma,k=U1();const G=Cr();tr()?d2(br()):ha(k,H),Qn(G),k.setAttribute("data-loading","true"),k.setAttribute("aria-busy","true"),k.focus()},ha=(H,k)=>{const G=Ni(),ge=Cr();!k&&T2(ii())&&(k=ii()),Qn(G),k&&(d2(k),ge.setAttribute("data-button-to-replace",k.className)),ge.parentNode.insertBefore(ge,k),j1([H,G],Ke.loading)},Oa=H=>H.checked?1:0,o1=H=>H.checked?H.value:null,cs=H=>H.files.length?null!==H.getAttribute("multiple")?H.files:H.files[0]:null,G1=(H,k)=>{const G=U1(),ge=Qe=>{M4[k.input](G,Ec(Qe),k)};lo(k.inputOptions)||Fi(k.inputOptions)?(or(ii()),sa(k.inputOptions).then(Qe=>{H.hideLoading(),ge(Qe)})):"object"==typeof k.inputOptions?ge(k.inputOptions):a1("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof k.inputOptions)},pa=(H,k)=>{const G=H.getInput();d2(G),sa(k.inputValue).then(ge=>{G.value="number"===k.input?`${parseFloat(ge)||0}`:`${ge}`,Qn(G),G.focus(),H.hideLoading()}).catch(ge=>{a1(`Error in inputValue promise: ${ge}`),G.value="",Qn(G),G.focus(),H.hideLoading()})},M4={select:(H,k,G)=>{const ge=ai(H,Ke.select),Qe=(Wt,Dn,Y2)=>{const gt=document.createElement("option");gt.value=Y2,R1(gt,Dn),gt.selected=Vc(Y2,G.inputValue),Wt.appendChild(gt)};k.forEach(Wt=>{const Dn=Wt[0],Y2=Wt[1];if(Array.isArray(Y2)){const gt=document.createElement("optgroup");gt.label=Dn,gt.disabled=!1,ge.appendChild(gt),Y2.forEach(X2=>Qe(gt,X2[1],X2[0]))}else Qe(ge,Y2,Dn)}),ge.focus()},radio:(H,k,G)=>{const ge=ai(H,Ke.radio);k.forEach(Wt=>{const Dn=Wt[0],Y2=Wt[1],gt=document.createElement("input"),X2=document.createElement("label");gt.type="radio",gt.name=Ke.radio,gt.value=Dn,Vc(Dn,G.inputValue)&&(gt.checked=!0);const E3=document.createElement("span");R1(E3,Y2),E3.className=Ke.label,X2.appendChild(gt),X2.appendChild(E3),ge.appendChild(X2)});const Qe=ge.querySelectorAll("input");Qe.length&&Qe[0].focus()}},Ec=H=>{const k=[];return typeof Map<"u"&&H instanceof Map?H.forEach((G,ge)=>{let Qe=G;"object"==typeof Qe&&(Qe=Ec(Qe)),k.push([ge,Qe])}):Object.keys(H).forEach(G=>{let ge=H[G];"object"==typeof ge&&(ge=Ec(ge)),k.push([G,ge])}),k},Vc=(H,k)=>k&&k.toString()===H.toString(),Xr=(H,k)=>{const G=b1.innerParams.get(H);if(!G.input)return void a1(`The "input" parameter is needed to be set when using returnInputValueOn${Qi(k)}`);const ge=((H,k)=>{const G=H.getInput();if(!G)return null;switch(k.input){case"checkbox":return Oa(G);case"radio":return o1(G);case"file":return cs(G);default:return k.inputAutoTrim?G.value.trim():G.value}})(H,G);G.inputValidator?sn(H,ge,k):H.getInput().checkValidity()?"deny"===k?Ba(H,ge):Ys(H,ge):(H.enableButtons(),H.showValidationMessage(G.validationMessage))},sn=(H,k,G)=>{const ge=b1.innerParams.get(H);H.disableInput(),Promise.resolve().then(()=>sa(ge.inputValidator(k,ge.validationMessage))).then(Wt=>{H.enableButtons(),H.enableInput(),Wt?H.showValidationMessage(Wt):"deny"===G?Ba(H,k):Ys(H,k)})},Ba=(H,k)=>{const G=b1.innerParams.get(H||void 0);G.showLoaderOnDeny&&or(ri()),G.preDeny?(b1.awaitingPromise.set(H||void 0,!0),Promise.resolve().then(()=>sa(G.preDeny(k,G.validationMessage))).then(Qe=>{!1===Qe?(H.hideLoading(),mo(H)):H.close({isDenied:!0,value:typeof Qe>"u"?k:Qe})}).catch(Qe=>xo(H||void 0,Qe))):H.close({isDenied:!0,value:k})},yo=(H,k)=>{H.close({isConfirmed:!0,value:k})},xo=(H,k)=>{H.rejectPromise(k)},Ys=(H,k)=>{const G=b1.innerParams.get(H||void 0);G.showLoaderOnConfirm&&or(),G.preConfirm?(H.resetValidationMessage(),b1.awaitingPromise.set(H||void 0,!0),Promise.resolve().then(()=>sa(G.preConfirm(k,G.validationMessage))).then(Qe=>{T2(Aa())||!1===Qe?(H.hideLoading(),mo(H)):yo(H,typeof Qe>"u"?k:Qe)}).catch(Qe=>xo(H||void 0,Qe))):yo(H,k)},Xs=(H,k,G)=>{k.popup.onclick=()=>{const ge=b1.innerParams.get(H);ge&&(Ks(ge)||ge.timer||ge.input)||G(t2.close)}},Ks=H=>H.showConfirmButton||H.showDenyButton||H.showCancelButton||H.showCloseButton;let Ft=!1;const z4=H=>{H.popup.onmousedown=()=>{H.container.onmouseup=function(k){H.container.onmouseup=void 0,k.target===H.container&&(Ft=!0)}}},Qs=H=>{H.container.onmousedown=()=>{H.popup.onmouseup=function(k){H.popup.onmouseup=void 0,(k.target===H.popup||H.popup.contains(k.target))&&(Ft=!0)}}},z3=(H,k,G)=>{k.container.onclick=ge=>{const Qe=b1.innerParams.get(H);Ft?Ft=!1:ge.target===k.container&&yi(Qe.allowOutsideClick)&&G(t2.backdrop)}},Lc=H=>H instanceof Element||(H=>"object"==typeof H&&H.jquery)(H);const k2=()=>{if(p1.timeout)return(()=>{const H=Ji(),k=parseInt(window.getComputedStyle(H).width);H.style.removeProperty("transition"),H.style.width="100%";const G=parseInt(window.getComputedStyle(H).width);H.style.width=k/G*100+"%"})(),p1.timeout.stop()},I2=()=>{if(p1.timeout){const H=p1.timeout.start();return Va(H),H}};let Js=!1;const ls={};const Rt=H=>{for(let k=H.target;k&&k!==document;k=k.parentNode)for(const G in ls){const ge=k.getAttribute(G);if(ge)return void ls[G].fire({template:ge})}};var g1=Object.freeze({__proto__:null,argsToParams:H=>{const k={};return"object"!=typeof H[0]||Lc(H[0])?["title","html","icon"].forEach((G,ge)=>{const Qe=H[ge];"string"==typeof Qe||Lc(Qe)?k[G]=Qe:void 0!==Qe&&a1(`Unexpected type of ${G}! Expected "string" or "Element", got ${typeof Qe}`)}):Object.assign(k,H[0]),k},bindClickHandler:function Ar(){ls[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Js||(document.body.addEventListener("click",Rt),Js=!0)},clickCancel:()=>d1()&&d1().click(),clickConfirm:Ko,clickDeny:()=>ri()&&ri().click(),enableLoading:or,fire:function je(){for(var k=arguments.length,G=new Array(k),ge=0;ge<k;ge++)G[ge]=arguments[ge];return new this(...G)},getActions:Ni,getCancelButton:d1,getCloseButton:Ea,getConfirmButton:ii,getContainer:qn,getDenyButton:ri,getFocusableElements:er,getFooter:l1,getHtmlContainer:o2,getIcon:br,getIconContent:()=>ht(Ke["icon-content"]),getImage:Ur,getInputLabel:()=>ht(Ke["input-label"]),getLoader:Cr,getPopup:U1,getProgressSteps:ca,getTimerLeft:()=>p1.timeout&&p1.timeout.getTimerLeft(),getTimerProgressBar:Ji,getTitle:I1,getValidationMessage:Aa,increaseTimer:H=>{if(p1.timeout){const k=p1.timeout.increase(H);return Va(k,!0),k}},isDeprecatedParameter:C3,isLoading:()=>U1().hasAttribute("data-loading"),isTimerRunning:()=>p1.timeout&&p1.timeout.isRunning(),isUpdatableParameter:Na,isValidParameter:si,isVisible:()=>T2(U1()),mixin:function H2(H){return class k extends(this){_main(ge,Qe){return super._main(ge,Object.assign({},H,Qe))}}},resumeTimer:I2,showLoading:or,stopTimer:k2,toggleTimer:()=>{const H=p1.timeout;return H&&(H.running?k2():I2())}});class Wn{constructor(k,G){this.callback=k,this.remaining=G,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(k){const G=this.running;return G&&this.stop(),this.remaining+=k,G&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const wi=["swal-title","swal-html","swal-footer"],l2=H=>{const k={};return Array.from(H.querySelectorAll("swal-param")).forEach(ge=>{Qr(ge,["name","value"]);const Qe=ge.getAttribute("name"),Wt=ge.getAttribute("value");k[Qe]="boolean"==typeof _o[Qe]?"false"!==Wt:"object"==typeof _o[Qe]?JSON.parse(Wt):Wt}),k},us=H=>{const k={};return Array.from(H.querySelectorAll("swal-function-param")).forEach(ge=>{const Qe=ge.getAttribute("name"),Wt=ge.getAttribute("value");k[Qe]=new Function(`return ${Wt}`)()}),k},r2=H=>{const k={};return Array.from(H.querySelectorAll("swal-button")).forEach(ge=>{Qr(ge,["type","color","aria-label"]);const Qe=ge.getAttribute("type");k[`${Qe}ButtonText`]=ge.innerHTML,k[`show${Qi(Qe)}Button`]=!0,ge.hasAttribute("color")&&(k[`${Qe}ButtonColor`]=ge.getAttribute("color")),ge.hasAttribute("aria-label")&&(k[`${Qe}ButtonAriaLabel`]=ge.getAttribute("aria-label"))}),k},ec=H=>{const k={},G=H.querySelector("swal-image");return G&&(Qr(G,["src","width","height","alt"]),G.hasAttribute("src")&&(k.imageUrl=G.getAttribute("src")),G.hasAttribute("width")&&(k.imageWidth=G.getAttribute("width")),G.hasAttribute("height")&&(k.imageHeight=G.getAttribute("height")),G.hasAttribute("alt")&&(k.imageAlt=G.getAttribute("alt"))),k},tc=H=>{const k={},G=H.querySelector("swal-icon");return G&&(Qr(G,["type","color"]),G.hasAttribute("type")&&(k.icon=G.getAttribute("type")),G.hasAttribute("color")&&(k.iconColor=G.getAttribute("color")),k.iconHtml=G.innerHTML),k},P1=H=>{const k={},G=H.querySelector("swal-input");G&&(Qr(G,["type","label","placeholder","value"]),k.input=G.getAttribute("type")||"text",G.hasAttribute("label")&&(k.inputLabel=G.getAttribute("label")),G.hasAttribute("placeholder")&&(k.inputPlaceholder=G.getAttribute("placeholder")),G.hasAttribute("value")&&(k.inputValue=G.getAttribute("value")));const ge=Array.from(H.querySelectorAll("swal-input-option"));return ge.length&&(k.inputOptions={},ge.forEach(Qe=>{Qr(Qe,["value"]);const Wt=Qe.getAttribute("value");k.inputOptions[Wt]=Qe.innerHTML})),k},A3=(H,k)=>{const G={};for(const ge in k){const Qe=k[ge],Wt=H.querySelector(Qe);Wt&&(Qr(Wt,[]),G[Qe.replace(/^swal-/,"")]=Wt.innerHTML.trim())}return G},Co=H=>{const k=wi.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(H.children).forEach(G=>{const ge=G.tagName.toLowerCase();k.includes(ge)||Gn(`Unrecognized element <${ge}>`)})},Qr=(H,k)=>{Array.from(H.attributes).forEach(G=>{-1===k.indexOf(G.name)&&Gn([`Unrecognized attribute "${G.name}" on <${H.tagName.toLowerCase()}>.`,k.length?`Allowed attributes are: ${k.join(", ")}`:"To set the value, use HTML within the element."])})},P2=H=>{const k=qn(),G=U1();"function"==typeof H.willOpen&&H.willOpen(G);const Qe=window.getComputedStyle(document.body).overflowY;Jr(k,G,H),setTimeout(()=>{Ga(k,G)},10),Qt()&&(F2(k,H.scrollbarPadding,Qe),Array.from(document.body.children).forEach(k=>{k===qn()||k.contains(qn())||(k.hasAttribute("aria-hidden")&&k.setAttribute("data-previous-aria-hidden",k.getAttribute("aria-hidden")),k.setAttribute("aria-hidden","true"))})),!tr()&&!p1.previousActiveElement&&(p1.previousActiveElement=document.activeElement),"function"==typeof H.didOpen&&setTimeout(()=>H.didOpen(G)),Oi(k,Ke["no-transition"])},wo=H=>{const k=U1();if(H.target!==k)return;const G=qn();k.removeEventListener(rr,wo),G.style.overflowY="auto"},Ga=(H,k)=>{rr&&Gr(k)?(H.style.overflowY="hidden",k.addEventListener(rr,wo)):H.style.overflowY="auto"},F2=(H,k,G)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!s2(document.body,Ke.iosfix)){const k=document.body.scrollTop;document.body.style.top=-1*k+"px",j1(document.body,Ke.iosfix),c2(),zc()}})(),k&&"hidden"!==G&&Ws(),setTimeout(()=>{H.scrollTop=0})},Jr=(H,k,G)=>{j1(H,G.showClass.backdrop),k.style.setProperty("opacity","0","important"),Qn(k,"grid"),setTimeout(()=>{j1(k,G.showClass.popup),k.style.removeProperty("opacity")},10),j1([document.documentElement,document.body],Ke.shown),G.heightAuto&&G.backdrop&&!G.toast&&j1([document.documentElement,document.body],Ke["height-auto"])};var Mo={email:(H,k)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(H)?Promise.resolve():Promise.resolve(k||"Invalid email address"),url:(H,k)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(H)?Promise.resolve():Promise.resolve(k||"Invalid URL")};function Er(H){(function Cn(H){H.inputValidator||Object.keys(Mo).forEach(k=>{H.input===k&&(H.inputValidator=Mo[k])})})(H),H.showLoaderOnConfirm&&!H.preConfirm&&Gn("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function nc(H){(!H.target||"string"==typeof H.target&&!document.querySelector(H.target)||"string"!=typeof H.target&&!H.target.appendChild)&&(Gn('Target parameter is not valid, defaulting to "body"'),H.target="body")}(H),"string"==typeof H.title&&(H.title=H.title.split("\n").join("<br />")),Yo(H)}let Mi;class _1{constructor(){if(typeof window>"u")return;Mi=this;for(var k=arguments.length,G=new Array(k),ge=0;ge<k;ge++)G[ge]=arguments[ge];const Qe=Object.freeze(this.constructor.argsToParams(G));Object.defineProperties(this,{params:{value:Qe,writable:!1,enumerable:!0,configurable:!0}});const Wt=Mi._main(Mi.params);b1.promise.set(this,Wt)}_main(k){let G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(H=>{!1===H.backdrop&&H.allowOutsideClick&&Gn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const k in H)Hn(k),H.toast&&w3(k),w4(k)})(Object.assign({},G,k)),p1.currentInstance&&(p1.currentInstance._destroy(),Qt()&&n2()),p1.currentInstance=Mi;const ge=ds(k,G);Er(ge),Object.freeze(ge),p1.timeout&&(p1.timeout.stop(),delete p1.timeout),clearTimeout(p1.restoreFocusTimeout);const Qe=N2(Mi);return S1(Mi,ge),b1.innerParams.set(Mi,ge),zo(Mi,Qe,ge)}then(k){return b1.promise.get(this).then(k)}finally(k){return b1.promise.get(this).finally(k)}}const zo=(H,k,G)=>new Promise((ge,Qe)=>{const Wt=Dn=>{H.close({isDismissed:!0,dismiss:Dn})};Yr.swalPromiseResolve.set(H,ge),Yr.swalPromiseReject.set(H,Qe),k.confirmButton.onclick=()=>{(H=>{const k=b1.innerParams.get(H);H.disableButtons(),k.input?Xr(H,"confirm"):Ys(H,!0)})(H)},k.denyButton.onclick=()=>{(H=>{const k=b1.innerParams.get(H);H.disableButtons(),k.returnInputValueOnDeny?Xr(H,"deny"):Ba(H,!1)})(H)},k.cancelButton.onclick=()=>{((H,k)=>{H.disableButtons(),k(t2.cancel)})(H,Wt)},k.closeButton.onclick=()=>{Wt(t2.close)},((H,k,G)=>{b1.innerParams.get(H).toast?Xs(H,k,G):(z4(k),Qs(k),z3(H,k,G))})(H,k,Wt),((H,k,G,ge)=>{gn(k),G.toast||(k.keydownHandler=Qe=>x1(H,Qe,ge),k.keydownTarget=G.keydownListenerCapture?window:U1(),k.keydownListenerCapture=G.keydownListenerCapture,k.keydownTarget.addEventListener("keydown",k.keydownHandler,{capture:k.keydownListenerCapture}),k.keydownHandlerAdded=!0)})(H,p1,G,Wt),((H,k)=>{"select"===k.input||"radio"===k.input?G1(H,k):["text","email","number","tel","textarea"].includes(k.input)&&(lo(k.inputValue)||Fi(k.inputValue))&&(or(ii()),pa(H,k))})(H,G),P2(G),Tc(p1,G,Wt),ci(k,G),setTimeout(()=>{k.container.scrollTop=0})}),ds=(H,k)=>{const G=(H=>{const k="string"==typeof H.template?document.querySelector(H.template):H.template;if(!k)return{};const G=k.content;return Co(G),Object.assign(l2(G),us(G),r2(G),ec(G),tc(G),P1(G),A3(G,wi))})(H),ge=Object.assign({},_o,k,G,H);return ge.showClass=Object.assign({},_o.showClass,ge.showClass),ge.hideClass=Object.assign({},_o.hideClass,ge.hideClass),ge},N2=H=>{const k={popup:U1(),container:qn(),actions:Ni(),confirmButton:ii(),denyButton:ri(),cancelButton:d1(),loader:Cr(),closeButton:Ea(),validationMessage:Aa(),progressSteps:ca()};return b1.domCache.set(H,k),k},Tc=(H,k,G)=>{const ge=Ji();d2(ge),k.timer&&(H.timeout=new Wn(()=>{G("timer"),delete H.timeout},k.timer),k.timerProgressBar&&(Qn(ge),en(ge,k,"timerProgressBar"),setTimeout(()=>{H.timeout&&H.timeout.running&&Va(k.timer)})))},ci=(H,k)=>{if(!k.toast){if(!yi(k.allowEnterKey))return void fs();lr(H,k)||p2(-1,1)}},lr=(H,k)=>k.focusDeny&&T2(H.denyButton)?(H.denyButton.focus(),!0):k.focusCancel&&T2(H.cancelButton)?(H.cancelButton.focus(),!0):!(!k.focusConfirm||!T2(H.confirmButton)||(H.confirmButton.focus(),0)),fs=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const H=new Date,k=localStorage.getItem("swal-initiation");k?(H.getTime()-Date.parse(k))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const G=document.createElement("audio");G.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",G.loop=!0,document.body.appendChild(G),setTimeout(()=>{G.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${H}`)}Object.assign(_1.prototype,ss),Object.assign(_1,g1),Object.keys(ss).forEach(H=>{_1[H]=function(){if(Mi)return Mi[H](...arguments)}}),_1.DismissReason=t2,_1.version="11.7.5";const ma=_1;return ma.default=ma,ma}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(b1,Pi){var k1=b1.createElement("style");if(b1.getElementsByTagName("head")[0].appendChild(k1),k1.styleSheet)k1.styleSheet.disabled||(k1.styleSheet.cssText=Pi);else try{k1.innerHTML=Pi}catch{k1.innerText=Pi}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')}},Ul=>{Ul(Ul.s=129)}]);